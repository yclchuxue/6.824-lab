Test (2C): more persistence ...
004683 VOTE S2  vote vf(2) to own
004684 VOTE S2  vote -> 4 cT(1)
004684 VOTE S2  vote -> 1 cT(1)
004685 VOTE S2  vote -> 0 cT(1)
004685 VOTE S2  vote -> 3 cT(1)
004686 VOTE S4  vote <- 2 T(1) = cT(1) vf(2)
004687 VOTE S1  vote <- 2 T(1) = cT(1) vf(2)
004687 VOTE S2  have 3 votes T(1) cT(1) 2 B
004688 LEAD S2  be Leader B
004688 LEAD S2 app -> 4 next(1) index(0) neT(0) cT(1)
004688 LEAD S2 app -> 1 next(1) index(0) neT(0) cT(1)
004688 LEAD S2 app -> 0 next(1) index(0) neT(0) cT(1)
004688 VOTE S0  vote <- 2 T(1) = cT(1) vf(2)
004688 LEAD S2 app -> 3 next(1) index(0) neT(0) cT(1)
004688 VOTE S3  vote <- 2 T(1) = cT(1) vf(2)
004689 LEAD S4  heart <- 2 T(1) cT(1)
004689 LOG1 S4 be follower
004689 LEAD S4 PreT(0) LT(0)
004689 LEAD S1  heart <- 2 T(1) cT(1)
004689 LOG1 S1 be follower
004690 LEAD S1 PreT(0) LT(0)
004690 LEAD S0  heart <- 2 T(1) cT(1)
004690 LOG1 S0 be follower
004690 LEAD S0 PreT(0) LT(0)
004690 LEAD S3  heart <- 2 T(1) cT(1)
004690 LOG1 S3 be follower
004690 LEAD S3 PreT(0) LT(0)
005040 LOG1 S2 {1 1 11}
005040 LOG2 S0 index(1) nd(0) cmd1(<nil>) expectedServers(5) cmd(11)
005241 LOG2 S0 index(1) nd(0) cmd1(<nil>) expectedServers(5) cmd(11)
005453 LOG2 S0 index(1) nd(0) cmd1(<nil>) expectedServers(5) cmd(11)
005654 LOG2 S0 index(1) nd(0) cmd1(<nil>) expectedServers(5) cmd(11)
005805 LEAD S2 app -> 4 next(1) index(1) neT(0) cT(1)
005806 LEAD S2 send to 4 {1 1 11}
005806 LEAD S2 app -> 0 next(1) index(1) neT(0) cT(1)
005806 LEAD S2 send to 0 {1 1 11}
005806 LEAD S2 app -> 3 next(1) index(1) neT(0) cT(1)
005806 LEAD S2 send to 3 {1 1 11}
005806 LEAD S2 app -> 1 next(1) index(1) neT(0) cT(1)
005806 LEAD S2 send to 1 {1 1 11}
005807 LEAD S3  app <- 2 T(1) cT(1)
005807 LEAD S1  app <- 2 T(1) cT(1)
005807 LEAD S0  app <- 2 T(1) cT(1)
005807 LEAD S3 PreT(0) LT(0)
005807 LOG1 S3 B success + log({1 1 11})
005807 LEAD S1 PreT(0) LT(0)
005807 LEAD S4  app <- 2 T(1) cT(1)
005807 LOG1 S1 B success + log({1 1 11})
005808 LEAD S0 PreT(0) LT(0)
005808 LOG1 S0 B success + log({1 1 11})
005808 LOG1 S2  S3's nextindex(2)
005808 LEAD S4 PreT(0) LT(0)
005808 LOG1 S4 B success + log({1 1 11})
005808 LOG1 S2 sum(2) ban(2)
005809 LOG1 S2  S1's nextindex(2)
005809 LOG1 S2 sum(3) ban(2)
005809 CMIT S2 new commit(1) and applied
005809 LOG1 S2  S0's nextindex(2)
005809 LOG1 S2 sum(4) ban(2)
005809 LOG1 S2  S4's nextindex(2)
005809 LOG1 S2 sum(5) ban(2)
005855 LOG2 S0 index(1) nd(0) cmd1(<nil>) expectedServers(5) cmd(11)
006056 LOG2 S0 index(1) nd(0) cmd1(<nil>) expectedServers(5) cmd(11)
006056 LOG1 S2 lognode = {true 11 1 false [] 0 0}
006057 LOG1 S2 comm(1) last(1)
006263 LOG2 S0 index(1) nd(1) cmd1(11) expectedServers(5) cmd(11)
006468 LOG2 S0 index(1) nd(1) cmd1(11) expectedServers(5) cmd(11)
006679 LOG2 S0 index(1) nd(1) cmd1(11) expectedServers(5) cmd(11)
006880 LOG2 S0 index(1) nd(1) cmd1(11) expectedServers(5) cmd(11)
006919 LEAD S2 app -> 4 next(2) index(1) neT(1) cT(1)
006920 LEAD S2 app -> 1 next(2) index(1) neT(1) cT(1)
006921 LEAD S4  heart <- 2 T(1) cT(1)
006921 LEAD S4 PreT(1) LT(1)
006921 LOG1 S4 update commit(1)
006921 LEAD S2 app -> 0 next(2) index(1) neT(1) cT(1)
006921 LEAD S1  heart <- 2 T(1) cT(1)
006922 LEAD S1 PreT(1) LT(1)
006922 LOG1 S1 update commit(1)
006922 LEAD S2 app -> 3 next(2) index(1) neT(1) cT(1)
006922 LEAD S0  heart <- 2 T(1) cT(1)
006922 LEAD S0 PreT(1) LT(1)
006922 LOG1 S0 update commit(1)
006923 LEAD S3  heart <- 2 T(1) cT(1)
006923 LEAD S3 PreT(1) LT(1)
006923 LOG1 S3 update commit(1)
007075 LOG1 S4 lognode = {true 11 1 false [] 0 0}
007075 LOG1 S4 comm(1) last(1)
007075 LOG1 S1 lognode = {true 11 1 false [] 0 0}
007075 LOG1 S3 lognode = {true 11 1 false [] 0 0}
007075 LOG1 S0 lognode = {true 11 1 false [] 0 0}
007076 LOG1 S0 comm(1) last(1)
007076 LOG1 S3 comm(1) last(1)
007075 LOG1 S1 comm(1) last(1)
007089 LOG2 S0 index(1) nd(5) cmd1(11) expectedServers(5) cmd(11)
007981 LEAD S2 app -> 4 next(2) index(1) neT(1) cT(1)
007982 LEAD S2 app -> 1 next(2) index(1) neT(1) cT(1)
007983 LEAD S4  heart <- 2 T(1) cT(1)
007983 LEAD S2 app -> 0 next(2) index(1) neT(1) cT(1)
007984 LEAD S1  heart <- 2 T(1) cT(1)
007983 LEAD S4 PreT(1) LT(1)
007984 LEAD S2 app -> 3 next(2) index(1) neT(1) cT(1)
007984 LEAD S0  heart <- 2 T(1) cT(1)
007984 LEAD S1 PreT(1) LT(1)
007985 LEAD S3  heart <- 2 T(1) cT(1)
007985 LEAD S3 PreT(1) LT(1)
007985 LEAD S0 PreT(1) LT(1)
008989 LEAD S2 app -> 4 next(2) index(1) neT(1) cT(1)
008990 LEAD S2 app -> 0 next(2) index(1) neT(1) cT(1)
008990 LEAD S2 app -> 3 next(2) index(1) neT(1) cT(1)
008991 LEAD S0  heart <- 2 T(1) cT(1)
008991 LEAD S4  heart <- 2 T(1) cT(1)
008991 LEAD S2 app -> 1 next(2) index(1) neT(1) cT(1)
008991 LEAD S4 PreT(1) LT(1)
008991 LEAD S0 PreT(1) LT(1)
008991 LEAD S3  heart <- 2 T(1) cT(1)
008992 LEAD S3 PreT(1) LT(1)
008992 LEAD S1  heart <- 2 T(1) cT(1)
008992 LEAD S1 PreT(1) LT(1)
010046 LEAD S2 app -> 4 next(2) index(1) neT(1) cT(1)
010046 LEAD S2 app -> 0 next(2) index(1) neT(1) cT(1)
010047 LEAD S2 app -> 3 next(2) index(1) neT(1) cT(1)
010047 LEAD S2 app -> 1 next(2) index(1) neT(1) cT(1)
010047 LEAD S0  heart <- 2 T(1) cT(1)
010048 LEAD S3  heart <- 2 T(1) cT(1)
010048 LEAD S3 PreT(1) LT(1)
010048 LEAD S1  heart <- 2 T(1) cT(1)
010048 LEAD S1 PreT(1) LT(1)
010047 LEAD S4  heart <- 2 T(1) cT(1)
010049 LEAD S4 PreT(1) LT(1)
010048 LEAD S0 PreT(1) LT(1)
011098 LEAD S2 app -> 4 next(2) index(1) neT(1) cT(1)
011099 LEAD S2 app -> 1 next(2) index(1) neT(1) cT(1)
011099 LEAD S2 app -> 0 next(2) index(1) neT(1) cT(1)
011100 LEAD S4  heart <- 2 T(1) cT(1)
011100 LEAD S4 PreT(1) LT(1)
011100 LEAD S2 app -> 3 next(2) index(1) neT(1) cT(1)
011100 LEAD S0  heart <- 2 T(1) cT(1)
011100 LEAD S0 PreT(1) LT(1)
011100 LEAD S1  heart <- 2 T(1) cT(1)
011101 LEAD S1 PreT(1) LT(1)
011101 LEAD S3  heart <- 2 T(1) cT(1)
011101 LEAD S3 PreT(1) LT(1)
map[1:[2]]
011899 LOG1 S2 {2 1 12}
011899 LOG2 S0 index(2) nd(0) cmd1(<nil>) expectedServers(3) cmd(12)
012110 LOG2 S0 index(2) nd(0) cmd1(<nil>) expectedServers(3) cmd(12)
012159 LEAD S2 app -> 4 next(2) index(2) neT(1) cT(1)
012159 LEAD S2 send to 4 {2 1 12}
012159 LEAD S2 app -> 1 next(2) index(2) neT(1) cT(1)
012159 LEAD S2 send to 1 {2 1 12}
012160 LEAD S2 app -> 3 next(2) index(2) neT(1) cT(1)
012160 LEAD S2 send to 3 {2 1 12}
012160 LEAD S2 app -> 0 next(2) index(2) neT(1) cT(1)
012160 LEAD S2 send to 0 {2 1 12}
012160 LEAD S1  app <- 2 T(1) cT(1)
012161 LEAD S1 PreT(1) LT(1)
012161 LOG1 S1 B success + log({2 1 12})
012161 LEAD S0  app <- 2 T(1) cT(1)
012161 LEAD S0 PreT(1) LT(1)
012161 LOG1 S2  S1's nextindex(3)
012161 LOG1 S2 sum(2) ban(2)
012161 LOG1 S0 B success + log({2 1 12})
012162 LOG1 S2  S0's nextindex(3)
012162 LOG1 S2 sum(3) ban(2)
012162 CMIT S2 new commit(2) and applied
012321 LOG2 S0 index(2) nd(0) cmd1(<nil>) expectedServers(3) cmd(12)
012522 LOG2 S0 index(2) nd(0) cmd1(<nil>) expectedServers(3) cmd(12)
012649 LOG1 S2 lognode = {true 12 2 false [] 0 0}
012650 LOG1 S2 comm(2) last(2)
012724 LOG2 S0 index(2) nd(1) cmd1(12) expectedServers(3) cmd(12)
012934 LOG2 S0 index(2) nd(1) cmd1(12) expectedServers(3) cmd(12)
013138 LOG2 S0 index(2) nd(1) cmd1(12) expectedServers(3) cmd(12)
013273 LEAD S2 app -> 4 next(2) index(2) neT(1) cT(1)
013274 LEAD S2 send to 4 {2 1 12}
013275 LEAD S2 app -> 1 next(3) index(2) neT(1) cT(1)
013276 LEAD S2 app -> 0 next(3) index(2) neT(1) cT(1)
013276 LEAD S1  heart <- 2 T(1) cT(1)
013276 LEAD S1 PreT(1) LT(1)
013276 LOG1 S1 update commit(2)
013277 LEAD S2 app -> 3 next(2) index(2) neT(1) cT(1)
013277 LEAD S2 send to 3 {2 1 12}
013277 LEAD S0  heart <- 2 T(1) cT(1)
013277 LEAD S0 PreT(1) LT(1)
013277 LOG1 S0 update commit(2)
013348 LOG2 S0 index(2) nd(1) cmd1(12) expectedServers(3) cmd(12)
013554 LOG2 S0 index(2) nd(1) cmd1(12) expectedServers(3) cmd(12)
013663 LOG1 S1 lognode = {true 12 2 false [] 0 0}
013664 LOG1 S0 lognode = {true 12 2 false [] 0 0}
013664 LOG1 S1 comm(2) last(2)
013664 LOG1 S0 comm(2) last(2)
013764 LOG2 S0 index(2) nd(3) cmd1(12) expectedServers(3) cmd(12)
000000 LOG1 S3 ??? Term = 1 log([{0 0 <nil>} {1 1 11}]) votefor(2)
000000 LOG1 S4 ??? Term = 1 log([{0 0 <nil>} {1 1 11}]) votefor(2)
000530 LEAD S2 app -> 4 next(2) index(2) neT(1) cT(1)
000530 LEAD S2 send to 4 {2 1 12}
000531 LEAD S2 app -> 1 next(3) index(2) neT(1) cT(1)
000531 LEAD S2 app -> 0 next(3) index(2) neT(1) cT(1)
000531 LEAD S2 app -> 3 next(2) index(2) neT(1) cT(1)
000531 LEAD S2 send to 3 {2 1 12}
001513 LEAD S2 app -> 4 next(2) index(2) neT(1) cT(1)
001513 LEAD S2 send to 4 {2 1 12}
001513 LEAD S2 app -> 3 next(2) index(2) neT(1) cT(1)
001513 LEAD S2 send to 3 {2 1 12}
001514 LEAD S2 app -> 1 next(3) index(2) neT(1) cT(1)
001514 LEAD S2 app -> 0 next(3) index(2) neT(1) cT(1)
002557 LEAD S2 app -> 4 next(2) index(2) neT(1) cT(1)
002557 LEAD S2 send to 4 {2 1 12}
002558 LEAD S2 app -> 0 next(3) index(2) neT(1) cT(1)
002558 LEAD S2 app -> 1 next(3) index(2) neT(1) cT(1)
002558 LEAD S2 app -> 3 next(2) index(2) neT(1) cT(1)
002558 LEAD S2 send to 3 {2 1 12}
003618 LEAD S2 app -> 4 next(2) index(2) neT(1) cT(1)
003618 LEAD S2 send to 4 {2 1 12}
003619 LEAD S2 app -> 1 next(3) index(2) neT(1) cT(1)
003619 LEAD S2 app -> 0 next(3) index(2) neT(1) cT(1)
003619 LEAD S2 app -> 3 next(2) index(2) neT(1) cT(1)
003619 LEAD S2 send to 3 {2 1 12}
004698 LEAD S2 app -> 4 next(2) index(2) neT(1) cT(1)
004698 LEAD S2 send to 4 {2 1 12}
004699 LEAD S2 app -> 1 next(3) index(2) neT(1) cT(1)
004699 LEAD S2 app -> 0 next(3) index(2) neT(1) cT(1)
004700 LEAD S2 app -> 3 next(2) index(2) neT(1) cT(1)
004700 LEAD S2 send to 3 {2 1 12}
004792 VOTE S3  vote vf(3) to own
004792 VOTE S3  vote -> 4 cT(2)
004792 VOTE S3  vote -> 1 cT(2)
004793 VOTE S3  vote -> 0 cT(2)
004793 VOTE S3  vote -> 2 cT(2)
004793 VOTE S4  vote <- 3 T(2) = cT(2) vf(3)
004973 VOTE S1  vote vf(1) to own
004974 VOTE S1  vote -> 4 cT(2)
004974 VOTE S1  vote -> 2 cT(2)
004974 VOTE S1  vote -> 3 cT(2)
004974 VOTE S1  vote -> 0 cT(2)
005103 VOTE S0  vote vf(0) to own
005104 VOTE S0  vote -> 4 cT(2)
005104 VOTE S0  vote -> 1 cT(2)
005104 VOTE S0  vote -> 3 cT(2)
005104 VOTE S0  vote -> 2 cT(2)
005730 LEAD S2 app -> 4 next(2) index(2) neT(1) cT(1)
005731 LEAD S2 send to 4 {2 1 12}
005731 LEAD S2 app -> 0 next(3) index(2) neT(1) cT(1)
005732 LEAD S2 app -> 1 next(3) index(2) neT(1) cT(1)
005732 LEAD S2 app -> 3 next(2) index(2) neT(1) cT(1)
005732 LEAD S2 send to 3 {2 1 12}
006742 LEAD S2 app -> 4 next(2) index(2) neT(1) cT(1)
006742 LEAD S2 send to 4 {2 1 12}
006742 LEAD S2 app -> 0 next(3) index(2) neT(1) cT(1)
006743 LEAD S2 app -> 3 next(2) index(2) neT(1) cT(1)
006743 LEAD S2 send to 3 {2 1 12}
006743 LEAD S2 app -> 1 next(3) index(2) neT(1) cT(1)
007379 WARN S2 -> 0 app fail
007803 LEAD S2 app -> 4 next(2) index(2) neT(1) cT(1)
007804 LEAD S2 send to 4 {2 1 12}
007804 LEAD S2 app -> 3 next(2) index(2) neT(1) cT(1)
007804 LEAD S2 send to 3 {2 1 12}
007804 LEAD S2 app -> 1 next(3) index(2) neT(1) cT(1)
007804 LEAD S2 app -> 0 next(3) index(2) neT(1) cT(1)
008867 LEAD S2 app -> 4 next(2) index(2) neT(1) cT(1)
008867 LEAD S2 send to 4 {2 1 12}
008867 LEAD S2 app -> 1 next(3) index(2) neT(1) cT(1)
008867 LEAD S2 app -> 3 next(2) index(2) neT(1) cT(1)
008868 LEAD S2 send to 3 {2 1 12}
008868 LEAD S2 app -> 0 next(3) index(2) neT(1) cT(1)
009906 VOTE S3 vote -> 2 fail
009943 LEAD S2 app -> 4 next(2) index(2) neT(1) cT(1)
009943 LEAD S2 send to 4 {2 1 12}
009944 LEAD S2 app -> 1 next(3) index(2) neT(1) cT(1)
009944 LEAD S2 app -> 0 next(3) index(2) neT(1) cT(1)
009944 LEAD S2 app -> 3 next(2) index(2) neT(1) cT(1)
009944 LEAD S2 send to 3 {2 1 12}
000000 LOG1 S0 ??? Term = 1 log([{0 0 <nil>} {1 1 11} {2 1 12}]) votefor(2)
000122 VOTE S1  vote vf(1) to own
000123 VOTE S1  vote -> 4 cT(3)
000123 VOTE S1  vote -> 2 cT(3)
000123 VOTE S1  vote -> 0 cT(3)
000123 VOTE S1  vote -> 3 cT(3)
000148 WARN S2 -> 3 app fail
000293 VOTE S3  vote vf(3) to own
000294 VOTE S3  vote -> 4 cT(3)
000294 VOTE S3  vote -> 1 cT(3)
000294 VOTE S3  vote -> 0 cT(3)
000294 VOTE S3  vote -> 2 cT(3)
000295 VOTE S4  vote <- 3 T(3) = cT(3) vf(3)
000296 VOTE S0  vote <- 3 T(3) = cT(3) vf(3)
000296 VOTE S3  have 3 votes T(3) cT(3) 2 B
000296 LEAD S3  be Leader B
000296 LEAD S3 app -> 4 next(2) index(1) neT(1) cT(3)
000297 LEAD S3 app -> 2 next(2) index(1) neT(1) cT(3)
000297 LEAD S3 app -> 1 next(2) index(1) neT(1) cT(3)
000297 LEAD S3 app -> 0 next(2) index(1) neT(1) cT(3)
000297 LEAD S4  heart <- 3 T(3) cT(3)
000298 LOG1 S4 be follower
000298 LEAD S4 BBB fail ma(0) pre(1)
000298 LOG1 S3 匹配失败 tfi(1)
000298 LEAD S0  heart <- 3 T(3) cT(3)
000298 LOG1 S0 be follower
000298 LEAD S0 BBB fail ma(0) pre(1)
000299 LOG1 S3 匹配失败 tfi(1)
000502 WARN S3 -> 1 app fail
000503 LOG1 S3 {2 3 13}
000503 LOG2 S0 index(2) nd(3) cmd1(12) expectedServers(3) cmd(13)
000622 WARN S2 -> 3 app fail
000707 LOG2 S0 index(2) nd(3) cmd1(12) expectedServers(3) cmd(13)
000919 LOG2 S0 index(2) nd(3) cmd1(12) expectedServers(3) cmd(13)
001031 LEAD S2 app -> 4 next(2) index(2) neT(1) cT(1)
001031 LEAD S2 send to 4 {2 1 12}
001031 LEAD S2 app -> 0 next(3) index(2) neT(1) cT(1)
001031 LEAD S2 app -> 3 next(2) index(2) neT(1) cT(1)
001032 LEAD S2 send to 3 {2 1 12}
001032 LEAD S2 app -> 1 next(3) index(2) neT(1) cT(1)
001122 LOG2 S0 index(2) nd(3) cmd1(12) expectedServers(3) cmd(13)
001322 LOG2 S0 index(2) nd(3) cmd1(12) expectedServers(3) cmd(13)
001386 WARN S2 -> 1 app fail
001410 LEAD S3 app -> 4 next(1) index(2) neT(0) cT(3)
001410 LEAD S3 send to 4 {1 1 11}
001410 LEAD S3 send to 4 {2 3 13}
001410 LEAD S3 app -> 2 next(2) index(2) neT(1) cT(3)
001411 LEAD S3 send to 2 {2 3 13}
001411 LEAD S3 app -> 1 next(2) index(2) neT(1) cT(3)
001411 LEAD S3 send to 1 {2 3 13}
001411 LEAD S3 app -> 0 next(1) index(2) neT(0) cT(3)
001411 LEAD S3 send to 0 {1 1 11}
001411 LEAD S3 send to 0 {2 3 13}
001412 LEAD S4  app <- 3 T(3) cT(3)
001412 LEAD S4 PreT(0) LT(0)
001412 LOG1 S4 mat(0) index(1) len(2)
001412 LOG1 S4 B success + log({2 3 13})
001413 LEAD S0  app <- 3 T(3) cT(3)
001413 LEAD S0 PreT(0) LT(0)
001413 LOG1 S0 mat(0) index(1) len(3)
001413 LOG1 S0 mat(0) index(2) len(3)
001413 LOG1 S0 A success + log({2 3 13})
001413 LOG1 S3  S4's nextindex(3)
001414 LOG1 S3 sum(2) ban(2)
001414 LOG1 S3  S0's nextindex(3)
001414 LOG1 S3 sum(3) ban(2)
001415 CMIT S3 new commit(2) and applied
001530 LOG2 S0 index(2) nd(3) cmd1(12) expectedServers(3) cmd(13)
001606 LOG1 S3 lognode = {true 11 1 false [] 0 0}
001606 LOG1 S3 lognode = {true 13 2 false [] 0 0}
3: log map[1:11]; server map[1:11 2:12]
3: log map[1:11]; server map[1:11 2:12]
3: log map[1:11]; server map[1:11 2:12]
A apply error: commit index=2 server=3 13 != server=2 12
exit status 1
FAIL	6.824/raft	2.540s
