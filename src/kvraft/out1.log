C0 Append key(2)                                                                                                    
value(x 2 23 y)                                                                                                     
C0 cmd_index(41)3                                                                                                   
C0 cmd_index(42)4                                                                                                   
S0 Persist the                                                                                                      
log[[{209 7 {0 39 2 Get                                                                                             
2 }} {210 7 {1 34 2                                                                                                 
Append 3 x 3 18 y}}                                                                                                 
{211 7 {2 37 2 Append 4                                                                                             
x 4 11 y}} {212 7 {3 51                                                                                             
2 Append 1 x 1 27 y}}                                                                                               
{213 7 {4 40 2 Append 0                                                                                             
x 0 21 y}} {214 7 {0 40                                                                                             
2 Append 2 x 2 22 y}}                                                                                               
{215 7 {2 38 2 Get 4 }}                                                                                             
{216 7 {1 35 2 Append 3                                                                                             
x 3 19 y}} {217 7 {3 52                                                                                             
2 Get 1 }} {218 7 {0 41                                                                                             
2 Get 2 }}]]                                                                                                        
S0 TTT                                                                                                              
CommandValid(true)                                                                                                  
applyindex(216)                                                                                                     
CommandIndex(217) Get                                                                                               
key(1) value()                                                                                                      
CDM[C3](51) M(52)                                                                                                   
from(2)                                                                                                             
S0 update CDM[3] from                                                                                               
51 to 52 update                                                                                                     
applyindex 216 to 217                                                                                               
S0 can not write get                                                                                                
in(217)                                                                                                             
C0 send to S0 Append                                                                                                
Key(2) value(x 2 23 y)                                                                                              
CIndex(0) OIndex(42)                                                                                                
test1                                                                                                               
                                                                                             S4  app <- 2 T(7) cT(7)
                                                                                             S4 YYYY                
                                                                                             S4 PreT(7) LT(7)       
                                                                                             S4 mat(9) index(9)     
                                                                                             len(10)                
                                                                                             S4 B success +         
                                                                                             log([{219 7 {4 41 2 Get
                                                                                             0 }}])                 
                        S1 commit(8)                                                                                
                        applied(8) lenlog(9)                                                                        
                        rf.X(209) in(429)                                                                           
                                                                                             S4 Persist the         
                                                                                             log[[{209 7 {0 39 2 Get
                                                                                             2 }} {210 7 {1 34 2    
                                                                                             Append 3 x 3 18 y}}    
                                                                                             {211 7 {2 37 2 Append 4
                                                                                             x 4 11 y}} {212 7 {3 51
                                                                                             2 Append 1 x 1 27 y}}  
                                                                                             {213 7 {4 40 2 Append 0
                                                                                             x 0 21 y}} {214 7 {0 40
                                                                                             2 Append 2 x 2 22 y}}  
                                                                                             {215 7 {2 38 2 Get 4 }}
                                                                                             {216 7 {1 35 2 Append 3
                                                                                             x 3 19 y}} {217 7 {3 52
                                                                                             2 Get 1 }} {218 7 {0 41
                                                                                             2 Get 2 }} {219 7 {4 41
                                                                                             2 Get 0 }}]]           
                        S1  app <- 2 T(7)                                                                           
                        cT(7)                                                                                       
                        S1 YYYY                                                                                     
                        S1 PreT(7) LT(7)                                                                            
                        S1 mat(9) index(9)                                                                          
                        len(10)                                                                                     
                        S1 B success +                                                                              
                        log([{219 7 {4 41 2                                                                         
                        Get 0 }}])                                                                                  
                                                                                             S4 Persist the         
                                                                                             log[[{209 7 {0 39 2 Get
                                                                                             2 }} {210 7 {1 34 2    
                                                                                             Append 3 x 3 18 y}}    
                                                                                             {211 7 {2 37 2 Append 4
                                                                                             x 4 11 y}} {212 7 {3 51
                                                                                             2 Append 1 x 1 27 y}}  
                                                                                             {213 7 {4 40 2 Append 0
                                                                                             x 0 21 y}} {214 7 {0 40
                                                                                             2 Append 2 x 2 22 y}}  
                                                                                             {215 7 {2 38 2 Get 4 }}
                                                                                             {216 7 {1 35 2 Append 3
                                                                                             x 3 19 y}} {217 7 {3 52
                                                                                             2 Get 1 }} {218 7 {0 41
                                                                                             2 Get 2 }} {219 7 {4 41
                                                                                             2 Get 0 }}]]           
                                               S2 update                                                            
                                               nextindex[1](2) to 3                                                 
                                               success?                                                             
                                               S2 index(13)                                                         
                                               matchindex([1 13 2 13                                                
                                               1])                                                                  
                                               S2 successnum(2)                                                     
                                               com-rf.X(1) rf.CT(7)                                                 
                                               t(7)                                                                 
                        S1 Persist the                                                                              
                        log[[{209 7 {0 39 2                                                                         
                        Get 2 }} {210 7 {1 34                                                                       
                        2 Append 3 x 3 18 y}}                                                                       
                        {211 7 {2 37 2 Append                                                                       
                        4 x 4 11 y}} {212 7 {3                                                                      
                        51 2 Append 1 x 1 27                                                                        
                        y}} {213 7 {4 40 2                                                                          
                        Append 0 x 0 21 y}}                                                                         
                        {214 7 {0 40 2 Append                                                                       
                        2 x 2 22 y}} {215 7 {2                                                                      
                        38 2 Get 4 }} {216 7                                                                        
                        {1 35 2 Append 3 x 3                                                                        
                        19 y}} {217 7 {3 52 2                                                                       
                        Get 1 }} {218 7 {0 41                                                                       
                        2 Get 2 }} {219 7 {4                                                                        
                        41 2 Get 0 }}]]                                                                             
                                               S2 update                                                            
                                               nextindex[4](2) to 3                                                 
                                               success?                                                             
                                               S2 index(13)                                                         
                                               matchindex([1 13 2 13                                                
                                               13])                                                                 
                                               S2 successnum(3)                                                     
                                               com-rf.X(1) rf.CT(7)                                                 
                                               t(7)                                                                 
                                               S2 sum(3) ban(2)                                                     
                                               S2 new commit(13) and                                                
                                               applied                                                              
                        S1 Persist the                                                                              
                        log[[{209 7 {0 39 2                                                                         
                        Get 2 }} {210 7 {1 34                                                                       
                        2 Append 3 x 3 18 y}}                                                                       
                        {211 7 {2 37 2 Append                                                                       
                        4 x 4 11 y}} {212 7 {3                                                                      
                        51 2 Append 1 x 1 27                                                                        
                        y}} {213 7 {4 40 2                                                                          
                        Append 0 x 0 21 y}}                                                                         
                        {214 7 {0 40 2 Append                                                                       
                        2 x 2 22 y}} {215 7 {2                                                                      
                        38 2 Get 4 }} {216 7                                                                        
                        {1 35 2 Append 3 x 3                                                                        
                        19 y}} {217 7 {3 52 2                                                                       
                        Get 1 }} {218 7 {0 41                                                                       
                        2 Get 2 }} {219 7 {4                                                                        
                        41 2 Get 0 }}]]                                                                             
                                                                      S3 the num is (697)                           
                                                                      applidindex(214)                              
                                                                      X(212)                                        
S0 the num is (823)                                                                                                 
applidindex(217) X(209)                                                                                             
S0 the size need to                                                                                                 
snap index217                                                                                                       
S0 update nextindex[0]                                                                                              
to 2                                                                                                                
S0 update mathindex[0]                                                                                              
to 2                                                                                                                
S0 update nextindex[1]                                                                                              
to 2                                                                                                                
S0 update mathindex[1]                                                                                              
to 0                                                                                                                
S0 update nextindex[2]                                                                                              
to 2                                                                                                                
S0 update mathindex[2]                                                                                              
to 0                                                                                                                
S0 update nextindex[3]                                                                                              
to 2                                                                                                                
S0 update mathindex[3]                                                                                              
to 0                                                                                                                
S0 update nextindex[4]                                                                                              
to 2                                                                                                                
S0 update mathindex[4]                                                                                              
to 0                                                                                                                
S0 index(217)                                                                                                       
logindex(218)                                                                                                       
len(2)AAAAAAAAAAAAAAAA…                                                                                             
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }}]]                                                                                                              
                                               S2 <-- C1 Get key(3)                                                 
                                               test1                                                                
S0 snapshot to applymsg                                                                                             
lastindex(217)                                                                                                      
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(426)                                                                                                             
                        S1 commit(8)                                                                                
                        applied(8) lenlog(10)                                                                       
                        rf.X(209) in(430)                                                                           
                                                                      S3 snapshot to                                
                                                                      applymsg                                      
                                                                      lastindex(212)                                
                                               S2 <-- C3 Get key(1)                                                 
                                               test1                                                                
                                                                      S3 commit(5)                                  
                                                                      applied(0) lenlog(7)                          
                                                                      rf.X(212) in(414)                             
S0 the snapshot applied                                                                                             
                                               S2 commit(2)                                                         
                                               applied(1) lenlog(2)                                                 
                                               rf.X(217) in(418)                                                    
                                               S2 start Get key(3)                                                  
                                               S2 have log                                                          
                                               S2 {220 7 {1 36 2 Get                                                
                                               3 }}                                                                 
                                               S2 lastapp lognode =                                                 
                                               {true {4 41 2 Get 0 }                                                
                                               219 false [] 0 0}                                                    
S0 recover by SnapShot                                                                                              
update applyindex(217)                                                                                              
to 217 the kvs is                                                                                                   
map[0:x 0 0 yx 0 1 yx 0                                                                                             
2 yx 0 3 yx 0 4 yx 0 5                                                                                              
yx 0 6 yx 0 7 yx 0 8 yx                                                                                             
0 9 yx 0 10 yx 0 11 yx                                                                                              
0 12 yx 0 13 yx 0 14 yx                                                                                             
0 15 yx 0 16 yx 0 17 yx                                                                                             
0 18 yx 0 19 yx 0 20 yx                                                                                             
0 21 y 1:x 1 0 yx 1 1                                                                                               
yx 1 2 yx 1 3 yx 1 4 yx                                                                                             
1 5 yx 1 6 yx 1 7 yx 1                                                                                              
8 yx 1 9 yx 1 10 yx 1                                                                                               
11 yx 1 12 yx 1 13 yx 1                                                                                             
14 yx 1 15 yx 1 16 yx 1                                                                                             
17 yx 1 18 yx 1 19 yx 1                                                                                             
20 yx 1 21 yx 1 22 yx 1                                                                                             
23 yx 1 24 yx 1 25 yx 1                                                                                             
26 yx 1 27 y 2:x 2 0 yx                                                                                             
2 1 yx 2 2 yx 2 3 yx 2                                                                                              
4 yx 2 5 yx 2 6 yx 2 7                                                                                              
yx 2 8 yx 2 9 yx 2 10                                                                                               
yx 2 11 yx 2 12 yx 2 13                                                                                             
yx 2 14 yx 2 15 yx 2 16                                                                                             
yx 2 17 yx 2 18 yx 2 19                                                                                             
yx 2 20 yx 2 21 yx 2 22                                                                                             
y 3:x 3 0 yx 3 1 yx 3 2                                                                                             
yx 3 3 yx 3 4 yx 3 5 yx                                                                                             
3 6 yx 3 7 yx 3 8 yx 3                                                                                              
9 yx 3 10 yx 3 11 yx 3                                                                                              
12 yx 3 13 yx 3 14 yx 3                                                                                             
15 yx 3 16 yx 3 17 yx 3                                                                                             
18 yx 3 19 y 4:x 4 0 yx                                                                                             
4 1 yx 4 2 yx 4 3 yx 4                                                                                              
4 yx 4 5 yx 4 6 yx 4 7                                                                                              
yx 4 8 yx 4 9 yx 4 10                                                                                               
yx 4 11 y]                                                                                                          
                                                                      S3 the snapshot                               
                                                                      applied                                       
                        S1 the num is (873)                                                                         
                        applidindex(217)                                                                            
                        X(209)                                                                                      
                                               S2 have this log({1 36                                               
                                               2 Get 3 }) in raft                                                   
                                               S2 <-- C1 Get key(3)                                                 
                                               wait 1                                                               
                                               S2 comm(2) last(219)                                                 
                        S1 the size need to                                                                         
                        snap index217                                                                               
                        S1 update nextindex[0]                                                                      
                        to 3                                                                                        
                                                                      S3 recover by SnapShot                        
                                                                      update applyindex(214)                        
                                                                      to 212 the kvs is                             
                                                                      map[0:x 0 0 yx 0 1 yx                         
                                                                      0 2 yx 0 3 yx 0 4 yx 0                        
                                                                      5 yx 0 6 yx 0 7 yx 0 8                        
                                                                      yx 0 9 yx 0 10 yx 0 11                        
                                                                      yx 0 12 yx 0 13 yx 0                          
                                                                      14 yx 0 15 yx 0 16 yx                         
                                                                      0 17 yx 0 18 yx 0 19                          
                                                                      yx 0 20 y 1:x 1 0 yx 1                        
                                                                      1 yx 1 2 yx 1 3 yx 1 4                        
                                                                      yx 1 5 yx 1 6 yx 1 7                          
                                                                      yx 1 8 yx 1 9 yx 1 10                         
                                                                      yx 1 11 yx 1 12 yx 1                          
                                                                      13 yx 1 14 yx 1 15 yx                         
                                                                      1 16 yx 1 17 yx 1 18                          
                                                                      yx 1 19 yx 1 20 yx 1                          
                                                                      21 yx 1 22 yx 1 23 yx                         
                                                                      1 24 yx 1 25 yx 1 26                          
                                                                      yx 1 27 y 2:x 2 0 yx 2                        
                                                                      1 yx 2 2 yx 2 3 yx 2 4                        
                                                                      yx 2 5 yx 2 6 yx 2 7                          
                                                                      yx 2 8 yx 2 9 yx 2 10                         
                                                                      yx 2 11 yx 2 12 yx 2                          
                                                                      13 yx 2 14 yx 2 15 yx                         
                                                                      2 16 yx 2 17 yx 2 18                          
                                                                      yx 2 19 yx 2 20 yx 2                          
                                                                      21 y 3:x 3 0 yx 3 1 yx                        
                                                                      3 2 yx 3 3 yx 3 4 yx 3                        
                                                                      5 yx 3 6 yx 3 7 yx 3 8                        
                                                                      yx 3 9 yx 3 10 yx 3 11                        
                                                                      yx 3 12 yx 3 13 yx 3                          
                                                                      14 yx 3 15 yx 3 16 yx                         
                                                                      3 17 yx 3 18 y 4:x 4 0                        
                                                                      yx 4 1 yx 4 2 yx 4 3                          
                                                                      yx 4 4 yx 4 5 yx 4 6                          
                                                                      yx 4 7 yx 4 8 yx 4 9                          
                                                                      yx 4 10 yx 4 11 y]                            
                        S1 update mathindex[0]                                                                      
                        to 0                                                                                        
                        S1 update nextindex[1]                                                                      
                        to 3                                                                                        
                        S1 update mathindex[1]                                                                      
                        to 3                                                                                        
                        S1 update nextindex[2]                                                                      
                        to 3                                                                                        
                        S1 update mathindex[2]                                                                      
                        to 0                                                                                        
                        S1 update nextindex[3]                                                                      
                        to 3                                                                                        
                        S1 update mathindex[3]                                                                      
                        to 0                                                                                        
                                               S2 TTT                                                               
                                               CommandValid(true)                                                   
                                               applyindex(218)                                                      
                                               CommandIndex(219) Get                                                
                                               key(0) value()                                                       
                                               CDM[C4](40) M(41)                                                    
                                               from(2)                                                              
                                               S2 update CDM[4] from                                                
                                               40 to 41 update                                                      
                                               applyindex 218 to 219                                                
                                               S2 write get in(219)                                                 
                                               S2 kvs(map[0:x 0 0 yx                                                
                                               0 1 yx 0 2 yx 0 3 yx 0                                               
                                               4 yx 0 5 yx 0 6 yx 0 7                                               
                                               yx 0 8 yx 0 9 yx 0 10                                                
                                               yx 0 11 yx 0 12 yx 0                                                 
                                               13 yx 0 14 yx 0 15 yx                                                
                                               0 16 yx 0 17 yx 0 18                                                 
                                               yx 0 19 yx 0 20 yx 0                                                 
                                               21 y 1:x 1 0 yx 1 1 yx                                               
                                               1 2 yx 1 3 yx 1 4 yx 1                                               
                                               5 yx 1 6 yx 1 7 yx 1 8                                               
                                               yx 1 9 yx 1 10 yx 1 11                                               
                                               yx 1 12 yx 1 13 yx 1                                                 
                                               14 yx 1 15 yx 1 16 yx                                                
                                               1 17 yx 1 18 yx 1 19                                                 
                                               yx 1 20 yx 1 21 yx 1                                                 
                                               22 yx 1 23 yx 1 24 yx                                                
                                               1 25 yx 1 26 yx 1 27 y                                               
                                               2:x 2 0 yx 2 1 yx 2 2                                                
                                               yx 2 3 yx 2 4 yx 2 5                                                 
                                               yx 2 6 yx 2 7 yx 2 8                                                 
                                               yx 2 9 yx 2 10 yx 2 11                                               
                                               yx 2 12 yx 2 13 yx 2                                                 
                                               14 yx 2 15 yx 2 16 yx                                                
                                               2 17 yx 2 18 yx 2 19                                                 
                                               yx 2 20 yx 2 21 yx 2                                                 
                                               22 y 3:x 3 0 yx 3 1 yx                                               
                                               3 2 yx 3 3 yx 3 4 yx 3                                               
                                               5 yx 3 6 yx 3 7 yx 3 8                                               
                                               yx 3 9 yx 3 10 yx 3 11                                               
                                               yx 3 12 yx 3 13 yx 3                                                 
                                               14 yx 3 15 yx 3 16 yx                                                
                                               3 17 yx 3 18 yx 3 19 y                                               
                                               4:x 4 0 yx 4 1 yx 4 2                                                
                                               yx 4 3 yx 4 4 yx 4 5                                                 
                                               yx 4 6 yx 4 7 yx 4 8                                                 
                                               yx 4 9 yx 4 10 yx 4 11                                               
                                               y]) index(219) from(2)                                               
                                               S2 Get key(0) value(x                                                
                                               0 0 yx 0 1 yx 0 2 yx 0                                               
                                               3 yx 0 4 yx 0 5 yx 0 6                                               
                                               yx 0 7 yx 0 8 yx 0 9                                                 
                                               yx 0 10 yx 0 11 yx 0                                                 
                                               12 yx 0 13 yx 0 14 yx                                                
                                               0 15 yx 0 16 yx 0 17                                                 
                                               yx 0 18 yx 0 19 yx 0                                                 
                                               20 yx 0 21 y) OK                                                     
                                               from(C4)                                                             
                                                                                             C4 ok(true) ERR(OK)    
                                                                                             from S3 in test1       
                                                                                             C4 Get success key(0)  
                                                                                             value(x 0 0 yx 0 1 yx 0
                                                                                             2 yx 0 3 yx 0 4 yx 0 5 
                                                                                             yx 0 6 yx 0 7 yx 0 8 yx
                                                                                             0 9 yx 0 10 yx 0 11 yx 
                                                                                             0 12 yx 0 13 yx 0 14 yx
                                                                                             0 15 yx 0 16 yx 0 17 yx
                                                                                             0 18 yx 0 19 yx 0 20 yx
                                                                                             0 21 y) r.index(219)   
                                                                                             from(S3)               
                                                                                             C4 Append key(0)       
                                                                                             value(x 0 22 y)        
                                                                                             C4 cmd_index(41)3      
                                                                                             C4 cmd_index(42)4      
                                                                                             C4 send to S3 Append   
                                                                                             Key(0) value(x 0 22 y) 
                                                                                             CIndex(4) OIndex(42)   
                                                                                             test1                  
                        S1 <-- C2 Get key(4)                                                                        
                        test2                                                                                       
                                               S2 <-- C0 Get key(2)                                                 
                                               test1                                                                
                        S1 update nextindex[4]                                                                      
                        to 3                                                                                        
                        S1 update mathindex[4]                                                                      
                        to 0                                                                                        
                        S1 index(217)                                                                               
                        logindex(219)                                                                               
                        len(3)AAAAAAAAAAAAAAA…                                                                      
                                               S2 Persist the                                                       
                                               log[[{217 7 {3 52 2                                                  
                                               Get 1 }} {218 7 {0 41                                                
                                               2 Get 2 }} {219 7 {4                                                 
                                               41 2 Get 0 }} {220 7                                                 
                                               {1 36 2 Get 3 }}]]                                                   
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S2 in test2                                                     
                                               C2 Append err() fail                                                 
                                               key(4) value(x 4 12 y)                                               
                                               r.index(0) from(S2)1                                                 
                                               C2 send to S3 Append                                                 
                                               Key(4) value(x 4 12 y)                                               
                                               CIndex(2) OIndex(39)                                                 
                                               test3                                                                
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(427)                                                                                                             
                                               S2 start Get key(1)                                                  
                                                                      S3 lastapp lognode =                          
                                                                      {true {4 40 2 Append 0                        
                                                                      x 0 21 y} 213 false []                        
                                                                      0 0}                                          
                                                                      S3 comm(5) last(213)                          
                                                                      S3 lastapp lognode =                          
                                                                      {true {0 40 2 Append 2                        
                                                                      x 2 22 y} 214 false []                        
                                                                      0 0}                                          
                                                                      S3 comm(5) last(214)                          
                                                                                             S4 commit(8) applied(8)
                                                                                             lenlog(10) rf.X(209)   
                                                                                             in(437)                
                        S1 Persist the                                                                              
                        log[[{217 7 {3 52 2                                                                         
                        Get 1 }} {218 7 {0 41                                                                       
                        2 Get 2 }} {219 7 {4                                                                        
                        41 2 Get 0 }}]]                                                                             
                                                                      S3 TTT                                        
                                                                      CommandValid(true)                            
                                                                      applyindex(212)                               
                                                                      CommandIndex(213)                             
                                                                      Append key(0) value(x                         
                                                                      0 21 y) CDM[C4](39)                           
                                                                      M(40) from(2)                                 
                                                                      S3 update CDM[4] from                         
                                                                      39 to 40 update                               
                                                                      applyindex 212 to 213                         
                                                                      S3 can not write                              
                                                                      putAdd in(213)                                
                                                                      S3 BBBBBBB append                             
                                                                      Key(0) from x 0 0 yx 0                        
                                                                      1 yx 0 2 yx 0 3 yx 0 4                        
                                                                      yx 0 5 yx 0 6 yx 0 7                          
                                                                      yx 0 8 yx 0 9 yx 0 10                         
                                                                      yx 0 11 yx 0 12 yx 0                          
                                                                      13 yx 0 14 yx 0 15 yx                         
                                                                      0 16 yx 0 17 yx 0 18                          
                                                                      yx 0 19 yx 0 20 y to                          
                                                                      value(x 0 21 y)                               
                                                                      from(2)                                       
                                                                      S3 TTT                                        
                                                                      CommandValid(true)                            
                                                                      applyindex(213)                               
                                                                      CommandIndex(214)                             
                                                                      Append key(2) value(x                         
                                                                      2 22 y) CDM[C0](39)                           
                                                                      M(40) from(2)                                 
                                                                      S3 update CDM[0] from                         
                                                                      39 to 40 update                               
                                                                      applyindex 213 to 214                         
                                                                      S3 can not write                              
                                                                      putAdd in(214)                                
                                               S2 have log                                                          
                                                                      S3 BBBBBBB append                             
                                                                      Key(2) from x 2 0 yx 2                        
                                                                      1 yx 2 2 yx 2 3 yx 2 4                        
                                                                      yx 2 5 yx 2 6 yx 2 7                          
                                                                      yx 2 8 yx 2 9 yx 2 10                         
                                                                      yx 2 11 yx 2 12 yx 2                          
                                                                      13 yx 2 14 yx 2 15 yx                         
                                                                      2 16 yx 2 17 yx 2 18                          
                                                                      yx 2 19 yx 2 20 yx 2                          
                                                                      21 y to value(x 2 22                          
                                                                      y) from(2)                                    
                                                                      S3 lastapp lognode =                          
                                                                      {true {2 38 2 Get 4 }                         
                                                                      215 false [] 0 0}                             
                                                                      S3 comm(5) last(215)                          
                                                                      S3 lastapp lognode =                          
                                                                      {true {1 35 2 Append 3                        
                                                                      x 3 19 y} 216 false []                        
                                                                      0 0}                                          
                                                                      S3 comm(5) last(216)                          
                                               S2 {221 7 {3 53 2 Get                                                
                                               1 }}                                                                 
                                               S2 have this log({3 53                                               
                                               2 Get 1 }) in raft                                                   
                                               S2 <-- C3 Get key(1)                                                 
                                               wait 1                                                               
                        S1 snapshot to                                                                              
                        applymsg                                                                                    
                        lastindex(217)                                                                              
                                                                      S3 TTT                                        
                                                                      CommandValid(true)                            
                                                                      applyindex(214)                               
                                                                      CommandIndex(215) Get                         
                                                                      key(4) value()                                
                                                                      CDM[C2](37) M(38)                             
                                                                      from(2)                                       
                        S1 commit(0)                                                                                
                        applied(0) lenlog(2)                                                                        
                        rf.X(217) in(431)                                                                           
                                                                      S3 update CDM[2] from                         
                                                                      37 to 38 update                               
                                                                      applyindex 214 to 215                         
                                               S2 commit(2)                                                         
                                               applied(2) lenlog(4)                                                 
                                               rf.X(217) in(419)                                                    
                                                                      S3 can not write get                          
                                                                      in(215)                                       
                        S1 the snapshot                                                                             
                        applied                                                                                     
                                                                      S3 lastapp lognode =                          
                                                                      {true {3 52 2 Get 1 }                         
                                                                      217 false [] 0 0}                             
                                                                      S3 comm(5) last(217)                          
                                               S2 appendentries error                                               
                                               to exit because tindex                                               
                                               or loglen changed                                                    
                                               S2 Persist the                                                       
                                               log[[{217 7 {3 52 2                                                  
                                               Get 1 }} {218 7 {0 41                                                
                                               2 Get 2 }} {219 7 {4                                                 
                                               41 2 Get 0 }} {220 7                                                 
                                               {1 36 2 Get 3 }} {221                                                
                                               7 {3 53 2 Get 1 }}]]                                                 
                        S1 recover by SnapShot                                                                      
                        update applyindex(217)                                                                      
                        to 217 the kvs is                                                                           
                        map[0:x 0 0 yx 0 1 yx                                                                       
                        0 2 yx 0 3 yx 0 4 yx 0                                                                      
                        5 yx 0 6 yx 0 7 yx 0 8                                                                      
                        yx 0 9 yx 0 10 yx 0 11                                                                      
                        yx 0 12 yx 0 13 yx 0                                                                        
                        14 yx 0 15 yx 0 16 yx                                                                       
                        0 17 yx 0 18 yx 0 19                                                                        
                        yx 0 20 yx 0 21 y 1:x                                                                       
                        1 0 yx 1 1 yx 1 2 yx 1                                                                      
                        3 yx 1 4 yx 1 5 yx 1 6                                                                      
                        yx 1 7 yx 1 8 yx 1 9                                                                        
                        yx 1 10 yx 1 11 yx 1                                                                        
                        12 yx 1 13 yx 1 14 yx                                                                       
                        1 15 yx 1 16 yx 1 17                                                                        
                        yx 1 18 yx 1 19 yx 1                                                                        
                        20 yx 1 21 yx 1 22 yx                                                                       
                        1 23 yx 1 24 yx 1 25                                                                        
                        yx 1 26 yx 1 27 y 2:x                                                                       
                        2 0 yx 2 1 yx 2 2 yx 2                                                                      
                        3 yx 2 4 yx 2 5 yx 2 6                                                                      
                        yx 2 7 yx 2 8 yx 2 9                                                                        
                        yx 2 10 yx 2 11 yx 2                                                                        
                        12 yx 2 13 yx 2 14 yx                                                                       
                        2 15 yx 2 16 yx 2 17                                                                        
                        yx 2 18 yx 2 19 yx 2                                                                        
                        20 yx 2 21 yx 2 22 y                                                                        
                        3:x 3 0 yx 3 1 yx 3 2                                                                       
                        yx 3 3 yx 3 4 yx 3 5                                                                        
                        yx 3 6 yx 3 7 yx 3 8                                                                        
                        yx 3 9 yx 3 10 yx 3 11                                                                      
                        yx 3 12 yx 3 13 yx 3                                                                        
                        14 yx 3 15 yx 3 16 yx                                                                       
                        3 17 yx 3 18 yx 3 19 y                                                                      
                        4:x 4 0 yx 4 1 yx 4 2                                                                       
                        yx 4 3 yx 4 4 yx 4 5                                                                        
                        yx 4 6 yx 4 7 yx 4 8                                                                        
                        yx 4 9 yx 4 10 yx 4 11                                                                      
                        y]                                                                                          
                                                                      S3 TTT                                        
                                                                      CommandValid(true)                            
                                                                      applyindex(215)                               
                                                                      CommandIndex(216)                             
                                                                      Append key(3) value(x                         
                                                                      3 19 y) CDM[C1](34)                           
                                                                      M(35) from(2)                                 
                                                                      S3 update CDM[1] from                         
                                                                      34 to 35 update                               
                                                                      applyindex 215 to 216                         
                                                                      S3 can not write                              
                                                                      putAdd in(216)                                
                                                                      S3 BBBBBBB append                             
                                                                      Key(3) from x 3 0 yx 3                        
                                                                      1 yx 3 2 yx 3 3 yx 3 4                        
                                                                      yx 3 5 yx 3 6 yx 3 7                          
                                                                      yx 3 8 yx 3 9 yx 3 10                         
                                                                      yx 3 11 yx 3 12 yx 3                          
                                                                      13 yx 3 14 yx 3 15 yx                         
                                                                      3 16 yx 3 17 yx 3 18 y                        
                                                                      to value(x 3 19 y)                            
                                                                      from(2)                                       
                                                                      S3 TTT                                        
                                                                      CommandValid(true)                            
                                                                      applyindex(216)                               
                                                                      CommandIndex(217) Get                         
                                                                      key(1) value()                                
                                                                      CDM[C3](51) M(52)                             
                                                                      from(2)                                       
                                                                      S3 update CDM[3] from                         
                                                                      51 to 52 update                               
                                                                      applyindex 216 to 217                         
                                                                      S3 can not write get                          
                                                                      in(217)                                       
                                                                      S3 Persist the                                
                                                                      log[[{212 7 {3 51 2                           
                                                                      Append 1 x 1 27 y}}                           
                                                                      {213 7 {4 40 2 Append                         
                                                                      0 x 0 21 y}} {214 7 {0                        
                                                                      40 2 Append 2 x 2 22                          
                                                                      y}} {215 7 {2 38 2 Get                        
                                                                      4 }} {216 7 {1 35 2                           
                                                                      Append 3 x 3 19 y}}                           
                                                                      {217 7 {3 52 2 Get 1                          
                                                                      }} {218 7 {0 41 2 Get                         
                                                                      2 }} {219 7 {4 41 2                           
                                                                      Get 0 }}]]                                    
                                               S2 have log                                                          
                                               S2 {222 7 {0 42 2                                                    
                                               Append 2 x 2 23 y}}                                                  
                                               S2 appendentries error                                               
                                               to exit because tindex                                               
                                               or loglen changed                                                    
                                               S2 appendentries error                                               
                                               to exit because tindex                                               
                                               or loglen changed                                                    
                                               S2 appendentries error                                               
                                               to exit because tindex                                               
                                               or loglen changed                                                    
                                               S2 Persist the                                                       
                                               log[[{217 7 {3 52 2                                                  
                                               Get 1 }} {218 7 {0 41                                                
                                               2 Get 2 }} {219 7 {4                                                 
                                               41 2 Get 0 }} {220 7                                                 
                                               {1 36 2 Get 3 }} {221                                                
                                               7 {3 53 2 Get 1 }}                                                   
                                               {222 7 {0 42 2 Append                                                
                                               2 x 2 23 y}}]]                                                       
                                               S2 appendentries error                                               
                                               to exit because tindex                                               
                                               or loglen changed                                                    
                                               S2 Persist the                                                       
                                               log[[{217 7 {3 52 2                                                  
                                               Get 1 }} {218 7 {0 41                                                
                                               2 Get 2 }} {219 7 {4                                                 
                                               41 2 Get 0 }} {220 7                                                 
                                               {1 36 2 Get 3 }} {221                                                
                                               7 {3 53 2 Get 1 }}                                                   
                                               {222 7 {0 42 2 Append                                                
                                               2 x 2 23 y}}]]                                                       
                                               S2 have this log({0 42                                               
                                               2 Append 2 x 2 23 y})                                                
                                               in raft the index is                                                 
                                               222                                                                  
                                               S2 <-- C0 Append                                                     
                                               key(2) value(x 2 23 y)                                               
                                               index(222) wait test1                                                
                                               S2 rf.nextindex[0] = 2                                               
                                               S2 index(5)  Pre(218)                                                
                                               len(5)                                                               
                                               S2 app -> 0 next(2)                                                  
                                               index(5) neT(7) cT(7)                                                
                                               S2 rf.nextindex[1] = 3                                               
                                               S2 index(5)  Pre(219)                                                
                                               len(5)                                                               
                                               S2 app -> 1 next(3)                                                  
                                               index(5) neT(7) cT(7)                                                
                                               S2 rf.nextindex[3] = 3                                               
                                               S2 index(5)  Pre(219)                                                
                                               len(5)                                                               
                                               S2 app -> 3 next(3)                                                  
                                               index(5) neT(7) cT(7)                                                
                                               S2 appendentries error                                               
                                               to exit because tindex                                               
                                               or loglen changed                                                    
                                               S2 appendentries error                                               
                                               to exit because tindex                                               
                                               or loglen changed                                                    
                                               S2 rf.nextindex[4] = 3                                               
                                               S2 index(5)  Pre(219)                                                
                                               len(5)                                                               
                                               S2 app -> 4 next(3)                                                  
                                               index(5) neT(7) cT(7)                                                
                                               S2 <-- C4 Get key(0)                                                 
                                               test1                                                                
                                               S2 have log                                                          
                                               S2 {223 7 {4 42 2                                                    
                                               Append 0 x 0 22 y}}                                                  
                                               S2 have this log({4 42                                               
                                               2 Append 0 x 0 22 y})                                                
                                               in raft the index is                                                 
                                               223                                                                  
                                               S2 <-- C4 Append                                                     
                                               key(0) value(x 0 22 y)                                               
                                               index(223) wait test1                                                
                                               S2 Persist the                                                       
                                               log[[{217 7 {3 52 2                                                  
                                               Get 1 }} {218 7 {0 41                                                
                                               2 Get 2 }} {219 7 {4                                                 
                                               41 2 Get 0 }} {220 7                                                 
                                               {1 36 2 Get 3 }} {221                                                
                                               7 {3 53 2 Get 1 }}                                                   
                                               {222 7 {0 42 2 Append                                                
                                               2 x 2 23 y}} {223 7 {4                                               
                                               42 2 Append 0 x 0 22                                                 
                                               y}}]]                                                                
                                               S2 appendentries error                                               
                                               to exit because tindex                                               
                                               or loglen changed                                                    
                                               S2 rf.nextindex[3] = 3                                               
                                               S2 index(6)  Pre(219)                                                
                                               len(6)                                                               
                                               S2 app -> 3 next(3)                                                  
                                               index(6) neT(7) cT(7)                                                
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(428)                                                                                                             
                                               S2 rf.nextindex[0] = 2                                               
                                               S2 index(6)  Pre(218)                                                
                                               len(6)                                                               
                                               S2 app -> 0 next(2)                                                  
                                               index(6) neT(7) cT(7)                                                
                                               S2 rf.nextindex[1] = 3                                               
                                               S2 index(6)  Pre(219)                                                
                                               len(6)                                                               
                                               S2 app -> 1 next(3)                                                  
                                               index(6) neT(7) cT(7)                                                
                                               S2 rf.nextindex[4] = 3                                               
                                               S2 index(6)  Pre(219)                                                
                                               len(6)                                                               
                                               S2 app -> 4 next(3)                                                  
                                               index(6) neT(7) cT(7)                                                
                                                                      S3 <-- C2 Get key(4)                          
                                                                      test3                                         
                                               C2 ok(false) ERR()                                                   
                                               from S3 in test3                                                     
                                               C2 ERROR Append key(4)                                               
                                               value(x 4 12 y)                                                      
                                               from(S3)                                                             
                                                                                             S4 commit(8) applied(8)
                                                                                             lenlog(10) rf.X(209)   
                                                                                             in(438)                
                                               C2 send to S4 Append                                                 
                                               Key(4) value(x 4 12 y)                                               
                                               CIndex(2) OIndex(39)                                                 
                                               test4                                                                
                        S1  app <- 2 T(7)                                                                           
                        cT(7)                                                                                       
                        S1 YYYY                                                                                     
                        S1 PreT(7) LT(7)                                                                            
                        S1 B success +                                                                              
                        log([{220 7 {1 36 2                                                                         
                        Get 3 }} {221 7 {3 53                                                                       
                        2 Get 1 }} {222 7 {0                                                                        
                        42 2 Append 2 x 2 23                                                                        
                        y}}])                                                                                       
                        S1 update commit(219)                                                                       
                                               S2 -> 1 app fail                                                     
                        S1 Persist the                                                                              
                        log[[{217 7 {3 52 2                                                                         
                        Get 1 }} {218 7 {0 41                                                                       
                        2 Get 2 }} {219 7 {4                                                                        
                        41 2 Get 0 }} {220 7                                                                        
                        {1 36 2 Get 3 }} {221                                                                       
                        7 {3 53 2 Get 1 }}                                                                          
                        {222 7 {0 42 2 Append                                                                       
                        2 x 2 23 y}}]]                                                                              
                        S1 Persist the                                                                              
                        log[[{217 7 {3 52 2                                                                         
                        Get 1 }} {218 7 {0 41                                                                       
                        2 Get 2 }} {219 7 {4                                                                        
                        41 2 Get 0 }} {220 7                                                                        
                        {1 36 2 Get 3 }} {221                                                                       
                        7 {3 53 2 Get 1 }}                                                                          
                        {222 7 {0 42 2 Append                                                                       
                        2 x 2 23 y}}]]                                                                              
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(415)                             
                                               S2 commit(2)                                                         
                                               applied(2) lenlog(6)                                                 
                                               rf.X(217) in(420)                                                    
                        S1 commit(2)                                                                                
                        applied(0) lenlog(5)                                                                        
                        rf.X(217) in(432)                                                                           
                        S1 lastapp lognode =                                                                        
                        {true {0 41 2 Get 2 }                                                                       
                        218 false [] 0 0}                                                                           
                        S1 comm(2) last(218)                                                                        
                        S1 lastapp lognode =                                                                        
                        {true {4 41 2 Get 0 }                                                                       
                        219 false [] 0 0}                                                                           
                        S1 comm(2) last(219)                                                                        
                        S1 TTT                                                                                      
                        CommandValid(true)                                                                          
                        applyindex(217)                                                                             
                        CommandIndex(218) Get                                                                       
                        key(2) value()                                                                              
                        CDM[C0](40) M(41)                                                                           
                        from(2)                                                                                     
                        S1 update CDM[0] from                                                                       
                        40 to 41 update                                                                             
                        applyindex 217 to 218                                                                       
                        S1 can not write get                                                                        
                        in(218)                                                                                     
                        S1 TTT                                                                                      
                        CommandValid(true)                                                                          
                        applyindex(218)                                                                             
                        CommandIndex(219) Get                                                                       
                        key(0) value()                                                                              
                        CDM[C4](40) M(41)                                                                           
                        from(2)                                                                                     
                        S1 update CDM[4] from                                                                       
                        40 to 41 update                                                                             
                        applyindex 218 to 219                                                                       
                        S1 can not write get                                                                        
                        in(219)                                                                                     
                                               S2 -> 4 app fail                                                     
                        S1 Persist the                                                                              
                        log[[{217 7 {3 52 2                                                                         
                        Get 1 }} {218 7 {0 41                                                                       
                        2 Get 2 }} {219 7 {4                                                                        
                        41 2 Get 0 }} {220 7                                                                        
                        {1 36 2 Get 3 }} {221                                                                       
                        7 {3 53 2 Get 1 }}                                                                          
                        {222 7 {0 42 2 Append                                                                       
                        2 x 2 23 y}}]]                                                                              
                                                                                             S4 <-- C2 Get key(4)   
                                                                                             test4                  
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S4 in test4                                                     
                                               C2 Append err() fail                                                 
                                               key(4) value(x 4 12 y)                                               
                                               r.index(0) from(S4)1                                                 
                                               C2 send to S0 Append                                                 
                                               Key(4) value(x 4 12 y)                                               
                                               CIndex(2) OIndex(39)                                                 
                                               test5                                                                
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(429)                                                                                                             
S0 <-- C2 Get key(4)                                                                                                
test5                                                                                                               
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S0 in test5                                                     
                                               C2 Append err() fail                                                 
                                               key(4) value(x 4 12 y)                                               
                                               r.index(0) from(S0)1                                                 
                                               C2 send to S1 Append                                                 
                                               Key(4) value(x 4 12 y)                                               
                                               CIndex(2) OIndex(39)                                                 
                                               test6                                                                
                                                                                             S4 commit(8) applied(8)
                                                                                             lenlog(10) rf.X(209)   
                                                                                             in(439)                
                                               S2 commit(2)                                                         
                                               applied(2) lenlog(6)                                                 
                                               rf.X(217) in(421)                                                    
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(416)                             
                        S1 commit(2)                                                                                
                        applied(2) lenlog(5)                                                                        
                        rf.X(217) in(433)                                                                           
                                                                                             S4 the num is (873)    
                                                                                             applidindex(217) X(209)
                                                                                             S4 the size need to    
                                                                                             snap index217          
                                                                                             S4 update nextindex[0] 
                                                                                             to 3                   
                                                                                             S4 update mathindex[0] 
                                                                                             to 0                   
                                                                                             S4 update nextindex[1] 
                                                                                             to 3                   
                                                                                             S4 update mathindex[1] 
                                                                                             to 0                   
                                                                                             S4 update nextindex[2] 
                                                                                             to 3                   
                                                                                             S4 update mathindex[2] 
                                                                                             to 0                   
                                                                                             S4 update nextindex[3] 
                                                                                             to 3                   
                                                                                             S4 update mathindex[3] 
                                                                                             to 0                   
                                                                                             S4 update nextindex[4] 
                                                                                             to 3                   
                                                                                             S4 update mathindex[4] 
                                                                                             to 3                   
                                                                                             S4 index(217)          
                                                                                             logindex(219)          
                                                                                             len(3)AAAAAAAAAAAAAAAA…
                                                                                             S4 Persist the         
                                                                                             log[[{217 7 {3 52 2 Get
                                                                                             1 }} {218 7 {0 41 2 Get
                                                                                             2 }} {219 7 {4 41 2 Get
                                                                                             0 }}]]                 
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(430)                                                                                                             
                                                                                             S4 snapshot to applymsg
                                                                                             lastindex(217)         
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(440)                
                                                                                             S4 the snapshot applied
                                                                                             S4 recover by SnapShot 
                                                                                             update applyindex(217) 
                                                                                             to 217 the kvs is      
                                                                                             map[0:x 0 0 yx 0 1 yx 0
                                                                                             2 yx 0 3 yx 0 4 yx 0 5 
                                                                                             yx 0 6 yx 0 7 yx 0 8 yx
                                                                                             0 9 yx 0 10 yx 0 11 yx 
                                                                                             0 12 yx 0 13 yx 0 14 yx
                                                                                             0 15 yx 0 16 yx 0 17 yx
                                                                                             0 18 yx 0 19 yx 0 20 yx
                                                                                             0 21 y 1:x 1 0 yx 1 1  
                                                                                             yx 1 2 yx 1 3 yx 1 4 yx
                                                                                             1 5 yx 1 6 yx 1 7 yx 1 
                                                                                             8 yx 1 9 yx 1 10 yx 1  
                                                                                             11 yx 1 12 yx 1 13 yx 1
                                                                                             14 yx 1 15 yx 1 16 yx 1
                                                                                             17 yx 1 18 yx 1 19 yx 1
                                                                                             20 yx 1 21 yx 1 22 yx 1
                                                                                             23 yx 1 24 yx 1 25 yx 1
                                                                                             26 yx 1 27 y 2:x 2 0 yx
                                                                                             2 1 yx 2 2 yx 2 3 yx 2 
                                                                                             4 yx 2 5 yx 2 6 yx 2 7 
                                                                                             yx 2 8 yx 2 9 yx 2 10  
                                                                                             yx 2 11 yx 2 12 yx 2 13
                                                                                             yx 2 14 yx 2 15 yx 2 16
                                                                                             yx 2 17 yx 2 18 yx 2 19
                                                                                             yx 2 20 yx 2 21 yx 2 22
                                                                                             y 3:x 3 0 yx 3 1 yx 3 2
                                                                                             yx 3 3 yx 3 4 yx 3 5 yx
                                                                                             3 6 yx 3 7 yx 3 8 yx 3 
                                                                                             9 yx 3 10 yx 3 11 yx 3 
                                                                                             12 yx 3 13 yx 3 14 yx 3
                                                                                             15 yx 3 16 yx 3 17 yx 3
                                                                                             18 yx 3 19 y 4:x 4 0 yx
                                                                                             4 1 yx 4 2 yx 4 3 yx 4 
                                                                                             4 yx 4 5 yx 4 6 yx 4 7 
                                                                                             yx 4 8 yx 4 9 yx 4 10  
                                                                                             yx 4 11 y]             
                                               S2 -> 3 app fail                                                     
                        S1  app <- 2 T(7)                                                                           
                        cT(7)                                                                                       
                        S1 YYYY                                                                                     
                        S1 PreT(7) LT(7)                                                                            
                        S1 mat(5) index(3)                                                                          
                        len(6)                                                                                      
                        S1 mat(5) index(4)                                                                          
                        len(6)                                                                                      
                        S1 mat(5) index(5)                                                                          
                        len(6)                                                                                      
                        S1 B success +                                                                              
                        log([{223 7 {4 42 2                                                                         
                        Append 0 x 0 22 y}}])                                                                       
                        S1 Persist the                                                                              
                        log[[{217 7 {3 52 2                                                                         
                        Get 1 }} {218 7 {0 41                                                                       
                        2 Get 2 }} {219 7 {4                                                                        
                        41 2 Get 0 }} {220 7                                                                        
                        {1 36 2 Get 3 }} {221                                                                       
                        7 {3 53 2 Get 1 }}                                                                          
                        {222 7 {0 42 2 Append                                                                       
                        2 x 2 23 y}} {223 7 {4                                                                      
                        42 2 Append 0 x 0 22                                                                        
                        y}}]]                                                                                       
                                               S2 update                                                            
                                               nextindex[1](3) to 7                                                 
                                               success                                                              
                                               S2 index(6)                                                          
                                               matchindex([1 6 6 13                                                 
                                               13])                                                                 
                                               S2 successnum(4)                                                     
                                               com-rf.X(2) rf.CT(7)                                                 
                                               t(7)                                                                 
                                               S2 sum(4) ban(2)                                                     
                                               S2 new commit(6) and                                                 
                                               applied                                                              
                                               S2 commit(6)                                                         
                                               applied(2) lenlog(6)                                                 
                                               rf.X(217) in(422)                                                    
                                               S2 lastapp lognode =                                                 
                                               {true {1 36 2 Get 3 }                                                
                                               220 false [] 0 0}                                                    
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(417)                             
                        S1 Persist the                                                                              
                        log[[{217 7 {3 52 2                                                                         
                        Get 1 }} {218 7 {0 41                                                                       
                        2 Get 2 }} {219 7 {4                                                                        
                        41 2 Get 0 }} {220 7                                                                        
                        {1 36 2 Get 3 }} {221                                                                       
                        7 {3 53 2 Get 1 }}                                                                          
                        {222 7 {0 42 2 Append                                                                       
                        2 x 2 23 y}} {223 7 {4                                                                      
                        42 2 Append 0 x 0 22                                                                        
                        y}}]]                                                                                       
                                               S2 comm(6) last(220)                                                 
                        S1 commit(2)                                                                                
                        applied(2) lenlog(6)                                                                        
                        rf.X(217) in(434)                                                                           
                                               S2 lastapp lognode =                                                 
                                               {true {3 53 2 Get 1 }                                                
                                               221 false [] 0 0}                                                    
                                               S2 comm(6) last(221)                                                 
                                               S2 TTT                                                               
                                               CommandValid(true)                                                   
                                               applyindex(219)                                                      
                                               CommandIndex(220) Get                                                
                                               key(3) value()                                                       
                                               CDM[C1](35) M(36)                                                    
                                               from(2)                                                              
                                               S2 update CDM[1] from                                                
                                               35 to 36 update                                                      
                                               applyindex 219 to 220                                                
                                               S2 write get in(220)                                                 
                                               S2 TTT                                                               
                                               CommandValid(true)                                                   
                                               applyindex(220)                                                      
                                               CommandIndex(221) Get                                                
                                               key(1) value()                                                       
                                               CDM[C3](52) M(53)                                                    
                                               from(2)                                                              
                                               S2 lastapp lognode =                                                 
                                               {true {0 42 2 Append 2                                               
                                               x 2 23 y} 222 false []                                               
                                               0 0}                                                                 
                                               S2 comm(6) last(222)                                                 
                                               S2 update CDM[3] from                                                
                                               52 to 53 update                                                      
                                               applyindex 220 to 221                                                
                                               S2 write get in(221)                                                 
                                               S2 lastapp lognode =                                                 
                                               {true {4 42 2 Append 0                                               
                                               x 0 22 y} 223 false []                                               
                                               0 0}                                                                 
                                               S2 comm(6) last(223)                                                 
                                               S2 TTT                                                               
                                               CommandValid(true)                                                   
                                               applyindex(221)                                                      
                                               CommandIndex(222)                                                    
                                               Append key(2) value(x                                                
                                               2 23 y) CDM[C0](41)                                                  
                                               M(42) from(2)                                                        
                                               S2 update CDM[0] from                                                
                                               41 to 42 update                                                      
                                               applyindex 221 to 222                                                
                                               S2 write putAdd                                                      
                                               in(222)                                                              
                                               S2 BBBBBBB append                                                    
                                               Key(2) from x 2 0 yx 2                                               
                                               1 yx 2 2 yx 2 3 yx 2 4                                               
                                               yx 2 5 yx 2 6 yx 2 7                                                 
                                               yx 2 8 yx 2 9 yx 2 10                                                
                                               yx 2 11 yx 2 12 yx 2                                                 
                                               13 yx 2 14 yx 2 15 yx                                                
                                               2 16 yx 2 17 yx 2 18                                                 
                                               yx 2 19 yx 2 20 yx 2                                                 
                                               21 yx 2 22 y to                                                      
                                               value(x 2 23 y)                                                      
                                               from(2)                                                              
                                               S2 TTT                                                               
                                               CommandValid(true)                                                   
                                               applyindex(222)                                                      
                                               CommandIndex(223)                                                    
                                               Append key(0) value(x                                                
                                               0 22 y) CDM[C4](41)                                                  
                                               M(42) from(2)                                                        
                                               S2 Persist the                                                       
                                               log[[{217 7 {3 52 2                                                  
                                               Get 1 }} {218 7 {0 41                                                
                                               2 Get 2 }} {219 7 {4                                                 
                                               41 2 Get 0 }} {220 7                                                 
                                               {1 36 2 Get 3 }} {221                                                
                                               7 {3 53 2 Get 1 }}                                                   
                                               {222 7 {0 42 2 Append                                                
                                               2 x 2 23 y}} {223 7 {4                                               
                                               42 2 Append 0 x 0 22                                                 
                                               y}}]]                                                                
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(431)                                                                                                             
                                               S2 update CDM[4] from                                                
                                               41 to 42 update                                                      
                                               applyindex 222 to 223                                                
                                               S2 write putAdd                                                      
                                               in(223)                                                              
                                               S2 BBBBBBB append                                                    
                                               Key(0) from x 0 0 yx 0                                               
                                               1 yx 0 2 yx 0 3 yx 0 4                                               
                                               yx 0 5 yx 0 6 yx 0 7                                                 
                                               yx 0 8 yx 0 9 yx 0 10                                                
                                               yx 0 11 yx 0 12 yx 0                                                 
                                               13 yx 0 14 yx 0 15 yx                                                
                                               0 16 yx 0 17 yx 0 18                                                 
                                               yx 0 19 yx 0 20 yx 0                                                 
                                               21 y to value(x 0 22                                                 
                                               y) from(2)                                                           
                                               S2 Append index(223)                                                 
                                               applyindex(223)  this                                                
                                               cmd_index(42) key(0)                                                 
                                               value(x 0 22 y)                                                      
                                               from(C4)                                                             
                                               S2 the cmd had achieve                                               
                                               12                                                                   
                                               S2 kvs(map[0:x 0 0 yx                                                
                                               0 1 yx 0 2 yx 0 3 yx 0                                               
                                               4 yx 0 5 yx 0 6 yx 0 7                                               
                                               yx 0 8 yx 0 9 yx 0 10                                                
                                               yx 0 11 yx 0 12 yx 0                                                 
                                               13 yx 0 14 yx 0 15 yx                                                
                                               0 16 yx 0 17 yx 0 18                                                 
                                               yx 0 19 yx 0 20 yx 0                                                 
                                               21 yx 0 22 y 1:x 1 0                                                 
                                               yx 1 1 yx 1 2 yx 1 3                                                 
                                               yx 1 4 yx 1 5 yx 1 6                                                 
                                               yx 1 7 yx 1 8 yx 1 9                                                 
                                               yx 1 10 yx 1 11 yx 1                                                 
                                               12 yx 1 13 yx 1 14 yx                                                
                                               1 15 yx 1 16 yx 1 17                                                 
                                               yx 1 18 yx 1 19 yx 1                                                 
                                               20 yx 1 21 yx 1 22 yx                                                
                                               1 23 yx 1 24 yx 1 25                                                 
                                               yx 1 26 yx 1 27 y 2:x                                                
                                               2 0 yx 2 1 yx 2 2 yx 2                                               
                                               3 yx 2 4 yx 2 5 yx 2 6                                               
                                               yx 2 7 yx 2 8 yx 2 9                                                 
                                               yx 2 10 yx 2 11 yx 2                                                 
                                               12 yx 2 13 yx 2 14 yx                                                
                                               2 15 yx 2 16 yx 2 17                                                 
                                               yx 2 18 yx 2 19 yx 2                                                 
                                               20 yx 2 21 yx 2 22 yx                                                
                                               2 23 y 3:x 3 0 yx 3 1                                                
                                               yx 3 2 yx 3 3 yx 3 4                                                 
                                               yx 3 5 yx 3 6 yx 3 7                                                 
                                               yx 3 8 yx 3 9 yx 3 10                                                
                                               yx 3 11 yx 3 12 yx 3                                                 
                                               13 yx 3 14 yx 3 15 yx                                                
                                               3 16 yx 3 17 yx 3 18                                                 
                                               yx 3 19 y 4:x 4 0 yx 4                                               
                                               1 yx 4 2 yx 4 3 yx 4 4                                               
                                               yx 4 5 yx 4 6 yx 4 7                                                 
                                               yx 4 8 yx 4 9 yx 4 10                                                
                                               yx 4 11 y]) index(221)                                               
                                               from(2)                                                              
                                               S2 Get key(1) value(x                                                
                                               1 0 yx 1 1 yx 1 2 yx 1                                               
                                               3 yx 1 4 yx 1 5 yx 1 6                                               
                                               yx 1 7 yx 1 8 yx 1 9                                                 
                                               yx 1 10 yx 1 11 yx 1                                                 
                                               12 yx 1 13 yx 1 14 yx                                                
                                               1 15 yx 1 16 yx 1 17                                                 
                                               yx 1 18 yx 1 19 yx 1                                                 
                                               20 yx 1 21 yx 1 22 yx                                                
                                               1 23 yx 1 24 yx 1 25                                                 
                                               yx 1 26 yx 1 27 y) OK                                                
                                               from(C3)                                                             
                                               S2 kvs(map[0:x 0 0 yx                                                
                                               0 1 yx 0 2 yx 0 3 yx 0                                               
                                               4 yx 0 5 yx 0 6 yx 0 7                                               
                                               yx 0 8 yx 0 9 yx 0 10                                                
                                               yx 0 11 yx 0 12 yx 0                                                 
                                               13 yx 0 14 yx 0 15 yx                                                
                                               0 16 yx 0 17 yx 0 18                                                 
                                               yx 0 19 yx 0 20 yx 0                                                 
                                               21 yx 0 22 y 1:x 1 0                                                 
                                               yx 1 1 yx 1 2 yx 1 3                                                 
                                               yx 1 4 yx 1 5 yx 1 6                                                 
                                               yx 1 7 yx 1 8 yx 1 9                                                 
                                               yx 1 10 yx 1 11 yx 1                                                 
                                               12 yx 1 13 yx 1 14 yx                                                
                                               1 15 yx 1 16 yx 1 17                                                 
                                               yx 1 18 yx 1 19 yx 1                                                 
                                               20 yx 1 21 yx 1 22 yx                                                
                                               1 23 yx 1 24 yx 1 25                                                 
                                               yx 1 26 yx 1 27 y 2:x                                                
                                               2 0 yx 2 1 yx 2 2 yx 2                                               
                                               3 yx 2 4 yx 2 5 yx 2 6                                               
                                               yx 2 7 yx 2 8 yx 2 9                                                 
                                               yx 2 10 yx 2 11 yx 2                                                 
                                               12 yx 2 13 yx 2 14 yx                                                
                                               2 15 yx 2 16 yx 2 17                                                 
                                               yx 2 18 yx 2 19 yx 2                                                 
                                               20 yx 2 21 yx 2 22 yx                                                
                                               2 23 y 3:x 3 0 yx 3 1                                                
                                               yx 3 2 yx 3 3 yx 3 4                                                 
                                               yx 3 5 yx 3 6 yx 3 7                                                 
                                               yx 3 8 yx 3 9 yx 3 10                                                
                                               yx 3 11 yx 3 12 yx 3                                                 
                                               13 yx 3 14 yx 3 15 yx                                                
                                               3 16 yx 3 17 yx 3 18                                                 
                                               yx 3 19 y 4:x 4 0 yx 4                                               
                                               1 yx 4 2 yx 4 3 yx 4 4                                               
                                               yx 4 5 yx 4 6 yx 4 7                                                 
                                               yx 4 8 yx 4 9 yx 4 10                                                
                                               yx 4 11 y]) index(220)                                               
                                               from(2)                                                              
                                               S2 Get key(3) value(x                                                
                                               3 0 yx 3 1 yx 3 2 yx 3                                               
                                               3 yx 3 4 yx 3 5 yx 3 6                                               
                                               yx 3 7 yx 3 8 yx 3 9                                                 
                                               yx 3 10 yx 3 11 yx 3                                                 
                                               12 yx 3 13 yx 3 14 yx                                                
                                               3 15 yx 3 16 yx 3 17                                                 
                                               yx 3 18 yx 3 19 y) OK                                                
                                               from(C1)                                                             
                                               S2 the num is (621)                                                  
                                               applidindex(223)                                                     
                                               X(217)                                                               
                                                                      C3 ok(true) ERR(OK)                           
                                                                      from S1 in test1                              
                                                                      C3 Get success key(1)                         
                                                                      value(x 1 0 yx 1 1 yx                         
                                                                      1 2 yx 1 3 yx 1 4 yx 1                        
                                                                      5 yx 1 6 yx 1 7 yx 1 8                        
                                                                      yx 1 9 yx 1 10 yx 1 11                        
                                                                      yx 1 12 yx 1 13 yx 1                          
                                                                      14 yx 1 15 yx 1 16 yx                         
                                                                      1 17 yx 1 18 yx 1 19                          
                                                                      yx 1 20 yx 1 21 yx 1                          
                                                                      22 yx 1 23 yx 1 24 yx                         
                                                                      1 25 yx 1 26 yx 1 27                          
                                                                      y) r.index(221)                               
                                                                      from(S1)                                      
                                                                      C3 Append key(1)                              
                                                                      value(x 1 28 y)                               
                                                                      C3 cmd_index(53)3                             
                                                                      C3 cmd_index(54)4                             
                                                                      C3 send to S1 Append                          
                                                                      Key(1) value(x 1 28 y)                        
                                                                      CIndex(3) OIndex(54)                          
                                                                      test1                                         
                        C1 ok(true) ERR(OK)                                                                         
                        from S2 in test1                                                                            
                        C1 Get success key(3)                                                                       
                        value(x 3 0 yx 3 1 yx                                                                       
                        3 2 yx 3 3 yx 3 4 yx 3                                                                      
                        5 yx 3 6 yx 3 7 yx 3 8                                                                      
                        yx 3 9 yx 3 10 yx 3 11                                                                      
                        yx 3 12 yx 3 13 yx 3                                                                        
                        14 yx 3 15 yx 3 16 yx                                                                       
                        3 17 yx 3 18 yx 3 19                                                                        
                        y) r.index(220)                                                                             
                        from(S2)                                                                                    
                        C1 Append key(3)                                                                            
                        value(x 3 20 y)                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(441)                
                        C1 cmd_index(36)3                                                                           
                        C1 cmd_index(37)4                                                                           
                        C1 send to S2 Append                                                                        
                        Key(3) value(x 3 20 y)                                                                      
                        CIndex(1) OIndex(37)                                                                        
                        test1                                                                                       
                                                                                             C4 ok(true) ERR(OK)    
                                                                                             from S3 in test1       
                                               S2 Append index(222)                                                 
                                               applyindex(222)  this                                                
                                               cmd_index(42) key(2)                                                 
                                               value(x 2 23 y)                                                      
                                               from(C0)                                                             
                                                                                             C4 Append err(OK),     
                                                                                             success key(0) value(x 
                                                                                             0 22 y) r.Index(223)   
                                                                                             from(S3)2              
                                                                                             C4 Append key(0)       
                                                                                             value(x 0 23 y)        
                                                                                             C4 cmd_index(42)3      
                                                                                             C4 cmd_index(43)4      
                                                                                             C4 send to S3 Append   
                                                                                             Key(0) value(x 0 23 y) 
                                                                                             CIndex(4) OIndex(43)   
                                                                                             test1                  
C0 ok(false) ERR() from                                                                                             
S0 in test1                                                                                                         
C0 ERROR Append key(2)                                                                                              
value(x 2 23 y)                                                                                                     
from(S0)                                                                                                            
C0 send to S1 Append                                                                                                
Key(2) value(x 2 23 y)                                                                                              
CIndex(0) OIndex(42)                                                                                                
test2                                                                                                               
                                               S2 <-- C4 Get key(0)                                                 
                                               test1                                                                
                                               S2 have log                                                          
                                               S2 {224 7 {4 43 2                                                    
                                               Append 0 x 0 23 y}}                                                  
                                               S2 have this log({4 43                                               
                                               2 Append 0 x 0 23 y})                                                
                                               in raft the index is                                                 
                                               224                                                                  
                                               S2 <-- C4 Append                                                     
                                               key(0) value(x 0 23 y)                                               
                                               index(224) wait test1                                                
                                               S2 rf.nextindex[0] = 2                                               
                                               S2 index(7)  Pre(218)                                                
                                               len(7)                                                               
                                               S2 app -> 0 next(2)                                                  
                                               index(7) neT(7) cT(7)                                                
                                               S2 <-- C2 Get key(4)                                                 
                                               test6                                                                
                        S1 commit(2)                                                                                
                        applied(2) lenlog(6)                                                                        
                        rf.X(217) in(435)                                                                           
                                               S2 have log                                                          
                                               S2 <-- C3 Get key(1)                                                 
                                               test1                                                                
                                               S2 {225 7 {2 39 2                                                    
                                               Append 4 x 4 12 y}}                                                  
C0 ok(false) ERR() from                                                                                             
S1 in test2                                                                                                         
C0 ERROR Append key(2)                                                                                              
value(x 2 23 y)                                                                                                     
from(S1)                                                                                                            
                                               S2 appendentries error                                               
                                               to exit because tindex                                               
                                               or loglen changed                                                    
                                               S2 appendentries error                                               
                                               to exit because tindex                                               
                                               or loglen changed                                                    
                                               S2 appendentries error                                               
                                               to exit because tindex                                               
                                               or loglen changed                                                    
C0 send to S2 Append                                                                                                
Key(2) value(x 2 23 y)                                                                                              
CIndex(0) OIndex(42)                                                                                                
test3                                                                                                               
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(442)                
                                               S2 Persist the                                                       
                                               log[[{217 7 {3 52 2                                                  
                                               Get 1 }} {218 7 {0 41                                                
                                               2 Get 2 }} {219 7 {4                                                 
                                               41 2 Get 0 }} {220 7                                                 
                                               {1 36 2 Get 3 }} {221                                                
                                               7 {3 53 2 Get 1 }}                                                   
                                               {222 7 {0 42 2 Append                                                
                                               2 x 2 23 y}} {223 7 {4                                               
                                               42 2 Append 0 x 0 22                                                 
                                               y}} {224 7 {4 43 2                                                   
                                               Append 0 x 0 23 y}}                                                  
                                               {225 7 {2 39 2 Append                                                
                                               4 x 4 12 y}}]]                                                       
                                               S2 -> 0 app fail                                                     
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(418)                             
                                               S2 -> 3 app fail                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(432)                                                                                                             
                                               S2 Persist the                                                       
                                               log[[{217 7 {3 52 2                                                  
                                               Get 1 }} {218 7 {0 41                                                
                                               2 Get 2 }} {219 7 {4                                                 
                                               41 2 Get 0 }} {220 7                                                 
                                               {1 36 2 Get 3 }} {221                                                
                                               7 {3 53 2 Get 1 }}                                                   
                                               {222 7 {0 42 2 Append                                                
                                               2 x 2 23 y}} {223 7 {4                                               
                                               42 2 Append 0 x 0 22                                                 
                                               y}} {224 7 {4 43 2                                                   
                                               Append 0 x 0 23 y}}                                                  
                                               {225 7 {2 39 2 Append                                                
                                               4 x 4 12 y}}]]                                                       
                                               S2 commit(6)                                                         
                                               applied(6) lenlog(8)                                                 
                                               rf.X(217) in(423)                                                    
                                               S2 have this log({2 39                                               
                                               2 Append 4 x 4 12 y})                                                
                                               in raft the index is                                                 
                                               225                                                                  
                                               S2 <-- C2 Append                                                     
                                               key(4) value(x 4 12 y)                                               
                                               index(225) wait test6                                                
                                               S2 have log                                                          
                                               S2 {226 7 {3 54 2                                                    
                                               Append 1 x 1 28 y}}                                                  
                                               S2 have this log({3 54                                               
                                               2 Append 1 x 1 28 y})                                                
                                               in raft the index is                                                 
                                               226                                                                  
                                               S2 rf.nextindex[4] = 3                                               
                                               S2 <-- C3 Append                                                     
                                               key(1) value(x 1 28 y)                                               
                                               index(226) wait test1                                                
                                               S2 index(9)  Pre(219)                                                
                                               len(9)                                                               
                                               S2 <-- C1 Get key(3)                                                 
                                               test1                                                                
                                               S2 app -> 4 next(3)                                                  
                                               index(9) neT(7) cT(7)                                                
                                               S2 rf.nextindex[1] = 7                                               
                                               S2 index(9)  Pre(223)                                                
                                               len(9)                                                               
                                               S2 app -> 1 next(7)                                                  
                                               index(9) neT(7) cT(7)                                                
                                               S2 appendentries error                                               
                                               to exit because tindex                                               
                                               or loglen changed                                                    
                        S1 commit(2)                                                                                
                        applied(2) lenlog(6)                                                                        
                        rf.X(217) in(436)                                                                           
                                               S2 appendentries error                                               
                                               to exit because tindex                                               
                                               or loglen changed                                                    
                                               S2 appendentries error                                               
                                               to exit because tindex                                               
                                               or loglen changed                                                    
                                               S2 rf.nextindex[0] = 2                                               
                                               S2 index(9)  Pre(218)                                                
                                               len(9)                                                               
                                               S2 app -> 0 next(2)                                                  
                                               index(9) neT(7) cT(7)                                                
                                               S2 rf.nextindex[3] = 3                                               
                                               S2 index(9)  Pre(219)                                                
                                               len(9)                                                               
                                               S2 app -> 3 next(3)                                                  
                                               index(9) neT(7) cT(7)                                                
                        S1  app <- 2 T(7)                                                                           
                        cT(7)                                                                                       
                        S1 YYYY                                                                                     
                        S1 PreT(7) LT(7)                                                                            
                        S1 B success +                                                                              
                        log([{224 7 {4 43 2                                                                         
                        Append 0 x 0 23 y}}                                                                         
                        {225 7 {2 39 2 Append                                                                       
                        4 x 4 12 y}} {226 7 {3                                                                      
                        54 2 Append 1 x 1 28                                                                        
                        y}}])                                                                                       
                        S1 update commit(223)                                                                       
                                               S2 appendentries error                                               
                                               to exit because tindex                                               
                                               or loglen changed                                                    
                                               S2 Persist the                                                       
                                               log[[{217 7 {3 52 2                                                  
                                               Get 1 }} {218 7 {0 41                                                
                                               2 Get 2 }} {219 7 {4                                                 
                                               41 2 Get 0 }} {220 7                                                 
                                               {1 36 2 Get 3 }} {221                                                
                                               7 {3 53 2 Get 1 }}                                                   
                                               {222 7 {0 42 2 Append                                                
                                               2 x 2 23 y}} {223 7 {4                                               
                                               42 2 Append 0 x 0 22                                                 
                                               y}} {224 7 {4 43 2                                                   
                                               Append 0 x 0 23 y}}                                                  
                                               {225 7 {2 39 2 Append                                                
                                               4 x 4 12 y}} {226 7 {3                                               
                                               54 2 Append 1 x 1 28                                                 
                                               y}}]]                                                                
S0 <-- C0 Get key(2)                                                                                                
test3                                                                                                               
                        S1 Persist the                                                                              
                        log[[{217 7 {3 52 2                                                                         
                        Get 1 }} {218 7 {0 41                                                                       
                        2 Get 2 }} {219 7 {4                                                                        
                        41 2 Get 0 }} {220 7                                                                        
                        {1 36 2 Get 3 }} {221                                                                       
                        7 {3 53 2 Get 1 }}                                                                          
                        {222 7 {0 42 2 Append                                                                       
                        2 x 2 23 y}} {223 7 {4                                                                      
                        42 2 Append 0 x 0 22                                                                        
                        y}} {224 7 {4 43 2                                                                          
                        Append 0 x 0 23 y}}                                                                         
                        {225 7 {2 39 2 Append                                                                       
                        4 x 4 12 y}} {226 7 {3                                                                      
                        54 2 Append 1 x 1 28                                                                        
                        y}}]]                                                                                       
                                               S2 -> 1 app fail                                                     
                                               S2 have log                                                          
                                               S2 {227 7 {1 37 2                                                    
                                               Append 3 x 3 20 y}}                                                  
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(443)                
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(419)                             
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(433)                                                                                                             
                                               S2 -> 0 app fail                                                     
                                               S2 -> 4 app fail                                                     
                        S1 Persist the                                                                              
                        log[[{217 7 {3 52 2                                                                         
                        Get 1 }} {218 7 {0 41                                                                       
                        2 Get 2 }} {219 7 {4                                                                        
                        41 2 Get 0 }} {220 7                                                                        
                        {1 36 2 Get 3 }} {221                                                                       
                        7 {3 53 2 Get 1 }}                                                                          
                        {222 7 {0 42 2 Append                                                                       
                        2 x 2 23 y}} {223 7 {4                                                                      
                        42 2 Append 0 x 0 22                                                                        
                        y}} {224 7 {4 43 2                                                                          
                        Append 0 x 0 23 y}}                                                                         
                        {225 7 {2 39 2 Append                                                                       
                        4 x 4 12 y}} {226 7 {3                                                                      
                        54 2 Append 1 x 1 28                                                                        
                        y}}]]                                                                                       
C0 ok(false) ERR() from                                                                                             
S2 in test3                                                                                                         
C0 ERROR Append key(2)                                                                                              
value(x 2 23 y)                                                                                                     
from(S2)                                                                                                            
C0 send to S3 Append                                                                                                
Key(2) value(x 2 23 y)                                                                                              
CIndex(0) OIndex(42)                                                                                                
test4                                                                                                               
                        S1 commit(6)                                                                                
                        applied(2) lenlog(9)                                                                        
                        rf.X(217) in(437)                                                                           
                        S1 lastapp lognode =                                                                        
                        {true {1 36 2 Get 3 }                                                                       
                        220 false [] 0 0}                                                                           
                        S1 comm(6) last(220)                                                                        
                        S1 lastapp lognode =                                                                        
                        {true {3 53 2 Get 1 }                                                                       
                        221 false [] 0 0}                                                                           
                        S1 comm(6) last(221)                                                                        
                        S1 TTT                                                                                      
                        CommandValid(true)                                                                          
                        applyindex(219)                                                                             
                        CommandIndex(220) Get                                                                       
                        key(3) value()                                                                              
                        CDM[C1](35) M(36)                                                                           
                        from(2)                                                                                     
                        S1 update CDM[1] from                                                                       
                        35 to 36 update                                                                             
                        applyindex 219 to 220                                                                       
                        S1 can not write get                                                                        
                        in(220)                                                                                     
                                               S2 commit(6)                                                         
                                               applied(6) lenlog(10)                                                
                                               rf.X(217) in(424)                                                    
                                               S2 Persist the                                                       
                                               log[[{217 7 {3 52 2                                                  
                                               Get 1 }} {218 7 {0 41                                                
                                               2 Get 2 }} {219 7 {4                                                 
                                               41 2 Get 0 }} {220 7                                                 
                                               {1 36 2 Get 3 }} {221                                                
                                               7 {3 53 2 Get 1 }}                                                   
                                               {222 7 {0 42 2 Append                                                
                                               2 x 2 23 y}} {223 7 {4                                               
                                               42 2 Append 0 x 0 22                                                 
                                               y}} {224 7 {4 43 2                                                   
                                               Append 0 x 0 23 y}}                                                  
                                               {225 7 {2 39 2 Append                                                
                                               4 x 4 12 y}} {226 7 {3                                               
                                               54 2 Append 1 x 1 28                                                 
                                               y}} {227 7 {1 37 2                                                   
                                               Append 3 x 3 20 y}}]]                                                
                        S1 lastapp lognode =                                                                        
                        {true {0 42 2 Append 2                                                                      
                        x 2 23 y} 222 false []                                                                      
                        0 0}                                                                                        
                        S1 comm(6) last(222)                                                                        
                                               S2 rf.nextindex[4] = 3                                               
                                               S2 index(10)  Pre(219)                                               
                                               len(10)                                                              
                                               S2 app -> 4 next(3)                                                  
                                               index(10) neT(7) cT(7)                                               
                                               S2 rf.nextindex[0] = 2                                               
                                               S2 index(10)  Pre(218)                                               
                                               len(10)                                                              
                                               S2 app -> 0 next(2)                                                  
                                               index(10) neT(7) cT(7)                                               
                                               S2 rf.nextindex[1] = 7                                               
                                               S2 index(10)  Pre(223)                                               
                                               len(10)                                                              
                                               S2 app -> 1 next(7)                                                  
                                               index(10) neT(7) cT(7)                                               
                                               S2 rf.nextindex[3] = 3                                               
                                               S2 index(10)  Pre(219)                                               
                                               len(10)                                                              
                                               S2 app -> 3 next(3)                                                  
                                               index(10) neT(7) cT(7)                                               
                        S1 TTT                                                                                      
                        CommandValid(true)                                                                          
                        applyindex(220)                                                                             
                        CommandIndex(221) Get                                                                       
                        key(1) value()                                                                              
                        CDM[C3](52) M(53)                                                                           
                        from(2)                                                                                     
                        S1 update CDM[3] from                                                                       
                        52 to 53 update                                                                             
                        applyindex 220 to 221                                                                       
                        S1 can not write get                                                                        
                        in(221)                                                                                     
                        S1 TTT                                                                                      
                        CommandValid(true)                                                                          
                        applyindex(221)                                                                             
                        CommandIndex(222)                                                                           
                        Append key(2) value(x                                                                       
                        2 23 y) CDM[C0](41)                                                                         
                        M(42) from(2)                                                                               
                        S1 update CDM[0] from                                                                       
                        41 to 42 update                                                                             
                        applyindex 221 to 222                                                                       
                        S1 can not write                                                                            
                        putAdd in(222)                                                                              
                        S1 BBBBBBB append                                                                           
                        Key(2) from x 2 0 yx 2                                                                      
                        1 yx 2 2 yx 2 3 yx 2 4                                                                      
                        yx 2 5 yx 2 6 yx 2 7                                                                        
                        yx 2 8 yx 2 9 yx 2 10                                                                       
                        yx 2 11 yx 2 12 yx 2                                                                        
                        13 yx 2 14 yx 2 15 yx                                                                       
                        2 16 yx 2 17 yx 2 18                                                                        
                        yx 2 19 yx 2 20 yx 2                                                                        
                        21 yx 2 22 y to                                                                             
                        value(x 2 23 y)                                                                             
                        from(2)                                                                                     
                                               S2 have this log({1 37                                               
                                               2 Append 3 x 3 20 y})                                                
                                               in raft the index is                                                 
                                               227                                                                  
                        S1 lastapp lognode =                                                                        
                        {true {4 42 2 Append 0                                                                      
                        x 0 22 y} 223 false []                                                                      
                        0 0}                                                                                        
                        S1 comm(6) last(223)                                                                        
                                               S2 the num is (810)                                                  
                                               applidindex(223)                                                     
                                               X(217)                                                               
                                                                      S3 the num is (697)                           
                                                                      applidindex(217)                              
                                                                      X(212)                                        
S0 the num is (343)                                                                                                 
applidindex(217) X(217)                                                                                             
                        S1 TTT                                                                                      
                        CommandValid(true)                                                                          
                        applyindex(222)                                                                             
                        CommandIndex(223)                                                                           
                        Append key(0) value(x                                                                       
                        0 22 y) CDM[C4](41)                                                                         
                        M(42) from(2)                                                                               
                        S1 update CDM[4] from                                                                       
                        41 to 42 update                                                                             
                        applyindex 222 to 223                                                                       
                        S1 can not write                                                                            
                        putAdd in(223)                                                                              
                        S1 BBBBBBB append                                                                           
                        Key(0) from x 0 0 yx 0                                                                      
                        1 yx 0 2 yx 0 3 yx 0 4                                                                      
                        yx 0 5 yx 0 6 yx 0 7                                                                        
                        yx 0 8 yx 0 9 yx 0 10                                                                       
                        yx 0 11 yx 0 12 yx 0                                                                        
                        13 yx 0 14 yx 0 15 yx                                                                       
                        0 16 yx 0 17 yx 0 18                                                                        
                        yx 0 19 yx 0 20 yx 0                                                                        
                        21 y to value(x 0 22                                                                        
                        y) from(2)                                                                                  
                        S1 the cmd had achieve                                                                      
                        12                                                                                          
                                               S2 the size need to                                                  
                                               snap index223                                                        
                        S1 Persist the                                                                              
                        log[[{217 7 {3 52 2                                                                         
                        Get 1 }} {218 7 {0 41                                                                       
                        2 Get 2 }} {219 7 {4                                                                        
                        41 2 Get 0 }} {220 7                                                                        
                        {1 36 2 Get 3 }} {221                                                                       
                        7 {3 53 2 Get 1 }}                                                                          
                        {222 7 {0 42 2 Append                                                                       
                        2 x 2 23 y}} {223 7 {4                                                                      
                        42 2 Append 0 x 0 22                                                                        
                        y}} {224 7 {4 43 2                                                                          
                        Append 0 x 0 23 y}}                                                                         
                        {225 7 {2 39 2 Append                                                                       
                        4 x 4 12 y}} {226 7 {3                                                                      
                        54 2 Append 1 x 1 28                                                                        
                        y}}]]                                                                                       
                                               S2 update nextindex[0]                                               
                                               to 5                                                                 
                                               S2 update mathindex[0]                                               
                                               to 0                                                                 
                                               S2 update nextindex[1]                                               
                                               to 1                                                                 
                                               S2 update mathindex[1]                                               
                                               to 0                                                                 
                        S1 the num is (810)                                                                         
                        applidindex(223)                                                                            
                        X(217)                                                                                      
                        S1 the size need to                                                                         
                        snap index223                                                                               
                                               S2 update nextindex[2]                                               
                                               to 5                                                                 
                                               S2 update mathindex[2]                                               
                                               to 4                                                                 
                                               S2 update nextindex[3]                                               
                                               to 5                                                                 
                                               S2 update mathindex[3]                                               
                                               to 7                                                                 
                                               S2 update nextindex[4]                                               
                                               to 5                                                                 
                                               S2 update mathindex[4]                                               
                                               to 7                                                                 
                                               S2 index(223)                                                        
                                               logindex(227)                                                        
                                               len(5)AAAAAAAAAAAAAAA…                                               
                                               S2 Persist the                                                       
                                               log[[{223 7 {4 42 2                                                  
                                               Append 0 x 0 22 y}}                                                  
                                               {224 7 {4 43 2 Append                                                
                                               0 x 0 23 y}} {225 7 {2                                               
                                               39 2 Append 4 x 4 12                                                 
                                               y}} {226 7 {3 54 2                                                   
                                               Append 1 x 1 28 y}}                                                  
                                               {227 7 {1 37 2 Append                                                
                                               3 x 3 20 y}}]]                                                       
                        S1 update nextindex[0]                                                                      
                        to 4                                                                                        
                        S1 update mathindex[0]                                                                      
                        to 0                                                                                        
                        S1 update nextindex[1]                                                                      
                        to 4                                                                                        
                        S1 update mathindex[1]                                                                      
                        to 4                                                                                        
                        S1 update nextindex[2]                                                                      
                        to 4                                                                                        
                        S1 update mathindex[2]                                                                      
                        to 0                                                                                        
                        S1 update nextindex[3]                                                                      
                        to 4                                                                                        
                        S1 update mathindex[3]                                                                      
                        to 0                                                                                        
                        S1 update nextindex[4]                                                                      
                        to 4                                                                                        
                        S1 update mathindex[4]                                                                      
                        to 0                                                                                        
                        S1 index(223)                                                                               
                        logindex(226)                                                                               
                        len(4)AAAAAAAAAAAAAAA…                                                                      
                        S1 Persist the                                                                              
                        log[[{223 7 {4 42 2                                                                         
                        Append 0 x 0 22 y}}                                                                         
                        {224 7 {4 43 2 Append                                                                       
                        0 x 0 23 y}} {225 7 {2                                                                      
                        39 2 Append 4 x 4 12                                                                        
                        y}} {226 7 {3 54 2                                                                          
                        Append 1 x 1 28 y}}]]                                                                       
                                               S2 <-- C1 Append                                                     
                                               key(3) value(x 3 20 y)                                               
                                               index(227) wait test1                                                
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(444)                
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(420)                             
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(434)                                                                                                             
                                               S2 snapshot to                                                       
                                               applymsg                                                             
                                               lastindex(223)                                                       
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(4)                                                 
                                               rf.X(223) in(425)                                                    
                                               S2 the snapshot                                                      
                                               applied                                                              
                                               S2 recover by SnapShot                                               
                                               update applyindex(223)                                               
                                               to 223 the kvs is                                                    
                                               map[0:x 0 0 yx 0 1 yx                                                
                                               0 2 yx 0 3 yx 0 4 yx 0                                               
                                               5 yx 0 6 yx 0 7 yx 0 8                                               
                                               yx 0 9 yx 0 10 yx 0 11                                               
                                               yx 0 12 yx 0 13 yx 0                                                 
                                               14 yx 0 15 yx 0 16 yx                                                
                                               0 17 yx 0 18 yx 0 19                                                 
                                               yx 0 20 yx 0 21 yx 0                                                 
                                               22 y 1:x 1 0 yx 1 1 yx                                               
                                               1 2 yx 1 3 yx 1 4 yx 1                                               
                                               5 yx 1 6 yx 1 7 yx 1 8                                               
                                               yx 1 9 yx 1 10 yx 1 11                                               
                                               yx 1 12 yx 1 13 yx 1                                                 
                                               14 yx 1 15 yx 1 16 yx                                                
                                               1 17 yx 1 18 yx 1 19                                                 
                                               yx 1 20 yx 1 21 yx 1                                                 
                                               22 yx 1 23 yx 1 24 yx                                                
                                               1 25 yx 1 26 yx 1 27 y                                               
                                               2:x 2 0 yx 2 1 yx 2 2                                                
                                               yx 2 3 yx 2 4 yx 2 5                                                 
                                               yx 2 6 yx 2 7 yx 2 8                                                 
                                               yx 2 9 yx 2 10 yx 2 11                                               
                                               yx 2 12 yx 2 13 yx 2                                                 
                                               14 yx 2 15 yx 2 16 yx                                                
                                               2 17 yx 2 18 yx 2 19                                                 
                                               yx 2 20 yx 2 21 yx 2                                                 
                                               22 yx 2 23 y 3:x 3 0                                                 
                                               yx 3 1 yx 3 2 yx 3 3                                                 
                                               yx 3 4 yx 3 5 yx 3 6                                                 
                                               yx 3 7 yx 3 8 yx 3 9                                                 
                                               yx 3 10 yx 3 11 yx 3                                                 
                                               12 yx 3 13 yx 3 14 yx                                                
                                               3 15 yx 3 16 yx 3 17                                                 
                                               yx 3 18 yx 3 19 y 4:x                                                
                                               4 0 yx 4 1 yx 4 2 yx 4                                               
                                               3 yx 4 4 yx 4 5 yx 4 6                                               
                                               yx 4 7 yx 4 8 yx 4 9                                                 
                                               yx 4 10 yx 4 11 y]                                                   
                                                                                             S4 <-- C0 Get key(2)   
                                                                                             test4                  
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S3 in test4                                                                                                    
C0 Append err() fail                                                                                                
key(2) value(x 2 23 y)                                                                                              
r.index(0) from(S3)1                                                                                                
C0 send to S4 Append                                                                                                
Key(2) value(x 2 23 y)                                                                                              
CIndex(0) OIndex(42)                                                                                                
test5                                                                                                               
                        S1 <-- C0 Get key(2)                                                                        
                        test5                                                                                       
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S4 in test5                                                                                                    
C0 Append err() fail                                                                                                
key(2) value(x 2 23 y)                                                                                              
r.index(0) from(S4)1                                                                                                
C0 send to S0 Append                                                                                                
Key(2) value(x 2 23 y)                                                                                              
CIndex(0) OIndex(42)                                                                                                
test6                                                                                                               
                                               S2 -> 1 app fail                                                     
                        S1 snapshot to                                                                              
                        applymsg                                                                                    
                        lastindex(223)                                                                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(3)                                                                        
                        rf.X(223) in(438)                                                                           
                        S1 the snapshot                                                                             
                        applied                                                                                     
                                               S2 -> 0 app fail                                                     
                        S1 the num is (496)                                                                         
                        applidindex(223)                                                                            
                        X(223)                                                                                      
                        S1 recover by SnapShot                                                                      
                        update applyindex(223)                                                                      
                        to 223 the kvs is                                                                           
                        map[0:x 0 0 yx 0 1 yx                                                                       
                        0 2 yx 0 3 yx 0 4 yx 0                                                                      
                        5 yx 0 6 yx 0 7 yx 0 8                                                                      
                        yx 0 9 yx 0 10 yx 0 11                                                                      
                        yx 0 12 yx 0 13 yx 0                                                                        
                        14 yx 0 15 yx 0 16 yx                                                                       
                        0 17 yx 0 18 yx 0 19                                                                        
                        yx 0 20 yx 0 21 yx 0                                                                        
                        22 y 1:x 1 0 yx 1 1 yx                                                                      
                        1 2 yx 1 3 yx 1 4 yx 1                                                                      
                        5 yx 1 6 yx 1 7 yx 1 8                                                                      
                        yx 1 9 yx 1 10 yx 1 11                                                                      
                        yx 1 12 yx 1 13 yx 1                                                                        
                        14 yx 1 15 yx 1 16 yx                                                                       
                        1 17 yx 1 18 yx 1 19                                                                        
                        yx 1 20 yx 1 21 yx 1                                                                        
                        22 yx 1 23 yx 1 24 yx                                                                       
                        1 25 yx 1 26 yx 1 27 y                                                                      
                        2:x 2 0 yx 2 1 yx 2 2                                                                       
                        yx 2 3 yx 2 4 yx 2 5                                                                        
                        yx 2 6 yx 2 7 yx 2 8                                                                        
                        yx 2 9 yx 2 10 yx 2 11                                                                      
                        yx 2 12 yx 2 13 yx 2                                                                        
                        14 yx 2 15 yx 2 16 yx                                                                       
                        2 17 yx 2 18 yx 2 19                                                                        
                        yx 2 20 yx 2 21 yx 2                                                                        
                        22 yx 2 23 y 3:x 3 0                                                                        
                        yx 3 1 yx 3 2 yx 3 3                                                                        
                        yx 3 4 yx 3 5 yx 3 6                                                                        
                        yx 3 7 yx 3 8 yx 3 9                                                                        
                        yx 3 10 yx 3 11 yx 3                                                                        
                        12 yx 3 13 yx 3 14 yx                                                                       
                        3 15 yx 3 16 yx 3 17                                                                        
                        yx 3 18 yx 3 19 y 4:x                                                                       
                        4 0 yx 4 1 yx 4 2 yx 4                                                                      
                        3 yx 4 4 yx 4 5 yx 4 6                                                                      
                        yx 4 7 yx 4 8 yx 4 9                                                                        
                        yx 4 10 yx 4 11 y]                                                                          
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(421)                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(445)                
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(435)                                                                                                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(4)                                                 
                                               rf.X(223) in(426)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(3)                                                                        
                        rf.X(223) in(439)                                                                           
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(446)                
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(422)                             
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(436)                                                                                                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(4)                                                 
                                               rf.X(223) in(427)                                                    
                                               S2 -> 4 app fail                                                     
                                               S2 -> 3 app fail                                                     
                                               S2 <-- C0 Get key(2)                                                 
                                               test6                                                                
                                               S2 had done key(2)                                                   
                                               value(x 2 23 y)                                                      
                                               Op(Append) from(C0)                                                  
                                               OIndex(42) test6                                                     
C0 ok(false) ERR() from                                                                                             
S0 in test6                                                                                                         
C0 ERROR Append key(2)                                                                                              
value(x 2 23 y)                                                                                                     
from(S0)                                                                                                            
C0 send to S1 Append                                                                                                
Key(2) value(x 2 23 y)                                                                                              
CIndex(0) OIndex(42)                                                                                                
test7                                                                                                               
                        S1 commit(0)                                                                                
                        applied(0) lenlog(3)                                                                        
                        rf.X(223) in(440)                                                                           
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(447)                
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(423)                             
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(437)                                                                                                             
                                               S2 -> 0 app fail                                                     
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(4)                                                 
                                               rf.X(223) in(428)                                                    
                                               S2 -> 3 app fail                                                     
                        S1 commit(0)                                                                                
                        applied(0) lenlog(3)                                                                        
                        rf.X(223) in(441)                                                                           
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(424)                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(448)                
                                                                                             S4 the num is (394)    
                                                                                             applidindex(217) X(217)
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(438)                                                                                                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(4)                                                 
                                               rf.X(223) in(429)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(3)                                                                        
                        rf.X(223) in(442)                                                                           
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(425)                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(449)                
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(439)                                                                                                             
                                                                      S3 <-- C0 Get key(2)                          
                                                                      test7                                         
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S1 in test7                                                                                                    
C0 Append err() fail                                                                                                
key(2) value(x 2 23 y)                                                                                              
r.index(0) from(S1)1                                                                                                
C0 send to S2 Append                                                                                                
Key(2) value(x 2 23 y)                                                                                              
CIndex(0) OIndex(42)                                                                                                
test8                                                                                                               
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(4)                                                 
                                               rf.X(223) in(430)                                                    
                                               S2 time out                                                          
                                                                                             C4 ok(false) ERR() from
                                                                                             S3 in test1            
                                                                                             C4 ERROR Append key(0) 
                                                                                             value(x 0 23 y)        
                                                                                             from(S3)               
                                                                                             C4 send to S4 Append   
                                                                                             Key(0) value(x 0 23 y) 
                                                                                             CIndex(4) OIndex(43)   
                                                                                             test2                  
                                               S2 -> 0 app fail                                                     
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(426)                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(450)                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(3)                                                                        
                        rf.X(223) in(443)                                                                           
                                               S2 -> 4 app fail                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(440)                                                                                                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(4)                                                 
                                               rf.X(223) in(431)                                                    
S0 <-- C0 Get key(2)                                                                                                
test8                                                                                                               
                                               S2 time out                                                          
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S2 in test8                                                                                                    
C0 Append err() fail                                                                                                
key(2) value(x 2 23 y)                                                                                              
r.index(0) from(S2)1                                                                                                
C0 send to S3 Append                                                                                                
Key(2) value(x 2 23 y)                                                                                              
CIndex(0) OIndex(42)                                                                                                
test9                                                                                                               
                                               C2 ok(true)                                                          
                                               ERR(TimeOut) from S1                                                 
                                               in test6                                                             
                                               C2 Append err(TimeOut)                                               
                                               nil key(4) value(x 4                                                 
                                               12 y) r.index(225)                                                   
                                               from(S1)3                                                            
                                               C2 send to S1 Append                                                 
                                               Key(4) value(x 4 12 y)                                               
                                               CIndex(2) OIndex(39)                                                 
                                               test226                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(451)                
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(427)                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(3)                                                                        
                        rf.X(223) in(444)                                                                           
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(441)                                                                                                             
                                               S2 time out                                                          
                                                                      C3 ok(true)                                   
                                                                      ERR(TimeOut) from S1                          
                                                                      in test1                                      
                                                                      C3 Append err(TimeOut)                        
                                                                      nil key(1) value(x 1                          
                                                                      28 y) r.index(226)                            
                                                                      from(S1)3                                     
                                                                      C3 send to S1 Append                          
                                                                      Key(1) value(x 1 28 y)                        
                                                                      CIndex(3) OIndex(54)                          
                                                                      test227                                       
                                                                                             C4 ok(false) ERR() from
                                                                                             S4 in test2            
                                                                                             C4 ERROR Append key(0) 
                                                                                             value(x 0 23 y)        
                                                                                             from(S4)               
                                                                                             C4 send to S0 Append   
                                                                                             Key(0) value(x 0 23 y) 
                                                                                             CIndex(4) OIndex(43)   
                                                                                             test3                  
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(4)                                                 
                                               rf.X(223) in(432)                                                    
                                               S2 <-- C2 Get key(4)                                                 
                                               test226                                                              
                                               S2 have this log({3 54                                               
                                               2 Append 1 x 1 28 y})                                                
                                               in raft the index is                                                 
                                               226                                                                  
                                               S2 <-- C2 Append                                                     
                                               key(4) value(x 4 12 y)                                               
                                               index(226) wait                                                      
                                               test226                                                              
                                               S2 <-- C3 Get key(1)                                                 
                                               test227                                                              
                                               S2 have this log({1 37                                               
                                               2 Append 3 x 3 20 y})                                                
                                               in raft the index is                                                 
                                               227                                                                  
                                               S2 <-- C3 Append                                                     
                                               key(1) value(x 1 28 y)                                               
                                               index(227) wait                                                      
                                               test227                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(452)                
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(428)                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(3)                                                                        
                        rf.X(223) in(445)                                                                           
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(442)                                                                                                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(4)                                                 
                                               rf.X(223) in(433)                                                    
                                                                                             S4 <-- C0 Get key(2)   
                                                                                             test9                  
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(453)                
                        S1 <-- C4 Get key(0)                                                                        
                        test3                                                                                       
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S0 in test3       
                                                                                             C4 Append err() fail   
                                                                                             key(0) value(x 0 23 y) 
                                                                                             r.index(0) from(S0)1   
                                                                                             C4 send to S1 Append   
                                                                                             Key(0) value(x 0 23 y) 
                                                                                             CIndex(4) OIndex(43)   
                                                                                             test4                  
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S3 in test9                                                                                                    
C0 Append err() fail                                                                                                
key(2) value(x 2 23 y)                                                                                              
r.index(0) from(S3)1                                                                                                
C0 send to S4 Append                                                                                                
Key(2) value(x 2 23 y)                                                                                              
CIndex(0) OIndex(42)                                                                                                
test10                                                                                                              
C0 ok(false) ERR() from                                                                                             
S4 in test10                                                                                                        
C0 ERROR Append key(2)                                                                                              
value(x 2 23 y)                                                                                                     
from(S4)                                                                                                            
C0 send to S0 Append                                                                                                
Key(2) value(x 2 23 y)                                                                                              
CIndex(0) OIndex(42)                                                                                                
test11                                                                                                              
                                                                      S3 the num is (697)                           
                                                                      applidindex(217)                              
                                                                      X(212)                                        
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(429)                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(3)                                                                        
                        rf.X(223) in(446)                                                                           
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(4)                                                 
                                               rf.X(223) in(434)                                                    
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(443)                                                                                                             
S0 the num is (343)                                                                                                 
applidindex(217) X(217)                                                                                             
                                               S2 the num is (560)                                                  
                                               applidindex(223)                                                     
                                               X(223)                                                               
                                               S2 time out                                                          
                        C1 ok(true)                                                                                 
                        ERR(TimeOut) from S2                                                                        
                        in test1                                                                                    
                        C1 Append err(TimeOut)                                                                      
                        nil key(3) value(x 3                                                                        
                        20 y) r.index(227)                                                                          
                        from(S2)3                                                                                   
                        C1 send to S2 Append                                                                        
                        Key(3) value(x 3 20 y)                                                                      
                        CIndex(1) OIndex(37)                                                                        
                        test228                                                                                     
                                               S2 have log                                                          
                                               S2 {228 7 {-1 -1 2                                                   
                                               TIMEOUT  }}                                                          
                                               S2 Persist the                                                       
                                               log[[{223 7 {4 42 2                                                  
                                               Append 0 x 0 22 y}}                                                  
                                               {224 7 {4 43 2 Append                                                
                                               0 x 0 23 y}} {225 7 {2                                               
                                               39 2 Append 4 x 4 12                                                 
                                               y}} {226 7 {3 54 2                                                   
                                               Append 1 x 1 28 y}}                                                  
                                               {227 7 {1 37 2 Append                                                
                                               3 x 3 20 y}} {228 7                                                  
                                               {-1 -1 2 TIMEOUT  }}]]                                               
                                               S2 appendentries error                                               
                                               to exit because tindex                                               
                                               or loglen changed                                                    
                                               S2 rf.nextindex[0] = 5                                               
                                               S2 index(5)  Pre(227)                                                
                                               len(5)                                                               
                                               S2 app -> 0 next(5)                                                  
                                               index(5) neT(7) cT(7)                                                
                                               S2 rf.nextindex[1] = 1                                               
                                               S2 index(5)  Pre(223)                                                
                                               len(5)                                                               
                                               S2 app -> 1 next(1)                                                  
                                               index(5) neT(7) cT(7)                                                
                                               S2 rf.nextindex[4] = 5                                               
                                               S2 index(5)  Pre(227)                                                
                                               len(5)                                                               
                                               S2 app -> 4 next(5)                                                  
                                               index(5) neT(7) cT(7)                                                
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(454)                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(3)                                                                        
                        rf.X(223) in(447)                                                                           
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(430)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(5)                                                 
                                               rf.X(223) in(435)                                                    
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(444)                                                                                                             
                                               S2 <-- C1 Get key(3)                                                 
                                               test228                                                              
                                               S2 have log                                                          
                                               S2 {229 7 {1 37 2                                                    
                                               Append 3 x 3 20 y}}                                                  
                                               S2 have this log({1 37                                               
                                               2 Append 3 x 3 20 y})                                                
                                               in raft the index is                                                 
                                               229                                                                  
                                               S2 <-- C1 Append                                                     
                                               key(3) value(x 3 20 y)                                               
                                               index(229) wait                                                      
                                               test228                                                              
                                               S2 Persist the                                                       
                                               log[[{223 7 {4 42 2                                                  
                                               Append 0 x 0 22 y}}                                                  
                                               {224 7 {4 43 2 Append                                                
                                               0 x 0 23 y}} {225 7 {2                                               
                                               39 2 Append 4 x 4 12                                                 
                                               y}} {226 7 {3 54 2                                                   
                                               Append 1 x 1 28 y}}                                                  
                                               {227 7 {1 37 2 Append                                                
                                               3 x 3 20 y}} {228 7                                                  
                                               {-1 -1 2 TIMEOUT  }}                                                 
                                               {229 7 {1 37 2 Append                                                
                                               3 x 3 20 y}}]]                                                       
                                               S2 rf.nextindex[0] = 5                                               
                                               S2 index(6)  Pre(227)                                                
                                               len(6)                                                               
                                               S2 app -> 0 next(5)                                                  
                                               index(6) neT(7) cT(7)                                                
                                               S2 rf.nextindex[1] = 1                                               
                                               S2 index(6)  Pre(223)                                                
                                               len(6)                                                               
                                               S2 app -> 1 next(1)                                                  
                                               index(6) neT(7) cT(7)                                                
                                               S2 rf.nextindex[4] = 5                                               
                                               S2 index(6)  Pre(227)                                                
                                               len(6)                                                               
                                               S2 app -> 4 next(5)                                                  
                                               index(6) neT(7) cT(7)                                                
                                               S2 rf.nextindex[3] = 5                                               
                                               S2 index(6)  Pre(227)                                                
                                               len(6)                                                               
                                               S2 app -> 3 next(5)                                                  
                                               index(6) neT(7) cT(7)                                                
                        S1 the num is (496)                                                                         
                        applidindex(223)                                                                            
                        X(223)                                                                                      
                                                                                             S4 <-- C4 Get key(0)   
                                                                                             test4                  
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S1 in test4       
                                                                                             C4 Append err() fail   
                                                                                             key(0) value(x 0 23 y) 
                                                                                             r.index(0) from(S1)1   
                                                                                             C4 send to S2 Append   
                                                                                             Key(0) value(x 0 23 y) 
                                                                                             CIndex(4) OIndex(43)   
                                                                                             test5                  
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(455)                
C0 ok(false) ERR() from                                                                                             
S0 in test11                                                                                                        
C0 ERROR Append key(2)                                                                                              
value(x 2 23 y)                                                                                                     
from(S0)                                                                                                            
C0 send to S1 Append                                                                                                
Key(2) value(x 2 23 y)                                                                                              
CIndex(0) OIndex(42)                                                                                                
test12                                                                                                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(3)                                                                        
                        rf.X(223) in(448)                                                                           
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(431)                             
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(445)                                                                                                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(6)                                                 
                                               rf.X(223) in(436)                                                    
                        S1  app <- 2 T(7)                                                                           
                        cT(7)                                                                                       
                        S1 YYYY                                                                                     
                        S1 PreT(7) LT(7)                                                                            
                        S1 mat(3) index(1)                                                                          
                        len(4)                                                                                      
                        S1 mat(3) index(2)                                                                          
                        len(4)                                                                                      
                        S1 mat(3) index(3)                                                                          
                        len(4)                                                                                      
                        S1 B success +                                                                              
                        log([{227 7 {1 37 2                                                                         
                        Append 3 x 3 20 y}}                                                                         
                        {228 7 {-1 -1 2                                                                             
                        TIMEOUT  }}])                                                                               
                        S1 Persist the                                                                              
                        log[[{223 7 {4 42 2                                                                         
                        Append 0 x 0 22 y}}                                                                         
                        {224 7 {4 43 2 Append                                                                       
                        0 x 0 23 y}} {225 7 {2                                                                      
                        39 2 Append 4 x 4 12                                                                        
                        y}} {226 7 {3 54 2                                                                          
                        Append 1 x 1 28 y}}                                                                         
                        {227 7 {1 37 2 Append                                                                       
                        3 x 3 20 y}} {228 7                                                                         
                        {-1 -1 2 TIMEOUT  }}]]                                                                      
                        S1 Persist the                                                                              
                        log[[{223 7 {4 42 2                                                                         
                        Append 0 x 0 22 y}}                                                                         
                        {224 7 {4 43 2 Append                                                                       
                        0 x 0 23 y}} {225 7 {2                                                                      
                        39 2 Append 4 x 4 12                                                                        
                        y}} {226 7 {3 54 2                                                                          
                        Append 1 x 1 28 y}}                                                                         
                        {227 7 {1 37 2 Append                                                                       
                        3 x 3 20 y}} {228 7                                                                         
                        {-1 -1 2 TIMEOUT  }}]]                                                                      
                                               S2 update                                                            
                                               nextindex[1](1) to 6                                                 
                                               success                                                              
                                               S2 index(5)                                                          
                                               matchindex([0 5 6 7                                                  
                                               7])                                                                  
                                               S2 successnum(4)                                                     
                                               com-rf.X(0) rf.CT(7)                                                 
                                               t(7)                                                                 
                                               S2 sum(4) ban(2)                                                     
                                               S2 new commit(5) and                                                 
                                               applied                                                              
                                                                      S3 <-- C0 Get key(2)                          
                                                                      test12                                        
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S1 in test12                                                                                                   
C0 Append err() fail                                                                                                
key(2) value(x 2 23 y)                                                                                              
r.index(0) from(S1)1                                                                                                
C0 send to S2 Append                                                                                                
Key(2) value(x 2 23 y)                                                                                              
CIndex(0) OIndex(42)                                                                                                
test13                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(456)                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(5)                                                                        
                        rf.X(223) in(449)                                                                           
                                               S2 -> 0 app fail                                                     
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(432)                             
                                               S2 commit(5)                                                         
                                               applied(0) lenlog(6)                                                 
                                               rf.X(223) in(437)                                                    
                                               S2 lastapp lognode =                                                 
                                               {true {4 43 2 Append 0                                               
                                               x 0 23 y} 224 false []                                               
                                               0 0}                                                                 
                                               S2 comm(5) last(224)                                                 
                                               S2 lastapp lognode =                                                 
                                               {true {2 39 2 Append 4                                               
                                               x 4 12 y} 225 false []                                               
                                               0 0}                                                                 
                                               S2 comm(5) last(225)                                                 
                                               S2 TTT                                                               
                                               CommandValid(true)                                                   
                                               applyindex(223)                                                      
                                               CommandIndex(224)                                                    
                                               Append key(0) value(x                                                
                                               0 23 y) CDM[C4](42)                                                  
                                               M(43) from(2)                                                        
                                               S2 update CDM[4] from                                                
                                               42 to 43 update                                                      
                                               applyindex 223 to 224                                                
                                               S2 write putAdd                                                      
                                               in(224)                                                              
                                               S2 BBBBBBB append                                                    
                                               Key(0) from x 0 0 yx 0                                               
                                               1 yx 0 2 yx 0 3 yx 0 4                                               
                                               yx 0 5 yx 0 6 yx 0 7                                                 
                                               yx 0 8 yx 0 9 yx 0 10                                                
                                               yx 0 11 yx 0 12 yx 0                                                 
                                               13 yx 0 14 yx 0 15 yx                                                
                                               0 16 yx 0 17 yx 0 18                                                 
                                               yx 0 19 yx 0 20 yx 0                                                 
                                               21 yx 0 22 y to                                                      
                                               value(x 0 23 y)                                                      
                                               from(2)                                                              
                                               S2 TTT                                                               
                                               CommandValid(true)                                                   
                                               applyindex(224)                                                      
                                               CommandIndex(225)                                                    
                                               Append key(4) value(x                                                
                                               4 12 y) CDM[C2](38)                                                  
                                               M(39) from(2)                                                        
                                               S2 update CDM[2] from                                                
                                               38 to 39 update                                                      
                                               applyindex 224 to 225                                                
                                               S2 write putAdd                                                      
                                               in(225)                                                              
                                               S2 BBBBBBB append                                                    
                                               Key(4) from x 4 0 yx 4                                               
                                               1 yx 4 2 yx 4 3 yx 4 4                                               
                                               yx 4 5 yx 4 6 yx 4 7                                                 
                                               yx 4 8 yx 4 9 yx 4 10                                                
                                               yx 4 11 y to value(x 4                                               
                                               12 y) from(2)                                                        
                                               S2 lastapp lognode =                                                 
                                               {true {3 54 2 Append 1                                               
                                               x 1 28 y} 226 false []                                               
                                               0 0}                                                                 
                                               S2 comm(5) last(226)                                                 
                                               S2 lastapp lognode =                                                 
                                               {true {1 37 2 Append 3                                               
                                               x 3 20 y} 227 false []                                               
                                               0 0}                                                                 
                                               S2 comm(5) last(227)                                                 
                                               S2 TTT                                                               
                                               CommandValid(true)                                                   
                                               applyindex(225)                                                      
                                               CommandIndex(226)                                                    
                                               Append key(1) value(x                                                
                                               1 28 y) CDM[C3](53)                                                  
                                               M(54) from(2)                                                        
                                               S2 update CDM[3] from                                                
                                               53 to 54 update                                                      
                                               applyindex 225 to 226                                                
                                               S2 write putAdd                                                      
                                               in(226)                                                              
                                               S2 BBBBBBB append                                                    
                                               Key(1) from x 1 0 yx 1                                               
                                               1 yx 1 2 yx 1 3 yx 1 4                                               
                                               yx 1 5 yx 1 6 yx 1 7                                                 
                                               yx 1 8 yx 1 9 yx 1 10                                                
                                               yx 1 11 yx 1 12 yx 1                                                 
                                               13 yx 1 14 yx 1 15 yx                                                
                                               1 16 yx 1 17 yx 1 18                                                 
                                               yx 1 19 yx 1 20 yx 1                                                 
                                               21 yx 1 22 yx 1 23 yx                                                
                                               1 24 yx 1 25 yx 1 26                                                 
                                               yx 1 27 y to value(x 1                                               
                                               28 y) from(2)                                                        
                                               S2 TTT                                                               
                                               CommandValid(true)                                                   
                                               applyindex(226)                                                      
                                               CommandIndex(227)                                                    
                                               Append key(3) value(x                                                
                                               3 20 y) CDM[C1](36)                                                  
                                               M(37) from(2)                                                        
                                               S2 update CDM[1] from                                                
                                               36 to 37 update                                                      
                                               applyindex 226 to 227                                                
                                               S2 write putAdd                                                      
                                               in(227)                                                              
                                               S2 BBBBBBB append                                                    
                                               Key(3) from x 3 0 yx 3                                               
                                               1 yx 3 2 yx 3 3 yx 3 4                                               
                                               yx 3 5 yx 3 6 yx 3 7                                                 
                                               yx 3 8 yx 3 9 yx 3 10                                                
                                               yx 3 11 yx 3 12 yx 3                                                 
                                               13 yx 3 14 yx 3 15 yx                                                
                                               3 16 yx 3 17 yx 3 18                                                 
                                               yx 3 19 y to value(x 3                                               
                                               20 y) from(2)                                                        
                                               S2 lastapp lognode =                                                 
                                               {true {-1 -1 2 TIMEOUT                                               
                                               } 228 false [] 0 0}                                                  
                                               S2 comm(5) last(228)                                                 
                                               S2 TTT                                                               
                                               CommandValid(true)                                                   
                                               applyindex(227)                                                      
                                               CommandIndex(228)                                                    
                                               TIMEOUT key() value()                                                
                                               CDM[C-1](0) M(-1)                                                    
                                               from(2)                                                              
                                               S2 for TIMEOUT update                                                
                                               applyindex 227 to 228                                                
                                               S2 Persist the                                                       
                                               log[[{223 7 {4 42 2                                                  
                                               Append 0 x 0 22 y}}                                                  
                                               {224 7 {4 43 2 Append                                                
                                               0 x 0 23 y}} {225 7 {2                                               
                                               39 2 Append 4 x 4 12                                                 
                                               y}} {226 7 {3 54 2                                                   
                                               Append 1 x 1 28 y}}                                                  
                                               {227 7 {1 37 2 Append                                                
                                               3 x 3 20 y}} {228 7                                                  
                                               {-1 -1 2 TIMEOUT  }}                                                 
                                               {229 7 {1 37 2 Append                                                
                                               3 x 3 20 y}}]]                                                       
S0 <-- C4 Get key(0)                                                                                                
test5                                                                                                               
                                               S2 -> 4 app fail                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(446)                                                                                                             
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S2 in test5       
                                                                                             C4 Append err() fail   
                                                                                             key(0) value(x 0 23 y) 
                                                                                             r.index(0) from(S2)1   
                                                                                             C4 send to S3 Append   
                                                                                             Key(0) value(x 0 23 y) 
                                                                                             CIndex(4) OIndex(43)   
                                                                                             test6                  
                        S1  app <- 2 T(7)                                                                           
                        cT(7)                                                                                       
                        S1 YYYY                                                                                     
                        S1 PreT(7) LT(7)                                                                            
                        S1 mat(5) index(1)                                                                          
                        len(6)                                                                                      
                        S1 mat(5) index(2)                                                                          
                        len(6)                                                                                      
                        S1 mat(5) index(3)                                                                          
                        len(6)                                                                                      
                        S1 mat(5) index(4)                                                                          
                        len(6)                                                                                      
                        S1 mat(5) index(5)                                                                          
                        len(6)                                                                                      
                        S1 B success +                                                                              
                        log([{229 7 {1 37 2                                                                         
                        Append 3 x 3 20 y}}])                                                                       
                        S1 Persist the                                                                              
                        log[[{223 7 {4 42 2                                                                         
                        Append 0 x 0 22 y}}                                                                         
                        {224 7 {4 43 2 Append                                                                       
                        0 x 0 23 y}} {225 7 {2                                                                      
                        39 2 Append 4 x 4 12                                                                        
                        y}} {226 7 {3 54 2                                                                          
                        Append 1 x 1 28 y}}                                                                         
                        {227 7 {1 37 2 Append                                                                       
                        3 x 3 20 y}} {228 7                                                                         
                        {-1 -1 2 TIMEOUT  }}                                                                        
                        {229 7 {1 37 2 Append                                                                       
                        3 x 3 20 y}}]]                                                                              
                        S1 Persist the                                                                              
                        log[[{223 7 {4 42 2                                                                         
                        Append 0 x 0 22 y}}                                                                         
                        {224 7 {4 43 2 Append                                                                       
                        0 x 0 23 y}} {225 7 {2                                                                      
                        39 2 Append 4 x 4 12                                                                        
                        y}} {226 7 {3 54 2                                                                          
                        Append 1 x 1 28 y}}                                                                         
                        {227 7 {1 37 2 Append                                                                       
                        3 x 3 20 y}} {228 7                                                                         
                        {-1 -1 2 TIMEOUT  }}                                                                        
                        {229 7 {1 37 2 Append                                                                       
                        3 x 3 20 y}}]]                                                                              
                                               S2 -> 1 app fail                                                     
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(457)                
S0 <-- C0 Get key(2)                                                                                                
test13                                                                                                              
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S2 in test13                                                                                                   
C0 Append err() fail                                                                                                
key(2) value(x 2 23 y)                                                                                              
r.index(0) from(S2)1                                                                                                
C0 send to S3 Append                                                                                                
Key(2) value(x 2 23 y)                                                                                              
CIndex(0) OIndex(42)                                                                                                
test14                                                                                                              
                                                                                             S4 <-- C0 Get key(2)   
                                                                                             test14                 
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S3 in test14                                                                                                   
C0 Append err() fail                                                                                                
key(2) value(x 2 23 y)                                                                                              
r.index(0) from(S3)1                                                                                                
C0 send to S4 Append                                                                                                
Key(2) value(x 2 23 y)                                                                                              
CIndex(0) OIndex(42)                                                                                                
test15                                                                                                              
                                               S2 commit(5)                                                         
                                               applied(5) lenlog(6)                                                 
                                               rf.X(223) in(438)                                                    
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(433)                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(6)                                                                        
                        rf.X(223) in(450)                                                                           
                                                                                             S4 the num is (394)    
                                                                                             applidindex(217) X(217)
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(447)                                                                                                             
                                               S2 <-- C4 Get key(0)                                                 
                                               test6                                                                
                                               S2 had done key(0)                                                   
                                               value(x 0 23 y)                                                      
                                               Op(Append) from(C4)                                                  
                                               OIndex(43) test6                                                     
                                                                                             C4 ok(true) ERR(OK)    
                                                                                             from S3 in test6       
                                                                                             C4 Append err(OK),     
                                                                                             success key(0) value(x 
                                                                                             0 23 y) r.Index(-1)    
                                                                                             from(S3)2              
                                                                                             C4 Get key(0)          
                                                                                             C4 cmd_index(43)1      
                                                                                             C4 cmd_index(44)2      
                                                                                             C4 send to S3 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(1)     
                        S1 <-- C0 Get key(2)                                                                        
                        test15                                                                                      
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S4 in test15                                                                                                   
C0 Append err() fail                                                                                                
key(2) value(x 2 23 y)                                                                                              
r.index(0) from(S4)1                                                                                                
C0 send to S0 Append                                                                                                
Key(2) value(x 2 23 y)                                                                                              
CIndex(0) OIndex(42)                                                                                                
test16                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(458)                
                                               S2 commit(5)                                                         
                                               applied(5) lenlog(6)                                                 
                                               rf.X(223) in(439)                                                    
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(434)                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(6)                                                                        
                        rf.X(223) in(451)                                                                           
                                               S2 <-- C4 Get key(0)                                                 
                                               test1                                                                
                                               S2 start Get key(0)                                                  
                                               S2 have log                                                          
                                               S2 {230 7 {4 44 2 Get                                                
                                               0 }}                                                                 
                                               S2 have this log({4 44                                               
                                               2 Get 0 }) in raft                                                   
                                               S2 <-- C4 Get key(0)                                                 
                                               wait 1                                                               
                                               S2 Persist the                                                       
                                               log[[{223 7 {4 42 2                                                  
                                               Append 0 x 0 22 y}}                                                  
                                               {224 7 {4 43 2 Append                                                
                                               0 x 0 23 y}} {225 7 {2                                               
                                               39 2 Append 4 x 4 12                                                 
                                               y}} {226 7 {3 54 2                                                   
                                               Append 1 x 1 28 y}}                                                  
                                               {227 7 {1 37 2 Append                                                
                                               3 x 3 20 y}} {228 7                                                  
                                               {-1 -1 2 TIMEOUT  }}                                                 
                                               {229 7 {1 37 2 Append                                                
                                               3 x 3 20 y}} {230 7 {4                                               
                                               44 2 Get 0 }}]]                                                      
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(448)                                                                                                             
                                               S2 rf.nextindex[0] = 5                                               
                                               S2 index(7)  Pre(227)                                                
                                               len(7)                                                               
                                               S2 app -> 0 next(5)                                                  
                                               index(7) neT(7) cT(7)                                                
                                               S2 rf.nextindex[1] = 6                                               
                                               S2 index(7)  Pre(228)                                                
                                               len(7)                                                               
                                               S2 app -> 1 next(6)                                                  
                                               index(7) neT(7) cT(7)                                                
                                               S2 rf.nextindex[3] = 5                                               
                                               S2 index(7)  Pre(227)                                                
                                               len(7)                                                               
                                               S2 app -> 3 next(5)                                                  
                                               index(7) neT(7) cT(7)                                                
                                               S2 rf.nextindex[4] = 5                                               
                                               S2 index(7)  Pre(227)                                                
                                               len(7)                                                               
                                               S2 app -> 4 next(5)                                                  
                                               index(7) neT(7) cT(7)                                                
                                               S2 <-- C0 Get key(2)                                                 
                                               test16                                                               
                                               S2 had done key(2)                                                   
                                               value(x 2 23 y)                                                      
                                               Op(Append) from(C0)                                                  
                                               OIndex(42) test16                                                    
C0 ok(true) ERR(OK)                                                                                                 
from S0 in test16                                                                                                   
C0 Append err(OK),                                                                                                  
success key(2) value(x                                                                                              
2 23 y) r.Index(-1)                                                                                                 
from(S0)2                                                                                                           
C0 Get key(2)                                                                                                       
C0 cmd_index(42)1                                                                                                   
C0 cmd_index(43)2                                                                                                   
C0 send to S0 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(1)                                                                                                  
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(459)                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(6)                                                                        
                        rf.X(223) in(452)                                                                           
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(435)                             
                                               S2 commit(5)                                                         
                                               applied(5) lenlog(7)                                                 
                                               rf.X(223) in(440)                                                    
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(449)                                                                                                             
                                               S2 <-- C0 Get key(2)                                                 
                                               test1                                                                
                                               S2 start Get key(2)                                                  
                                               S2 have log                                                          
                                               S2 {231 7 {0 43 2 Get                                                
                                               2 }}                                                                 
                                               S2 have this log({0 43                                               
                                               2 Get 2 }) in raft                                                   
                                               S2 <-- C0 Get key(2)                                                 
                                               wait 1                                                               
                                               S2 Persist the                                                       
                                               log[[{223 7 {4 42 2                                                  
                                               Append 0 x 0 22 y}}                                                  
                                               {224 7 {4 43 2 Append                                                
                                               0 x 0 23 y}} {225 7 {2                                               
                                               39 2 Append 4 x 4 12                                                 
                                               y}} {226 7 {3 54 2                                                   
                                               Append 1 x 1 28 y}}                                                  
                                               {227 7 {1 37 2 Append                                                
                                               3 x 3 20 y}} {228 7                                                  
                                               {-1 -1 2 TIMEOUT  }}                                                 
                                               {229 7 {1 37 2 Append                                                
                                               3 x 3 20 y}} {230 7 {4                                               
                                               44 2 Get 0 }} {231 7                                                 
                                               {0 43 2 Get 2 }}]]                                                   
                                               S2 rf.nextindex[1] = 6                                               
                                               S2 index(8)  Pre(228)                                                
                                               len(8)                                                               
                                               S2 app -> 1 next(6)                                                  
                                               index(8) neT(7) cT(7)                                                
                                               S2 rf.nextindex[0] = 5                                               
                                               S2 index(8)  Pre(227)                                                
                                               len(8)                                                               
                                               S2 app -> 0 next(5)                                                  
                                               index(8) neT(7) cT(7)                                                
                                               S2 rf.nextindex[3] = 5                                               
                                               S2 index(8)  Pre(227)                                                
                                               len(8)                                                               
                                               S2 app -> 3 next(5)                                                  
                                               index(8) neT(7) cT(7)                                                
                                               S2 rf.nextindex[4] = 5                                               
                                               S2 index(8)  Pre(227)                                                
                                               len(8)                                                               
                                               S2 app -> 4 next(5)                                                  
                                               index(8) neT(7) cT(7)                                                
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(460)                
                                               S2 -> 3 app fail                                                     
                                               S2 commit(5)                                                         
                                               applied(5) lenlog(8)                                                 
                                               rf.X(223) in(441)                                                    
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(436)                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(6)                                                                        
                        rf.X(223) in(453)                                                                           
                                               S2 -> 3 app fail                                                     
                                               S2 -> 4 app fail                                                     
                                               S2 -> 0 app fail                                                     
                                               S2 -> 1 app fail                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(450)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(461)                
                        S1  app <- 2 T(7)                                                                           
                        cT(7)                                                                                       
                        S1 YYYY                                                                                     
                        S1 PreT(7) LT(7)                                                                            
                        S1 mat(6) index(6)                                                                          
                        len(7)                                                                                      
                        S1 B success +                                                                              
                        log([{230 7 {4 44 2                                                                         
                        Get 0 }} {231 7 {0 43                                                                       
                        2 Get 2 }}])                                                                                
                        S1 update commit(228)                                                                       
                        S1 Persist the                                                                              
                        log[[{223 7 {4 42 2                                                                         
                        Append 0 x 0 22 y}}                                                                         
                        {224 7 {4 43 2 Append                                                                       
                        0 x 0 23 y}} {225 7 {2                                                                      
                        39 2 Append 4 x 4 12                                                                        
                        y}} {226 7 {3 54 2                                                                          
                        Append 1 x 1 28 y}}                                                                         
                        {227 7 {1 37 2 Append                                                                       
                        3 x 3 20 y}} {228 7                                                                         
                        {-1 -1 2 TIMEOUT  }}                                                                        
                        {229 7 {1 37 2 Append                                                                       
                        3 x 3 20 y}} {230 7 {4                                                                      
                        44 2 Get 0 }} {231 7                                                                        
                        {0 43 2 Get 2 }}]]                                                                          
                                               S2 update                                                            
                                               nextindex[1](6) to 9                                                 
                                               success                                                              
                                               S2 index(8)                                                          
                                               matchindex([0 8 8 7                                                  
                                               7])                                                                  
                                               S2 successnum(2)                                                     
                                               com-rf.X(5) rf.CT(7)                                                 
                                               t(7)                                                                 
                                               S2 commit(5)                                                         
                                               applied(5) lenlog(8)                                                 
                                               rf.X(223) in(442)                                                    
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(437)                             
                        S1 Persist the                                                                              
                        log[[{223 7 {4 42 2                                                                         
                        Append 0 x 0 22 y}}                                                                         
                        {224 7 {4 43 2 Append                                                                       
                        0 x 0 23 y}} {225 7 {2                                                                      
                        39 2 Append 4 x 4 12                                                                        
                        y}} {226 7 {3 54 2                                                                          
                        Append 1 x 1 28 y}}                                                                         
                        {227 7 {1 37 2 Append                                                                       
                        3 x 3 20 y}} {228 7                                                                         
                        {-1 -1 2 TIMEOUT  }}                                                                        
                        {229 7 {1 37 2 Append                                                                       
                        3 x 3 20 y}} {230 7 {4                                                                      
                        44 2 Get 0 }} {231 7                                                                        
                        {0 43 2 Get 2 }}]]                                                                          
                        S1 commit(5)                                                                                
                        applied(0) lenlog(8)                                                                        
                        rf.X(223) in(454)                                                                           
                        S1 lastapp lognode =                                                                        
                        {true {4 43 2 Append 0                                                                      
                        x 0 23 y} 224 false []                                                                      
                        0 0}                                                                                        
                        S1 comm(5) last(224)                                                                        
                        S1 lastapp lognode =                                                                        
                        {true {2 39 2 Append 4                                                                      
                        x 4 12 y} 225 false []                                                                      
                        0 0}                                                                                        
                        S1 TTT                                                                                      
                        CommandValid(true)                                                                          
                        applyindex(223)                                                                             
                        CommandIndex(224)                                                                           
                        Append key(0) value(x                                                                       
                        0 23 y) CDM[C4](42)                                                                         
                        M(43) from(2)                                                                               
                        S1 comm(5) last(225)                                                                        
                        S1 update CDM[4] from                                                                       
                        42 to 43 update                                                                             
                        applyindex 223 to 224                                                                       
                        S1 can not write                                                                            
                        putAdd in(224)                                                                              
                        S1 BBBBBBB append                                                                           
                        Key(0) from x 0 0 yx 0                                                                      
                        1 yx 0 2 yx 0 3 yx 0 4                                                                      
                        yx 0 5 yx 0 6 yx 0 7                                                                        
                        yx 0 8 yx 0 9 yx 0 10                                                                       
                        yx 0 11 yx 0 12 yx 0                                                                        
                        13 yx 0 14 yx 0 15 yx                                                                       
                        0 16 yx 0 17 yx 0 18                                                                        
                        yx 0 19 yx 0 20 yx 0                                                                        
                        21 yx 0 22 y to                                                                             
                        value(x 0 23 y)                                                                             
                        from(2)                                                                                     
                        S1 TTT                                                                                      
                        CommandValid(true)                                                                          
                        applyindex(224)                                                                             
                        CommandIndex(225)                                                                           
                        Append key(4) value(x                                                                       
                        4 12 y) CDM[C2](38)                                                                         
                        M(39) from(2)                                                                               
                        S1 update CDM[2] from                                                                       
                        38 to 39 update                                                                             
                        applyindex 224 to 225                                                                       
                        S1 can not write                                                                            
                        putAdd in(225)                                                                              
                        S1 BBBBBBB append                                                                           
                        Key(4) from x 4 0 yx 4                                                                      
                        1 yx 4 2 yx 4 3 yx 4 4                                                                      
                        yx 4 5 yx 4 6 yx 4 7                                                                        
                        yx 4 8 yx 4 9 yx 4 10                                                                       
                        yx 4 11 y to value(x 4                                                                      
                        12 y) from(2)                                                                               
                        S1 lastapp lognode =                                                                        
                        {true {3 54 2 Append 1                                                                      
                        x 1 28 y} 226 false []                                                                      
                        0 0}                                                                                        
                        S1 comm(5) last(226)                                                                        
                        S1 lastapp lognode =                                                                        
                        {true {1 37 2 Append 3                                                                      
                        x 3 20 y} 227 false []                                                                      
                        0 0}                                                                                        
                        S1 comm(5) last(227)                                                                        
                        S1 TTT                                                                                      
                        CommandValid(true)                                                                          
                        applyindex(225)                                                                             
                        CommandIndex(226)                                                                           
                        Append key(1) value(x                                                                       
                        1 28 y) CDM[C3](53)                                                                         
                        M(54) from(2)                                                                               
                        S1 update CDM[3] from                                                                       
                        53 to 54 update                                                                             
                        applyindex 225 to 226                                                                       
                        S1 can not write                                                                            
                        putAdd in(226)                                                                              
                        S1 BBBBBBB append                                                                           
                        Key(1) from x 1 0 yx 1                                                                      
                        1 yx 1 2 yx 1 3 yx 1 4                                                                      
                        yx 1 5 yx 1 6 yx 1 7                                                                        
                        yx 1 8 yx 1 9 yx 1 10                                                                       
                        yx 1 11 yx 1 12 yx 1                                                                        
                        13 yx 1 14 yx 1 15 yx                                                                       
                        1 16 yx 1 17 yx 1 18                                                                        
                        yx 1 19 yx 1 20 yx 1                                                                        
                        21 yx 1 22 yx 1 23 yx                                                                       
                        1 24 yx 1 25 yx 1 26                                                                        
                        yx 1 27 y to value(x 1                                                                      
                        28 y) from(2)                                                                               
                        S1 TTT                                                                                      
                        CommandValid(true)                                                                          
                        applyindex(226)                                                                             
                        CommandIndex(227)                                                                           
                        Append key(3) value(x                                                                       
                        3 20 y) CDM[C1](36)                                                                         
                        M(37) from(2)                                                                               
                        S1 update CDM[1] from                                                                       
                        36 to 37 update                                                                             
                        applyindex 226 to 227                                                                       
                        S1 can not write                                                                            
                        putAdd in(227)                                                                              
                        S1 lastapp lognode =                                                                        
                        {true {-1 -1 2 TIMEOUT                                                                      
                        } 228 false [] 0 0}                                                                         
                        S1 comm(5) last(228)                                                                        
                        S1 BBBBBBB append                                                                           
                        Key(3) from x 3 0 yx 3                                                                      
                        1 yx 3 2 yx 3 3 yx 3 4                                                                      
                        yx 3 5 yx 3 6 yx 3 7                                                                        
                        yx 3 8 yx 3 9 yx 3 10                                                                       
                        yx 3 11 yx 3 12 yx 3                                                                        
                        13 yx 3 14 yx 3 15 yx                                                                       
                        3 16 yx 3 17 yx 3 18                                                                        
                        yx 3 19 y to value(x 3                                                                      
                        20 y) from(2)                                                                               
                        S1 TTT                                                                                      
                        CommandValid(true)                                                                          
                        applyindex(227)                                                                             
                        CommandIndex(228)                                                                           
                        TIMEOUT key() value()                                                                       
                        CDM[C-1](0) M(-1)                                                                           
                        from(2)                                                                                     
                        S1 for TIMEOUT update                                                                       
                        applyindex 227 to 228                                                                       
                        S1 Persist the                                                                              
                        log[[{223 7 {4 42 2                                                                         
                        Append 0 x 0 22 y}}                                                                         
                        {224 7 {4 43 2 Append                                                                       
                        0 x 0 23 y}} {225 7 {2                                                                      
                        39 2 Append 4 x 4 12                                                                        
                        y}} {226 7 {3 54 2                                                                          
                        Append 1 x 1 28 y}}                                                                         
                        {227 7 {1 37 2 Append                                                                       
                        3 x 3 20 y}} {228 7                                                                         
                        {-1 -1 2 TIMEOUT  }}                                                                        
                        {229 7 {1 37 2 Append                                                                       
                        3 x 3 20 y}} {230 7 {4                                                                      
                        44 2 Get 0 }} {231 7                                                                        
                        {0 43 2 Get 2 }}]]                                                                          
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(451)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(462)                
                                               S2 -> 3 app fail                                                     
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(438)                             
                                               S2 commit(5)                                                         
                                               applied(5) lenlog(8)                                                 
                                               rf.X(223) in(443)                                                    
                        S1 commit(5)                                                                                
                        applied(5) lenlog(8)                                                                        
                        rf.X(223) in(455)                                                                           
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(452)                                                                                                             
                                                                      S3 the num is (697)                           
                                                                      applidindex(217)                              
                                                                      X(212)                                        
S0 the num is (343)                                                                                                 
applidindex(217) X(217)                                                                                             
                                               S2 the num is (766)                                                  
                                               applidindex(228)                                                     
                                               X(223)                                                               
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(463)                
                                               S2 commit(5)                                                         
                                               applied(5) lenlog(8)                                                 
                                               rf.X(223) in(444)                                                    
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(439)                             
                        S1 commit(5)                                                                                
                        applied(5) lenlog(8)                                                                        
                        rf.X(223) in(456)                                                                           
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(453)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(464)                
                        S1 the num is (766)                                                                         
                        applidindex(228)                                                                            
                        X(223)                                                                                      
                                               S2 commit(5)                                                         
                                               applied(5) lenlog(8)                                                 
                                               rf.X(223) in(445)                                                    
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(440)                             
                        S1 commit(5)                                                                                
                        applied(5) lenlog(8)                                                                        
                        rf.X(223) in(457)                                                                           
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(454)                                                                                                             
                                               S2 -> 4 app fail                                                     
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(465)                
                                               S2 commit(5)                                                         
                                               applied(5) lenlog(8)                                                 
                                               rf.X(223) in(446)                                                    
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(441)                             
                        S1 commit(5)                                                                                
                        applied(5) lenlog(8)                                                                        
                        rf.X(223) in(458)                                                                           
                                               S2 have log                                                          
                                               S2 {232 7 {-1 -1 2                                                   
                                               TIMEOUT  }}                                                          
                                               S2 rf.nextindex[1] = 9                                               
                                               S2 index(9)  Pre(231)                                                
                                               len(9)                                                               
                                               S2 app -> 1 next(9)                                                  
                                               index(9) neT(7) cT(7)                                                
                                               S2 time out                                                          
                                                                      C3 ok(false) ERR()                            
                                                                      from S1 in test227                            
                                                                      C3 ERROR Append key(1)                        
                                                                      value(x 1 28 y)                               
                                                                      from(S1)                                      
                                                                      C3 send to S2 Append                          
                                                                      Key(1) value(x 1 28 y)                        
                                                                      CIndex(3) OIndex(54)                          
                                                                      test228                                       
                                               S2 Persist the                                                       
                                               log[[{223 7 {4 42 2                                                  
                                               Append 0 x 0 22 y}}                                                  
                                               {224 7 {4 43 2 Append                                                
                                               0 x 0 23 y}} {225 7 {2                                               
                                               39 2 Append 4 x 4 12                                                 
                                               y}} {226 7 {3 54 2                                                   
                                               Append 1 x 1 28 y}}                                                  
                                               {227 7 {1 37 2 Append                                                
                                               3 x 3 20 y}} {228 7                                                  
                                               {-1 -1 2 TIMEOUT  }}                                                 
                                               {229 7 {1 37 2 Append                                                
                                               3 x 3 20 y}} {230 7 {4                                               
                                               44 2 Get 0 }} {231 7                                                 
                                               {0 43 2 Get 2 }} {232                                                
                                               7 {-1 -1 2 TIMEOUT                                                   
                                               }}]]                                                                 
                                               S2 rf.nextindex[0] = 5                                               
                                               S2 index(9)  Pre(227)                                                
                                               len(9)                                                               
                                               S2 app -> 0 next(5)                                                  
                                               index(9) neT(7) cT(7)                                                
                                               S2 rf.nextindex[3] = 5                                               
                                               S2 index(9)  Pre(227)                                                
                                               len(9)                                                               
                                               S2 app -> 3 next(5)                                                  
                                               index(9) neT(7) cT(7)                                                
                                               S2 rf.nextindex[4] = 5                                               
                                               S2 index(9)  Pre(227)                                                
                                               len(9)                                                               
                                               S2 app -> 4 next(5)                                                  
                                               index(9) neT(7) cT(7)                                                
                                               S2 time out                                                          
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(455)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(466)                
                                               S2 -> 0 app fail                                                     
                                               S2 time out                                                          
                                               C2 ok(true)                                                          
                                               ERR(TimeOut) from S1                                                 
                                               in test226                                                           
                                               C2 Append err(TimeOut)                                               
                                               nil key(4) value(x 4                                                 
                                               12 y) r.index(0)                                                     
                                               from(S1)3                                                            
                                               C2 send to S1 Append                                                 
                                               Key(4) value(x 4 12 y)                                               
                                               CIndex(2) OIndex(39)                                                 
                                               test1                                                                
                        C1 ok(true)                                                                                 
                        ERR(TimeOut) from S2                                                                        
                        in test228                                                                                  
                        C1 Append err(TimeOut)                                                                      
                        nil key(3) value(x 3                                                                        
                        20 y) r.index(229)                                                                          
                        from(S2)3                                                                                   
                        C1 send to S2 Append                                                                        
                        Key(3) value(x 3 20 y)                                                                      
                        CIndex(1) OIndex(37)                                                                        
                        test230                                                                                     
                        S1 commit(5)                                                                                
                        applied(5) lenlog(8)                                                                        
                        rf.X(223) in(459)                                                                           
                                               S2 commit(5)                                                         
                                               applied(5) lenlog(9)                                                 
                                               rf.X(223) in(447)                                                    
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(442)                             
                                                                                             S4 the num is (394)    
                                                                                             applidindex(217) X(217)
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(456)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(467)                
                                               S2 -> 4 app fail                                                     
                        S1 commit(5)                                                                                
                        applied(5) lenlog(8)                                                                        
                        rf.X(223) in(460)                                                                           
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(443)                             
                                               S2 commit(5)                                                         
                                               applied(5) lenlog(9)                                                 
                                               rf.X(223) in(448)                                                    
                                               S2 is time out                                                       
                                                                                             C4 ok(true)            
                                                                                             ERR(TimeOut) from S3 in
                                                                                             test1                  
                                                                                             C4 Get nil because     
                                                                                             TimeOut from(S3)       
                                                                                             C4 send to S3 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(231)   
                        S1  app <- 2 T(7)                                                                           
                        cT(7)                                                                                       
                                               S2 <-- C2 Get key(4)                                                 
                                               test1                                                                
                                               S2 had done key(4)                                                   
                                               value(x 4 12 y)                                                      
                                               Op(Append) from(C2)                                                  
                                               OIndex(39) test1                                                     
                                               C2 ok(false) ERR()                                                   
                                               from S1 in test1                                                     
                                               C2 ERROR Append key(4)                                               
                                               value(x 4 12 y)                                                      
                                               from(S1)                                                             
                                               S2 -> 0 app fail                                                     
                                               C2 send to S2 Append                                                 
                                               Key(4) value(x 4 12 y)                                               
                                               CIndex(2) OIndex(39)                                                 
                                               test2                                                                
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(468)                
                        S1 YYYY                                                                                     
                        S1 PreT(7) LT(7)                                                                            
                        S1 B success +                                                                              
                        log([{232 7 {-1 -1 2                                                                        
                        TIMEOUT  }}])                                                                               
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(457)                                                                                                             
                        S1 Persist the                                                                              
                        log[[{223 7 {4 42 2                                                                         
                        Append 0 x 0 22 y}}                                                                         
                        {224 7 {4 43 2 Append                                                                       
                        0 x 0 23 y}} {225 7 {2                                                                      
                        39 2 Append 4 x 4 12                                                                        
                        y}} {226 7 {3 54 2                                                                          
                        Append 1 x 1 28 y}}                                                                         
                        {227 7 {1 37 2 Append                                                                       
                        3 x 3 20 y}} {228 7                                                                         
                        {-1 -1 2 TIMEOUT  }}                                                                        
                        {229 7 {1 37 2 Append                                                                       
                        3 x 3 20 y}} {230 7 {4                                                                      
                        44 2 Get 0 }} {231 7                                                                        
                        {0 43 2 Get 2 }} {232                                                                       
                        7 {-1 -1 2 TIMEOUT                                                                          
                        }}]]                                                                                        
                                               S2 update                                                            
                                               nextindex[1](9) to 10                                                
                                               success                                                              
                                               S2 index(9)                                                          
                                               matchindex([0 9 9 7                                                  
                                               7])                                                                  
                                               S2 successnum(2)                                                     
                                               com-rf.X(5) rf.CT(7)                                                 
                                               t(7)                                                                 
                        S1 Persist the                                                                              
                        log[[{223 7 {4 42 2                                                                         
                        Append 0 x 0 22 y}}                                                                         
                        {224 7 {4 43 2 Append                                                                       
                        0 x 0 23 y}} {225 7 {2                                                                      
                        39 2 Append 4 x 4 12                                                                        
                        y}} {226 7 {3 54 2                                                                          
                        Append 1 x 1 28 y}}                                                                         
                        {227 7 {1 37 2 Append                                                                       
                        3 x 3 20 y}} {228 7                                                                         
                        {-1 -1 2 TIMEOUT  }}                                                                        
                        {229 7 {1 37 2 Append                                                                       
                        3 x 3 20 y}} {230 7 {4                                                                      
                        44 2 Get 0 }} {231 7                                                                        
                        {0 43 2 Get 2 }} {232                                                                       
                        7 {-1 -1 2 TIMEOUT                                                                          
                        }}]]                                                                                        
                        S1 <-- C3 Get key(1)                                                                        
                        test228                                                                                     
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S2 in test228                            
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 28 y)                        
                                                                      r.index(0) from(S2)1                          
                                                                      C3 send to S3 Append                          
                                                                      Key(1) value(x 1 28 y)                        
                                                                      CIndex(3) OIndex(54)                          
                                                                      test229                                       
                                               S2 <-- C1 Get key(3)                                                 
                                               test230                                                              
                                               S2 had done key(3)                                                   
                                               value(x 3 20 y)                                                      
                                               Op(Append) from(C1)                                                  
                                               OIndex(37) test230                                                   
                        C1 ok(true) ERR(OK)                                                                         
                        from S2 in test230                                                                          
                        C1 Append err(OK),                                                                          
                        success key(3) value(x                                                                      
                        3 20 y) r.Index(-1)                                                                         
                        from(S2)2                                                                                   
                        C1 Append key(3)                                                                            
                        value(x 3 21 y)                                                                             
                        C1 cmd_index(37)3                                                                           
                        C1 cmd_index(38)4                                                                           
                        C1 send to S2 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test1                                                                                       
                                               S2 <-- C4 Get key(0)                                                 
                                               test231                                                              
                                               S2 do not have this                                                  
                                               log({4 44 2 Get 0 })                                                 
                                               S2 <-- C4 Get key(0)                                                 
                                               wait 231                                                             
                                               S2 commit(5)                                                         
                                               applied(5) lenlog(9)                                                 
                                               rf.X(223) in(449)                                                    
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(444)                             
                        S1 commit(5)                                                                                
                        applied(5) lenlog(9)                                                                        
                        rf.X(223) in(461)                                                                           
                                               S2 is time out                                                       
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(469)                
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(458)                                                                                                             
C0 ok(false) ERR() from                                                                                             
S0 in test1                                                                                                         
C0 ERROR Get Key(2)                                                                                                 
from(S0)                                                                                                            
C0 send to S1 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(2)                                                                                                  
S0 <-- C3 Get key(1)                                                                                                
test229                                                                                                             
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S3 in test229                            
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 28 y)                        
                                                                      r.index(0) from(S3)1                          
                                                                      C3 send to S4 Append                          
                                                                      Key(1) value(x 1 28 y)                        
                                                                      CIndex(3) OIndex(54)                          
                                                                      test230                                       
                        S1 commit(5)                                                                                
                        applied(5) lenlog(9)                                                                        
                        rf.X(223) in(462)                                                                           
                                               S2 commit(5)                                                         
                                               applied(5) lenlog(9)                                                 
                                               rf.X(223) in(450)                                                    
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(445)                             
                                               S2 <-- C1 Get key(3)                                                 
                                               test1                                                                
                                               S2 have log                                                          
                                               S2 {233 7 {1 38 2                                                    
                                               Append 3 x 3 21 y}}                                                  
                                               S2 have this log({1 38                                               
                                               2 Append 3 x 3 21 y})                                                
                                               in raft the index is                                                 
                                               233                                                                  
                                               S2 <-- C1 Append                                                     
                                               key(3) value(x 3 21 y)                                               
                                               index(233) wait test1                                                
                        S1 <-- C2 Get key(4)                                                                        
                        test2                                                                                       
                                               S2 Persist the                                                       
                                               log[[{223 7 {4 42 2                                                  
                                               Append 0 x 0 22 y}}                                                  
                                               {224 7 {4 43 2 Append                                                
                                               0 x 0 23 y}} {225 7 {2                                               
                                               39 2 Append 4 x 4 12                                                 
                                               y}} {226 7 {3 54 2                                                   
                                               Append 1 x 1 28 y}}                                                  
                                               {227 7 {1 37 2 Append                                                
                                               3 x 3 20 y}} {228 7                                                  
                                               {-1 -1 2 TIMEOUT  }}                                                 
                                               {229 7 {1 37 2 Append                                                
                                               3 x 3 20 y}} {230 7 {4                                               
                                               44 2 Get 0 }} {231 7                                                 
                                               {0 43 2 Get 2 }} {232                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {233 7 {1 38 2 Append                                                
                                               3 x 3 21 y}}]]                                                       
                                               S2 rf.nextindex[3] = 5                                               
                                               S2 index(10)  Pre(227)                                               
                                               len(10)                                                              
                                               S2 app -> 3 next(5)                                                  
                                               index(10) neT(7) cT(7)                                               
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(470)                
                                               S2 -> 3 app fail                                                     
                                               S2 rf.nextindex[0] = 5                                               
                                               S2 index(10)  Pre(227)                                               
                                               len(10)                                                              
                                               S2 app -> 0 next(5)                                                  
                                               index(10) neT(7) cT(7)                                               
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(459)                                                                                                             
                                               S2 rf.nextindex[4] = 5                                               
                                               S2 index(10)  Pre(227)                                               
                                               len(10)                                                              
                                               S2 app -> 4 next(5)                                                  
                                               index(10) neT(7) cT(7)                                               
                                               S2 rf.nextindex[1] =                                                 
                                               10                                                                   
                                               S2 index(10)  Pre(232)                                               
                                               len(10)                                                              
                                               S2 app -> 1 next(10)                                                 
                                               index(10) neT(7) cT(7)                                               
                                                                                             S4 <-- C3 Get key(1)   
                                                                                             test230                
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S4 in test230                            
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 28 y)                        
                                                                      r.index(0) from(S4)1                          
                                                                      C3 send to S0 Append                          
                                                                      Key(1) value(x 1 28 y)                        
                                                                      CIndex(3) OIndex(54)                          
                                                                      test231                                       
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S2 in test2                                                     
                                               C2 Append err() fail                                                 
                                               key(4) value(x 4 12 y)                                               
                                               r.index(0) from(S2)1                                                 
                                               C2 send to S3 Append                                                 
                                               Key(4) value(x 4 12 y)                                               
                                               CIndex(2) OIndex(39)                                                 
                                               test3                                                                
                                               C2 ok(false) ERR()                                                   
                                               from S3 in test3                                                     
                                               C2 ERROR Append key(4)                                               
                                               value(x 4 12 y)                                                      
                                               from(S3)                                                             
                                               C2 send to S4 Append                                                 
                                               Key(4) value(x 4 12 y)                                               
                                               CIndex(2) OIndex(39)                                                 
                                               test4                                                                
                                                                      S3 <-- C0 Get key(2)                          
                                                                      test2                                         
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S1 in test2                                                                                                    
C0 Get fail key(2)                                                                                                  
value() from(S1)                                                                                                    
C0 send to S2 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(3)                                                                                                  
                        S1 commit(5)                                                                                
                        applied(5) lenlog(9)                                                                        
                        rf.X(223) in(463)                                                                           
                                               S2 commit(5)                                                         
                                               applied(5) lenlog(10)                                                
                                               rf.X(223) in(451)                                                    
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(446)                             
                        S1  app <- 2 T(7)                                                                           
                        cT(7)                                                                                       
                        S1 YYYY                                                                                     
                        S1 PreT(7) LT(7)                                                                            
                        S1 B success +                                                                              
                        log([{233 7 {1 38 2                                                                         
                        Append 3 x 3 21 y}}])                                                                       
                        S1 Persist the                                                                              
                        log[[{223 7 {4 42 2                                                                         
                        Append 0 x 0 22 y}}                                                                         
                        {224 7 {4 43 2 Append                                                                       
                        0 x 0 23 y}} {225 7 {2                                                                      
                        39 2 Append 4 x 4 12                                                                        
                        y}} {226 7 {3 54 2                                                                          
                        Append 1 x 1 28 y}}                                                                         
                        {227 7 {1 37 2 Append                                                                       
                        3 x 3 20 y}} {228 7                                                                         
                        {-1 -1 2 TIMEOUT  }}                                                                        
                        {229 7 {1 37 2 Append                                                                       
                        3 x 3 20 y}} {230 7 {4                                                                      
                        44 2 Get 0 }} {231 7                                                                        
                        {0 43 2 Get 2 }} {232                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {233 7 {1 38 2 Append                                                                       
                        3 x 3 21 y}}]]                                                                              
                                               S2 update                                                            
                                               nextindex[1](10) to 11                                               
                                               success                                                              
                                               S2 index(10)                                                         
                                               matchindex([0 10 10 7                                                
                                               7])                                                                  
                                               S2 successnum(2)                                                     
                                               com-rf.X(5) rf.CT(7)                                                 
                                               t(7)                                                                 
                        S1 Persist the                                                                              
                        log[[{223 7 {4 42 2                                                                         
                        Append 0 x 0 22 y}}                                                                         
                        {224 7 {4 43 2 Append                                                                       
                        0 x 0 23 y}} {225 7 {2                                                                      
                        39 2 Append 4 x 4 12                                                                        
                        y}} {226 7 {3 54 2                                                                          
                        Append 1 x 1 28 y}}                                                                         
                        {227 7 {1 37 2 Append                                                                       
                        3 x 3 20 y}} {228 7                                                                         
                        {-1 -1 2 TIMEOUT  }}                                                                        
                        {229 7 {1 37 2 Append                                                                       
                        3 x 3 20 y}} {230 7 {4                                                                      
                        44 2 Get 0 }} {231 7                                                                        
                        {0 43 2 Get 2 }} {232                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {233 7 {1 38 2 Append                                                                       
                        3 x 3 21 y}}]]                                                                              
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(460)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(471)                
S0 <-- C0 Get key(2)                                                                                                
test3                                                                                                               
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S2 in test3                                                                                                    
C0 Get fail key(2)                                                                                                  
value() from(S2)                                                                                                    
C0 send to S3 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(4)                                                                                                  
                                                                      S3 <-- C3 Get key(1)                          
                                                                      test231                                       
                                                                      C3 ok(false) ERR()                            
                                                                      from S0 in test231                            
                                                                      C3 ERROR Append key(1)                        
                                                                      value(x 1 28 y)                               
                                                                      from(S0)                                      
                                                                      C3 send to S1 Append                          
                                                                      Key(1) value(x 1 28 y)                        
                                                                      CIndex(3) OIndex(54)                          
                                                                      test232                                       
                                               S2 commit(5)                                                         
                                               applied(5) lenlog(10)                                                
                                               rf.X(223) in(452)                                                    
                        S1 commit(5)                                                                                
                        applied(5) lenlog(10)                                                                       
                        rf.X(223) in(464)                                                                           
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(447)                             
                                                                                             S4 <-- C0 Get key(2)   
                                                                                             test4                  
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S3 in test4                                                                                                    
C0 Get fail key(2)                                                                                                  
value() from(S3)                                                                                                    
C0 send to S4 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(5)                                                                                                  
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(461)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(472)                
                                                                      S3 the num is (697)                           
                                                                      applidindex(217)                              
                                                                      X(212)                                        
S0 the num is (343)                                                                                                 
applidindex(217) X(217)                                                                                             
                        S1 <-- C0 Get key(2)                                                                        
                        test5                                                                                       
                                                                                             S4 <-- C2 Get key(4)   
                                                                                             test4                  
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S4 in test4                                                     
                                               C2 Append err() fail                                                 
                                               key(4) value(x 4 12 y)                                               
                                               r.index(0) from(S4)1                                                 
                                               C2 send to S0 Append                                                 
                                               Key(4) value(x 4 12 y)                                               
                                               CIndex(2) OIndex(39)                                                 
                                               test5                                                                
                                               S2 the num is (872)                                                  
                                               applidindex(228)                                                     
                                               X(223)                                                               
                                               S2 the size need to                                                  
                                               snap index228                                                        
                                               S2 update nextindex[0]                                               
                                               to 6                                                                 
                                               S2 update mathindex[0]                                               
                                               to 0                                                                 
                                               S2 update nextindex[1]                                               
                                               to 6                                                                 
                                               S2 update mathindex[1]                                               
                                               to 5                                                                 
                                               S2 update nextindex[2]                                               
                                               to 6                                                                 
                                               S2 update mathindex[2]                                               
                                               to 5                                                                 
                                               S2 update nextindex[3]                                               
                                               to 6                                                                 
                                               S2 update mathindex[3]                                               
                                               to 2                                                                 
                                               S2 update nextindex[4]                                               
                                               to 6                                                                 
                                               S2 update mathindex[4]                                               
                                               to 2                                                                 
                                               S2 index(228)                                                        
                                               logindex(233)                                                        
                                               len(6)AAAAAAAAAAAAAAA…                                               
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}}]]                                                             
                                               S2 -> 4 app fail                                                     
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S4 in test5                                                                                                    
C0 Get fail key(2)                                                                                                  
value() from(S4)                                                                                                    
C0 send to S0 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(6)                                                                                                  
                                               S2 <-- C0 Get key(2)                                                 
                                               test6                                                                
S0 <-- C2 Get key(4)                                                                                                
test5                                                                                                               
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(448)                             
                                               S2 snapshot to                                                       
                                               applymsg                                                             
                                               lastindex(228)                                                       
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(5)                                                 
                                               rf.X(228) in(453)                                                    
                                               S2 do not have this                                                  
                                               log({0 43 2 Get 2 })                                                 
                                               S2 <-- C0 Get key(2)                                                 
                                               wait 6                                                               
                                               S2 the snapshot                                                      
                                               applied                                                              
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S0 in test5                                                     
                                               C2 Append err() fail                                                 
                                               key(4) value(x 4 12 y)                                               
                                               r.index(0) from(S0)1                                                 
                                               C2 send to S1 Append                                                 
                                               Key(4) value(x 4 12 y)                                               
                                               CIndex(2) OIndex(39)                                                 
                                               test6                                                                
                        S1 commit(5)                                                                                
                        applied(5) lenlog(10)                                                                       
                        rf.X(223) in(465)                                                                           
                                               S2 recover by SnapShot                                               
                                               update applyindex(228)                                               
                                               to 228 the kvs is                                                    
                                               map[0:x 0 0 yx 0 1 yx                                                
                                               0 2 yx 0 3 yx 0 4 yx 0                                               
                                               5 yx 0 6 yx 0 7 yx 0 8                                               
                                               yx 0 9 yx 0 10 yx 0 11                                               
                                               yx 0 12 yx 0 13 yx 0                                                 
                                               14 yx 0 15 yx 0 16 yx                                                
                                               0 17 yx 0 18 yx 0 19                                                 
                                               yx 0 20 yx 0 21 yx 0                                                 
                                               22 yx 0 23 y 1:x 1 0                                                 
                                               yx 1 1 yx 1 2 yx 1 3                                                 
                                               yx 1 4 yx 1 5 yx 1 6                                                 
                                               yx 1 7 yx 1 8 yx 1 9                                                 
                                               yx 1 10 yx 1 11 yx 1                                                 
                                               12 yx 1 13 yx 1 14 yx                                                
                                               1 15 yx 1 16 yx 1 17                                                 
                                               yx 1 18 yx 1 19 yx 1                                                 
                                               20 yx 1 21 yx 1 22 yx                                                
                                               1 23 yx 1 24 yx 1 25                                                 
                                               yx 1 26 yx 1 27 yx 1                                                 
                                               28 y 2:x 2 0 yx 2 1 yx                                               
                                               2 2 yx 2 3 yx 2 4 yx 2                                               
                                               5 yx 2 6 yx 2 7 yx 2 8                                               
                                               yx 2 9 yx 2 10 yx 2 11                                               
                                               yx 2 12 yx 2 13 yx 2                                                 
                                               14 yx 2 15 yx 2 16 yx                                                
                                               2 17 yx 2 18 yx 2 19                                                 
                                               yx 2 20 yx 2 21 yx 2                                                 
                                               22 yx 2 23 y 3:x 3 0                                                 
                                               yx 3 1 yx 3 2 yx 3 3                                                 
                                               yx 3 4 yx 3 5 yx 3 6                                                 
                                               yx 3 7 yx 3 8 yx 3 9                                                 
                                               yx 3 10 yx 3 11 yx 3                                                 
                                               12 yx 3 13 yx 3 14 yx                                                
                                               3 15 yx 3 16 yx 3 17                                                 
                                               yx 3 18 yx 3 19 yx 3                                                 
                                               20 y 4:x 4 0 yx 4 1 yx                                               
                                               4 2 yx 4 3 yx 4 4 yx 4                                               
                                               5 yx 4 6 yx 4 7 yx 4 8                                               
                                               yx 4 9 yx 4 10 yx 4 11                                               
                                               yx 4 12 y]                                                           
                                               S2 <-- C3 Get key(1)                                                 
                                               test232                                                              
                                               S2 had done key(1)                                                   
                                               value(x 1 28 y)                                                      
                                               Op(Append) from(C3)                                                  
                                               OIndex(54) test232                                                   
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(462)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(473)                
                                                                      C3 ok(true) ERR(OK)                           
                                                                      from S1 in test232                            
                                                                      C3 Append err(OK),                            
                                                                      success key(1) value(x                        
                                                                      1 28 y) r.Index(-1)                           
                                                                      from(S1)2                                     
                                                                      C3 Append key(1)                              
                                                                      value(x 1 29 y)                               
                                                                      C3 cmd_index(54)3                             
                                                                      C3 cmd_index(55)4                             
                                                                      C3 send to S1 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test1                                         
                                               S2 -> 0 app fail                                                     
                        S1 the num is (872)                                                                         
                        applidindex(228)                                                                            
                        X(223)                                                                                      
                        S1 the size need to                                                                         
                        snap index228                                                                               
                        S1 update nextindex[0]                                                                      
                        to 6                                                                                        
                        S1 update mathindex[0]                                                                      
                        to 0                                                                                        
                        S1 update nextindex[1]                                                                      
                        to 6                                                                                        
                        S1 update mathindex[1]                                                                      
                        to 6                                                                                        
                        S1 update nextindex[2]                                                                      
                        to 6                                                                                        
                        S1 update mathindex[2]                                                                      
                        to 0                                                                                        
                        S1 update nextindex[3]                                                                      
                        to 6                                                                                        
                        S1 update mathindex[3]                                                                      
                        to 0                                                                                        
                        S1 update nextindex[4]                                                                      
                        to 6                                                                                        
                        S1 update mathindex[4]                                                                      
                        to 0                                                                                        
                        S1 index(228)                                                                               
                        logindex(233)                                                                               
                        len(6)AAAAAAAAAAAAAAA…                                                                      
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}}]]                                                                                    
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(449)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(5)                                                 
                                               rf.X(228) in(454)                                                    
                        S1 snapshot to                                                                              
                        applymsg                                                                                    
                        lastindex(228)                                                                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(5)                                                                        
                        rf.X(228) in(466)                                                                           
                        S1 the snapshot                                                                             
                        applied                                                                                     
                        S1 recover by SnapShot                                                                      
                        update applyindex(228)                                                                      
                        to 228 the kvs is                                                                           
                        map[0:x 0 0 yx 0 1 yx                                                                       
                        0 2 yx 0 3 yx 0 4 yx 0                                                                      
                        5 yx 0 6 yx 0 7 yx 0 8                                                                      
                        yx 0 9 yx 0 10 yx 0 11                                                                      
                        yx 0 12 yx 0 13 yx 0                                                                        
                        14 yx 0 15 yx 0 16 yx                                                                       
                        0 17 yx 0 18 yx 0 19                                                                        
                        yx 0 20 yx 0 21 yx 0                                                                        
                        22 yx 0 23 y 1:x 1 0                                                                        
                        yx 1 1 yx 1 2 yx 1 3                                                                        
                        yx 1 4 yx 1 5 yx 1 6                                                                        
                        yx 1 7 yx 1 8 yx 1 9                                                                        
                        yx 1 10 yx 1 11 yx 1                                                                        
                        12 yx 1 13 yx 1 14 yx                                                                       
                        1 15 yx 1 16 yx 1 17                                                                        
                        yx 1 18 yx 1 19 yx 1                                                                        
                        20 yx 1 21 yx 1 22 yx                                                                       
                        1 23 yx 1 24 yx 1 25                                                                        
                        yx 1 26 yx 1 27 yx 1                                                                        
                        28 y 2:x 2 0 yx 2 1 yx                                                                      
                        2 2 yx 2 3 yx 2 4 yx 2                                                                      
                        5 yx 2 6 yx 2 7 yx 2 8                                                                      
                        yx 2 9 yx 2 10 yx 2 11                                                                      
                        yx 2 12 yx 2 13 yx 2                                                                        
                        14 yx 2 15 yx 2 16 yx                                                                       
                        2 17 yx 2 18 yx 2 19                                                                        
                        yx 2 20 yx 2 21 yx 2                                                                        
                        22 yx 2 23 y 3:x 3 0                                                                        
                        yx 3 1 yx 3 2 yx 3 3                                                                        
                        yx 3 4 yx 3 5 yx 3 6                                                                        
                        yx 3 7 yx 3 8 yx 3 9                                                                        
                        yx 3 10 yx 3 11 yx 3                                                                        
                        12 yx 3 13 yx 3 14 yx                                                                       
                        3 15 yx 3 16 yx 3 17                                                                        
                        yx 3 18 yx 3 19 yx 3                                                                        
                        20 y 4:x 4 0 yx 4 1 yx                                                                      
                        4 2 yx 4 3 yx 4 4 yx 4                                                                      
                        5 yx 4 6 yx 4 7 yx 4 8                                                                      
                        yx 4 9 yx 4 10 yx 4 11                                                                      
                        yx 4 12 y]                                                                                  
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(463)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(474)                
                                               S2 -> 4 app fail                                                     
                                                                      C3 ok(false) ERR()                            
                                                                      from S1 in test1                              
                                                                      C3 ERROR Append key(1)                        
                                                                      value(x 1 29 y)                               
                                                                      from(S1)                                      
                                                                      C3 send to S2 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test2                                         
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(450)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(5)                                                 
                                               rf.X(228) in(455)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(5)                                                                        
                        rf.X(228) in(467)                                                                           
                                               S2 <-- C2 Get key(4)                                                 
                                               test6                                                                
                                               S2 had done key(4)                                                   
                                               value(x 4 12 y)                                                      
                                               Op(Append) from(C2)                                                  
                                               OIndex(39) test6                                                     
                                               C2 ok(true) ERR(OK)                                                  
                                               from S1 in test6                                                     
                                               C2 Append err(OK),                                                   
                                               success key(4) value(x                                               
                                               4 12 y) r.Index(-1)                                                  
                                               from(S1)2                                                            
                                               C2 Get key(4)                                                        
                                               C2 cmd_index(39)1                                                    
                                               C2 cmd_index(40)2                                                    
                                               C2 send to S1 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(1)                                                   
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(475)                
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(464)                                                                                                             
                                               S2 <-- C2 Get key(4)                                                 
                                               test1                                                                
                                               S2 start Get key(4)                                                  
                                               S2 have log                                                          
                                               S2 {234 7 {2 40 2 Get                                                
                                               4 }}                                                                 
                                               S2 have this log({2 40                                               
                                               2 Get 4 }) in raft                                                   
                                               S2 <-- C2 Get key(4)                                                 
                                               wait 1                                                               
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }}]]                                                           
                                               S2 appendentries error                                               
                                               to exit because tindex                                               
                                               or loglen changed                                                    
                                               S2 rf.nextindex[0] = 6                                               
                                               S2 index(6)  Pre(233)                                                
                                               len(6)                                                               
                                               S2 app -> 0 next(6)                                                  
                                               index(6) neT(7) cT(7)                                                
                                               S2 rf.nextindex[3] = 6                                               
                                               S2 index(6)  Pre(233)                                                
                                               len(6)                                                               
                                               S2 app -> 3 next(6)                                                  
                                               index(6) neT(7) cT(7)                                                
                                               S2 rf.nextindex[4] = 6                                               
                                               S2 index(6)  Pre(233)                                                
                                               len(6)                                                               
                                               S2 app -> 4 next(6)                                                  
                                               index(6) neT(7) cT(7)                                                
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(6)                                                 
                                               rf.X(228) in(456)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(5)                                                                        
                        rf.X(228) in(468)                                                                           
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(451)                             
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(465)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(476)                
                                                                                             S4 the num is (394)    
                                                                                             applidindex(217) X(217)
                                               S2 -> 0 app fail                                                     
                                               S2 -> 3 app fail                                                     
                        S1 <-- C3 Get key(1)                                                                        
                        test2                                                                                       
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S2 in test2                              
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S2)1                          
                                                                      C3 send to S3 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test3                                         
                                                                      C3 ok(false) ERR()                            
                                                                      from S3 in test3                              
                                                                      C3 ERROR Append key(1)                        
                                                                      value(x 1 29 y)                               
                                                                      from(S3)                                      
                                                                      C3 send to S4 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test4                                         
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(452)                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(5)                                                                        
                        rf.X(228) in(469)                                                                           
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(6)                                                 
                                               rf.X(228) in(457)                                                    
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(466)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(477)                
                                               S2 -> 3 app fail                                                     
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(453)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(6)                                                 
                                               rf.X(228) in(458)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(5)                                                                        
                        rf.X(228) in(470)                                                                           
                                               S2 is time out                                                       
                                                                                             C4 ok(true)            
                                                                                             ERR(TimeOut) from S3 in
                                                                                             test231                
                                                                                             C4 Get nil because     
                                                                                             TimeOut from(S3)       
                                                                                             C4 send to S3 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(231)   
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(467)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(478)                
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(6)                                                 
                                               rf.X(228) in(459)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(5)                                                                        
                        rf.X(228) in(471)                                                                           
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(454)                             
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(468)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(479)                
                                               S2 time out                                                          
                        C1 ok(true)                                                                                 
                        ERR(TimeOut) from S2                                                                        
                        in test1                                                                                    
                        C1 Append err(TimeOut)                                                                      
                        nil key(3) value(x 3                                                                        
                        21 y) r.index(233)                                                                          
                        from(S2)3                                                                                   
                        C1 send to S2 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test234                                                                                     
                                                                      C3 ok(false) ERR()                            
                                                                      from S4 in test4                              
                                                                      C3 ERROR Append key(1)                        
                                                                      value(x 1 29 y)                               
                                                                      from(S4)                                      
                                                                      C3 send to S0 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test5                                         
                                               S2 <-- C4 Get key(0)                                                 
                                               test231                                                              
                                               S2 do not have this                                                  
                                               log({4 44 2 Get 0 })                                                 
                                               S2 <-- C4 Get key(0)                                                 
                                               wait 231                                                             
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(455)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(6)                                                 
                                               rf.X(228) in(460)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(5)                                                                        
                        rf.X(228) in(472)                                                                           
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(480)                
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(469)                                                                                                             
                                               S2 <-- C1 Get key(3)                                                 
                                               test234                                                              
                                               S2 have this log({2 40                                               
                                               2 Get 4 }) in raft the                                               
                                               index is 234                                                         
                                               S2 <-- C1 Append                                                     
                                               key(3) value(x 3 21 y)                                               
                                               index(234) wait                                                      
                                               test234                                                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(5)                                                                        
                        rf.X(228) in(473)                                                                           
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(456)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(6)                                                 
                                               rf.X(228) in(461)                                                    
                                                                      S3 <-- C3 Get key(1)                          
                                                                      test5                                         
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S0 in test5                              
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S0)1                          
                                                                      C3 send to S1 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test6                                         
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(470)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(481)                
                                               S2 -> 4 app fail                                                     
                                                                      S3 the num is (697)                           
                                                                      applidindex(217)                              
                                                                      X(212)                                        
S0 the num is (343)                                                                                                 
applidindex(217) X(217)                                                                                             
                                               S2 the num is (607)                                                  
                                               applidindex(228)                                                     
                                               X(228)                                                               
                        S1 commit(0)                                                                                
                        applied(0) lenlog(5)                                                                        
                        rf.X(228) in(474)                                                                           
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(457)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(6)                                                 
                                               rf.X(228) in(462)                                                    
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(471)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(482)                
                                               S2 -> 0 app fail                                                     
                                               S2 is time out                                                       
                                               S2 have log                                                          
                                               S2 {235 7 {-1 -1 2                                                   
                                               TIMEOUT  }}                                                          
                                               S2 rf.nextindex[1] = 6                                               
                                               S2 index(7)  Pre(233)                                                
                                               len(7)                                                               
                                               S2 app -> 1 next(6)                                                  
                                               index(7) neT(7) cT(7)                                                
                                               S2 rf.nextindex[0] = 6                                               
                                               S2 index(7)  Pre(233)                                                
                                               len(7)                                                               
                                               S2 app -> 0 next(6)                                                  
                                               index(7) neT(7) cT(7)                                                
C0 ok(true)                                                                                                         
ERR(TimeOut) from S0 in                                                                                             
test6                                                                                                               
C0 Get nil because                                                                                                  
TimeOut from(S0)                                                                                                    
C0 send to S0 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(1)                                                                                                  
                                               S2 rf.nextindex[3] = 6                                               
                                               S2 index(7)  Pre(233)                                                
                                               len(7)                                                               
                                               S2 app -> 3 next(6)                                                  
                                               index(7) neT(7) cT(7)                                                
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }}]]                                                      
                                               S2 rf.nextindex[4] = 6                                               
                                               S2 index(7)  Pre(233)                                                
                                               len(7)                                                               
                                               S2 app -> 4 next(6)                                                  
                                               index(7) neT(7) cT(7)                                                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(5)                                                                        
                        rf.X(228) in(475)                                                                           
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(458)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(7)                                                 
                                               rf.X(228) in(463)                                                    
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(472)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(483)                
                        S1 the num is (557)                                                                         
                        applidindex(228)                                                                            
                        X(228)                                                                                      
                                               S2 <-- C3 Get key(1)                                                 
                                               test6                                                                
                                               S2 have log                                                          
                                               S2 {236 7 {3 55 2                                                    
                                               Append 1 x 1 29 y}}                                                  
                                               S2 have this log({3 55                                               
                                               2 Append 1 x 1 29 y})                                                
                                               in raft the index is                                                 
                                               236                                                                  
                                               S2 <-- C3 Append                                                     
                                               key(1) value(x 1 29 y)                                               
                                               index(236) wait test6                                                
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}}]]                                                             
                                               S2 rf.nextindex[3] = 6                                               
                                               S2 index(8)  Pre(233)                                                
                                               len(8)                                                               
                                               S2 app -> 3 next(6)                                                  
                                               index(8) neT(7) cT(7)                                                
                                               S2 rf.nextindex[0] = 6                                               
                                               S2 index(8)  Pre(233)                                                
                                               len(8)                                                               
                                               S2 app -> 0 next(6)                                                  
                                               index(8) neT(7) cT(7)                                                
                                               S2 rf.nextindex[1] = 6                                               
                                               S2 index(8)  Pre(233)                                                
                                               len(8)                                                               
                                               S2 app -> 1 next(6)                                                  
                                               index(8) neT(7) cT(7)                                                
                                               S2 rf.nextindex[4] = 6                                               
                                               S2 index(8)  Pre(233)                                                
                                               len(8)                                                               
                                               S2 app -> 4 next(6)                                                  
                                               index(8) neT(7) cT(7)                                                
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }}]]                                                                                                              
S0  vote vf(0) to own                                                                                               
S0  vote -> 3 cT(8)                                                                                                 
S0  vote -> 2 cT(8)                                                                                                 
S0  vote -> 1 cT(8)                                                                                                 
S0  vote -> 4 cT(8)                                                                                                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(5)                                                                        
                        rf.X(228) in(476)                                                                           
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(459)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(8)                                                 
                                               rf.X(228) in(464)                                                    
S0 vote -> 1 fail                                                                                                   
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(473)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(484)                
                                               S2 <-- C0 Get key(2)                                                 
                                               test1                                                                
                        S1  app <- 2 T(7)                                                                           
                        cT(7)                                                                                       
                                               S2 do not have this                                                  
                                               log({0 43 2 Get 2 })                                                 
                        S1 YYYY                                                                                     
                        S1 PreT(7) LT(7)                                                                            
                        S1 B success +                                                                              
                        log([{234 7 {2 40 2                                                                         
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }}])                                                                             
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }}]]                                                                             
                                               S2 <-- C0 Get key(2)                                                 
                                               wait 1                                                               
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }}]]                                                                             
                                               S2 update                                                            
                                               nextindex[1](6) to 8                                                 
                                               success                                                              
                                               S2 index(7)                                                          
                                               matchindex([0 7 8 2                                                  
                                               2])                                                                  
                                               S2 successnum(2)                                                     
                                               com-rf.X(0) rf.CT(7)                                                 
                                               t(7)                                                                 
                        S1  app <- 2 T(7)                                                                           
                        cT(7)                                                                                       
                        S1 YYYY                                                                                     
                        S1 PreT(7) LT(7)                                                                            
                        S1 mat(7) index(6)                                                                          
                        len(8)                                                                                      
                        S1 mat(7) index(7)                                                                          
                        len(8)                                                                                      
                        S1 B success +                                                                              
                        log([{236 7 {3 55 2                                                                         
                        Append 1 x 1 29 y}}])                                                                       
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(8)                                                 
                                               rf.X(228) in(465)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(8)                                                                        
                        rf.X(228) in(477)                                                                           
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(460)                             
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}}]]                                                                                    
                                               S2 update                                                            
                                               nextindex[1](8) to 9                                                 
                                               success                                                              
                                               S2 index(8)                                                          
                                               matchindex([0 8 8 2                                                  
                                               2])                                                                  
                                               S2 successnum(2)                                                     
                                               com-rf.X(0) rf.CT(7)                                                 
                                               t(7)                                                                 
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}}]]                                                                                    
                                               S2 is time out                                                       
                                               C2 ok(true)                                                          
                                               ERR(TimeOut) from S1                                                 
                                               in test1                                                             
                                               C2 Get nil because                                                   
                                               TimeOut from(S1)                                                     
                                               C2 send to S1 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(235)                                                 
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(485)                
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(474)                                                                                                             
                                               S2 -> 4 app fail                                                     
                                                                      S3 the len(log) is 8                          
                                                                      S3  vote <- 0 not                             
                                                                      lastlogIn(218) <                              
                                                                      rf.logIn(7) vf(-1)                            
                                                                      S3 Persist the                                
                                                                      log[[{212 7 {3 51 2                           
                                                                      Append 1 x 1 27 y}}                           
                                                                      {213 7 {4 40 2 Append                         
                                                                      0 x 0 21 y}} {214 7 {0                        
                                                                      40 2 Append 2 x 2 22                          
                                                                      y}} {215 7 {2 38 2 Get                        
                                                                      4 }} {216 7 {1 35 2                           
                                                                      Append 3 x 3 19 y}}                           
                                                                      {217 7 {3 52 2 Get 1                          
                                                                      }} {218 7 {0 41 2 Get                         
                                                                      2 }} {219 7 {4 41 2                           
                                                                      Get 0 }}]]                                    
                                                                      S3 Persist the                                
                                                                      log[[{212 7 {3 51 2                           
                                                                      Append 1 x 1 27 y}}                           
                                                                      {213 7 {4 40 2 Append                         
                                                                      0 x 0 21 y}} {214 7 {0                        
                                                                      40 2 Append 2 x 2 22                          
                                                                      y}} {215 7 {2 38 2 Get                        
                                                                      4 }} {216 7 {1 35 2                           
                                                                      Append 3 x 3 19 y}}                           
                                                                      {217 7 {3 52 2 Get 1                          
                                                                      }} {218 7 {0 41 2 Get                         
                                                                      2 }} {219 7 {4 41 2                           
                                                                      Get 0 }}]]                                    
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }}]]                                                                                                              
                                                                                             S4 the num is (394)    
                                                                                             applidindex(217) X(217)
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(461)                             
                                                                                             S4 the len(log) is 3   
                                                                                             S4  vote <- 0 not      
                                                                                             lastlogIn(218) <       
                                                                                             rf.logIn(2) vf(-1)     
                                                                                             S4 Persist the         
                                                                                             log[[{217 7 {3 52 2 Get
                                                                                             1 }} {218 7 {0 41 2 Get
                                                                                             2 }} {219 7 {4 41 2 Get
                                                                                             0 }}]]                 
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(8)                                                 
                                               rf.X(228) in(466)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(8)                                                                        
                        rf.X(228) in(478)                                                                           
                                                                                             S4 Persist the         
                                                                                             log[[{217 7 {3 52 2 Get
                                                                                             1 }} {218 7 {0 41 2 Get
                                                                                             2 }} {219 7 {4 41 2 Get
                                                                                             0 }}]]                 
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }}]]                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(486)                
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(475)                                                                                                             
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(462)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(8)                                                 
                                               rf.X(228) in(467)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(8)                                                                        
                        rf.X(228) in(479)                                                                           
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(487)                
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(476)                                                                                                             
                                               S2 -> 3 app fail                                                     
                                               S2 <-- C2 Get key(4)                                                 
                                               test235                                                              
                                               S2 do not have this                                                  
                                               log({2 40 2 Get 4 })                                                 
                                               S2 <-- C2 Get key(4)                                                 
                                               wait 235                                                             
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(463)                             
                                               S2 -> 3 app fail                                                     
                        S1 commit(0)                                                                                
                        applied(0) lenlog(8)                                                                        
                        rf.X(228) in(480)                                                                           
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(488)                
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(8)                                                 
                                               rf.X(228) in(468)                                                    
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(477)                                                                                                             
                                               S2 -> 0 app fail                                                     
                        S1 commit(0)                                                                                
                        applied(0) lenlog(8)                                                                        
                        rf.X(228) in(481)                                                                           
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(8)                                                 
                                               rf.X(228) in(469)                                                    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(489)                
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(464)                             
                                               S2 -> 0 app fail                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(478)                                                                                                             
                                               S2 is time out                                                       
                                                                                             C4 ok(false)           
                                                                                             ERR(TimeOut) from S3 in
                                                                                             test231                
                                                                                             C4 ERROR Get Key(0)    
                                                                                             from(S3)               
                                                                                             C4 send to S4 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(232)   
                                               S2 time out                                                          
                        C1 ok(true)                                                                                 
                        ERR(TimeOut) from S2                                                                        
                        in test234                                                                                  
                        C1 Append err(TimeOut)                                                                      
                        nil key(3) value(x 3                                                                        
                        21 y) r.index(0)                                                                            
                        from(S2)3                                                                                   
                        C1 send to S2 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test1                                                                                       
                                                                      S3 Persist the                                
                                                                      log[[{212 7 {3 51 2                           
                                                                      Append 1 x 1 27 y}}                           
                                                                      {213 7 {4 40 2 Append                         
                                                                      0 x 0 21 y}} {214 7 {0                        
                                                                      40 2 Append 2 x 2 22                          
                                                                      y}} {215 7 {2 38 2 Get                        
                                                                      4 }} {216 7 {1 35 2                           
                                                                      Append 3 x 3 19 y}}                           
                                                                      {217 7 {3 52 2 Get 1                          
                                                                      }} {218 7 {0 41 2 Get                         
                                                                      2 }} {219 7 {4 41 2                           
                                                                      Get 0 }}]]                                    
                                                                      S3  vote vf(3) to own                         
                                                                      S3  vote -> 0 cT(9)                           
                                                                      S3  vote -> 4 cT(9)                           
                                                                      S3  vote -> 1 cT(9)                           
                                                                      S3  vote -> 2 cT(9)                           
                                                                      S3 vote -> 4 fail                             
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(465)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(8)                                                 
                                               rf.X(228) in(470)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(8)                                                                        
                        rf.X(228) in(482)                                                                           
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(490)                
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(479)                                                                                                             
S0 the len(log) is 2                                                                                                
S0  vote <- 3 T(7) =                                                                                                
LastlogT(7) logi(1)                                                                                                 
lastlogindex(219)                                                                                                   
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }}]]                                                                                                              
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }}]]                                                                                                              
                                                                      S3 <-- C4 Get key(0)                          
                                                                      test232                                       
                                                                      S3 Persist the                                
                                                                      log[[{212 7 {3 51 2                           
                                                                      Append 1 x 1 27 y}}                           
                                                                      {213 7 {4 40 2 Append                         
                                                                      0 x 0 21 y}} {214 7 {0                        
                                                                      40 2 Append 2 x 2 22                          
                                                                      y}} {215 7 {2 38 2 Get                        
                                                                      4 }} {216 7 {1 35 2                           
                                                                      Append 3 x 3 19 y}}                           
                                                                      {217 7 {3 52 2 Get 1                          
                                                                      }} {218 7 {0 41 2 Get                         
                                                                      2 }} {219 7 {4 41 2                           
                                                                      Get 0 }}]]                                    
                                               S2 -> 4 app fail                                                     
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S4 in test232     
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S4)       
                                                                                             C4 send to S0 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(233)   
                                                                                             S4 Persist the         
                                                                                             log[[{217 7 {3 52 2 Get
                                                                                             1 }} {218 7 {0 41 2 Get
                                                                                             2 }} {219 7 {4 41 2 Get
                                                                                             0 }}]]                 
                                                                                             S4  vote vf(4) to own  
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(466)                             
                                                                                             S4  vote -> 0 cT(9)    
                                                                                             S4  vote -> 1 cT(9)    
                                                                                             S4  vote -> 2 cT(9)    
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(8)                                                 
                                               rf.X(228) in(471)                                                    
                                                                                             S4  vote -> 3 cT(9)    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(491)                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(8)                                                                        
                        rf.X(228) in(483)                                                                           
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(480)                                                                                                             
                                                                      S3 the num is (697)                           
                                                                      applidindex(217)                              
                                                                      X(212)                                        
S0 the num is (343)                                                                                                 
applidindex(217) X(217)                                                                                             
                                               S2 the num is (713)                                                  
                                               applidindex(228)                                                     
                                               X(228)                                                               
                                               S2 <-- C1 Get key(3)                                                 
                                               test1                                                                
                                               S2 do not have this                                                  
                                               log({1 38 2 Append 3 x                                               
                                               3 21 y}) the index is                                                
                                               1                                                                    
                                               S2 <-- C1 Append                                                     
                                               key(3) value(x 3 21 y)                                               
                                               index(1) wait test1                                                  
                                                                                             S4 vote -> 0 fail      
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(467)                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(492)                
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(8)                                                 
                                               rf.X(228) in(472)                                                    
                                               S2 have log                                                          
                        S1 commit(0)                                                                                
                        applied(0) lenlog(8)                                                                        
                        rf.X(228) in(484)                                                                           
                                               S2 {237 7 {-1 -1 2                                                   
                                               TIMEOUT  }}                                                          
                                                                      S3  vote <- 4 not T(9)                        
                                                                      = cT(9) vf(3)                                 
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }}]]                                                        
                                                                      S3 Persist the                                
                                                                      log[[{212 7 {3 51 2                           
                                                                      Append 1 x 1 27 y}}                           
                                                                      {213 7 {4 40 2 Append                         
                                                                      0 x 0 21 y}} {214 7 {0                        
                                                                      40 2 Append 2 x 2 22                          
                                                                      y}} {215 7 {2 38 2 Get                        
                                                                      4 }} {216 7 {1 35 2                           
                                                                      Append 3 x 3 19 y}}                           
                                                                      {217 7 {3 52 2 Get 1                          
                                                                      }} {218 7 {0 41 2 Get                         
                                                                      2 }} {219 7 {4 41 2                           
                                                                      Get 0 }}]]                                    
                                                                                             S4 Persist the         
                                                                                             log[[{217 7 {3 52 2 Get
                                                                                             1 }} {218 7 {0 41 2 Get
                                                                                             2 }} {219 7 {4 41 2 Get
                                                                                             0 }}]]                 
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(481)                                                                                                             
                                               S2 rf.nextindex[0] = 6                                               
                                               S2 index(9)  Pre(233)                                                
                                               len(9)                                                               
                                               S2 app -> 0 next(6)                                                  
                                               index(9) neT(7) cT(7)                                                
                                               S2 rf.nextindex[1] = 9                                               
                                               S2 index(9)  Pre(236)                                                
                                               len(9)                                                               
                                               S2 app -> 1 next(9)                                                  
                                               index(9) neT(7) cT(7)                                                
                                               S2 rf.nextindex[3] = 6                                               
                                               S2 index(9)  Pre(233)                                                
                                               len(9)                                                               
                                               S2 app -> 3 next(6)                                                  
                                               index(9) neT(7) cT(7)                                                
                                               S2 rf.nextindex[4] = 6                                               
                                               S2 index(9)  Pre(233)                                                
                                               len(9)                                                               
                                               S2 app -> 4 next(6)                                                  
                                               index(9) neT(7) cT(7)                                                
                                                                      S3 vote -> 1 fail                             
                                               S2 -> 0 app fail                                                     
S0 vote -> 2 fail                                                                                                   
                        S1 the num is (713)                                                                         
                        applidindex(228)                                                                            
                        X(228)                                                                                      
                        S1 commit(0)                                                                                
                        applied(0) lenlog(8)                                                                        
                        rf.X(228) in(485)                                                                           
                        S1 <-- C4 Get key(0)                                                                        
                        test233                                                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(482)                                                                                                             
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S0 in test233     
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S0)       
                                                                                             C4 send to S1 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(234)   
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(9)                                                 
                                               rf.X(228) in(473)                                                    
                                               S2 time out                                                          
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(493)                
                                                                      C3 ok(true)                                   
                                                                      ERR(TimeOut) from S1                          
                                                                      in test6                                      
                                                                      C3 Append err(TimeOut)                        
                                                                      nil key(1) value(x 1                          
                                                                      29 y) r.index(236)                            
                                                                      from(S1)3                                     
                                                                      C3 send to S1 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test237                                       
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(468)                             
                                                                                             S4 vote -> 2 fail      
                                               S2 is time out                                                       
C0 ok(true)                                                                                                         
ERR(TimeOut) from S0 in                                                                                             
test1                                                                                                               
C0 Get nil because                                                                                                  
TimeOut from(S0)                                                                                                    
C0 send to S0 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(1)                                                                                                  
                        S1 commit(0)                                                                                
                        applied(0) lenlog(8)                                                                        
                        rf.X(228) in(486)                                                                           
                        S1  app <- 2 T(7)                                                                           
                        cT(7)                                                                                       
                        S1 YYYY                                                                                     
                        S1 PreT(7) LT(7)                                                                            
                        S1 B success +                                                                              
                        log([{237 7 {-1 -1 2                                                                        
                        TIMEOUT  }}])                                                                               
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(483)                                                                                                             
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }}]]                                                                               
                                               S2 update                                                            
                                               nextindex[1](9) to 10                                                
                                               success                                                              
                                               S2 index(9)                                                          
                                               matchindex([0 9 9 2                                                  
                                               2])                                                                  
                                               S2 successnum(2)                                                     
                                               com-rf.X(0) rf.CT(7)                                                 
                                               t(7)                                                                 
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(9)                                                 
                                               rf.X(228) in(474)                                                    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(494)                
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }}]]                                                                               
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(469)                             
                                               S2 -> 4 app fail                                                     
                                               S2 <-- C0 Get key(2)                                                 
                                               test1                                                                
                                               S2 do not have this                                                  
                                               log({0 43 2 Get 2 })                                                 
                                               S2 <-- C0 Get key(2)                                                 
                                               wait 1                                                               
                                                                      C3 ok(false) ERR()                            
                                                                      from S1 in test237                            
                                                                      C3 ERROR Append key(1)                        
                                                                      value(x 1 29 y)                               
                                                                      from(S1)                                      
                                                                      C3 send to S2 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test238                                       
                                                                      S3 vote -> 2 fail                             
                                                                                             S4 <-- C4 Get key(0)   
                                                                                             test234                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(9)                                                                        
                        rf.X(228) in(487)                                                                           
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S1 in test234     
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S1)       
                                                                                             C4 send to S2 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(235)   
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(484)                                                                                                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(9)                                                 
                                               rf.X(228) in(475)                                                    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(495)                
                                                                                             S4 the num is (394)    
                                                                                             applidindex(217) X(217)
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(470)                             
                        S1 <-- C3 Get key(1)                                                                        
                        test238                                                                                     
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S2 in test238                            
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S2)1                          
                                                                      C3 send to S3 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test239                                       
                        S1 commit(0)                                                                                
                        applied(0) lenlog(9)                                                                        
                        rf.X(228) in(488)                                                                           
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(485)                                                                                                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(9)                                                 
                                               rf.X(228) in(476)                                                    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(496)                
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(471)                             
S0 <-- C4 Get key(0)                                                                                                
test235                                                                                                             
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S2 in test235     
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S2)       
                                                                                             C4 send to S3 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(236)   
                                               S2 is time out                                                       
                                               C2 ok(false)                                                         
                                               ERR(TimeOut) from S1                                                 
                                               in test235                                                           
                                               C2 ERROR Get Key(4)                                                  
                                               from(S1)                                                             
                                               C2 send to S2 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(236)                                                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(9)                                                                        
                        rf.X(228) in(489)                                                                           
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(486)                                                                                                             
                                               S2 <-- C4 Get key(0)                                                 
                                               test236                                                              
                                               S2 do not have this                                                  
                                               log({4 44 2 Get 0 })                                                 
                                               S2 <-- C4 Get key(0)                                                 
                                               wait 236                                                             
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(472)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(9)                                                 
                                               rf.X(228) in(477)                                                    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(497)                
                                               C2 ok(false)                                                         
                                               ERR(TimeOut) from S2                                                 
                                               in test236                                                           
                                               C2 ERROR Get Key(4)                                                  
                                               from(S2)                                                             
                                               C2 send to S3 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(237)                                                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(9)                                                                        
                        rf.X(228) in(490)                                                                           
S0 <-- C3 Get key(1)                                                                                                
test239                                                                                                             
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S3 in test239                            
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S3)1                          
                                                                      C3 send to S4 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test240                                       
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(487)                                                                                                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(9)                                                 
                                               rf.X(228) in(478)                                                    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(498)                
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(473)                             
                                                                                             S4 <-- C3 Get key(1)   
                                                                                             test240                
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S4 in test240                            
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S4)1                          
                                                                      C3 send to S0 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test241                                       
                        S1 commit(0)                                                                                
                        applied(0) lenlog(9)                                                                        
                        rf.X(228) in(491)                                                                           
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(488)                                                                                                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(9)                                                 
                                               rf.X(228) in(479)                                                    
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(474)                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(499)                
                                                                      S3 <-- C2 Get key(4)                          
                                                                      test237                                       
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S3 in test237                                                   
                                               C2 Get fail key(4)                                                   
                                               value() from(S3)                                                     
                                               C2 send to S4 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(238)                                                 
                                                                                             S4 vote -> 1 fail      
                                               S2 -> 3 app fail                                                     
                        S1 commit(0)                                                                                
                        applied(0) lenlog(9)                                                                        
                        rf.X(228) in(492)                                                                           
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(489)                                                                                                             
                                                                      S3 <-- C3 Get key(1)                          
                                                                      test241                                       
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S0 in test241                            
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S0)1                          
                                                                      C3 send to S1 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test242                                       
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(9)                                                 
                                               rf.X(228) in(480)                                                    
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(475)                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(500)                
S0 the num is (343)                                                                                                 
applidindex(217) X(217)                                                                                             
                                                                      S3 the num is (697)                           
                                                                      applidindex(217)                              
                                                                      X(212)                                        
                                               S2 the num is (756)                                                  
                                               applidindex(228)                                                     
                                               X(228)                                                               
                                               S2 time out                                                          
                        C1 ok(true)                                                                                 
                        ERR(TimeOut) from S2                                                                        
                        in test1                                                                                    
                        C1 Append err(TimeOut)                                                                      
                        nil key(3) value(x 3                                                                        
                        21 y) r.index(0)                                                                            
                        from(S2)3                                                                                   
                        C1 send to S2 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test1                                                                                       
                        S1 commit(0)                                                                                
                        applied(0) lenlog(9)                                                                        
                        rf.X(228) in(493)                                                                           
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(490)                                                                                                             
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(476)                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(501)                
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(9)                                                 
                                               rf.X(228) in(481)                                                    
                                                                                             S4 <-- C2 Get key(4)   
                                                                                             test238                
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S4 in test238                                                   
                                               C2 Get fail key(4)                                                   
                                               value() from(S4)                                                     
                                               C2 send to S0 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(239)                                                 
                                               S2 have log                                                          
                                               S2 {238 7 {-1 -1 2                                                   
                                               TIMEOUT  }}                                                          
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }}]]                                                   
                                               S2 rf.nextindex[0] = 6                                               
                                               S2 index(10)  Pre(233)                                               
                                               len(10)                                                              
                                               S2 app -> 0 next(6)                                                  
                                               index(10) neT(7) cT(7)                                               
                                               S2 rf.nextindex[1] =                                                 
                                               10                                                                   
                                               S2 index(10)  Pre(237)                                               
                                               len(10)                                                              
                                               S2 app -> 1 next(10)                                                 
                                               index(10) neT(7) cT(7)                                               
                                               S2 rf.nextindex[3] = 6                                               
                                               S2 index(10)  Pre(233)                                               
                                               len(10)                                                              
                                               S2 app -> 3 next(6)                                                  
                                               index(10) neT(7) cT(7)                                               
                                               S2 rf.nextindex[4] = 6                                               
                                               S2 index(10)  Pre(233)                                               
                                               len(10)                                                              
                                               S2 app -> 4 next(6)                                                  
                                               index(10) neT(7) cT(7)                                               
                                               S2 -> 4 app fail                                                     
                        S1 commit(0)                                                                                
                        applied(0) lenlog(9)                                                                        
                        rf.X(228) in(494)                                                                           
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(491)                                                                                                             
S0 <-- C2 Get key(4)                                                                                                
test239                                                                                                             
                                               C2 ok(false) ERR()                                                   
                                               from S0 in test239                                                   
                                               C2 ERROR Get Key(4)                                                  
                                               from(S0)                                                             
                                               C2 send to S1 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(240)                                                 
                        S1 the num is (756)                                                                         
                        applidindex(228)                                                                            
                        X(228)                                                                                      
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(10)                                                
                                               rf.X(228) in(482)                                                    
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(477)                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(502)                
                                               S2 <-- C3 Get key(1)                                                 
                                               test242                                                              
                                               S2 do not have this                                                  
                                               log({3 55 2 Append 1 x                                               
                                               1 29 y}) the index is                                                
                                               242                                                                  
                                               S2 <-- C3 Append                                                     
                                               key(1) value(x 1 29 y)                                               
                                               index(242) wait                                                      
                                               test242                                                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(9)                                                                        
                        rf.X(228) in(495)                                                                           
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(492)                                                                                                             
                                               S2 <-- C1 Get key(3)                                                 
                                               test1                                                                
                                               S2 do not have this                                                  
                                               log({1 38 2 Append 3 x                                               
                                               3 21 y}) the index is                                                
                                               1                                                                    
                                               S2 <-- C1 Append                                                     
                                               key(3) value(x 3 21 y)                                               
                                               index(1) wait test1                                                  
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(10)                                                
                                               rf.X(228) in(483)                                                    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(503)                
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(478)                             
                                               S2 <-- C2 Get key(4)                                                 
                                               test240                                                              
                                               S2 do not have this                                                  
                                               log({2 40 2 Get 4 })                                                 
                                               S2 <-- C2 Get key(4)                                                 
                                               wait 240                                                             
                                               S2 -> 1 app fail                                                     
                                               S2 is time out                                                       
C0 ok(true)                                                                                                         
ERR(TimeOut) from S0 in                                                                                             
test1                                                                                                               
C0 Get nil because                                                                                                  
TimeOut from(S0)                                                                                                    
C0 send to S0 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(1)                                                                                                  
                        S1 commit(0)                                                                                
                        applied(0) lenlog(9)                                                                        
                        rf.X(228) in(496)                                                                           
                                               S2 <-- C0 Get key(2)                                                 
                                               test1                                                                
                                               S2 do not have this                                                  
                                               log({0 43 2 Get 2 })                                                 
                                               S2 <-- C0 Get key(2)                                                 
                                               wait 1                                                               
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(10)                                                
                                               rf.X(228) in(484)                                                    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(504)                
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(493)                                                                                                             
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(479)                             
                                                                                             S4 the num is (394)    
                                                                                             applidindex(217) X(217)
                        S1 commit(0)                                                                                
                        applied(0) lenlog(9)                                                                        
                        rf.X(228) in(497)                                                                           
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(10)                                                
                                               rf.X(228) in(485)                                                    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(505)                
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(480)                             
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(494)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(9)                                                                        
                        rf.X(228) in(498)                                                                           
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(495)                                                                                                             
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(481)                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(506)                
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(10)                                                
                                               rf.X(228) in(486)                                                    
                                               S2 is time out                                                       
                                                                                             C4 ok(true)            
                                                                                             ERR(TimeOut) from S3 in
                                                                                             test236                
                                                                                             C4 Get nil because     
                                                                                             TimeOut from(S3)       
                                                                                             C4 send to S3 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(1)     
                        S1 commit(0)                                                                                
                        applied(0) lenlog(9)                                                                        
                        rf.X(228) in(499)                                                                           
                                               S2 -> 0 app fail                                                     
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(10)                                                
                                               rf.X(228) in(487)                                                    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(507)                
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(482)                             
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(496)                                                                                                             
                                               S2 -> 3 app fail                                                     
                        S1 commit(0)                                                                                
                        applied(0) lenlog(9)                                                                        
                        rf.X(228) in(500)                                                                           
                                               S2 <-- C4 Get key(0)                                                 
                                               test1                                                                
                                               S2 do not have this                                                  
                                               log({4 44 2 Get 0 })                                                 
                                               S2 <-- C4 Get key(0)                                                 
                                               wait 1                                                               
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(483)                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(508)                
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(10)                                                
                                               rf.X(228) in(488)                                                    
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(497)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(9)                                                                        
                        rf.X(228) in(501)                                                                           
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(498)                                                                                                             
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(484)                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(509)                
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(10)                                                
                                               rf.X(228) in(489)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(9)                                                                        
                        rf.X(228) in(502)                                                                           
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(10)                                                
                                               rf.X(228) in(490)                                                    
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(499)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(510)                
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(485)                             
S0 the num is (343)                                                                                                 
applidindex(217) X(217)                                                                                             
                                                                      S3 the num is (697)                           
                                                                      applidindex(217)                              
                                                                      X(212)                                        
                                               S2 the num is (799)                                                  
                                               applidindex(228)                                                     
                                               X(228)                                                               
                        S1 commit(0)                                                                                
                        applied(0) lenlog(9)                                                                        
                        rf.X(228) in(503)                                                                           
                                               S2 have log                                                          
                                               S2 {239 7 {-1 -1 2                                                   
                                               TIMEOUT  }}                                                          
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT                                                   
                                               }}]]                                                                 
                                               S2 rf.nextindex[4] = 6                                               
                                               S2 index(11)  Pre(233)                                               
                                               len(11)                                                              
                                               S2 app -> 4 next(6)                                                  
                                               index(11) neT(7) cT(7)                                               
                                               S2 rf.nextindex[0] = 6                                               
                                               S2 index(11)  Pre(233)                                               
                                               len(11)                                                              
                                               S2 app -> 0 next(6)                                                  
                                               index(11) neT(7) cT(7)                                               
                                               S2 rf.nextindex[1] =                                                 
                                               10                                                                   
                                               S2 index(11)  Pre(237)                                               
                                               len(11)                                                              
                                               S2 app -> 1 next(10)                                                 
                                               index(11) neT(7) cT(7)                                               
                                               S2 rf.nextindex[3] = 6                                               
                                               S2 index(11)  Pre(233)                                               
                                               len(11)                                                              
                                               S2 app -> 3 next(6)                                                  
                                               index(11) neT(7) cT(7)                                               
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(486)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(11)                                                
                                               rf.X(228) in(491)                                                    
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(500)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(511)                
                        S1 the num is (756)                                                                         
                        applidindex(228)                                                                            
                        X(228)                                                                                      
                        S1 commit(0)                                                                                
                        applied(0) lenlog(9)                                                                        
                        rf.X(228) in(504)                                                                           
                                               S2 time out                                                          
                                                                      C3 ok(true)                                   
                                                                      ERR(TimeOut) from S1                          
                                                                      in test242                                    
                                                                      C3 Append err(TimeOut)                        
                                                                      nil key(1) value(x 1                          
                                                                      29 y) r.index(0)                              
                                                                      from(S1)3                                     
                                                                      C3 send to S1 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test1                                         
                        S1  app <- 2 T(7)                                                                           
                        cT(7)                                                                                       
                        S1 YYYY                                                                                     
                        S1 PreT(7) LT(7)                                                                            
                        S1 B success +                                                                              
                        log([{238 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {239 7 {-1                                                                      
                        -1 2 TIMEOUT  }}])                                                                          
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT                                                                          
                        }}]]                                                                                        
                                               S2 <-- C3 Get key(1)                                                 
                                               test1                                                                
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(11)                                                
                                               rf.X(228) in(492)                                                    
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(487)                             
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(501)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(512)                
                                               S2 update                                                            
                                               nextindex[1](10) to 12                                               
                                               success                                                              
                                               S2 index(11)                                                         
                                               matchindex([0 11 11 2                                                
                                               2])                                                                  
                                               S2 successnum(2)                                                     
                                               com-rf.X(0) rf.CT(7)                                                 
                                               t(7)                                                                 
                                               S2 do not have this                                                  
                                               log({3 55 2 Append 1 x                                               
                                               1 29 y}) the index is                                                
                                               1                                                                    
                                               S2 <-- C3 Append                                                     
                                               key(1) value(x 1 29 y)                                               
                                               index(1) wait test1                                                  
                                               S2 time out                                                          
                        C1 ok(false) ERR()                                                                          
                        from S2 in test1                                                                            
                        C1 ERROR Append key(3)                                                                      
                        value(x 3 21 y)                                                                             
                        from(S2)                                                                                    
                        C1 send to S3 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test2                                                                                       
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT                                                                          
                        }}]]                                                                                        
                        S1 commit(0)                                                                                
                        applied(0) lenlog(11)                                                                       
                        rf.X(228) in(505)                                                                           
                                               S2 is time out                                                       
                                               C2 ok(true)                                                          
                                               ERR(TimeOut) from S1                                                 
                                               in test240                                                           
                                               C2 Get nil because                                                   
                                               TimeOut from(S1)                                                     
                                               C2 send to S1 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(1)                                                   
                                               S2 is time out                                                       
C0 ok(true)                                                                                                         
ERR(TimeOut) from S0 in                                                                                             
test1                                                                                                               
C0 Get nil because                                                                                                  
TimeOut from(S1)                                                                                                    
C0 send to S1 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(1)                                                                                                  
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(513)                
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(502)                                                                                                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(11)                                                
                                               rf.X(228) in(493)                                                    
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(488)                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(11)                                                                       
                        rf.X(228) in(506)                                                                           
                                                                                             S4 the num is (394)    
                                                                                             applidindex(217) X(217)
                                               S2 <-- C2 Get key(4)                                                 
                                               test1                                                                
                                               S2 do not have this                                                  
                                               log({2 40 2 Get 4 })                                                 
                                               S2 <-- C2 Get key(4)                                                 
                                               wait 1                                                               
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(514)                
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(489)                             
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(503)                                                                                                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(11)                                                
                                               rf.X(228) in(494)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(11)                                                                       
                        rf.X(228) in(507)                                                                           
C0 ok(false)                                                                                                        
ERR(TimeOut) from S1 in                                                                                             
test1                                                                                                               
C0 ERROR Get Key(2)                                                                                                 
from(S1)                                                                                                            
C0 send to S2 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(2)                                                                                                  
                        S1 <-- C1 Get key(3)                                                                        
                        test2                                                                                       
                        C1 ok(true)                                                                                 
                        ERR(ErrWrongLeader)                                                                         
                        from S3 in test2                                                                            
                        C1 Append err() fail                                                                        
                        key(3) value(x 3 21 y)                                                                      
                        r.index(0) from(S3)1                                                                        
                        C1 send to S4 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test3                                                                                       
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(490)                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(515)                
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(504)                                                                                                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(11)                                                
                                               rf.X(228) in(495)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(11)                                                                       
                        rf.X(228) in(508)                                                                           
                                                                                             S4 <-- C1 Get key(3)   
                                                                                             test3                  
                        C1 ok(true)                                                                                 
                        ERR(ErrWrongLeader)                                                                         
                        from S4 in test3                                                                            
                        C1 Append err() fail                                                                        
                        key(3) value(x 3 21 y)                                                                      
                        r.index(0) from(S4)1                                                                        
                        C1 send to S0 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test4                                                                                       
                        C1 ok(false) ERR()                                                                          
                        from S0 in test4                                                                            
                        C1 ERROR Append key(3)                                                                      
                        value(x 3 21 y)                                                                             
                        from(S0)                                                                                    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(516)                
                        C1 send to S1 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test5                                                                                       
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(11)                                                
                                               rf.X(228) in(496)                                                    
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(491)                             
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(505)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(11)                                                                       
                        rf.X(228) in(509)                                                                           
S0 <-- C0 Get key(2)                                                                                                
test2                                                                                                               
                                               S2 -> 4 app fail                                                     
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S2 in test2                                                                                                    
C0 Get fail key(2)                                                                                                  
value() from(S2)                                                                                                    
C0 send to S3 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(3)                                                                                                  
                                               S2 is time out                                                       
                                                                                             C4 ok(true)            
                                                                                             ERR(TimeOut) from S3 in
                                                                                             test1                  
                                                                                             C4 Get nil because     
                                                                                             TimeOut from(S4)       
                                                                                             C4 send to S4 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(1)     
                                                                                             S4 <-- C0 Get key(2)   
                                                                                             test3                  
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S3 in test3                                                                                                    
C0 Get fail key(2)                                                                                                  
value() from(S3)                                                                                                    
C0 send to S4 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(4)                                                                                                  
                                                                      S3 <-- C4 Get key(0)                          
                                                                      test1                                         
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S4 in test1       
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S4)       
                                                                                             C4 send to S0 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(2)     
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(492)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(11)                                                
                                               rf.X(228) in(497)                                                    
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(506)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(517)                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(11)                                                                       
                        rf.X(228) in(510)                                                                           
                                                                      S3 <-- C1 Get key(3)                          
                                                                      test5                                         
                        C1 ok(true)                                                                                 
                        ERR(ErrWrongLeader)                                                                         
                        from S1 in test5                                                                            
                        C1 Append err() fail                                                                        
                        key(3) value(x 3 21 y)                                                                      
                        r.index(0) from(S1)1                                                                        
                        C1 send to S2 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test6                                                                                       
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(518)                
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(493)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(11)                                                
                                               rf.X(228) in(498)                                                    
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(507)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(11)                                                                       
                        rf.X(228) in(511)                                                                           
                                               S2 -> 3 app fail                                                     
                        S1 <-- C4 Get key(0)                                                                        
                        test2                                                                                       
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S0 in test2       
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S0)       
                                                                                             C4 send to S1 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(3)     
                                               S2 -> 0 app fail                                                     
                                               S2 <-- C1 Get key(3)                                                 
                                               test6                                                                
                                               S2 do not have this                                                  
                                               log({1 38 2 Append 3 x                                               
                                               3 21 y}) the index is                                                
                                               6                                                                    
                                               S2 <-- C1 Append                                                     
                                               key(3) value(x 3 21 y)                                               
                                               index(6) wait test6                                                  
                        S1 <-- C0 Get key(2)                                                                        
                        test4                                                                                       
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S4 in test4                                                                                                    
C0 Get fail key(2)                                                                                                  
value() from(S4)                                                                                                    
C0 send to S0 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(5)                                                                                                  
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(11)                                                
                                               rf.X(228) in(499)                                                    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(519)                
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(494)                             
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(508)                                                                                                             
S0 the num is (343)                                                                                                 
applidindex(217) X(217)                                                                                             
                                                                      S3 the num is (697)                           
                                                                      applidindex(217)                              
                                                                      X(212)                                        
                                               S2 the num is (842)                                                  
                                               applidindex(228)                                                     
                                               X(228)                                                               
                        S1 commit(0)                                                                                
                        applied(0) lenlog(11)                                                                       
                        rf.X(228) in(512)                                                                           
                                               S2 have log                                                          
                                               S2 {240 7 {-1 -1 2                                                   
                                               TIMEOUT  }}                                                          
                                               S2 rf.nextindex[3] = 6                                               
                                               S2 index(12)  Pre(233)                                               
                                               len(12)                                                              
                                               S2 app -> 3 next(6)                                                  
                                               index(12) neT(7) cT(7)                                               
                                               S2 rf.nextindex[0] = 6                                               
                                               S2 index(12)  Pre(233)                                               
                                               len(12)                                                              
                                               S2 app -> 0 next(6)                                                  
                                               index(12) neT(7) cT(7)                                               
                                               S2 rf.nextindex[1] =                                                 
                                               12                                                                   
                                               S2 index(12)  Pre(239)                                               
                                               len(12)                                                              
                                               S2 app -> 1 next(12)                                                 
                                               index(12) neT(7) cT(7)                                               
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                                               S2 rf.nextindex[4] = 6                                               
                                               S2 index(12)  Pre(233)                                               
                                               len(12)                                                              
                                               S2 app -> 4 next(6)                                                  
                                               index(12) neT(7) cT(7)                                               
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(12)                                                
                                               rf.X(228) in(500)                                                    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(520)                
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(495)                             
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(509)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(11)                                                                       
                        rf.X(228) in(513)                                                                           
                        S1 the num is (842)                                                                         
                        applidindex(228)                                                                            
                        X(228)                                                                                      
                                                                                             S4 <-- C4 Get key(0)   
                                                                                             test3                  
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S1 in test3       
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S1)       
                                                                                             C4 send to S2 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(4)     
S0 <-- C4 Get key(0)                                                                                                
test4                                                                                                               
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S2 in test4       
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S2)       
                                                                                             C4 send to S3 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(5)     
                                               S2 <-- C0 Get key(2)                                                 
                                               test5                                                                
                                               S2 do not have this                                                  
                                               log({0 43 2 Get 2 })                                                 
                                               S2 <-- C0 Get key(2)                                                 
                                               wait 5                                                               
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(12)                                                
                                               rf.X(228) in(501)                                                    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(521)                
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(496)                             
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(510)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(11)                                                                       
                        rf.X(228) in(514)                                                                           
                                               S2 time out                                                          
                                               S2 <-- C4 Get key(0)                                                 
                                               test5                                                                
                                               S2 do not have this                                                  
                                               log({4 44 2 Get 0 })                                                 
                                               S2 <-- C4 Get key(0)                                                 
                                               wait 5                                                               
                                                                      C3 ok(true)                                   
                                                                      ERR(TimeOut) from S1                          
                                                                      in test1                                      
                                                                      C3 Append err(TimeOut)                        
                                                                      nil key(1) value(x 1                          
                                                                      29 y) r.index(0)                              
                                                                      from(S1)3                                     
                                                                      C3 send to S1 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test1                                         
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(522)                
                        S1  app <- 2 T(7)                                                                           
                        cT(7)                                                                                       
                        S1 YYYY                                                                                     
                        S1 PreT(7) LT(7)                                                                            
                        S1 B success +                                                                              
                        log([{240 7 {-1 -1 2                                                                        
                        TIMEOUT  }}])                                                                               
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(497)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(12)                                                
                                               rf.X(228) in(502)                                                    
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(511)                                                                                                             
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                                               S2 update                                                            
                                               nextindex[1](12) to 13                                               
                                               success                                                              
                                               S2 index(12)                                                         
                                               matchindex([0 12 12 2                                                
                                               2])                                                                  
                                               S2 successnum(2)                                                     
                                               com-rf.X(0) rf.CT(7)                                                 
                                               t(7)                                                                 
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                        S1 commit(0)                                                                                
                        applied(0) lenlog(12)                                                                       
                        rf.X(228) in(515)                                                                           
                                               S2 is time out                                                       
                                               C2 ok(true)                                                          
                                               ERR(TimeOut) from S1                                                 
                                               in test1                                                             
                                               C2 Get nil because                                                   
                                               TimeOut from(S1)                                                     
                                               C2 send to S1 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(1)                                                   
                                                                                             S4 the num is (394)    
                                                                                             applidindex(217) X(217)
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(523)                
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(498)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(12)                                                
                                               rf.X(228) in(503)                                                    
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(512)                                                                                                             
                                               S2 <-- C3 Get key(1)                                                 
                                               test1                                                                
                                               S2 do not have this                                                  
                                               log({3 55 2 Append 1 x                                               
                                               1 29 y}) the index is                                                
                                               1                                                                    
                                               S2 <-- C3 Append                                                     
                                               key(1) value(x 1 29 y)                                               
                                               index(1) wait test1                                                  
                        S1 commit(0)                                                                                
                        applied(0) lenlog(12)                                                                       
                        rf.X(228) in(516)                                                                           
                                               S2 -> 4 app fail                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(513)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(524)                
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(499)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(12)                                                
                                               rf.X(228) in(504)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(12)                                                                       
                        rf.X(228) in(517)                                                                           
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(525)                
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(514)                                                                                                             
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(500)                             
                                               S2 -> 0 app fail                                                     
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(12)                                                
                                               rf.X(228) in(505)                                                    
                                               S2 <-- C2 Get key(4)                                                 
                                               test1                                                                
                                               S2 do not have this                                                  
                                               log({2 40 2 Get 4 })                                                 
                                               S2 <-- C2 Get key(4)                                                 
                                               wait 1                                                               
                        S1 commit(0)                                                                                
                        applied(0) lenlog(12)                                                                       
                        rf.X(228) in(518)                                                                           
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(515)                                                                                                             
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(501)                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(526)                
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(12)                                                
                                               rf.X(228) in(506)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(12)                                                                       
                        rf.X(228) in(519)                                                                           
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(527)                
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(516)                                                                                                             
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(502)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(12)                                                
                                               rf.X(228) in(507)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(12)                                                                       
                        rf.X(228) in(520)                                                                           
                                               S2 -> 3 app fail                                                     
                                               S2 time out                                                          
                        C1 ok(true)                                                                                 
                        ERR(TimeOut) from S2                                                                        
                        in test6                                                                                    
                        C1 Append err(TimeOut)                                                                      
                        nil key(3) value(x 3                                                                        
                        21 y) r.index(0)                                                                            
                        from(S3)3                                                                                   
                        C1 send to S3 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test1                                                                                       
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(12)                                                
                                               rf.X(228) in(508)                                                    
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(503)                             
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(517)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(528)                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(12)                                                                       
                        rf.X(228) in(521)                                                                           
                                               S2 the num is (885)                                                  
                                               applidindex(228)                                                     
                                               X(228)                                                               
S0 the num is (343)                                                                                                 
applidindex(217) X(217)                                                                                             
                                                                      S3 the num is (697)                           
                                                                      applidindex(217)                              
                                                                      X(212)                                        
                                               S2 have log                                                          
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(518)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(529)                
                                               S2 {241 7 {-1 -1 2                                                   
                                               TIMEOUT  }}                                                          
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(504)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(13)                                                
                                               rf.X(228) in(509)                                                    
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }}]]                                                   
                        S1 commit(0)                                                                                
                        applied(0) lenlog(12)                                                                       
                        rf.X(228) in(522)                                                                           
                                               S2 rf.nextindex[1] =                                                 
                                               13                                                                   
                                               S2 index(13)  Pre(240)                                               
                                               len(13)                                                              
                                               S2 app -> 1 next(13)                                                 
                                               index(13) neT(7) cT(7)                                               
                                               S2 rf.nextindex[3] = 6                                               
                                               S2 index(13)  Pre(233)                                               
                                               len(13)                                                              
                                               S2 app -> 3 next(6)                                                  
                                               index(13) neT(7) cT(7)                                               
                                               S2 rf.nextindex[0] = 6                                               
                                               S2 index(13)  Pre(233)                                               
                                               len(13)                                                              
                                               S2 app -> 0 next(6)                                                  
                                               index(13) neT(7) cT(7)                                               
                                               S2 rf.nextindex[4] = 6                                               
                                               S2 index(13)  Pre(233)                                               
                                               len(13)                                                              
                                               S2 app -> 4 next(6)                                                  
                                               index(13) neT(7) cT(7)                                               
                        S1 the num is (885)                                                                         
                        applidindex(228)                                                                            
                        X(228)                                                                                      
                                               S2 is time out                                                       
C0 ok(true)                                                                                                         
ERR(TimeOut) from S0 in                                                                                             
test5                                                                                                               
C0 Get nil because                                                                                                  
TimeOut from(S0)                                                                                                    
C0 send to S0 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(1)                                                                                                  
                        S1  app <- 2 T(7)                                                                           
                        cT(7)                                                                                       
                        S1 YYYY                                                                                     
                        S1 PreT(7) LT(7)                                                                            
                        S1 B success +                                                                              
                        log([{241 7 {-1 -1 2                                                                        
                        TIMEOUT  }}])                                                                               
                        S1 commit(0)                                                                                
                        applied(0) lenlog(13)                                                                       
                        rf.X(228) in(523)                                                                           
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }}]]                                                                          
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(13)                                                
                                               rf.X(228) in(510)                                                    
                                               S2 is time out                                                       
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }}]]                                                                          
                        S1 <-- C1 Get key(3)                                                                        
                        test1                                                                                       
                                               S2 update                                                            
                                               nextindex[1](13) to 14                                               
                                               success                                                              
                                               S2 index(13)                                                         
                                               matchindex([0 13 13 2                                                
                                               2])                                                                  
                                               S2 successnum(2)                                                     
                                               com-rf.X(0) rf.CT(7)                                                 
                                               t(7)                                                                 
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(505)                             
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(519)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(530)                
                        C1 ok(false) ERR()                                                                          
                        from S3 in test1                                                                            
                        C1 ERROR Append key(3)                                                                      
                        value(x 3 21 y)                                                                             
                        from(S3)                                                                                    
                        C1 send to S4 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test2                                                                                       
                                                                                             C4 ok(true)            
                                                                                             ERR(TimeOut) from S3 in
                                                                                             test5                  
                                                                                             C4 Get nil because     
                                                                                             TimeOut from(S3)       
                                                                                             C4 send to S3 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(1)     
                        S1 commit(0)                                                                                
                        applied(0) lenlog(13)                                                                       
                        rf.X(228) in(524)                                                                           
                                               S2 <-- C4 Get key(0)                                                 
                                               test1                                                                
                                               S2 do not have this                                                  
                                               log({4 44 2 Get 0 })                                                 
                                               S2 <-- C4 Get key(0)                                                 
                                               wait 1                                                               
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(13)                                                
                                               rf.X(228) in(511)                                                    
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(520)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(531)                
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(506)                             
                                                                                             S4 the num is (394)    
                                                                                             applidindex(217) X(217)
                        S1 commit(0)                                                                                
                        applied(0) lenlog(13)                                                                       
                        rf.X(228) in(525)                                                                           
                                               S2 time out                                                          
                                                                      C3 ok(true)                                   
                                                                      ERR(TimeOut) from S1                          
                                                                      in test1                                      
                                                                      C3 Append err(TimeOut)                        
                                                                      nil key(1) value(x 1                          
                                                                      29 y) r.index(0)                              
                                                                      from(S2)3                                     
                                                                      C3 send to S2 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test1                                         
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(13)                                                
                                               rf.X(228) in(512)                                                    
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(521)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(532)                
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(507)                             
                                                                                             S4 <-- C1 Get key(3)   
                                                                                             test2                  
                                               S2 <-- C0 Get key(2)                                                 
                                               test1                                                                
                                               S2 do not have this                                                  
                                               log({0 43 2 Get 2 })                                                 
                                               S2 <-- C0 Get key(2)                                                 
                                               wait 1                                                               
                        C1 ok(true)                                                                                 
                        ERR(ErrWrongLeader)                                                                         
                        from S4 in test2                                                                            
                        C1 Append err() fail                                                                        
                        key(3) value(x 3 21 y)                                                                      
                        r.index(0) from(S4)1                                                                        
                        C1 send to S0 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test3                                                                                       
                        S1 commit(0)                                                                                
                        applied(0) lenlog(13)                                                                       
                        rf.X(228) in(526)                                                                           
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(533)                
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(13)                                                
                                               rf.X(228) in(513)                                                    
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(522)                                                                                                             
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(508)                             
                                               S2 -> 3 app fail                                                     
                        S1 <-- C3 Get key(1)                                                                        
                        test1                                                                                       
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S2 in test1                              
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S2)1                          
                                                                      C3 send to S3 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test2                                         
                                               S2 is time out                                                       
S0 <-- C1 Get key(3)                                                                                                
test3                                                                                                               
                        S1 commit(0)                                                                                
                        applied(0) lenlog(13)                                                                       
                        rf.X(228) in(527)                                                                           
                                               C2 ok(true)                                                          
                                               ERR(TimeOut) from S1                                                 
                                               in test1                                                             
                                               C2 Get nil because                                                   
                                               TimeOut from(S2)                                                     
                                               C2 send to S2 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(1)                                                   
                        C1 ok(true)                                                                                 
                        ERR(ErrWrongLeader)                                                                         
                        from S0 in test3                                                                            
                        C1 Append err() fail                                                                        
                        key(3) value(x 3 21 y)                                                                      
                        r.index(0) from(S0)1                                                                        
                        C1 send to S1 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test4                                                                                       
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(509)                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(534)                
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(13)                                                
                                               rf.X(228) in(514)                                                    
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(523)                                                                                                             
                        S1 <-- C2 Get key(4)                                                                        
                        test1                                                                                       
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S2 in test1                                                     
                                               C2 Get fail key(4)                                                   
                                               value() from(S2)                                                     
                                               C2 send to S3 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(2)                                                   
                        S1 commit(0)                                                                                
                        applied(0) lenlog(13)                                                                       
                        rf.X(228) in(528)                                                                           
S0 <-- C3 Get key(1)                                                                                                
test2                                                                                                               
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S3 in test2                              
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S3)1                          
                                                                      C3 send to S4 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test3                                         
                                                                      S3 <-- C1 Get key(3)                          
                                                                      test4                                         
                        C1 ok(true)                                                                                 
                        ERR(ErrWrongLeader)                                                                         
                        from S1 in test4                                                                            
                        C1 Append err() fail                                                                        
                        key(3) value(x 3 21 y)                                                                      
                        r.index(0) from(S1)1                                                                        
                        C1 send to S2 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test5                                                                                       
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(524)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(535)                
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(13)                                                
                                               rf.X(228) in(515)                                                    
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(510)                             
                                               S2 -> 4 app fail                                                     
                        S1 commit(0)                                                                                
                        applied(0) lenlog(13)                                                                       
                        rf.X(228) in(529)                                                                           
                                                                                             S4 Persist the         
                                                                                             log[[{217 7 {3 52 2 Get
                                                                                             1 }} {218 7 {0 41 2 Get
                                                                                             2 }} {219 7 {4 41 2 Get
                                                                                             0 }}]]                 
                                                                                             S4  vote vf(4) to own  
                                                                                             S4  vote -> 0 cT(10)   
                                                                                             S4  vote -> 1 cT(10)   
                                                                                             S4  vote -> 3 cT(10)   
                                                                                             S4  vote -> 2 cT(10)   
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(525)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(536)                
                                               S2 <-- C1 Get key(3)                                                 
                                               test5                                                                
                                               S2 do not have this                                                  
                                               log({1 38 2 Append 3 x                                               
                                               3 21 y}) the index is                                                
                                               5                                                                    
                                               S2 <-- C1 Append                                                     
                                               key(3) value(x 3 21 y)                                               
                                               index(5) wait test5                                                  
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(511)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(13)                                                
                                               rf.X(228) in(516)                                                    
                                               C2 ok(false) ERR()                                                   
                                               from S3 in test2                                                     
                                               C2 ERROR Get Key(4)                                                  
                                               from(S3)                                                             
                                               C2 send to S4 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(3)                                                   
S0 the len(log) is 2                                                                                                
S0  vote <- 4 T(7) =                                                                                                
LastlogT(7) logi(1)                                                                                                 
lastlogindex(219)                                                                                                   
                                                                                             S4 <-- C3 Get key(1)   
                                                                                             test3                  
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }}]]                                                                                                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(13)                                                                       
                        rf.X(228) in(530)                                                                           
                                                                                             S4 vote -> 0 fail      
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S4 in test3                              
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S4)1                          
                                                                      C3 send to S0 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test4                                         
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }}]]                                                                                                              
                                               S2 the num is (928)                                                  
                                               applidindex(228)                                                     
                                               X(228)                                                               
S0 the num is (343)                                                                                                 
applidindex(217) X(217)                                                                                             
                                                                      S3 the num is (697)                           
                                                                      applidindex(217)                              
                                                                      X(212)                                        
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(512)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(13)                                                
                                               rf.X(228) in(517)                                                    
                                               S2 -> 0 app fail                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(526)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(537)                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(13)                                                                       
                        rf.X(228) in(531)                                                                           
                                                                      S3 <-- C3 Get key(1)                          
                                                                      test4                                         
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S0 in test4                              
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S0)1                          
                                                                      C3 send to S1 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test5                                         
                                               S2 have log                                                          
                                               S2 {242 7 {-1 -1 2                                                   
                                               TIMEOUT  }}                                                          
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT                                                   
                                               }}]]                                                                 
                                                                                             S4 <-- C2 Get key(4)   
                                                                                             test3                  
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S4 in test3                                                     
                                               C2 Get fail key(4)                                                   
                                               value() from(S4)                                                     
                                               C2 send to S0 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(4)                                                   
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(513)                             
                                               S2 rf.nextindex[1] =                                                 
                                               14                                                                   
                                               S2 index(14)  Pre(241)                                               
                                               len(14)                                                              
                                               S2 app -> 1 next(14)                                                 
                                               index(14) neT(7) cT(7)                                               
                                                                                             S4 vote -> 3 fail      
                                               S2 rf.nextindex[0] = 6                                               
                                               S2 index(14)  Pre(233)                                               
                                               len(14)                                                              
                                               S2 app -> 0 next(6)                                                  
                                               index(14) neT(7) cT(7)                                               
                                               S2 rf.nextindex[3] = 6                                               
                                               S2 index(14)  Pre(233)                                               
                                               len(14)                                                              
                                               S2 app -> 3 next(6)                                                  
                                               index(14) neT(7) cT(7)                                               
                                               S2 rf.nextindex[4] = 6                                               
                                               S2 index(14)  Pre(233)                                               
                                               len(14)                                                              
                                               S2 app -> 4 next(6)                                                  
                                               index(14) neT(7) cT(7)                                               
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(14)                                                
                                               rf.X(228) in(518)                                                    
                                                                                             S4 vote -> 2 fail      
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(538)                
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(527)                                                                                                             
                        S1 the num is (928)                                                                         
                        applidindex(228)                                                                            
                        X(228)                                                                                      
                        S1 commit(0)                                                                                
                        applied(0) lenlog(13)                                                                       
                        rf.X(228) in(532)                                                                           
                                                                      S3 Persist the                                
                                                                      log[[{212 7 {3 51 2                           
                                                                      Append 1 x 1 27 y}}                           
                                                                      {213 7 {4 40 2 Append                         
                                                                      0 x 0 21 y}} {214 7 {0                        
                                                                      40 2 Append 2 x 2 22                          
                                                                      y}} {215 7 {2 38 2 Get                        
                                                                      4 }} {216 7 {1 35 2                           
                                                                      Append 3 x 3 19 y}}                           
                                                                      {217 7 {3 52 2 Get 1                          
                                                                      }} {218 7 {0 41 2 Get                         
                                                                      2 }} {219 7 {4 41 2                           
                                                                      Get 0 }}]]                                    
                                                                      S3  vote vf(3) to own                         
                                                                      S3  vote -> 0 cT(10)                          
                                                                      S3  vote -> 2 cT(10)                          
                                                                      S3  vote -> 1 cT(10)                          
                                                                      S3  vote -> 4 cT(10)                          
                        S1  app <- 2 T(7)                                                                           
                        cT(7)                                                                                       
                        S1 YYYY                                                                                     
                        S1 PreT(7) LT(7)                                                                            
                        S1 B success +                                                                              
                        log([{242 7 {-1 -1 2                                                                        
                        TIMEOUT  }}])                                                                               
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT                                                                          
                        }}]]                                                                                        
                                               S2 update                                                            
                                               nextindex[1](14) to 15                                               
                                               success                                                              
                                               S2 index(14)                                                         
                                               matchindex([0 14 14 2                                                
                                               2])                                                                  
                                               S2 successnum(2)                                                     
                                               com-rf.X(0) rf.CT(7)                                                 
                                               t(7)                                                                 
                                               S2 <-- C3 Get key(1)                                                 
                                               test5                                                                
                                               S2 do not have this                                                  
                                               log({3 55 2 Append 1 x                                               
                                               1 29 y}) the index is                                                
                                               5                                                                    
                                               S2 <-- C3 Append                                                     
                                               key(1) value(x 1 29 y)                                               
                                               index(5) wait test5                                                  
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT                                                                          
                        }}]]                                                                                        
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(514)                             
                                                                                             S4  vote <- 3 not T(10)
                                                                                             = cT(10) vf(4)         
                                                                                             S4 Persist the         
                                                                                             log[[{217 7 {3 52 2 Get
                                                                                             1 }} {218 7 {0 41 2 Get
                                                                                             2 }} {219 7 {4 41 2 Get
                                                                                             0 }}]]                 
                                                                      S3 Persist the                                
                                                                      log[[{212 7 {3 51 2                           
                                                                      Append 1 x 1 27 y}}                           
                                                                      {213 7 {4 40 2 Append                         
                                                                      0 x 0 21 y}} {214 7 {0                        
                                                                      40 2 Append 2 x 2 22                          
                                                                      y}} {215 7 {2 38 2 Get                        
                                                                      4 }} {216 7 {1 35 2                           
                                                                      Append 3 x 3 19 y}}                           
                                                                      {217 7 {3 52 2 Get 1                          
                                                                      }} {218 7 {0 41 2 Get                         
                                                                      2 }} {219 7 {4 41 2                           
                                                                      Get 0 }}]]                                    
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(14)                                                
                                               rf.X(228) in(519)                                                    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(539)                
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(528)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(14)                                                                       
                        rf.X(228) in(533)                                                                           
                                               S2 -> 0 app fail                                                     
S0 <-- C2 Get key(4)                                                                                                
test4                                                                                                               
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S0 in test4                                                     
                                               C2 Get fail key(4)                                                   
                                               value() from(S0)                                                     
                                               C2 send to S1 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(5)                                                   
                                               S2 is time out                                                       
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(515)                             
                                                                                             S4 vote -> 1 fail      
                                                                                             C4 ok(true)            
                                                                                             ERR(TimeOut) from S3 in
                                                                                             test1                  
                                                                                             C4 Get nil because     
                                                                                             TimeOut from(S3)       
                                                                                             C4 send to S3 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(1)     
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(14)                                                
                                               rf.X(228) in(520)                                                    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(540)                
S0  vote <- 3 not T(10)                                                                                             
= cT(10) vf(4)                                                                                                      
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }}]]                                                                                                              
                                                                      S3 vote -> 0 fail                             
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(529)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(14)                                                                       
                        rf.X(228) in(534)                                                                           
                                                                                             S4 the num is (394)    
                                                                                             applidindex(217) X(217)
                                               S2 <-- C2 Get key(4)                                                 
                                               test5                                                                
                                               S2 do not have this                                                  
                                               log({2 40 2 Get 4 })                                                 
                                               S2 <-- C2 Get key(4)                                                 
                                               wait 5                                                               
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(516)                             
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(530)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(14)                                                                       
                        rf.X(228) in(535)                                                                           
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(541)                
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(14)                                                
                                               rf.X(228) in(521)                                                    
                                               S2 is time out                                                       
C0 ok(true)                                                                                                         
ERR(TimeOut) from S0 in                                                                                             
test1                                                                                                               
C0 Get nil because                                                                                                  
TimeOut from(S0)                                                                                                    
C0 send to S0 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(1)                                                                                                  
                                               S2 <-- C0 Get key(2)                                                 
                                               test1                                                                
                                               S2 do not have this                                                  
                                               log({0 43 2 Get 2 })                                                 
                                               S2 <-- C0 Get key(2)                                                 
                                               wait 1                                                               
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(517)                             
                                                                                             C4 ok(false)           
                                                                                             ERR(TimeOut) from S3 in
                                                                                             test1                  
                                                                                             C4 ERROR Get Key(0)    
                                                                                             from(S3)               
                                                                                             C4 send to S4 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(2)     
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(531)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(14)                                                                       
                        rf.X(228) in(536)                                                                           
                                               S2 -> 4 app fail                                                     
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(14)                                                
                                               rf.X(228) in(522)                                                    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(542)                
                                                                      S3 <-- C4 Get key(0)                          
                                                                      test2                                         
                                                                                             C4 ok(false)           
                                                                                             ERR(TimeOut) from S4 in
                                                                                             test2                  
                                                                                             C4 ERROR Get Key(0)    
                                                                                             from(S4)               
                                                                                             C4 send to S0 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(3)     
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(518)                             
                                                                      S3 vote -> 2 fail                             
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(532)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(14)                                                                       
                        rf.X(228) in(537)                                                                           
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(14)                                                
                                               rf.X(228) in(523)                                                    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(543)                
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(519)                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(14)                                                                       
                        rf.X(228) in(538)                                                                           
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(14)                                                
                                               rf.X(228) in(524)                                                    
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(533)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(544)                
                                                                      S3 vote -> 1 fail                             
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(520)                             
                        S1 <-- C4 Get key(0)                                                                        
                        test3                                                                                       
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S0 in test3       
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S0)       
                                                                                             C4 send to S1 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(4)     
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(14)                                                
                                               rf.X(228) in(525)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(14)                                                                       
                        rf.X(228) in(539)                                                                           
                                               S2 time out                                                          
                        C1 ok(true)                                                                                 
                        ERR(TimeOut) from S2                                                                        
                        in test5                                                                                    
                        C1 Append err(TimeOut)                                                                      
                        nil key(3) value(x 3                                                                        
                        21 y) r.index(0)                                                                            
                        from(S2)3                                                                                   
                        C1 send to S2 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test1                                                                                       
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(534)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(545)                
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(521)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(14)                                                
                                               rf.X(228) in(526)                                                    
                                                                      S3 the num is (697)                           
                                                                      applidindex(217)                              
                                                                      X(212)                                        
                        S1 commit(0)                                                                                
                        applied(0) lenlog(14)                                                                       
                        rf.X(228) in(540)                                                                           
S0 the num is (343)                                                                                                 
applidindex(217) X(217)                                                                                             
                                               S2 the num is (971)                                                  
                                               applidindex(228)                                                     
                                               X(228)                                                               
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(546)                
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(535)                                                                                                             
                                               S2 -> 3 app fail                                                     
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(522)                             
                                                                                             S4 <-- C4 Get key(0)   
                                                                                             test4                  
                                               S2 have log                                                          
                                               S2 {243 7 {-1 -1 2                                                   
                                               TIMEOUT  }}                                                          
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S1 in test4       
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S1)       
                                               S2 <-- C1 Get key(3)                                                 
                                               test1                                                                
                                                                                             C4 send to S2 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(5)     
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                                               S2 do not have this                                                  
                                               log({1 38 2 Append 3 x                                               
                                               3 21 y}) the index is                                                
                                               1                                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(14)                                                                       
                        rf.X(228) in(541)                                                                           
                                               S2 <-- C1 Append                                                     
                                               key(3) value(x 3 21 y)                                               
                                               index(1) wait test1                                                  
                                               S2 rf.nextindex[0] = 6                                               
                                               S2 index(15)  Pre(233)                                               
                                               len(15)                                                              
                                               S2 app -> 0 next(6)                                                  
                                               index(15) neT(7) cT(7)                                               
                                               S2 rf.nextindex[3] = 6                                               
                                               S2 index(15)  Pre(233)                                               
                                               len(15)                                                              
                                               S2 app -> 3 next(6)                                                  
                                               index(15) neT(7) cT(7)                                               
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(547)                
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(536)                                                                                                             
                                               S2 rf.nextindex[1] =                                                 
                                               15                                                                   
                                               S2 index(15)  Pre(242)                                               
                                               len(15)                                                              
                                               S2 app -> 1 next(15)                                                 
                                               index(15) neT(7) cT(7)                                               
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(527)                                                    
                                               S2 rf.nextindex[4] = 6                                               
                                               S2 index(15)  Pre(233)                                               
                                               len(15)                                                              
                                               S2 app -> 4 next(6)                                                  
                                               index(15) neT(7) cT(7)                                               
                        S1  app <- 2 T(7)                                                                           
                        cT(7)                                                                                       
                        S1 YYYY                                                                                     
                        S1 PreT(7) LT(7)                                                                            
                        S1 B success +                                                                              
                        log([{243 7 {-1 -1 2                                                                        
                        TIMEOUT  }}])                                                                               
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                                               S2 update                                                            
                                               nextindex[1](15) to 16                                               
                                               success                                                              
                                               S2 index(15)                                                         
                                               matchindex([0 15 15 2                                                
                                               2])                                                                  
                                               S2 successnum(2)                                                     
                                               com-rf.X(0) rf.CT(7)                                                 
                                               t(7)                                                                 
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                        S1 the num is (1014)                                                                        
                        applidindex(228)                                                                            
                        X(228)                                                                                      
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(523)                             
                                                                                             S4  app <- 2 T(7)      
                                                                                             cT(10)                 
                                                                                             S4 CCC fail            
                                               S2  app be -1's                                                      
                                               follower T(10)                                                       
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                                                                                             S4 Persist the         
                                                                                             log[[{217 7 {3 52 2 Get
                                                                                             1 }} {218 7 {0 41 2 Get
                                                                                             2 }} {219 7 {4 41 2 Get
                                                                                             0 }}]]                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(542)                                                                           
                                               S2 time out                                                          
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S1 in test5                              
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S1)1                          
                                                                      C3 send to S2 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test6                                         
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(528)                                                    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(548)                
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(537)                                                                                                             
S0 <-- C4 Get key(0)                                                                                                
test5                                                                                                               
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S2 in test5       
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S2)       
                                                                                             C4 send to S3 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(6)     
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(524)                             
                                                                      S3  app <- 2 T(7)                             
                                                                      cT(10)                                        
                                                                      S3 CCC fail                                   
                                                                      S3 Persist the                                
                                                                      log[[{212 7 {3 51 2                           
                                                                      Append 1 x 1 27 y}}                           
                                                                      {213 7 {4 40 2 Append                         
                                                                      0 x 0 21 y}} {214 7 {0                        
                                                                      40 2 Append 2 x 2 22                          
                                                                      y}} {215 7 {2 38 2 Get                        
                                                                      4 }} {216 7 {1 35 2                           
                                                                      Append 3 x 3 19 y}}                           
                                                                      {217 7 {3 52 2 Get 1                          
                                                                      }} {218 7 {0 41 2 Get                         
                                                                      2 }} {219 7 {4 41 2                           
                                                                      Get 0 }}]]                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(543)                                                                           
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(529)                                                    
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(538)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(549)                
S0  app <- 2 T(7)                                                                                                   
cT(10)                                                                                                              
S0 CCC fail                                                                                                         
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }}]]                                                                                                              
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(525)                             
                        S1 <-- C3 Get key(1)                                                                        
                        test6                                                                                       
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S2 in test6                              
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S2)1                          
                                                                      C3 send to S3 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test7                                         
                                               S2 is time out                                                       
                                                                                             S4 the num is (394)    
                                                                                             applidindex(217) X(217)
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S1 in test5                                                     
                                               C2 Get fail key(4)                                                   
                                               value() from(S1)                                                     
                                               C2 send to S2 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(6)                                                   
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(544)                                                                           
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(539)                                                                                                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(530)                                                    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(550)                
                                               S2 <-- C4 Get key(0)                                                 
                                               test6                                                                
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(526)                             
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S3 in test6       
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S3)       
                                                                                             C4 send to S4 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(7)     
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(545)                                                                           
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(531)                                                    
                                               S2 is time out                                                       
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(540)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(551)                
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S0 in test1                                                                                                    
C0 Get fail key(2)                                                                                                  
value() from(S0)                                                                                                    
C0 send to S1 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(2)                                                                                                  
                                                                      S3 <-- C4 Get key(0)                          
                                                                      test7                                         
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S4 in test7       
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S4)       
                                                                                             C4 send to S0 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(8)     
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(527)                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(546)                                                                           
S0 <-- C3 Get key(1)                                                                                                
test7                                                                                                               
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(532)                                                    
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S3 in test7                              
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S3)1                          
                                                                      C3 send to S4 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test8                                         
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(541)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(552)                
                        S1 <-- C2 Get key(4)                                                                        
                        test6                                                                                       
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S2 in test6                                                     
                                               C2 Get fail key(4)                                                   
                                               value() from(S2)                                                     
                                               C2 send to S3 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(7)                                                   
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(528)                             
C0 ok(false) ERR() from                                                                                             
S1 in test2                                                                                                         
C0 ERROR Get Key(2)                                                                                                 
from(S1)                                                                                                            
C0 send to S2 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(3)                                                                                                  
                                                                      S3 <-- C2 Get key(4)                          
                                                                      test7                                         
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S3 in test7                                                     
                                               C2 Get fail key(4)                                                   
                                               value() from(S3)                                                     
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(533)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(547)                                                                           
                                               C2 send to S4 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(8)                                                   
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(542)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(553)                
                                                                                             S4 <-- C3 Get key(1)   
                                                                                             test8                  
                        S1 <-- C4 Get key(0)                                                                        
                        test8                                                                                       
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S4 in test8                              
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S4)1                          
                                                                      C3 send to S0 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test9                                         
                                                                                             C4 ok(false) ERR() from
                                                                                             S0 in test8            
                                                                                             C4 ERROR Get Key(0)    
                                                                                             from(S0)               
                                                                                             C4 send to S1 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(9)     
                                                                                             S4 <-- C4 Get key(0)   
                                                                                             test9                  
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S1 in test9       
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S1)       
                                                                                             C4 send to S2 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(10)    
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(529)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(534)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(548)                                                                           
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(543)                                                                                                             
S0 <-- C4 Get key(0)                                                                                                
test10                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(554)                
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S2 in test10      
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S2)       
                                                                                             C4 send to S3 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(11)    
                                                                      C3 ok(false) ERR()                            
                                                                      from S0 in test9                              
                                                                      C3 ERROR Append key(1)                        
                                                                      value(x 1 29 y)                               
                                                                      from(S0)                                      
                                                                      C3 send to S1 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test10                                        
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(530)                             
S0 <-- C0 Get key(2)                                                                                                
test3                                                                                                               
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S2 in test3                                                                                                    
C0 Get fail key(2)                                                                                                  
value() from(S2)                                                                                                    
C0 send to S3 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(4)                                                                                                  
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(549)                                                                           
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(535)                                                    
                                                                                             S4 <-- C0 Get key(2)   
                                                                                             test4                  
                                                                                             S4 <-- C2 Get key(4)   
                                                                                             test8                  
C0 ok(false) ERR() from                                                                                             
S3 in test4                                                                                                         
C0 ERROR Get Key(2)                                                                                                 
from(S3)                                                                                                            
C0 send to S4 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(5)                                                                                                  
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(544)                                                                                                             
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S4 in test8                                                     
                                               C2 Get fail key(4)                                                   
                                               value() from(S4)                                                     
                                               C2 send to S0 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(9)                                                   
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(555)                
                                               S2 the num is (1014)                                                 
                                               applidindex(228)                                                     
                                               X(228)                                                               
S0 the num is (343)                                                                                                 
applidindex(217) X(217)                                                                                             
                                                                      S3 the num is (697)                           
                                                                      applidindex(217)                              
                                                                      X(212)                                        
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(531)                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(550)                                                                           
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(536)                                                    
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(545)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(556)                
                                               S2 time out                                                          
                        C1 ok(true)                                                                                 
                        ERR(ErrWrongLeader)                                                                         
                        from S2 in test1                                                                            
                        C1 Append err() fail                                                                        
                        key(3) value(x 3 21 y)                                                                      
                        r.index(0) from(S2)1                                                                        
                        C1 send to S3 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test2                                                                                       
                        S1 <-- C0 Get key(2)                                                                        
                        test5                                                                                       
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S4 in test5                                                                                                    
C0 Get fail key(2)                                                                                                  
value() from(S4)                                                                                                    
C0 send to S0 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(6)                                                                                                  
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(532)                             
                                               S2 <-- C0 Get key(2)                                                 
                                               test6                                                                
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S0 in test6                                                                                                    
C0 Get fail key(2)                                                                                                  
value() from(S0)                                                                                                    
C0 send to S1 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(7)                                                                                                  
                                               S2 <-- C4 Get key(0)                                                 
                                               test11                                                               
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S3 in test11      
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S3)       
                                                                                             C4 send to S4 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(12)    
                                               S2 <-- C3 Get key(1)                                                 
                                               test10                                                               
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S1 in test10                             
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S1)1                          
                                                                      C3 send to S2 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test11                                        
                        S1 the num is (1014)                                                                        
                        applidindex(228)                                                                            
                        X(228)                                                                                      
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(551)                                                                           
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(537)                                                    
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(546)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(557)                
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(533)                             
S0 <-- C2 Get key(4)                                                                                                
test9                                                                                                               
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S0 in test9                                                     
                                               C2 Get fail key(4)                                                   
                                               value() from(S0)                                                     
                                               C2 send to S1 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(10)                                                  
                                               S2 <-- C2 Get key(4)                                                 
                                               test10                                                               
                        S1 <-- C1 Get key(3)                                                                        
                        test2                                                                                       
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S1 in test10                                                    
                                               C2 Get fail key(4)                                                   
                                               value() from(S1)                                                     
                                               C2 send to S2 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(11)                                                  
                        C1 ok(true)                                                                                 
                        ERR(ErrWrongLeader)                                                                         
                        from S3 in test2                                                                            
                        C1 Append err() fail                                                                        
                        key(3) value(x 3 21 y)                                                                      
                        r.index(0) from(S3)1                                                                        
                        C1 send to S4 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test3                                                                                       
                        S1 <-- C2 Get key(4)                                                                        
                        test11                                                                                      
                        S1 <-- C3 Get key(1)                                                                        
                        test11                                                                                      
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(538)                                                    
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S2 in test11                                                    
                                               C2 Get fail key(4)                                                   
                                               value() from(S2)                                                     
                                               C2 send to S3 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(12)                                                  
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S2 in test11                             
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S2)1                          
                                                                      C3 send to S3 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test12                                        
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(552)                                                                           
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(558)                
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(547)                                                                                                             
S0 <-- C3 Get key(1)                                                                                                
test12                                                                                                              
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(534)                             
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S3 in test12                             
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S3)1                          
                                                                      C3 send to S4 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test13                                        
                                                                      S3 <-- C4 Get key(0)                          
                                                                      test12                                        
C0 ok(false) ERR() from                                                                                             
S1 in test7                                                                                                         
C0 ERROR Get Key(2)                                                                                                 
from(S1)                                                                                                            
C0 send to S2 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(8)                                                                                                  
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S4 in test12      
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S4)       
                                                                                             C4 send to S0 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(13)    
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(548)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(553)                                                                           
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(559)                
                                                                                             S4 the num is (394)    
                                                                                             applidindex(217) X(217)
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(539)                                                    
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(535)                             
                                                                      S3 <-- C2 Get key(4)                          
                                                                      test12                                        
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S3 in test12                                                    
                                               C2 Get fail key(4)                                                   
                                               value() from(S3)                                                     
                                               C2 send to S4 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(13)                                                  
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(540)                                                    
                        S1 <-- C4 Get key(0)                                                                        
                        test13                                                                                      
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S0 in test13      
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S0)       
                                                                                             C4 send to S1 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(14)    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(554)                                                                           
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(560)                
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(549)                                                                                                             
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(536)                             
                                                                                             S4 <-- C3 Get key(1)   
                                                                                             test13                 
                                                                                             S4 <-- C1 Get key(3)   
                                                                                             test3                  
                                                                      C3 ok(false) ERR()                            
                                                                      from S4 in test13                             
                                                                      C3 ERROR Append key(1)                        
                                                                      value(x 1 29 y)                               
                                                                      from(S4)                                      
                                                                      C3 send to S0 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test14                                        
                        C1 ok(true)                                                                                 
                        ERR(ErrWrongLeader)                                                                         
                        from S4 in test3                                                                            
                        C1 Append err() fail                                                                        
                        key(3) value(x 3 21 y)                                                                      
                        r.index(0) from(S4)1                                                                        
                        C1 send to S0 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test4                                                                                       
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(541)                                                    
                                                                      S3 <-- C3 Get key(1)                          
                                                                      test14                                        
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S0 in test14                             
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S0)1                          
                                                                      C3 send to S1 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test15                                        
                                                                                             S4 <-- C4 Get key(0)   
                                                                                             test14                 
                                                                                             C4 ok(false) ERR() from
                                                                                             S1 in test14           
                                                                                             C4 ERROR Get Key(0)    
                                                                                             from(S1)               
                                                                                             C4 send to S2 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(15)    
S0 <-- C0 Get key(2)                                                                                                
test8                                                                                                               
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S2 in test8                                                                                                    
C0 Get fail key(2)                                                                                                  
value() from(S2)                                                                                                    
C0 send to S3 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(9)                                                                                                  
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(561)                
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(550)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(555)                                                                           
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(537)                             
                                                                                             S4 <-- C0 Get key(2)   
                                                                                             test9                  
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(542)                                                    
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S3 in test9                                                                                                    
C0 Get fail key(2)                                                                                                  
value() from(S3)                                                                                                    
C0 send to S4 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(10)                                                                                                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(556)                                                                           
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(562)                
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(551)                                                                                                             
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(538)                             
                                                                                             S4 <-- C2 Get key(4)   
                                                                                             test13                 
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S4 in test13                                                    
                                               C2 Get fail key(4)                                                   
                                               value() from(S4)                                                     
                                               C2 send to S0 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(14)                                                  
S0 <-- C4 Get key(0)                                                                                                
test15                                                                                                              
                                               S2 <-- C3 Get key(1)                                                 
                                               test15                                                               
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S2 in test15      
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S2)       
                                                                                             C4 send to S3 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(16)    
S0 <-- C1 Get key(3)                                                                                                
test4                                                                                                               
                        C1 ok(false) ERR()                                                                          
                        from S0 in test4                                                                            
                        C1 ERROR Append key(3)                                                                      
                        value(x 3 21 y)                                                                             
                        from(S0)                                                                                    
                        C1 send to S1 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test5                                                                                       
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S1 in test15                             
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S1)1                          
                                                                      C3 send to S2 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test16                                        
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(543)                                                    
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(552)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(563)                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(557)                                                                           
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(539)                             
                        S1 <-- C0 Get key(2)                                                                        
                        test10                                                                                      
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S4 in test10                                                                                                   
C0 Get fail key(2)                                                                                                  
value() from(S4)                                                                                                    
C0 send to S0 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(11)                                                                                                 
S0 <-- C2 Get key(4)                                                                                                
test14                                                                                                              
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S0 in test14                                                    
                                               C2 Get fail key(4)                                                   
                                               value() from(S0)                                                     
                                               C2 send to S1 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(15)                                                  
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(544)                                                    
                                               S2 <-- C4 Get key(0)                                                 
                                               test16                                                               
                                                                      S3 <-- C1 Get key(3)                          
                                                                      test5                                         
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S3 in test16      
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S3)       
                                                                                             C4 send to S4 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(17)    
                        C1 ok(true)                                                                                 
                        ERR(ErrWrongLeader)                                                                         
                        from S1 in test5                                                                            
                        C1 Append err() fail                                                                        
                        key(3) value(x 3 21 y)                                                                      
                        r.index(0) from(S1)1                                                                        
                        C1 send to S2 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test6                                                                                       
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(553)                                                                                                             
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(540)                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(564)                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(558)                                                                           
                                               S2 <-- C2 Get key(4)                                                 
                                               test15                                                               
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S1 in test15                                                    
                                               C2 Get fail key(4)                                                   
                                               value() from(S1)                                                     
                                               C2 send to S2 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(16)                                                  
                                               S2 the num is (1014)                                                 
                                               applidindex(228)                                                     
                                               X(228)                                                               
S0 the num is (343)                                                                                                 
applidindex(217) X(217)                                                                                             
                                                                      S3 the num is (697)                           
                                                                      applidindex(217)                              
                                                                      X(212)                                        
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(545)                                                    
                        S1 <-- C2 Get key(4)                                                                        
                        test16                                                                                      
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S2 in test16                                                    
                                               C2 Get fail key(4)                                                   
                                               value() from(S2)                                                     
                                               C2 send to S3 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(17)                                                  
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(559)                                                                           
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(565)                
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(541)                             
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(554)                                                                                                             
                                               S2 <-- C0 Get key(2)                                                 
                                               test11                                                               
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S0 in test11                                                                                                   
C0 Get fail key(2)                                                                                                  
value() from(S0)                                                                                                    
C0 send to S1 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(12)                                                                                                 
                        S1 <-- C3 Get key(1)                                                                        
                        test16                                                                                      
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S2 in test16                             
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S2)1                          
                                                                      C3 send to S3 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test17                                        
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(546)                                                    
                                                                      S3 <-- C4 Get key(0)                          
                                                                      test17                                        
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(566)                
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S4 in test17      
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S4)       
                                                                                             C4 send to S0 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(18)    
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(542)                             
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(555)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(560)                                                                           
                        S1 the num is (1014)                                                                        
                        applidindex(228)                                                                            
                        X(228)                                                                                      
C0 ok(false) ERR() from                                                                                             
S1 in test12                                                                                                        
C0 ERROR Get Key(2)                                                                                                 
from(S1)                                                                                                            
C0 send to S2 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(13)                                                                                                 
                                               S2 <-- C1 Get key(3)                                                 
                                               test6                                                                
                        C1 ok(true)                                                                                 
                        ERR(ErrWrongLeader)                                                                         
                        from S2 in test6                                                                            
                        C1 Append err() fail                                                                        
                        key(3) value(x 3 21 y)                                                                      
                        r.index(0) from(S2)1                                                                        
                        C1 send to S3 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test7                                                                                       
                        S1 <-- C4 Get key(0)                                                                        
                        test18                                                                                      
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S0 in test18      
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S0)       
                                                                                             C4 send to S1 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(19)    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(567)                
S0 <-- C3 Get key(1)                                                                                                
test17                                                                                                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(547)                                                    
                                                                      S3 <-- C2 Get key(4)                          
                                                                      test17                                        
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(556)                                                                                                             
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(543)                             
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S3 in test17                             
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S3)1                          
                                                                      C3 send to S4 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test18                                        
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S3 in test17                                                    
                                               C2 Get fail key(4)                                                   
                                               value() from(S3)                                                     
                                               C2 send to S4 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(18)                                                  
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(561)                                                                           
                                                                                             S4 <-- C4 Get key(0)   
                                                                                             test19                 
                                                                                             S4 <-- C3 Get key(1)   
                                                                                             test18                 
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S1 in test19      
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S1)       
                                                                                             C4 send to S2 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(20)    
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S4 in test18                             
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S4)1                          
                                                                      C3 send to S0 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test19                                        
S0 <-- C4 Get key(0)                                                                                                
test20                                                                                                              
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S2 in test20      
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S2)       
                                                                                             C4 send to S3 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(21)    
                                                                                             S4 <-- C2 Get key(4)   
                                                                                             test18                 
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S4 in test18                                                    
                                               C2 Get fail key(4)                                                   
                                               value() from(S4)                                                     
                                               C2 send to S0 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(19)                                                  
                        S1 <-- C1 Get key(3)                                                                        
                        test7                                                                                       
                        C1 ok(true)                                                                                 
                        ERR(ErrWrongLeader)                                                                         
                        from S3 in test7                                                                            
                        C1 Append err() fail                                                                        
                        key(3) value(x 3 21 y)                                                                      
                        r.index(0) from(S3)1                                                                        
                        C1 send to S4 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test8                                                                                       
                                                                                             S4 <-- C1 Get key(3)   
                                                                                             test8                  
                        C1 ok(true)                                                                                 
                        ERR(ErrWrongLeader)                                                                         
                        from S4 in test8                                                                            
                        C1 Append err() fail                                                                        
                        key(3) value(x 3 21 y)                                                                      
                        r.index(0) from(S4)1                                                                        
                        C1 send to S0 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test9                                                                                       
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(568)                
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(548)                                                    
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(544)                             
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(557)                                                                                                             
                                                                                             S4 the num is (394)    
                                                                                             applidindex(217) X(217)
S0 <-- C2 Get key(4)                                                                                                
test19                                                                                                              
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S0 in test19                                                    
                                               C2 Get fail key(4)                                                   
                                               value() from(S0)                                                     
                                               C2 send to S1 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(20)                                                  
                                                                      S3 <-- C3 Get key(1)                          
                                                                      test19                                        
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S0 in test19                             
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S0)1                          
                                                                      C3 send to S1 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test20                                        
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(562)                                                                           
                                               S2 <-- C3 Get key(1)                                                 
                                               test20                                                               
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S1 in test20                             
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S1)1                          
                                                                      C3 send to S2 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test21                                        
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(545)                             
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(558)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(569)                
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(549)                                                    
S0 <-- C0 Get key(2)                                                                                                
test13                                                                                                              
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S2 in test13                                                                                                   
C0 Get fail key(2)                                                                                                  
value() from(S2)                                                                                                    
C0 send to S3 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(14)                                                                                                 
                                               S2 <-- C2 Get key(4)                                                 
                                               test20                                                               
                                               C2 ok(false) ERR()                                                   
                                               from S1 in test20                                                    
                                               C2 ERROR Get Key(4)                                                  
                                               from(S1)                                                             
                                               C2 send to S2 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(21)                                                  
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(563)                                                                           
                                                                                             C4 ok(false) ERR() from
                                                                                             S3 in test21           
                                                                                             C4 ERROR Get Key(0)    
                                                                                             from(S3)               
                                                                                             C4 send to S4 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(22)    
                        S1 <-- C3 Get key(1)                                                                        
                        test21                                                                                      
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S2 in test21                             
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S2)1                          
                                                                      C3 send to S3 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test22                                        
                                                                                             C4 ok(false) ERR() from
                                                                                             S4 in test22           
                                                                                             C4 ERROR Get Key(0)    
                                                                                             from(S4)               
                                                                                             C4 send to S0 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(23)    
S0 <-- C3 Get key(1)                                                                                                
test22                                                                                                              
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S3 in test22                             
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S3)1                          
                                                                      C3 send to S4 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test23                                        
                                                                                             S4 <-- C3 Get key(1)   
                                                                                             test23                 
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(559)                                                                                                             
S0 <-- C1 Get key(3)                                                                                                
test9                                                                                                               
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(546)                             
                        C1 ok(true)                                                                                 
                        ERR(ErrWrongLeader)                                                                         
                        from S0 in test9                                                                            
                        C1 Append err() fail                                                                        
                        key(3) value(x 3 21 y)                                                                      
                        r.index(0) from(S0)1                                                                        
                        C1 send to S1 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test10                                                                                      
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S4 in test23                             
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S4)1                          
                                                                      C3 send to S0 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test24                                        
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(550)                                                    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(570)                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(564)                                                                           
                                                                                             S4 <-- C0 Get key(2)   
                                                                                             test14                 
C0 ok(false) ERR() from                                                                                             
S3 in test14                                                                                                        
C0 ERROR Get Key(2)                                                                                                 
from(S3)                                                                                                            
C0 send to S4 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(15)                                                                                                 
                        S1 <-- C2 Get key(4)                                                                        
                        test21                                                                                      
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S2 in test21                                                    
                                               C2 Get fail key(4)                                                   
                                               value() from(S2)                                                     
                                               C2 send to S3 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(22)                                                  
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(560)                                                                                                             
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(547)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(551)                                                    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(571)                
                                                                      S3 <-- C1 Get key(3)                          
                                                                      test10                                        
                        C1 ok(true)                                                                                 
                        ERR(ErrWrongLeader)                                                                         
                        from S1 in test10                                                                           
                        C1 Append err() fail                                                                        
                        key(3) value(x 3 21 y)                                                                      
                        r.index(0) from(S1)1                                                                        
                        C1 send to S2 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test11                                                                                      
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(565)                                                                           
                        S1 <-- C0 Get key(2)                                                                        
                        test15                                                                                      
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S4 in test15                                                                                                   
C0 Get fail key(2)                                                                                                  
value() from(S4)                                                                                                    
C0 send to S0 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(16)                                                                                                 
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(561)                                                                                                             
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(548)                             
                        S1 <-- C4 Get key(0)                                                                        
                        test23                                                                                      
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S0 in test23      
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S0)       
                                                                                             C4 send to S1 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(24)    
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(552)                                                    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(572)                
                                               S2 <-- C1 Get key(3)                                                 
                                               test11                                                               
                                                                      S3 <-- C2 Get key(4)                          
                                                                      test22                                        
                        C1 ok(true)                                                                                 
                        ERR(ErrWrongLeader)                                                                         
                        from S2 in test11                                                                           
                        C1 Append err() fail                                                                        
                        key(3) value(x 3 21 y)                                                                      
                        r.index(0) from(S2)1                                                                        
                        C1 send to S3 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test12                                                                                      
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(566)                                                                           
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S3 in test22                                                    
                                               C2 Get fail key(4)                                                   
                                               value() from(S3)                                                     
                                               C2 send to S4 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(23)                                                  
                                                                                             S4 <-- C4 Get key(0)   
                                                                                             test24                 
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S1 in test24      
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S1)       
                                                                                             C4 send to S2 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(25)    
                                                                      S3 <-- C3 Get key(1)                          
                                                                      test24                                        
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S0 in test24                             
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S0)1                          
                                                                      C3 send to S1 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test25                                        
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(562)                                                                                                             
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(549)                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(573)                
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(553)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(567)                                                                           
S0 the num is (343)                                                                                                 
applidindex(217) X(217)                                                                                             
                                               S2 the num is (1014)                                                 
                                               applidindex(228)                                                     
                                               X(228)                                                               
                                                                      S3 the num is (697)                           
                                                                      applidindex(217)                              
                                                                      X(212)                                        
                        C1 ok(false) ERR()                                                                          
                        from S3 in test12                                                                           
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(563)                                                                                                             
                        C1 ERROR Append key(3)                                                                      
                        value(x 3 21 y)                                                                             
                        from(S3)                                                                                    
                        C1 send to S4 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test13                                                                                      
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(550)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(554)                                                    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(574)                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(568)                                                                           
                                               S2 <-- C0 Get key(2)                                                 
                                               test16                                                               
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S0 in test16                                                                                                   
C0 Get fail key(2)                                                                                                  
value() from(S0)                                                                                                    
C0 send to S1 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(17)                                                                                                 
                                                                                             S4 <-- C2 Get key(4)   
                                                                                             test23                 
                                               S2 <-- C3 Get key(1)                                                 
                                               test25                                                               
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S4 in test23                                                    
                                                                      C3 ok(true)                                   
                                                                      ERR(ErrWrongLeader)                           
                                                                      from S1 in test25                             
                                                                      C3 Append err() fail                          
                                                                      key(1) value(x 1 29 y)                        
                                                                      r.index(0) from(S1)1                          
                                                                      C3 send to S2 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test26                                        
                                               C2 Get fail key(4)                                                   
                                               value() from(S4)                                                     
                                               C2 send to S0 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(24)                                                  
S0 <-- C4 Get key(0)                                                                                                
test25                                                                                                              
                                                                      S3 <-- C0 Get key(2)                          
                                                                      test17                                        
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S1 in test17                                                                                                   
C0 Get fail key(2)                                                                                                  
value() from(S1)                                                                                                    
C0 send to S2 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(18)                                                                                                 
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S2 in test25      
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S2)       
                                                                                             C4 send to S3 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(26)    
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(551)                             
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(564)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(575)                
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(555)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(569)                                                                           
                        S1 the num is (1014)                                                                        
                        applidindex(228)                                                                            
                        X(228)                                                                                      
S0 <-- C2 Get key(4)                                                                                                
test24                                                                                                              
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S0 in test24                                                    
                                               C2 Get fail key(4)                                                   
                                               value() from(S0)                                                     
                                               C2 send to S1 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(25)                                                  
                                                                                             S4  vote vf(4) to own  
                                                                                             S4 Persist the         
                                                                                             log[[{217 7 {3 52 2 Get
                                                                                             1 }} {218 7 {0 41 2 Get
                                                                                             2 }} {219 7 {4 41 2 Get
                                                                                             0 }}]]                 
                                                                                             S4  vote -> 3 cT(11)   
                                                                                             S4  vote -> 1 cT(11)   
                                                                                             S4  vote -> 2 cT(11)   
                                                                                             S4  vote -> 0 cT(11)   
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(565)                                                                                                             
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(552)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(556)                                                    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(576)                
                                               S2 the len(log) is 16                                                
                                               S2  vote <- 4 not                                                    
                                               lastlogIn(219) <                                                     
                                               rf.logIn(15) vf(-1)                                                  
S0 <-- C0 Get key(2)                                                                                                
test18                                                                                                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(570)                                                                           
C0 ok(true)                                                                                                         
ERR(ErrWrongLeader)                                                                                                 
from S2 in test18                                                                                                   
C0 Get fail key(2)                                                                                                  
value() from(S2)                                                                                                    
C0 send to S3 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(19)                                                                                                 
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                                                                                             S4 Persist the         
                                                                                             log[[{217 7 {3 52 2 Get
                                                                                             1 }} {218 7 {0 41 2 Get
                                                                                             2 }} {219 7 {4 41 2 Get
                                                                                             0 }}]]                 
                                                                      C3 ok(false) ERR()                            
                                                                      from S2 in test26                             
                                                                      C3 ERROR Append key(1)                        
                                                                      value(x 1 29 y)                               
                                                                      from(S2)                                      
                                                                      C3 send to S3 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test27                                        
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                                                                                             S4 <-- C1 Get key(3)   
                                                                                             test13                 
                        C1 ok(true)                                                                                 
                        ERR(ErrWrongLeader)                                                                         
                        from S4 in test13                                                                           
                        C1 Append err() fail                                                                        
                        key(3) value(x 3 21 y)                                                                      
                        r.index(0) from(S4)1                                                                        
                        C1 send to S0 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test14                                                                                      
                                                                      S3 the len(log) is 8                          
                                                                      S3  vote <- 4 T(7) =                          
                                                                      LastlogT(7) logi(7)                           
                                                                      lastlogindex(219)                             
                                               S2 <-- C4 Get key(0)                                                 
                                               test26                                                               
                                                                      S3 Persist the                                
                                                                      log[[{212 7 {3 51 2                           
                                                                      Append 1 x 1 27 y}}                           
                                                                      {213 7 {4 40 2 Append                         
                                                                      0 x 0 21 y}} {214 7 {0                        
                                                                      40 2 Append 2 x 2 22                          
                                                                      y}} {215 7 {2 38 2 Get                        
                                                                      4 }} {216 7 {1 35 2                           
                                                                      Append 3 x 3 19 y}}                           
                                                                      {217 7 {3 52 2 Get 1                          
                                                                      }} {218 7 {0 41 2 Get                         
                                                                      2 }} {219 7 {4 41 2                           
                                                                      Get 0 }}]]                                    
                                               S2 <-- C2 Get key(4)                                                 
                                               test25                                                               
                                                                      S3 Persist the                                
                                                                      log[[{212 7 {3 51 2                           
                                                                      Append 1 x 1 27 y}}                           
                                                                      {213 7 {4 40 2 Append                         
                                                                      0 x 0 21 y}} {214 7 {0                        
                                                                      40 2 Append 2 x 2 22                          
                                                                      y}} {215 7 {2 38 2 Get                        
                                                                      4 }} {216 7 {1 35 2                           
                                                                      Append 3 x 3 19 y}}                           
                                                                      {217 7 {3 52 2 Get 1                          
                                                                      }} {218 7 {0 41 2 Get                         
                                                                      2 }} {219 7 {4 41 2                           
                                                                      Get 0 }}]]                                    
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S3 in test26      
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S3)       
                                                                                             C4 send to S4 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(27)    
                                               C2 ok(false) ERR()                                                   
                                               from S1 in test25                                                    
                                               C2 ERROR Get Key(4)                                                  
                                               from(S1)                                                             
                                               C2 send to S2 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(26)                                                  
                                                                                             S4 Persist the         
                                                                                             log[[{217 7 {3 52 2 Get
                                                                                             1 }} {218 7 {0 41 2 Get
                                                                                             2 }} {219 7 {4 41 2 Get
                                                                                             0 }}]]                 
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(566)                                                                                                             
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(553)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(557)                                                    
                        S1 the len(log) is 16                                                                       
                        S1  vote <- 4 not                                                                           
                        lastlogIn(219) <                                                                            
                        rf.logIn(15) vf(-1)                                                                         
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(2) rf.X(217)    
                                                                                             in(577)                
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                                                                                             S4 Persist the         
                                                                                             log[[{217 7 {3 52 2 Get
                                                                                             1 }} {218 7 {0 41 2 Get
                                                                                             2 }} {219 7 {4 41 2 Get
                                                                                             0 }}]]                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(571)                                                                           
S0 <-- C1 Get key(3)                                                                                                
test14                                                                                                              
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                        C1 ok(true)                                                                                 
                        ERR(ErrWrongLeader)                                                                         
                        from S0 in test14                                                                           
                        C1 Append err() fail                                                                        
                        key(3) value(x 3 21 y)                                                                      
                        r.index(0) from(S0)1                                                                        
                        C1 send to S1 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test15                                                                                      
S0 the len(log) is 2                                                                                                
S0  vote <- 4 T(7) =                                                                                                
LastlogT(7) logi(1)                                                                                                 
lastlogindex(219)                                                                                                   
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }}]]                                                                                                              
                                                                                             S4  have 3 votes T(11) 
                                                                                             cT(11) 2 B             
                                                                                             S4 update              
                                                                                             nextindex[0](3) to 3   
                                                                                             (len(log))             
                                                                                             S4 update              
                                                                                             nextindex[0](3) to 3   
                                                                                             (len(log))             
                                                                                             S4 update              
                                                                                             nextindex[0](3) to 3   
                                                                                             (len(log))             
                                                                                             S4 update              
                                                                                             nextindex[0](3) to 3   
                                                                                             (len(log))             
                                                                                             S4 update              
                                                                                             nextindex[0](3) to 3   
                                                                                             (len(log))             
                                                                                             S4  be Leader B        
                                                                      C3 ok(false) ERR()                            
                                                                      from S3 in test27                             
                                                                      C3 ERROR Append key(1)                        
                                                                      value(x 1 29 y)                               
                                                                      from(S3)                                      
                                                                      C3 send to S4 Append                          
                                                                      Key(1) value(x 1 29 y)                        
                                                                      CIndex(3) OIndex(55)                          
                                                                      test28                                        
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }}]]                                                                                                              
                                                                                             S4 Persist the         
                                                                                             log[[{217 7 {3 52 2 Get
                                                                                             1 }} {218 7 {0 41 2 Get
                                                                                             2 }} {219 7 {4 41 2 Get
                                                                                             0 }}]]                 
                                                                                             S4 appendentries error 
                                                                                             to exit because tindex 
                                                                                             or loglen changed      
                                                                                             S4 rf.nextindex[1] = 3 
                                                                                             S4 index(2)  Pre(219)  
                                                                                             len(2)                 
                                                                                             S4 app -> 1 next(3)    
                                                                                             index(2) neT(7) cT(11) 
                                                                                             S4 rf.nextindex[2] = 3 
                                                                                             S4 index(2)  Pre(219)  
                                                                                             len(2)                 
                                                                                             S4 app -> 2 next(3)    
                                                                                             index(2) neT(7) cT(11) 
                                                                                             S4 rf.nextindex[3] = 3 
                                                                                             S4 index(2)  Pre(219)  
                                                                                             len(2)                 
                                                                                             S4 app -> 3 next(3)    
                                                                                             index(2) neT(7) cT(11) 
                                                                                             S4 the num is (394)    
                                                                                             applidindex(217) X(217)
                                                                                             S4 have log            
                                                                                             S4 {220 11 {-1 -1 4    
                                                                                             TIMEOUT  }}            
                                                                                             S4 rf.nextindex[3] = 3 
                                                                                             S4 index(3)  Pre(219)  
                                                                                             len(3)                 
                                                                                             S4 app -> 3 next(3)    
                                                                                             index(3) neT(7) cT(11) 
                                                                                             S4 Persist the         
                                                                                             log[[{217 7 {3 52 2 Get
                                                                                             1 }} {218 7 {0 41 2 Get
                                                                                             2 }} {219 7 {4 41 2 Get
                                                                                             0 }} {220 11 {-1 -1 4  
                                                                                             TIMEOUT  }}]]          
                                                                                             S4 rf.nextindex[0] = 3 
                                                                                             S4 index(3)  Pre(219)  
                                                                                             len(3)                 
                                                                                             S4 app -> 0 next(3)    
                                                                                             index(3) neT(7) cT(11) 
                                                                                             S4 rf.nextindex[1] = 3 
                                                                                             S4 index(3)  Pre(219)  
                                                                                             len(3)                 
                                                                                             S4 app -> 1 next(3)    
                                                                                             index(3) neT(7) cT(11) 
                                                                                             S4 rf.nextindex[2] = 3 
                                                                                             S4 index(3)  Pre(219)  
                                                                                             len(3)                 
                                                                                             S4 app -> 2 next(3)    
                                                                                             index(3) neT(7) cT(11) 
                                               S2  heart <- 4 T(11)                                                 
                                               cT(11)                                                               
                                               S2 YYYY                                                              
                                               S2 be follower                                                       
                                               S2 i = 1                                                             
                                               S2 BBB fail logi(15)                                                 
                                               pre(-9) TI(229)                                                      
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                                                                                             S4 -> 0 app fail       
                        C1 ok(false) ERR()                                                                          
                        from S1 in test15                                                                           
                        C1 ERROR Append key(3)                                                                      
                        value(x 3 21 y)                                                                             
                        from(S1)                                                                                    
                        C1 send to S2 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test16                                                                                      
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(3) rf.X(217)    
                                                                                             in(578)                
                                                                                             S4 to 2 匹配失败       
                                                                                             tfi(229)               
                                                                                             S4 update              
                                                                                             nextindex[2](3) to     
                                                                                             X(12) > 1              
                                                                                             S4 update              
                                                                                             nextindex[2](12) to 4> 
                                                                                             1                      
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(554)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(558)                                                    
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(567)                                                                                                             
                                                                                             S4 <-- C0 Get key(2)   
                                                                                             test19                 
                        S1  heart <- 4 T(11)                                                                        
                        cT(11)                                                                                      
                                                                                             S4 start Get key(2)    
                        S1 YYYY                                                                                     
                                                                                             S4 have log            
                        S1 be follower                                                                              
                        S1 i = 1                                                                                    
                        S1 BBB fail logi(15)                                                                        
                        pre(-9) TI(229)                                                                             
                                                                                             S4 {221 11 {0 43 4 Get 
                                                                                             2 }}                   
                                                                                             S4 have this log({0 43 
                                                                                             4 Get 2 }) in raft     
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(572)                                                                           
                                                                                             S4 <-- C0 Get key(2)   
                                                                                             wait 19                
                                                                                             S4 Persist the         
                                                                                             log[[{217 7 {3 52 2 Get
                                                                                             1 }} {218 7 {0 41 2 Get
                                                                                             2 }} {219 7 {4 41 2 Get
                                                                                             0 }} {220 11 {-1 -1 4  
                                                                                             TIMEOUT  }} {221 11 {0 
                                                                                             43 4 Get 2 }}]]        
                                                                                             S4 -> 1 app fail       
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                                                                                             S4 rf.nextindex[0] = 3 
                                                                                             S4 index(4)  Pre(219)  
                                                                                             len(4)                 
                                                                                             S4 app -> 0 next(3)    
                                                                                             index(4) neT(7) cT(11) 
                                                                                             S4 rf.nextindex[1] = 3 
                                                                                             S4 index(4)  Pre(219)  
                                                                                             len(4)                 
                                                                                             S4 app -> 1 next(3)    
                                                                                             index(4) neT(7) cT(11) 
                                                                                             S4 rf.nextindex[2] = 4 
                                                                                             S4 index(4)  Pre(220)  
                                                                                             len(4)                 
                                                                                             S4 app -> 2 next(4)    
                                                                                             index(4) neT(11) cT(11)
                                                                                             S4 rf.nextindex[3] = 3 
                                                                                             S4 index(4)  Pre(219)  
                                                                                             len(4)                 
                                                                                             S4 app -> 3 next(3)    
                                                                                             index(4) neT(7) cT(11) 
                                                                                             S4 -> 1 app fail       
                                                                      S3 <-- C4 Get key(0)                          
                                                                      test27                                        
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S4 in test27      
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S4)       
                                                                                             C4 send to S0 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(28)    
                                               C2 ok(false) ERR()                                                   
                                               from S2 in test26                                                    
                                               C2 ERROR Get Key(4)                                                  
                                               from(S2)                                                             
                                               C2 send to S3 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(27)                                                  
                                                                                             S4 <-- C3 Get key(1)   
                                                                                             test28                 
                                                                                             S4 have log            
                                                                                             S4 {222 11 {3 55 4     
                                                                                             Append 1 x 1 29 y}}    
                                                                                             S4 have this log({3 55 
                                                                                             4 Append 1 x 1 29 y})  
                                                                                             in raft the index is   
                                                                                             222                    
                                                                                             S4 <-- C3 Append key(1)
                                                                                             value(x 1 29 y)        
                                                                                             index(222) wait test28 
                                                                                             S4 Persist the         
                                                                                             log[[{217 7 {3 52 2 Get
                                                                                             1 }} {218 7 {0 41 2 Get
                                                                                             2 }} {219 7 {4 41 2 Get
                                                                                             0 }} {220 11 {-1 -1 4  
                                                                                             TIMEOUT  }} {221 11 {0 
                                                                                             43 4 Get 2 }} {222 11  
                                                                                             {3 55 4 Append 1 x 1 29
                                                                                             y}}]]                  
                                               S2 <-- C1 Get key(3)                                                 
                                               test16                                                               
                                                                                             S4 rf.nextindex[2] = 4 
                                                                                             S4 index(5)  Pre(220)  
                                                                                             len(5)                 
                                                                                             S4 app -> 2 next(4)    
                                                                                             index(5) neT(11) cT(11)
                        C1 ok(false) ERR()                                                                          
                        from S2 in test16                                                                           
                        C1 ERROR Append key(3)                                                                      
                        value(x 3 21 y)                                                                             
                        from(S2)                                                                                    
                        C1 send to S3 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test17                                                                                      
                        S1  app <- 4 T(11)                                                                          
                        cT(11)                                                                                      
                        S1 YYYY                                                                                     
                        S1 i = 1                                                                                    
                        S1 BBB fail logi(15)                                                                        
                        pre(-9) TI(229)                                                                             
                                                                                             S4 rf.nextindex[0] = 3 
                                                                                             S4 index(5)  Pre(219)  
                                                                                             len(5)                 
                                                                                             S4 app -> 0 next(3)    
                                                                                             index(5) neT(7) cT(11) 
                                                                      S3 <-- C2 Get key(4)                          
                                                                      test27                                        
                                                                                             S4 to 1 匹配失败       
                                                                                             tfi(229)               
                                                                                             S4 update              
                                                                                             nextindex[1](3) to     
                                                                                             X(12) > 1              
                                                                                             S4 update              
                                                                                             nextindex[1](12) to 6> 
                                                                                             1                      
                                                                                             S4 rf.nextindex[1] = 6 
                                                                                             S4 index(5)  Pre(222)  
                                                                                             len(5)                 
                                                                                             S4 app -> 1 next(6)    
                                                                                             index(5) neT(11) cT(11)
                                                                                             S4 rf.nextindex[3] = 3 
                                                                                             S4 index(5)  Pre(219)  
                                                                                             len(5)                 
                                                                                             S4 app -> 3 next(3)    
                                                                                             index(5) neT(7) cT(11) 
                                               C2 ok(true)                                                          
                                               ERR(ErrWrongLeader)                                                  
                                               from S3 in test27                                                    
                                               C2 Get fail key(4)                                                   
                                               value() from(S3)                                                     
                                               C2 send to S4 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(28)                                                  
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(568)                                                                                                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(5) rf.X(217)    
                                                                                             in(579)                
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(555)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(559)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(573)                                                                           
                                               S2  app <- 4 T(11)                                                   
                                               cT(11)                                                               
                                               S2 YYYY                                                              
                                               S2 i = 1                                                             
                                               S2 BBB fail logi(15)                                                 
                                               pre(-8) TI(229)                                                      
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                                                                                             S4 to 2 匹配失败       
                                                                                             tfi(229)               
                                                                                             S4 update              
                                                                                             nextindex[2](4) to     
                                                                                             X(12) > 1              
                                                                                             S4 update              
                                                                                             nextindex[2](12) to 6> 
                                                                                             1                      
                                                                      S3  heart <- 4 T(11)                          
                                                                      cT(11)                                        
                                                                      S3 YYYY                                       
                                                                      S3 be follower                                
                                                                      S3 PreT(7) LT(7)                              
                                                                      S3 Persist the                                
                                                                      log[[{212 7 {3 51 2                           
                                                                      Append 1 x 1 27 y}}                           
                                                                      {213 7 {4 40 2 Append                         
                                                                      0 x 0 21 y}} {214 7 {0                        
                                                                      40 2 Append 2 x 2 22                          
                                                                      y}} {215 7 {2 38 2 Get                        
                                                                      4 }} {216 7 {1 35 2                           
                                                                      Append 3 x 3 19 y}}                           
                                                                      {217 7 {3 52 2 Get 1                          
                                                                      }} {218 7 {0 41 2 Get                         
                                                                      2 }} {219 7 {4 41 2                           
                                                                      Get 0 }}]]                                    
                                               S2  app <- 4 T(11)                                                   
                                               cT(11)                                                               
                                               S2 YYYY                                                              
                                               S2 i = 1                                                             
                                               S2 BBB fail logi(15)                                                 
                                               pre(-9) TI(229)                                                      
                                                                                             S4 update              
                                                                                             nextindex[3](3) to 3   
                                                                                             success                
                                                                                             S4 index(2)            
                                                                                             matchindex([1 1 1 2 5])
                                                                                             S4 successnum(2)       
                                                                                             com-rf.X(0) rf.CT(11)  
                                                                                             t(7)                   
                                                                      S3 Persist the                                
                                                                      log[[{212 7 {3 51 2                           
                                                                      Append 1 x 1 27 y}}                           
                                                                      {213 7 {4 40 2 Append                         
                                                                      0 x 0 21 y}} {214 7 {0                        
                                                                      40 2 Append 2 x 2 22                          
                                                                      y}} {215 7 {2 38 2 Get                        
                                                                      4 }} {216 7 {1 35 2                           
                                                                      Append 3 x 3 19 y}}                           
                                                                      {217 7 {3 52 2 Get 1                          
                                                                      }} {218 7 {0 41 2 Get                         
                                                                      2 }} {219 7 {4 41 2                           
                                                                      Get 0 }}]]                                    
                                                                                             S4 to 2 匹配失败       
                                                                                             tfi(229)               
                                                                                             S4 update              
                                                                                             nextindex[2](6) to     
                                                                                             X(12) > 1              
                                                                                             S4 update              
                                                                                             nextindex[2](12) to 6> 
                                                                                             1                      
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                                                                                             S4 -> 2 app fail       
                        S1 <-- C4 Get key(0)                                                                        
                        test28                                                                                      
S0  app <- 4 T(11)                                                                                                  
cT(11)                                                                                                              
S0 YYYY                                                                                                             
S0 be follower                                                                                                      
S0 i = 1                                                                                                            
S0 BBB fail logi(1)                                                                                                 
pre(2) TI(218)                                                                                                      
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(560)                                                    
                                                                                             S4 to 0 匹配失败       
                                                                                             tfi(218)               
                                                                                             S4 update              
                                                                                             nextindex[0](3) to 1 <=
                                                                                             1                      
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }}]]                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(5) rf.X(217)    
                                                                                             in(580)                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(574)                                                                           
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(7)                          
                                                                      rf.X(212) in(556)                             
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(569)                                                                                                             
S0  app <- 4 T(11)                                                                                                  
cT(11)                                                                                                              
S0 YYYY                                                                                                             
S0 i = 1                                                                                                            
S0 BBB fail logi(1)                                                                                                 
pre(2) TI(218)                                                                                                      
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }}]]                                                                                                              
                                                                                             S4 to 0 匹配失败       
                                                                                             tfi(218)               
                                                                                             S4 update              
                                                                                             nextindex[0](1) to 1 <=
                                                                                             1                      
                                                                                             C4 ok(true)            
                                                                                             ERR(ErrWrongLeader)    
                                                                                             from S0 in test28      
                                                                                             C4 Get fail key(0)     
                                                                                             value() from(S0)       
                                                                                             C4 send to S1 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(29)    
                        S1 <-- C1 Get key(3)                                                                        
                        test17                                                                                      
                                                                      S3  app <- 4 T(11)                            
                                                                      cT(11)                                        
                                                                      S3 YYYY                                       
                                                                      S3 PreT(7) LT(7)                              
                                                                      S3 B success +                                
                                                                      log([{220 11 {-1 -1 4                         
                                                                      TIMEOUT  }} {221 11 {0                        
                                                                      43 4 Get 2 }}])                               
                        C1 ok(false) ERR()                                                                          
                        from S3 in test17                                                                           
                        C1 ERROR Append key(3)                                                                      
                        value(x 3 21 y)                                                                             
                        from(S3)                                                                                    
                        C1 send to S4 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test18                                                                                      
                                                                      S3 Persist the                                
                                                                      log[[{212 7 {3 51 2                           
                                                                      Append 1 x 1 27 y}}                           
                                                                      {213 7 {4 40 2 Append                         
                                                                      0 x 0 21 y}} {214 7 {0                        
                                                                      40 2 Append 2 x 2 22                          
                                                                      y}} {215 7 {2 38 2 Get                        
                                                                      4 }} {216 7 {1 35 2                           
                                                                      Append 3 x 3 19 y}}                           
                                                                      {217 7 {3 52 2 Get 1                          
                                                                      }} {218 7 {0 41 2 Get                         
                                                                      2 }} {219 7 {4 41 2                           
                                                                      Get 0 }} {220 11 {-1                          
                                                                      -1 4 TIMEOUT  }} {221                         
                                                                      11 {0 43 4 Get 2 }}]]                         
                        S1  heart <- 4 T(11)                                                                        
                        cT(11)                                                                                      
                        S1 YYYY                                                                                     
                        S1 i = 1                                                                                    
                        S1 BBB fail logi(15)                                                                        
                        pre(-6) TI(229)                                                                             
                                                                      S3 Persist the                                
                                                                      log[[{212 7 {3 51 2                           
                                                                      Append 1 x 1 27 y}}                           
                                                                      {213 7 {4 40 2 Append                         
                                                                      0 x 0 21 y}} {214 7 {0                        
                                                                      40 2 Append 2 x 2 22                          
                                                                      y}} {215 7 {2 38 2 Get                        
                                                                      4 }} {216 7 {1 35 2                           
                                                                      Append 3 x 3 19 y}}                           
                                                                      {217 7 {3 52 2 Get 1                          
                                                                      }} {218 7 {0 41 2 Get                         
                                                                      2 }} {219 7 {4 41 2                           
                                                                      Get 0 }} {220 11 {-1                          
                                                                      -1 4 TIMEOUT  }} {221                         
                                                                      11 {0 43 4 Get 2 }}]]                         
                                                                                             S4 <-- C2 Get key(4)   
                                                                                             test28                 
                                                                                             S4 start Get key(4)    
                                                                                             S4 have log            
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                                                                                             S4 {223 11 {2 40 4 Get 
                                                                                             4 }}                   
                                                                                             S4 have this log({2 40 
                                                                                             4 Get 4 }) in raft     
                                                                                             S4 <-- C2 Get key(4)   
                                                                                             wait 28                
                                                                                             S4 Persist the         
                                                                                             log[[{217 7 {3 52 2 Get
                                                                                             1 }} {218 7 {0 41 2 Get
                                                                                             2 }} {219 7 {4 41 2 Get
                                                                                             0 }} {220 11 {-1 -1 4  
                                                                                             TIMEOUT  }} {221 11 {0 
                                                                                             43 4 Get 2 }} {222 11  
                                                                                             {3 55 4 Append 1 x 1 29
                                                                                             y}} {223 11 {2 40 4 Get
                                                                                             4 }}]]                 
                                                                                             S4 -> 1 app fail       
                                                                      S3  app <- 4 T(11)                            
                                                                      cT(11)                                        
                                                                      S3 YYYY                                       
                                                                      S3 PreT(7) LT(7)                              
                                                                                             S4 update              
                                                                                             nextindex[3](3) to 5   
                                                                                             success                
                                                                                             S4 index(4)            
                                                                                             matchindex([1 1 1 4 6])
                                                                                             S4 successnum(2)       
                                                                                             com-rf.X(0) rf.CT(11)  
                                                                                             t(11)                  
                                                                      S3 mat(9) index(8)                            
                                                                      len(10)                                       
                                                                      S3 mat(9) index(9)                            
                                                                      len(10)                                       
                                                                      S3 B success +                                
                                                                      log([{222 11 {3 55 4                          
                                                                      Append 1 x 1 29 y}}])                         
                                                                                             S4 rf.nextindex[3] = 5 
                                                                                             S4 index(6)  Pre(221)  
                                                                                             len(6)                 
                                                                                             S4 app -> 3 next(5)    
                                                                                             index(6) neT(11) cT(11)
                                                                                             S4 update              
                                                                                             nextindex[3](5) to 6   
                                                                                             success                
                                                                                             S4 index(5)            
                                                                                             matchindex([1 1 1 5 6])
                                                                                             S4 successnum(2)       
                                                                                             com-rf.X(0) rf.CT(11)  
                                                                                             t(11)                  
                                                                                             S4 rf.nextindex[2] = 6 
                                                                                             S4 index(6)  Pre(222)  
                                                                                             len(6)                 
                                                                                             S4 app -> 2 next(6)    
                                                                                             index(6) neT(11) cT(11)
                                                                      S3 Persist the                                
                                                                      log[[{212 7 {3 51 2                           
                                                                      Append 1 x 1 27 y}}                           
                                                                      {213 7 {4 40 2 Append                         
                                                                      0 x 0 21 y}} {214 7 {0                        
                                                                      40 2 Append 2 x 2 22                          
                                                                      y}} {215 7 {2 38 2 Get                        
                                                                      4 }} {216 7 {1 35 2                           
                                                                      Append 3 x 3 19 y}}                           
                                                                      {217 7 {3 52 2 Get 1                          
                                                                      }} {218 7 {0 41 2 Get                         
                                                                      2 }} {219 7 {4 41 2                           
                                                                      Get 0 }} {220 11 {-1                          
                                                                      -1 4 TIMEOUT  }} {221                         
                                                                      11 {0 43 4 Get 2 }}                           
                                                                      {222 11 {3 55 4 Append                        
                                                                      1 x 1 29 y}}]]                                
                                                                                             S4 rf.nextindex[1] = 6 
                                                                                             S4 index(6)  Pre(222)  
                                                                                             len(6)                 
                                                                                             S4 app -> 1 next(6)    
                                                                                             index(6) neT(11) cT(11)
                                                                                             S4 rf.nextindex[0] = 1 
                                                                                             S4 index(6)  Pre(217)  
                                                                                             len(6)                 
                                                                                             S4 app -> 0 next(1)    
                                                                                             index(6) neT(7) cT(11) 
                                                                      S3  app <- 4 T(11)                            
                                                                      cT(11)                                        
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(561)                                                    
                                                                      S3 YYYY                                       
                                                                      S3 PreT(7) LT(7)                              
                                                                      S3 mat(10) index(8)                           
                                                                      len(11)                                       
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(6) rf.X(217)    
                                                                                             in(581)                
                                                                      S3 Persist the                                
                                                                      log[[{212 7 {3 51 2                           
                                                                      Append 1 x 1 27 y}}                           
                                                                      {213 7 {4 40 2 Append                         
                                                                      0 x 0 21 y}} {214 7 {0                        
                                                                      40 2 Append 2 x 2 22                          
                                                                      y}} {215 7 {2 38 2 Get                        
                                                                      4 }} {216 7 {1 35 2                           
                                                                      Append 3 x 3 19 y}}                           
                                                                      {217 7 {3 52 2 Get 1                          
                                                                      }} {218 7 {0 41 2 Get                         
                                                                      2 }} {219 7 {4 41 2                           
                                                                      Get 0 }} {220 11 {-1                          
                                                                      -1 4 TIMEOUT  }} {221                         
                                                                      11 {0 43 4 Get 2 }}                           
                                                                      {222 11 {3 55 4 Append                        
                                                                      1 x 1 29 y}}]]                                
                                                                                             S4 update              
                                                                                             nextindex[3](6) to 4   
                                                                                             success                
                                                                                             S4 index(3)            
                                                                                             matchindex([1 1 1 3 6])
                                                                                             S4 successnum(2)       
                                                                                             com-rf.X(0) rf.CT(11)  
                                                                                             t(11)                  
S0 commit(0) applied(0)                                                                                             
lenlog(1) rf.X(217)                                                                                                 
in(570)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(575)                                                                           
                                                                                             S4 <-- C4 Get key(0)   
                                                                                             test29                 
                                                                                             S4 start Get key(0)    
                                                                      S3 Persist the                                
                                                                      log[[{212 7 {3 51 2                           
                                                                      Append 1 x 1 27 y}}                           
                                                                      {213 7 {4 40 2 Append                         
                                                                      0 x 0 21 y}} {214 7 {0                        
                                                                      40 2 Append 2 x 2 22                          
                                                                      y}} {215 7 {2 38 2 Get                        
                                                                      4 }} {216 7 {1 35 2                           
                                                                      Append 3 x 3 19 y}}                           
                                                                      {217 7 {3 52 2 Get 1                          
                                                                      }} {218 7 {0 41 2 Get                         
                                                                      2 }} {219 7 {4 41 2                           
                                                                      Get 0 }} {220 11 {-1                          
                                                                      -1 4 TIMEOUT  }} {221                         
                                                                      11 {0 43 4 Get 2 }}                           
                                                                      {222 11 {3 55 4 Append                        
                                                                      1 x 1 29 y}}]]                                
                                                                                             S4 have log            
                                                                                             S4 {224 11 {4 44 4 Get 
                                                                                             0 }}                   
                                                                                             S4 have this log({4 44 
                                                                                             4 Get 0 }) in raft     
                                                                                             S4 <-- C4 Get key(0)   
                                                                                             wait 29                
                                                                                             S4 Persist the         
                                                                                             log[[{217 7 {3 52 2 Get
                                                                                             1 }} {218 7 {0 41 2 Get
                                                                                             2 }} {219 7 {4 41 2 Get
                                                                                             0 }} {220 11 {-1 -1 4  
                                                                                             TIMEOUT  }} {221 11 {0 
                                                                                             43 4 Get 2 }} {222 11  
                                                                                             {3 55 4 Append 1 x 1 29
                                                                                             y}} {223 11 {2 40 4 Get
                                                                                             4 }} {224 11 {4 44 4   
                                                                                             Get 0 }}]]             
                                                                      S3 Persist the                                
                                                                      log[[{212 7 {3 51 2                           
                                                                      Append 1 x 1 27 y}}                           
                                                                      {213 7 {4 40 2 Append                         
                                                                      0 x 0 21 y}} {214 7 {0                        
                                                                      40 2 Append 2 x 2 22                          
                                                                      y}} {215 7 {2 38 2 Get                        
                                                                      4 }} {216 7 {1 35 2                           
                                                                      Append 3 x 3 19 y}}                           
                                                                      {217 7 {3 52 2 Get 1                          
                                                                      }} {218 7 {0 41 2 Get                         
                                                                      2 }} {219 7 {4 41 2                           
                                                                      Get 0 }} {220 11 {-1                          
                                                                      -1 4 TIMEOUT  }} {221                         
                                                                      11 {0 43 4 Get 2 }}                           
                                                                      {222 11 {3 55 4 Append                        
                                                                      1 x 1 29 y}}]]                                
                                                                                             S4 rf.nextindex[0] = 1 
                                                                                             S4 index(7)  Pre(217)  
                                                                                             len(7)                 
                                                                                             S4 app -> 0 next(1)    
                                                                                             index(7) neT(7) cT(11) 
                                                                                             S4 rf.nextindex[2] = 6 
                                                                                             S4 index(7)  Pre(222)  
                                                                                             len(7)                 
                                                                                             S4 app -> 2 next(6)    
                                                                                             index(7) neT(11) cT(11)
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(10)                         
                                                                      rf.X(212) in(557)                             
                                                                                             S4 rf.nextindex[1] = 6 
                                                                                             S4 index(7)  Pre(222)  
                                                                                             len(7)                 
                                                                                             S4 app -> 1 next(6)    
                                                                                             index(7) neT(11) cT(11)
                                                                                             S4 rf.nextindex[3] = 4 
                                                                                             S4 index(7)  Pre(220)  
                                                                                             len(7)                 
                                                                                             S4 app -> 3 next(4)    
                                                                                             index(7) neT(11) cT(11)
S0  app <- 4 T(11)                                                                                                  
cT(11)                                                                                                              
S0 YYYY                                                                                                             
S0 PreT(7) LT(7)                                                                                                    
S0 mat(1) index(1)                                                                                                  
len(2)                                                                                                              
S0 B success +                                                                                                      
log([{219 7 {4 41 2 Get                                                                                             
0 }} {220 11 {-1 -1 4                                                                                               
TIMEOUT  }} {221 11 {0                                                                                              
43 4 Get 2 }} {222 11                                                                                               
{3 55 4 Append 1 x 1 29                                                                                             
y}} {223 11 {2 40 4 Get                                                                                             
4 }}])                                                                                                              
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }} {219 7 {4 41 2 Get                                                                                             
0 }} {220 11 {-1 -1 4                                                                                               
TIMEOUT  }} {221 11 {0                                                                                              
43 4 Get 2 }} {222 11                                                                                               
{3 55 4 Append 1 x 1 29                                                                                             
y}} {223 11 {2 40 4 Get                                                                                             
4 }}]]                                                                                                              
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }} {219 7 {4 41 2 Get                                                                                             
0 }} {220 11 {-1 -1 4                                                                                               
TIMEOUT  }} {221 11 {0                                                                                              
43 4 Get 2 }} {222 11                                                                                               
{3 55 4 Append 1 x 1 29                                                                                             
y}} {223 11 {2 40 4 Get                                                                                             
4 }}]]                                                                                                              
                                                                      S3 commit(5)                                  
                                                                      applied(5) lenlog(10)                         
                                                                      rf.X(212) in(558)                             
                                                                                             S4 update              
                                                                                             nextindex[0](1) to 7   
                                                                                             success                
                                                                                             S4 index(6)            
                                                                                             matchindex([6 1 1 3 7])
                                                                                             S4 successnum(2)       
                                                                                             com-rf.X(0) rf.CT(11)  
                                                                                             t(11)                  
S0 commit(0) applied(0)                                                                                             
lenlog(6) rf.X(217)                                                                                                 
in(571)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(576)                                                                           
S0  app <- 4 T(11)                                                                                                  
cT(11)                                                                                                              
S0 YYYY                                                                                                             
S0 PreT(7) LT(7)                                                                                                    
S0 mat(6) index(1)                                                                                                  
len(7)                                                                                                              
S0 mat(6) index(2)                                                                                                  
len(7)                                                                                                              
S0 mat(6) index(3)                                                                                                  
len(7)                                                                                                              
S0 mat(6) index(4)                                                                                                  
len(7)                                                                                                              
S0 mat(6) index(5)                                                                                                  
len(7)                                                                                                              
S0 mat(6) index(6)                                                                                                  
len(7)                                                                                                              
S0 B success +                                                                                                      
log([{224 11 {4 44 4                                                                                                
Get 0 }}])                                                                                                          
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }} {219 7 {4 41 2 Get                                                                                             
0 }} {220 11 {-1 -1 4                                                                                               
TIMEOUT  }} {221 11 {0                                                                                              
43 4 Get 2 }} {222 11                                                                                               
{3 55 4 Append 1 x 1 29                                                                                             
y}} {223 11 {2 40 4 Get                                                                                             
4 }} {224 11 {4 44 4                                                                                                
Get 0 }}]]                                                                                                          
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }} {219 7 {4 41 2 Get                                                                                             
0 }} {220 11 {-1 -1 4                                                                                               
TIMEOUT  }} {221 11 {0                                                                                              
43 4 Get 2 }} {222 11                                                                                               
{3 55 4 Append 1 x 1 29                                                                                             
y}} {223 11 {2 40 4 Get                                                                                             
4 }} {224 11 {4 44 4                                                                                                
Get 0 }}]]                                                                                                          
                                                                                             S4 update              
                                                                                             nextindex[0](7) to 8   
                                                                                             success                
                                                                                             S4 index(7)            
                                                                                             matchindex([7 1 1 3 7])
                                                                                             S4 successnum(2)       
                                                                                             com-rf.X(0) rf.CT(11)  
                                                                                             t(11)                  
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(562)                                                    
                        S1  app <- 4 T(11)                                                                          
                        cT(11)                                                                                      
                        S1 YYYY                                                                                     
                        S1 i = 1                                                                                    
                        S1 BBB fail logi(15)                                                                        
                        pre(-6) TI(229)                                                                             
                                               S2  app <- 4 T(11)                                                   
                                               cT(11)                                                               
                                               S2 YYYY                                                              
                                               S2 i = 1                                                             
                                               S2 BBB fail logi(15)                                                 
                                               pre(-6) TI(229)                                                      
                                                                                             S4 to 1 匹配失败       
                                                                                             tfi(229)               
                                                                                             S4 update              
                                                                                             nextindex[1](6) to     
                                                                                             X(12) > 1              
                                                                                             S4 update              
                                                                                             nextindex[1](12) to 8> 
                                                                                             1                      
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                                                                                             S4 <-- C1 Get key(3)   
                                                                                             test18                 
                                                                                             S4 to 2 匹配失败       
                                                                                             tfi(229)               
                                                                                             S4 update              
                                                                                             nextindex[2](6) to     
                                                                                             X(12) > 1              
                                                                                             S4 update              
                                                                                             nextindex[2](12) to 8> 
                                                                                             1                      
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
S0 the num is (651)                                                                                                 
applidindex(217) X(217)                                                                                             
                                                                      S3  app <- 4 T(11)                            
                                                                      cT(11)                                        
                                                                      S3 YYYY                                       
                                                                      S3 PreT(11) LT(11)                            
                                                                      S3 mat(10) index(10)                          
                                                                      len(11)                                       
                                                                      S3 B success +                                
                                                                      log([{223 11 {2 40 4                          
                                                                      Get 4 }}])                                    
                                               S2 the num is (1014)                                                 
                                               applidindex(228)                                                     
                                               X(228)                                                               
                                                                      S3 Persist the                                
                                                                      log[[{212 7 {3 51 2                           
                                                                      Append 1 x 1 27 y}}                           
                                                                      {213 7 {4 40 2 Append                         
                                                                      0 x 0 21 y}} {214 7 {0                        
                                                                      40 2 Append 2 x 2 22                          
                                                                      y}} {215 7 {2 38 2 Get                        
                                                                      4 }} {216 7 {1 35 2                           
                                                                      Append 3 x 3 19 y}}                           
                                                                      {217 7 {3 52 2 Get 1                          
                                                                      }} {218 7 {0 41 2 Get                         
                                                                      2 }} {219 7 {4 41 2                           
                                                                      Get 0 }} {220 11 {-1                          
                                                                      -1 4 TIMEOUT  }} {221                         
                                                                      11 {0 43 4 Get 2 }}                           
                                                                      {222 11 {3 55 4 Append                        
                                                                      1 x 1 29 y}} {223 11                          
                                                                      {2 40 4 Get 4 }}]]                            
                                                                                             S4 have log            
                                                                                             S4 {225 11 {1 38 4     
                                                                                             Append 3 x 3 21 y}}    
                                                                                             S4 have this log({1 38 
                                                                                             4 Append 3 x 3 21 y})  
                                                                                             in raft the index is   
                                                                                             225                    
                                                                                             S4 <-- C1 Append key(3)
                                                                                             value(x 3 21 y)        
                                                                                             index(225) wait test18 
                                                                      S3 Persist the                                
                                                                      log[[{212 7 {3 51 2                           
                                                                      Append 1 x 1 27 y}}                           
                                                                      {213 7 {4 40 2 Append                         
                                                                      0 x 0 21 y}} {214 7 {0                        
                                                                      40 2 Append 2 x 2 22                          
                                                                      y}} {215 7 {2 38 2 Get                        
                                                                      4 }} {216 7 {1 35 2                           
                                                                      Append 3 x 3 19 y}}                           
                                                                      {217 7 {3 52 2 Get 1                          
                                                                      }} {218 7 {0 41 2 Get                         
                                                                      2 }} {219 7 {4 41 2                           
                                                                      Get 0 }} {220 11 {-1                          
                                                                      -1 4 TIMEOUT  }} {221                         
                                                                      11 {0 43 4 Get 2 }}                           
                                                                      {222 11 {3 55 4 Append                        
                                                                      1 x 1 29 y}} {223 11                          
                                                                      {2 40 4 Get 4 }}]]                            
                                                                      S3 the num is (853)                           
                                                                      applidindex(217)                              
                                                                      X(212)                                        
                                                                      S3 the size need to                           
                                                                      snap index217                                 
                                                                                             S4 Persist the         
                                                                                             log[[{217 7 {3 52 2 Get
                                                                                             1 }} {218 7 {0 41 2 Get
                                                                                             2 }} {219 7 {4 41 2 Get
                                                                                             0 }} {220 11 {-1 -1 4  
                                                                                             TIMEOUT  }} {221 11 {0 
                                                                                             43 4 Get 2 }} {222 11  
                                                                                             {3 55 4 Append 1 x 1 29
                                                                                             y}} {223 11 {2 40 4 Get
                                                                                             4 }} {224 11 {4 44 4   
                                                                                             Get 0 }} {225 11 {1 38 
                                                                                             4 Append 3 x 3 21 y}}]]
                                                                      S3 update nextindex[0]                        
                                                                      to 2                                          
                                                                      S3 update mathindex[0]                        
                                                                      to 0                                          
                                                                      S3 update nextindex[1]                        
                                                                      to 2                                          
                                                                      S3 update mathindex[1]                        
                                                                      to 0                                          
                                                                      S3 update nextindex[2]                        
                                                                      to 2                                          
                                                                      S3 update mathindex[2]                        
                                                                      to 0                                          
                                                                      S3 update nextindex[3]                        
                                                                      to 2                                          
                                                                      S3 update mathindex[3]                        
                                                                      to 7                                          
                                                                      S3 update nextindex[4]                        
                                                                      to 2                                          
                                                                      S3 update mathindex[4]                        
                                                                      to 0                                          
                                                                      S3 index(217)                                 
                                                                      logindex(223)                                 
                                                                      len(7)AAAAAAAAAAAAAAA…                        
                                                                                             S4 update              
                                                                                             nextindex[3](4) to 7   
                                                                                             success                
                                                                                             S4 index(6)            
                                                                                             matchindex([7 1 1 6 8])
                                                                                             S4 successnum(3)       
                                                                                             com-rf.X(0) rf.CT(11)  
                                                                                             t(11)                  
                                                                                             S4 sum(3) ban(2)       
                                                                                             S4 new commit(6) and   
                                                                                             applied                
                                               S2  app <- 4 T(11)                                                   
                                               cT(11)                                                               
                                               S2 YYYY                                                              
                                               S2 i = 1                                                             
                                               S2 BBB fail logi(15)                                                 
                                               pre(-6) TI(229)                                                      
                                                                      S3 Persist the                                
                                                                      log[[{217 7 {3 52 2                           
                                                                      Get 1 }} {218 7 {0 41                         
                                                                      2 Get 2 }} {219 7 {4                          
                                                                      41 2 Get 0 }} {220 11                         
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {221 11 {0 43 4 Get 2                         
                                                                      }} {222 11 {3 55 4                            
                                                                      Append 1 x 1 29 y}}                           
                                                                      {223 11 {2 40 4 Get 4                         
                                                                      }}]]                                          
                                                                                             S4 rf.nextindex[0] = 8 
                                                                                             S4 index(8)  Pre(224)  
                                                                                             len(8)                 
                                                                                             S4 app -> 0 next(8)    
                                                                                             index(8) neT(11) cT(11)
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                                                                      S3 snapshot to                                
                                                                      applymsg                                      
                                                                      lastindex(217)                                
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(6)                          
                                                                      rf.X(217) in(559)                             
                                                                      S3 the snapshot                               
                                                                      applied                                       
                                                                      S3 recover by SnapShot                        
                                                                      update applyindex(217)                        
                                                                      to 217 the kvs is                             
                                                                      map[0:x 0 0 yx 0 1 yx                         
                                                                      0 2 yx 0 3 yx 0 4 yx 0                        
                                                                      5 yx 0 6 yx 0 7 yx 0 8                        
                                                                      yx 0 9 yx 0 10 yx 0 11                        
                                                                      yx 0 12 yx 0 13 yx 0                          
                                                                      14 yx 0 15 yx 0 16 yx                         
                                                                      0 17 yx 0 18 yx 0 19                          
                                                                      yx 0 20 yx 0 21 y 1:x                         
                                                                      1 0 yx 1 1 yx 1 2 yx 1                        
                                                                      3 yx 1 4 yx 1 5 yx 1 6                        
                                                                      yx 1 7 yx 1 8 yx 1 9                          
                                                                      yx 1 10 yx 1 11 yx 1                          
                                                                      12 yx 1 13 yx 1 14 yx                         
                                                                      1 15 yx 1 16 yx 1 17                          
                                                                      yx 1 18 yx 1 19 yx 1                          
                                                                      20 yx 1 21 yx 1 22 yx                         
                                                                      1 23 yx 1 24 yx 1 25                          
                                                                      yx 1 26 yx 1 27 y 2:x                         
                                                                      2 0 yx 2 1 yx 2 2 yx 2                        
                                                                      3 yx 2 4 yx 2 5 yx 2 6                        
                                                                      yx 2 7 yx 2 8 yx 2 9                          
                                                                      yx 2 10 yx 2 11 yx 2                          
                                                                      12 yx 2 13 yx 2 14 yx                         
                                                                      2 15 yx 2 16 yx 2 17                          
                                                                      yx 2 18 yx 2 19 yx 2                          
                                                                      20 yx 2 21 yx 2 22 y                          
                                                                      3:x 3 0 yx 3 1 yx 3 2                         
                                                                      yx 3 3 yx 3 4 yx 3 5                          
                                                                      yx 3 6 yx 3 7 yx 3 8                          
                                                                      yx 3 9 yx 3 10 yx 3 11                        
                                                                      yx 3 12 yx 3 13 yx 3                          
                                                                      14 yx 3 15 yx 3 16 yx                         
                                                                      3 17 yx 3 18 yx 3 19 y                        
                                                                      4:x 4 0 yx 4 1 yx 4 2                         
                                                                      yx 4 3 yx 4 4 yx 4 5                          
                                                                      yx 4 6 yx 4 7 yx 4 8                          
                                                                      yx 4 9 yx 4 10 yx 4 11                        
                                                                      y]                                            
S0 commit(0) applied(0)                                                                                             
lenlog(7) rf.X(217)                                                                                                 
in(572)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(577)                                                                           
                                                                                             S4 rf.nextindex[2] = 8 
                                                                                             S4 index(8)  Pre(224)  
                                                                                             len(8)                 
                                                                                             S4 app -> 2 next(8)    
                                                                                             index(8) neT(11) cT(11)
                                                                                             S4 rf.nextindex[3] = 7 
                                                                                             S4 index(8)  Pre(223)  
                                                                                             len(8)                 
                                                                                             S4 app -> 3 next(7)    
                                                                                             index(8) neT(11) cT(11)
                        S1  app <- 4 T(11)                                                                          
                        cT(11)                                                                                      
                        S1 YYYY                                                                                     
                        S1 i = 1                                                                                    
                        S1 BBB fail logi(15)                                                                        
                        pre(-6) TI(229)                                                                             
                                                                                             S4 rf.nextindex[1] = 8 
                                                                                             S4 index(8)  Pre(224)  
                                                                                             len(8)                 
                                                                                             S4 app -> 1 next(8)    
                                                                                             index(8) neT(11) cT(11)
                                                                                             S4 commit(6) applied(0)
                                                                                             lenlog(8) rf.X(217)    
                                                                                             in(582)                
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                                                                                             S4 to 2 匹配失败       
                                                                                             tfi(229)               
                                                                                             S4 update              
                                                                                             nextindex[2](8) to     
                                                                                             X(12) > 1              
                                                                                             S4 update              
                                                                                             nextindex[2](12) to 9> 
                                                                                             1                      
                                                                                             S4 to 1 匹配失败       
                                                                                             tfi(229)               
                                                                                             S4 update              
                                                                                             nextindex[1](8) to     
                                                                                             X(12) > 1              
                                                                                             S4 update              
                                                                                             nextindex[1](12) to 9> 
                                                                                             1                      
                                                                                             S4 lastapp lognode =   
                                                                                             {true {0 41 2 Get 2 }  
                                                                                             218 false [] 0 0}      
                                                                                             S4 comm(6) last(218)   
                                                                                             S4 lastapp lognode =   
                                                                                             {true {4 41 2 Get 0 }  
                                                                                             219 false [] 0 0}      
                                                                                             S4 comm(6) last(219)   
                                                                                             S4 TTT                 
                                                                                             CommandValid(true)     
                                                                                             applyindex(217)        
                                                                                             CommandIndex(218) Get  
                                                                                             key(2) value()         
                                                                                             CDM[C0](40) M(41)      
                                                                                             from(2)                
                                                                                             S4 update CDM[0] from  
                                                                                             40 to 41 update        
                                                                                             applyindex 217 to 218  
                                                                                             S4 write get in(218)   
                                                                                             S4 TTT                 
                                                                                             CommandValid(true)     
                                                                                             applyindex(218)        
                                                                                             CommandIndex(219) Get  
                                                                                             key(0) value()         
                                                                                             CDM[C4](40) M(41)      
                                                                                             from(2)                
                                                                                             S4 update CDM[4] from  
                                                                                             40 to 41 update        
                                                                                             applyindex 218 to 219  
                                                                                             S4 write get in(219)   
                                                                                             S4 lastapp lognode =   
                                                                                             {true {-1 -1 4 TIMEOUT 
                                                                                             } 220 false [] 0 0}    
                                                                                             S4 comm(6) last(220)   
                                                                                             S4 lastapp lognode =   
                                                                                             {true {0 43 4 Get 2 }  
                                                                                             221 false [] 0 0}      
                                                                                             S4 comm(6) last(221)   
                                                                                             S4 TTT                 
                                                                                             CommandValid(true)     
                                                                                             applyindex(219)        
                                                                                             CommandIndex(220)      
                                                                                             TIMEOUT key() value()  
                                                                                             CDM[C-1](0) M(-1)      
                                                                                             from(4)                
                                                                                             S4 for TIMEOUT update  
                                                                                             applyindex 219 to 220  
                                                                                             S4 TTT                 
                                                                                             CommandValid(true)     
                                                                                             applyindex(220)        
                                                                                             CommandIndex(221) Get  
                                                                                             key(2) value()         
                                                                                             CDM[C0](41) M(43)      
                                                                                             from(4)                
                                                                                             S4 update CDM[0] from  
                                                                                             41 to 43 update        
                                                                                             applyindex 220 to 221  
                                                                                             S4 write get in(221)   
                                                                                             S4 the cmd had achieve 
                                                                                             12                     
                                                                                             S4 the num is (714)    
                                                                                             applidindex(221) X(217)
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(563)                                                    
                                                                                             S4 lastapp lognode =   
                                                                                             {true {3 55 4 Append 1 
                                                                                             x 1 29 y} 222 false [] 
                                                                                             0 0}                   
                                                                                             S4 comm(6) last(222)   
                                                                                             S4 lastapp lognode =   
                                                                                             {true {2 40 4 Get 4 }  
                                                                                             223 false [] 0 0}      
                                                                                             S4 comm(6) last(223)   
                                                                                             S4 TTT                 
                                                                                             CommandValid(true)     
                                                                                             applyindex(221)        
                                                                                             CommandIndex(222)      
                                                                                             Append key(1) value(x 1
                                                                                             29 y) CDM[C3](52) M(55)
                                                                                             from(4)                
                                                                      S3  app <- 4 T(11)                            
                                                                      cT(11)                                        
                                                                                             S4 update CDM[3] from  
                                                                                             52 to 55 update        
                                                                                             applyindex 221 to 222  
                                                                                             S4 write putAdd in(222)
                                                                      S3 YYYY                                       
                                                                                             S4 BBBBBBB append      
                                                                                             Key(1) from x 1 0 yx 1 
                                                                                             1 yx 1 2 yx 1 3 yx 1 4 
                                                                                             yx 1 5 yx 1 6 yx 1 7 yx
                                                                                             1 8 yx 1 9 yx 1 10 yx 1
                                                                                             11 yx 1 12 yx 1 13 yx 1
                                                                                             14 yx 1 15 yx 1 16 yx 1
                                                                                             17 yx 1 18 yx 1 19 yx 1
                                                                                             20 yx 1 21 yx 1 22 yx 1
                                                                                             23 yx 1 24 yx 1 25 yx 1
                                                                                             26 yx 1 27 y to value(x
                                                                                             1 29 y) from(4)        
                                                                      S3 PreT(11) LT(11)                            
                                                                      S3 mat(6) index(4)                            
                                                                      len(7)                                        
                                                                                             S4 TTT                 
                                                                                             CommandValid(true)     
                                                                                             applyindex(222)        
                                                                                             CommandIndex(223) Get  
                                                                                             key(4) value()         
                                                                                             CDM[C2](38) M(40)      
                                                                                             from(4)                
                                                                      S3 mat(6) index(5)                            
                                                                      len(7)                                        
                                                                                             S4 update CDM[2] from  
                                                                                             38 to 40 update        
                                                                                             applyindex 222 to 223  
                                                                                             S4 write get in(223)   
                                                                                             S4 Append index(222)   
                                                                                             applyindex(222)  this  
                                                                                             cmd_index(55) key(1)   
                                                                                             value(x 1 29 y)        
                                                                                             from(C3)               
                                                                      S3 mat(6) index(6)                            
                                                                      len(7)                                        
                                                                      S3 B success +                                
                                                                      log([{224 11 {4 44 4                          
                                                                      Get 0 }}])                                    
                                                                      C3 ok(true) ERR(OK)                           
                                                                      from S4 in test28                             
                                                                      C3 Append err(OK),                            
                                                                      success key(1) value(x                        
                                                                      1 29 y) r.Index(222)                          
                                                                      from(S4)2                                     
                                                                      S3 Persist the                                
                                                                      log[[{217 7 {3 52 2                           
                                                                      Get 1 }} {218 7 {0 41                         
                                                                      2 Get 2 }} {219 7 {4                          
                                                                      41 2 Get 0 }} {220 11                         
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {221 11 {0 43 4 Get 2                         
                                                                      }} {222 11 {3 55 4                            
                                                                      Append 1 x 1 29 y}}                           
                                                                      {223 11 {2 40 4 Get 4                         
                                                                      }} {224 11 {4 44 4 Get                        
                                                                      0 }}]]                                        
                                                                                             S4 Persist the         
                                                                                             log[[{217 7 {3 52 2 Get
                                                                                             1 }} {218 7 {0 41 2 Get
                                                                                             2 }} {219 7 {4 41 2 Get
                                                                                             0 }} {220 11 {-1 -1 4  
                                                                                             TIMEOUT  }} {221 11 {0 
                                                                                             43 4 Get 2 }} {222 11  
                                                                                             {3 55 4 Append 1 x 1 29
                                                                                             y}} {223 11 {2 40 4 Get
                                                                                             4 }} {224 11 {4 44 4   
                                                                                             Get 0 }} {225 11 {1 38 
                                                                                             4 Append 3 x 3 21 y}}]]
                                                                      S3 Persist the                                
                                                                      log[[{217 7 {3 52 2                           
                                                                      Get 1 }} {218 7 {0 41                         
                                                                      2 Get 2 }} {219 7 {4                          
                                                                      41 2 Get 0 }} {220 11                         
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {221 11 {0 43 4 Get 2                         
                                                                      }} {222 11 {3 55 4                            
                                                                      Append 1 x 1 29 y}}                           
                                                                      {223 11 {2 40 4 Get 4                         
                                                                      }} {224 11 {4 44 4 Get                        
                                                                      0 }}]]                                        
                                                                                             S4 update              
                                                                                             nextindex[3](7) to 8   
                                                                                             success                
                                                                                             S4 index(7)            
                                                                                             matchindex([7 1 1 7 8])
                                                                                             S4 successnum(3)       
                                                                                             com-rf.X(6) rf.CT(11)  
                                                                                             t(11)                  
                                                                                             S4 sum(3) ban(2)       
                                                                                             S4 new commit(7) and   
                                                                                             applied                
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(7)                          
                                                                      rf.X(217) in(560)                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(578)                                                                           
                                                                      S3  app <- 4 T(11)                            
                                                                      cT(11)                                        
                                                                      S3 YYYY                                       
                                                                      S3 PreT(11) LT(11)                            
                                                                      S3 mat(7) index(7)                            
                                                                      len(8)                                        
                                                                      S3 B success +                                
                                                                      log([{225 11 {1 38 4                          
                                                                      Append 3 x 3 21 y}}])                         
                                                                      S3 update commit(223)                         
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(564)                                                    
                                                                      S3 Persist the                                
                                                                      log[[{217 7 {3 52 2                           
                                                                      Get 1 }} {218 7 {0 41                         
                                                                      2 Get 2 }} {219 7 {4                          
                                                                      41 2 Get 0 }} {220 11                         
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {221 11 {0 43 4 Get 2                         
                                                                      }} {222 11 {3 55 4                            
                                                                      Append 1 x 1 29 y}}                           
                                                                      {223 11 {2 40 4 Get 4                         
                                                                      }} {224 11 {4 44 4 Get                        
                                                                      0 }} {225 11 {1 38 4                          
                                                                      Append 3 x 3 21 y}}]]                         
                                                                                             S4 commit(7) applied(6)
                                                                                             lenlog(8) rf.X(217)    
                                                                                             in(583)                
                                                                                             S4 lastapp lognode =   
                                                                                             {true {4 44 4 Get 0 }  
                                                                                             224 false [] 0 0}      
                                                                                             S4 comm(7) last(224)   
                                                                                             S4 Persist the         
                                                                                             log[[{217 7 {3 52 2 Get
                                                                                             1 }} {218 7 {0 41 2 Get
                                                                                             2 }} {219 7 {4 41 2 Get
                                                                                             0 }} {220 11 {-1 -1 4  
                                                                                             TIMEOUT  }} {221 11 {0 
                                                                                             43 4 Get 2 }} {222 11  
                                                                                             {3 55 4 Append 1 x 1 29
                                                                                             y}} {223 11 {2 40 4 Get
                                                                                             4 }} {224 11 {4 44 4   
                                                                                             Get 0 }} {225 11 {1 38 
                                                                                             4 Append 3 x 3 21 y}}]]
                                                                                             S4 TTT                 
                                                                                             CommandValid(true)     
                                                                                             applyindex(223)        
                                                                                             CommandIndex(224) Get  
                                                                                             key(0) value()         
                                                                                             CDM[C4](41) M(44)      
                                                                                             from(4)                
                                                                                             S4 update CDM[4] from  
                                                                                             41 to 44 update        
                                                                                             applyindex 223 to 224  
                                                                                             S4 write get in(224)   
S0 commit(0) applied(0)                                                                                             
lenlog(7) rf.X(217)                                                                                                 
in(573)                                                                                                             
                        S1 the num is (1014)                                                                        
                        applidindex(228)                                                                            
                        X(228)                                                                                      
                                                                      S3 Persist the                                
                                                                      log[[{217 7 {3 52 2                           
                                                                      Get 1 }} {218 7 {0 41                         
                                                                      2 Get 2 }} {219 7 {4                          
                                                                      41 2 Get 0 }} {220 11                         
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {221 11 {0 43 4 Get 2                         
                                                                      }} {222 11 {3 55 4                            
                                                                      Append 1 x 1 29 y}}                           
                                                                      {223 11 {2 40 4 Get 4                         
                                                                      }} {224 11 {4 44 4 Get                        
                                                                      0 }} {225 11 {1 38 4                          
                                                                      Append 3 x 3 21 y}}]]                         
                                                                                             S4 update              
                                                                                             nextindex[3](8) to 9   
                                                                                             success                
                                                                                             S4 index(8)            
                                                                                             matchindex([7 1 1 8 8])
                                                                                             S4 successnum(2)       
                                                                                             com-rf.X(7) rf.CT(11)  
                                                                                             t(11)                  
                                                                      S3 commit(6)                                  
                                                                      applied(0) lenlog(8)                          
                                                                      rf.X(217) in(561)                             
                                                                      S3 lastapp lognode =                          
                                                                      {true {0 41 2 Get 2 }                         
                                                                      218 false [] 0 0}                             
                                                                      S3 comm(6) last(218)                          
                                                                      S3 lastapp lognode =                          
                                                                      {true {4 41 2 Get 0 }                         
                                                                      219 false [] 0 0}                             
                                                                      S3 comm(6) last(219)                          
                                                                      S3 TTT                                        
                                                                      CommandValid(true)                            
                                                                      applyindex(217)                               
                                                                      CommandIndex(218) Get                         
                                                                      key(2) value()                                
                                                                      CDM[C0](40) M(41)                             
                                                                      from(2)                                       
                                                                      S3 update CDM[0] from                         
                                                                      40 to 41 update                               
                                                                      applyindex 217 to 218                         
                                                                      S3 can not write get                          
                                                                      in(218)                                       
                                                                      S3 TTT                                        
                                                                      CommandValid(true)                            
                                                                      applyindex(218)                               
                                                                      CommandIndex(219) Get                         
                                                                      key(0) value()                                
                                                                      CDM[C4](40) M(41)                             
                                                                      from(2)                                       
                                                                      S3 update CDM[4] from                         
                                                                      40 to 41 update                               
                                                                      applyindex 218 to 219                         
S0  app <- 4 T(11)                                                                                                  
cT(11)                                                                                                              
                                                                      S3 lastapp lognode =                          
                                                                      {true {-1 -1 4 TIMEOUT                        
                                                                      } 220 false [] 0 0}                           
                                                                      S3 comm(6) last(220)                          
S0 YYYY                                                                                                             
S0 PreT(11) LT(11)                                                                                                  
S0 B success +                                                                                                      
log([{225 11 {1 38 4                                                                                                
Append 3 x 3 21 y}}])                                                                                               
S0 update commit(223)                                                                                               
                                                                      S3 can not write get                          
                                                                      in(219)                                       
                                                                      S3 TTT                                        
                                                                      CommandValid(true)                            
                                                                      applyindex(219)                               
                                                                      CommandIndex(220)                             
                                                                      TIMEOUT key() value()                         
                                                                      CDM[C-1](0) M(-1)                             
                                                                      from(4)                                       
                                                                      S3 for TIMEOUT update                         
                                                                      applyindex 219 to 220                         
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }} {219 7 {4 41 2 Get                                                                                             
0 }} {220 11 {-1 -1 4                                                                                               
TIMEOUT  }} {221 11 {0                                                                                              
43 4 Get 2 }} {222 11                                                                                               
{3 55 4 Append 1 x 1 29                                                                                             
y}} {223 11 {2 40 4 Get                                                                                             
4 }} {224 11 {4 44 4                                                                                                
Get 0 }} {225 11 {1 38                                                                                              
4 Append 3 x 3 21 y}}]]                                                                                             
                                               S2  app <- 4 T(11)                                                   
                                               cT(11)                                                               
                                               S2 YYYY                                                              
                                               S2 i = 1                                                             
                                               S2 BBB fail logi(15)                                                 
                                               pre(-4) TI(229)                                                      
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }} {219 7 {4 41 2 Get                                                                                             
0 }} {220 11 {-1 -1 4                                                                                               
TIMEOUT  }} {221 11 {0                                                                                              
43 4 Get 2 }} {222 11                                                                                               
{3 55 4 Append 1 x 1 29                                                                                             
y}} {223 11 {2 40 4 Get                                                                                             
4 }} {224 11 {4 44 4                                                                                                
Get 0 }} {225 11 {1 38                                                                                              
4 Append 3 x 3 21 y}}]]                                                                                             
                                                                                             S4 -> 0 app fail       
                                                                      S3 lastapp lognode =                          
                                                                      {true {0 43 4 Get 2 }                         
                                                                      221 false [] 0 0}                             
                                                                      S3 comm(6) last(221)                          
                                                                      S3 lastapp lognode =                          
                                                                      {true {3 55 4 Append 1                        
                                                                      x 1 29 y} 222 false []                        
                                                                      0 0}                                          
                                                                      S3 comm(6) last(222)                          
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(579)                                                                           
                                                                      S3 TTT                                        
                                                                      CommandValid(true)                            
                                                                      applyindex(220)                               
                                                                      CommandIndex(221) Get                         
                                                                      key(2) value()                                
                                                                      CDM[C0](41) M(43)                             
                                                                      from(4)                                       
                                                                      S3 update CDM[0] from                         
                                                                      41 to 43 update                               
                                                                      applyindex 220 to 221                         
                                                                      S3 can not write get                          
                                                                      in(221)                                       
                                                                      S3 TTT                                        
                                                                      CommandValid(true)                            
                                                                      applyindex(221)                               
                                                                      CommandIndex(222)                             
                                                                      Append key(1) value(x                         
                                                                      1 29 y) CDM[C3](52)                           
                                                                      M(55) from(4)                                 
                                                                      S3 update CDM[3] from                         
                                                                      52 to 55 update                               
                                                                      applyindex 221 to 222                         
                                                                      S3 can not write                              
                                                                      putAdd in(222)                                
                                                                      S3 BBBBBBB append                             
                                                                      Key(1) from x 1 0 yx 1                        
                                                                      1 yx 1 2 yx 1 3 yx 1 4                        
                                                                      yx 1 5 yx 1 6 yx 1 7                          
                                                                      yx 1 8 yx 1 9 yx 1 10                         
                                                                      yx 1 11 yx 1 12 yx 1                          
                                                                      13 yx 1 14 yx 1 15 yx                         
                                                                      1 16 yx 1 17 yx 1 18                          
                                                                      yx 1 19 yx 1 20 yx 1                          
                                                                      21 yx 1 22 yx 1 23 yx                         
                                                                      1 24 yx 1 25 yx 1 26                          
                                                                      yx 1 27 y to value(x 1                        
                                                                      29 y) from(4)                                 
                                                                      S3 the cmd had achieve                        
                                                                      12                                            
                                                                      S3 the num is (714)                           
                                                                      applidindex(222)                              
                                                                      X(217)                                        
                                                                      S3 lastapp lognode =                          
                                                                      {true {2 40 4 Get 4 }                         
                                                                      223 false [] 0 0}                             
                                                                      S3 comm(6) last(223)                          
                                                                      S3 Persist the                                
                                                                      log[[{217 7 {3 52 2                           
                                                                      Get 1 }} {218 7 {0 41                         
                                                                      2 Get 2 }} {219 7 {4                          
                                                                      41 2 Get 0 }} {220 11                         
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {221 11 {0 43 4 Get 2                         
                                                                      }} {222 11 {3 55 4                            
                                                                      Append 1 x 1 29 y}}                           
                                                                      {223 11 {2 40 4 Get 4                         
                                                                      }} {224 11 {4 44 4 Get                        
                                                                      0 }} {225 11 {1 38 4                          
                                                                      Append 3 x 3 21 y}}]]                         
                                                                      S3 TTT                                        
                                                                      CommandValid(true)                            
                                                                      applyindex(222)                               
                                                                      CommandIndex(223) Get                         
                                                                      key(4) value()                                
                                                                      CDM[C2](38) M(40)                             
                                                                      from(4)                                       
                                                                      S3 update CDM[2] from                         
                                                                      38 to 40 update                               
                                                                      applyindex 222 to 223                         
                                                                      S3 can not write get                          
                                                                      in(223)                                       
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(565)                                                    
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                                                                                             S4 to 2 匹配失败       
                                                                                             tfi(229)               
                                                                                             S4 update              
                                                                                             nextindex[2](9) to     
                                                                                             X(12) > 1              
                                                                                             S4 update              
                                                                                             nextindex[2](12) to 9> 
                                                                                             1                      
                                                                                             S4 commit(7) applied(7)
                                                                                             lenlog(8) rf.X(217)    
                                                                                             in(584)                
S0 commit(6) applied(0)                                                                                             
lenlog(8) rf.X(217)                                                                                                 
in(574)                                                                                                             
S0 lastapp lognode =                                                                                                
{true {0 41 2 Get 2 }                                                                                               
218 false [] 0 0}                                                                                                   
S0 comm(6) last(218)                                                                                                
S0 lastapp lognode =                                                                                                
{true {4 41 2 Get 0 }                                                                                               
219 false [] 0 0}                                                                                                   
S0 comm(6) last(219)                                                                                                
S0 TTT                                                                                                              
CommandValid(true)                                                                                                  
applyindex(217)                                                                                                     
CommandIndex(218) Get                                                                                               
key(2) value()                                                                                                      
CDM[C0](40) M(41)                                                                                                   
from(2)                                                                                                             
S0 update CDM[0] from                                                                                               
40 to 41 update                                                                                                     
applyindex 217 to 218                                                                                               
S0 can not write get                                                                                                
in(218)                                                                                                             
S0 TTT                                                                                                              
CommandValid(true)                                                                                                  
applyindex(218)                                                                                                     
CommandIndex(219) Get                                                                                               
key(0) value()                                                                                                      
CDM[C4](40) M(41)                                                                                                   
from(2)                                                                                                             
S0 update CDM[4] from                                                                                               
40 to 41 update                                                                                                     
applyindex 218 to 219                                                                                               
S0 can not write get                                                                                                
in(219)                                                                                                             
S0 lastapp lognode =                                                                                                
{true {-1 -1 4 TIMEOUT                                                                                              
} 220 false [] 0 0}                                                                                                 
S0 comm(6) last(220)                                                                                                
S0 lastapp lognode =                                                                                                
{true {0 43 4 Get 2 }                                                                                               
221 false [] 0 0}                                                                                                   
S0 comm(6) last(221)                                                                                                
S0 TTT                                                                                                              
CommandValid(true)                                                                                                  
applyindex(219)                                                                                                     
CommandIndex(220)                                                                                                   
TIMEOUT key() value()                                                                                               
CDM[C-1](0) M(-1)                                                                                                   
from(4)                                                                                                             
S0 for TIMEOUT update                                                                                               
applyindex 219 to 220                                                                                               
S0 TTT                                                                                                              
CommandValid(true)                                                                                                  
applyindex(220)                                                                                                     
CommandIndex(221) Get                                                                                               
key(2) value()                                                                                                      
CDM[C0](41) M(43)                                                                                                   
from(4)                                                                                                             
S0 update CDM[0] from                                                                                               
41 to 43 update                                                                                                     
applyindex 220 to 221                                                                                               
S0 can not write get                                                                                                
in(221)                                                                                                             
S0 lastapp lognode =                                                                                                
{true {3 55 4 Append 1                                                                                              
x 1 29 y} 222 false []                                                                                              
0 0}                                                                                                                
S0 comm(6) last(222)                                                                                                
S0 lastapp lognode =                                                                                                
{true {2 40 4 Get 4 }                                                                                               
223 false [] 0 0}                                                                                                   
S0 comm(6) last(223)                                                                                                
S0 TTT                                                                                                              
CommandValid(true)                                                                                                  
applyindex(221)                                                                                                     
CommandIndex(222)                                                                                                   
Append key(1) value(x 1                                                                                             
29 y) CDM[C3](52) M(55)                                                                                             
from(4)                                                                                                             
S0 update CDM[3] from                                                                                               
52 to 55 update                                                                                                     
applyindex 221 to 222                                                                                               
S0 can not write putAdd                                                                                             
in(222)                                                                                                             
S0 BBBBBBB append                                                                                                   
Key(1) from x 1 0 yx 1                                                                                              
1 yx 1 2 yx 1 3 yx 1 4                                                                                              
yx 1 5 yx 1 6 yx 1 7 yx                                                                                             
1 8 yx 1 9 yx 1 10 yx 1                                                                                             
11 yx 1 12 yx 1 13 yx 1                                                                                             
14 yx 1 15 yx 1 16 yx 1                                                                                             
17 yx 1 18 yx 1 19 yx 1                                                                                             
20 yx 1 21 yx 1 22 yx 1                                                                                             
23 yx 1 24 yx 1 25 yx 1                                                                                             
26 yx 1 27 y to value(x                                                                                             
1 29 y) from(4)                                                                                                     
S0 TTT                                                                                                              
CommandValid(true)                                                                                                  
applyindex(222)                                                                                                     
CommandIndex(223) Get                                                                                               
key(4) value()                                                                                                      
CDM[C2](38) M(40)                                                                                                   
from(4)                                                                                                             
S0 update CDM[2] from                                                                                               
38 to 40 update                                                                                                     
applyindex 222 to 223                                                                                               
S0 can not write get                                                                                                
in(223)                                                                                                             
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }} {219 7 {4 41 2 Get                                                                                             
0 }} {220 11 {-1 -1 4                                                                                               
TIMEOUT  }} {221 11 {0                                                                                              
43 4 Get 2 }} {222 11                                                                                               
{3 55 4 Append 1 x 1 29                                                                                             
y}} {223 11 {2 40 4 Get                                                                                             
4 }} {224 11 {4 44 4                                                                                                
Get 0 }} {225 11 {1 38                                                                                              
4 Append 3 x 3 21 y}}]]                                                                                             
                        S1  app <- 4 T(11)                                                                          
                        cT(11)                                                                                      
                        S1 YYYY                                                                                     
                        S1 i = 1                                                                                    
                        S1 BBB fail logi(15)                                                                        
                        pre(-4) TI(229)                                                                             
                                                                                             S4 to 1 匹配失败       
                                                                                             tfi(229)               
                                                                                             S4 update              
                                                                                             nextindex[1](9) to     
                                                                                             X(12) > 1              
                                                                                             S4 update              
                                                                                             nextindex[1](12) to 9> 
                                                                                             1                      
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(580)                                                                           
                                                                      S3 commit(6)                                  
                                                                      applied(6) lenlog(8)                          
                                                                      rf.X(217) in(562)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(566)                                                    
                                                                                             S4 commit(7) applied(7)
                                                                                             lenlog(8) rf.X(217)    
                                                                                             in(585)                
                                                                                             S4 the num is (714)    
                                                                                             applidindex(224) X(217)
S0 commit(6) applied(6)                                                                                             
lenlog(8) rf.X(217)                                                                                                 
in(575)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(581)                                                                           
                                                                      S3 commit(6)                                  
                                                                      applied(6) lenlog(8)                          
                                                                      rf.X(217) in(563)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(567)                                                    
                                                                                             S4 commit(7) applied(7)
                                                                                             lenlog(8) rf.X(217)    
                                                                                             in(586)                
S0 commit(6) applied(6)                                                                                             
lenlog(8) rf.X(217)                                                                                                 
in(576)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(582)                                                                           
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(568)                                                    
                                                                      S3 commit(6)                                  
                                                                      applied(6) lenlog(8)                          
                                                                      rf.X(217) in(564)                             
                                                                                             S4 commit(7) applied(7)
                                                                                             lenlog(8) rf.X(217)    
                                                                                             in(587)                
S0 commit(6) applied(6)                                                                                             
lenlog(8) rf.X(217)                                                                                                 
in(577)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(583)                                                                           
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(569)                                                    
                                                                      S3 commit(6)                                  
                                                                      applied(6) lenlog(8)                          
                                                                      rf.X(217) in(565)                             
                                                                                             S4 commit(7) applied(7)
                                                                                             lenlog(8) rf.X(217)    
                                                                                             in(588)                
S0 commit(6) applied(6)                                                                                             
lenlog(8) rf.X(217)                                                                                                 
in(578)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(584)                                                                           
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(570)                                                    
                                                                      S3 commit(6)                                  
                                                                      applied(6) lenlog(8)                          
                                                                      rf.X(217) in(566)                             
                                                                                             S4 commit(7) applied(7)
                                                                                             lenlog(8) rf.X(217)    
                                                                                             in(589)                
S0 commit(6) applied(6)                                                                                             
lenlog(8) rf.X(217)                                                                                                 
in(579)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(585)                                                                           
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(571)                                                    
                                                                      S3 commit(6)                                  
                                                                      applied(6) lenlog(8)                          
                                                                      rf.X(217) in(567)                             
                                                                                             S4 commit(7) applied(7)
                                                                                             lenlog(8) rf.X(217)    
                                                                                             in(590)                
S0 commit(6) applied(6)                                                                                             
lenlog(8) rf.X(217)                                                                                                 
in(580)                                                                                                             
S0 the num is (714)                                                                                                 
applidindex(223) X(217)                                                                                             
                                               S2 the num is (1014)                                                 
                                               applidindex(228)                                                     
                                               X(228)                                                               
                                                                                             S4 time out            
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(586)                                                                           
                        C1 ok(true)                                                                                 
                        ERR(TimeOut) from S4                                                                        
                        in test18                                                                                   
                        C1 Append err(TimeOut)                                                                      
                        nil key(3) value(x 3                                                                        
                        21 y) r.index(225)                                                                          
                        from(S4)3                                                                                   
                        C1 send to S4 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test226                                                                                     
                                                                      S3 the num is (714)                           
                                                                      applidindex(223)                              
                                                                      X(217)                                        
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(572)                                                    
                                                                      S3 commit(6)                                  
                                                                      applied(6) lenlog(8)                          
                                                                      rf.X(217) in(568)                             
                                                                                             S4 <-- C1 Get key(3)   
                                                                                             test226                
                                                                                             S4 do not have this    
                                                                                             log({1 38 4 Append 3 x 
                                                                                             3 21 y}) the index is  
                                                                                             226                    
                                                                                             S4 <-- C1 Append key(3)
                                                                                             value(x 3 21 y)        
                                                                                             index(226) wait test226
                                                                                             S4 commit(7) applied(7)
                                                                                             lenlog(8) rf.X(217)    
                                                                                             in(591)                
                                                                                             S4 is time out         
                                                                                             S4 is time out         
S0 commit(6) applied(6)                                                                                             
lenlog(8) rf.X(217)                                                                                                 
in(581)                                                                                                             
                                                                                             C4 ok(true)            
                                                                                             ERR(TimeOut) from S1 in
                                                                                             test29                 
                                                                                             C4 Get nil because     
                                                                                             TimeOut from(S1)       
                                                                                             C4 send to S1 Get      
                                                                                             key(0) Cindex(4)       
                                                                                             OIndex(44) test(225)   
C0 ok(true)                                                                                                         
ERR(TimeOut) from S3 in                                                                                             
test19                                                                                                              
C0 Get nil because                                                                                                  
TimeOut from(S3)                                                                                                    
C0 send to S3 Get                                                                                                   
key(2) Cindex(0)                                                                                                    
OIndex(43) test(222)                                                                                                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(587)                                                                           
                                                                      S3 commit(6)                                  
                                                                      applied(6) lenlog(8)                          
                                                                      rf.X(217) in(569)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(573)                                                    
                                                                                             S4 <-- C0 Get key(2)   
                                                                                             test222                
                                                                                             S4 had done key(2)     
                                                                                             from(C0) Oindex(43)    
                                                                                             test222                
C0 ok(true) ERR(OK)                                                                                                 
from S3 in test222                                                                                                  
C0 Get success key(2)                                                                                               
value(x 2 0 yx 2 1 yx 2                                                                                             
2 yx 2 3 yx 2 4 yx 2 5                                                                                              
yx 2 6 yx 2 7 yx 2 8 yx                                                                                             
2 9 yx 2 10 yx 2 11 yx                                                                                              
2 12 yx 2 13 yx 2 14 yx                                                                                             
2 15 yx 2 16 yx 2 17 yx                                                                                             
2 18 yx 2 19 yx 2 20 yx                                                                                             
2 21 yx 2 22 y)                                                                                                     
r.index(221) from(S3)                                                                                               
                                                                                             S4 commit(7) applied(7)
                                                                                             lenlog(8) rf.X(217)    
                                                                                             in(592)                
                        S1 the num is (1014)                                                                        
                        applidindex(228)                                                                            
                        X(228)                                                                                      
                                                                                             S4 is time out         
                                                                                             S4 have log            
                                                                                             S4 {226 11 {-1 -1 4    
                                                                                             TIMEOUT  }}            
                                                                                             S4 Persist the         
                                                                                             log[[{217 7 {3 52 2 Get
                                                                                             1 }} {218 7 {0 41 2 Get
                                                                                             2 }} {219 7 {4 41 2 Get
                                                                                             0 }} {220 11 {-1 -1 4  
                                                                                             TIMEOUT  }} {221 11 {0 
                                                                                             43 4 Get 2 }} {222 11  
                                                                                             {3 55 4 Append 1 x 1 29
                                                                                             y}} {223 11 {2 40 4 Get
                                                                                             4 }} {224 11 {4 44 4   
                                                                                             Get 0 }} {225 11 {1 38 
                                                                                             4 Append 3 x 3 21 y}}  
                                                                                             {226 11 {-1 -1 4       
                                                                                             TIMEOUT  }}]]          
                                               C2 ok(true)                                                          
                                               ERR(TimeOut) from S4                                                 
                                               in test28                                                            
                                               C2 Get nil because                                                   
                                               TimeOut from(S4)                                                     
                                               C2 send to S4 Get                                                    
                                               key(4) Cindex(2)                                                     
                                               OIndex(40) test(224)                                                 
S0 commit(6) applied(6)                                                                                             
lenlog(8) rf.X(217)                                                                                                 
in(582)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(588)                                                                           
                                                                                             S4 rf.nextindex[3] = 9 
                                                                                             S4 index(9)  Pre(225)  
                                                                                             len(9)                 
                                                                                             S4 app -> 3 next(9)    
                                                                                             index(9) neT(11) cT(11)
                                                                                             S4 rf.nextindex[0] = 8 
                                                                                             S4 index(9)  Pre(224)  
                                                                                             len(9)                 
                                                                                             S4 app -> 0 next(8)    
                                                                                             index(9) neT(11) cT(11)
                                                                                             S4 rf.nextindex[1] = 9 
                                                                                             S4 index(9)  Pre(225)  
                                                                                             len(9)                 
                                                                                             S4 app -> 1 next(9)    
                                                                                             index(9) neT(11) cT(11)
                                                                                             S4 rf.nextindex[2] = 9 
                                                                                             S4 index(9)  Pre(225)  
                                                                                             len(9)                 
                                                                                             S4 app -> 2 next(9)    
                                                                                             index(9) neT(11) cT(11)
                                                                                             S4 <-- C2 Get key(4)   
                                                                                             test224                
                                                                                             S4 had done key(4)     
                                                                                             from(C2) Oindex(40)    
                                                                                             test224                
                                                                      S3 commit(6)                                  
                                                                      applied(6) lenlog(8)                          
                                                                      rf.X(217) in(570)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(574)                                                    
                                               C2 ok(true) ERR(OK)                                                  
                                               from S4 in test224                                                   
                                               C2 Get success key(4)                                                
                                               value(x 4 0 yx 4 1 yx                                                
                                               4 2 yx 4 3 yx 4 4 yx 4                                               
                                               5 yx 4 6 yx 4 7 yx 4 8                                               
                                               yx 4 9 yx 4 10 yx 4 11                                               
                                               y) r.index(223)                                                      
                                               from(S4)                                                             
                                                                                             S4 commit(7) applied(7)
                                                                                             lenlog(9) rf.X(217)    
                                                                                             in(593)                
                                                                                             S4 <-- C4 Get key(0)   
                                                                                             test225                
                                                                                             S4 had done key(0)     
                                                                                             from(C4) Oindex(44)    
                                                                                             test225                
                                                                                             C4 ok(true) ERR(OK)    
                                                                                             from S1 in test225     
                                                                                             C4 Get success key(0)  
                                                                                             value(x 0 0 yx 0 1 yx 0
                                                                                             2 yx 0 3 yx 0 4 yx 0 5 
                                                                                             yx 0 6 yx 0 7 yx 0 8 yx
                                                                                             0 9 yx 0 10 yx 0 11 yx 
                                                                                             0 12 yx 0 13 yx 0 14 yx
                                                                                             0 15 yx 0 16 yx 0 17 yx
                                                                                             0 18 yx 0 19 yx 0 20 yx
                                                                                             0 21 y) r.index(224)   
                                                                                             from(S1)               
S0 commit(6) applied(6)                                                                                             
lenlog(8) rf.X(217)                                                                                                 
in(583)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(589)                                                                           
                                                                      S3 commit(6)                                  
                                                                      applied(6) lenlog(8)                          
                                                                      rf.X(217) in(571)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(575)                                                    
                        S1  app <- 4 T(11)                                                                          
                        cT(11)                                                                                      
                        S1 YYYY                                                                                     
                        S1 i = 1                                                                                    
                        S1 BBB fail logi(15)                                                                        
                        pre(-3) TI(229)                                                                             
                                                                                             S4 commit(7) applied(7)
                                                                                             lenlog(9) rf.X(217)    
                                                                                             in(594)                
S0  app <- 4 T(11)                                                                                                  
cT(11)                                                                                                              
S0 YYYY                                                                                                             
S0 PreT(11) LT(11)                                                                                                  
S0 mat(8) index(8)                                                                                                  
len(9)                                                                                                              
S0 B success +                                                                                                      
log([{226 11 {-1 -1 4                                                                                               
TIMEOUT  }}])                                                                                                       
S0 update commit(224)                                                                                               
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }} {219 7 {4 41 2 Get                                                                                             
0 }} {220 11 {-1 -1 4                                                                                               
TIMEOUT  }} {221 11 {0                                                                                              
43 4 Get 2 }} {222 11                                                                                               
{3 55 4 Append 1 x 1 29                                                                                             
y}} {223 11 {2 40 4 Get                                                                                             
4 }} {224 11 {4 44 4                                                                                                
Get 0 }} {225 11 {1 38                                                                                              
4 Append 3 x 3 21 y}}                                                                                               
{226 11 {-1 -1 4                                                                                                    
TIMEOUT  }}]]                                                                                                       
                                                                                             S4 update              
                                                                                             nextindex[0](8) to 10  
                                                                                             success                
                                                                                             S4 index(9)            
                                                                                             matchindex([9 1 1 8 9])
                                                                                             S4 successnum(2)       
                                                                                             com-rf.X(7) rf.CT(11)  
                                                                                             t(11)                  
                                                                                             S4 the num is (757)    
                                                                                             applidindex(224) X(217)
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(590)                                                                           
                                               S2  app <- 4 T(11)                                                   
                                               cT(11)                                                               
                                                                      S3  app <- 4 T(11)                            
                                                                      cT(11)                                        
                                                                      S3 YYYY                                       
                                                                      S3 PreT(11) LT(11)                            
                                                                      S3 B success +                                
                                                                      log([{226 11 {-1 -1 4                         
                                                                      TIMEOUT  }}])                                 
                                                                      S3 update commit(224)                         
                                                                      S3 Persist the                                
                                                                      log[[{217 7 {3 52 2                           
                                                                      Get 1 }} {218 7 {0 41                         
                                                                      2 Get 2 }} {219 7 {4                          
                                                                      41 2 Get 0 }} {220 11                         
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {221 11 {0 43 4 Get 2                         
                                                                      }} {222 11 {3 55 4                            
                                                                      Append 1 x 1 29 y}}                           
                                                                      {223 11 {2 40 4 Get 4                         
                                                                      }} {224 11 {4 44 4 Get                        
                                                                      0 }} {225 11 {1 38 4                          
                                                                      Append 3 x 3 21 y}}                           
                                                                      {226 11 {-1 -1 4                              
                                                                      TIMEOUT  }}]]                                 
                                                                                             S4 to 1 匹配失败       
                                                                                             tfi(229)               
                                                                                             S4 update              
                                                                                             nextindex[1](9) to     
                                                                                             X(12) > 1              
                                                                                             S4 update              
                                                                                             nextindex[1](12) to 10>
                                                                                             1                      
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }} {219 7 {4 41 2 Get                                                                                             
0 }} {220 11 {-1 -1 4                                                                                               
TIMEOUT  }} {221 11 {0                                                                                              
43 4 Get 2 }} {222 11                                                                                               
{3 55 4 Append 1 x 1 29                                                                                             
y}} {223 11 {2 40 4 Get                                                                                             
4 }} {224 11 {4 44 4                                                                                                
Get 0 }} {225 11 {1 38                                                                                              
4 Append 3 x 3 21 y}}                                                                                               
{226 11 {-1 -1 4                                                                                                    
TIMEOUT  }}]]                                                                                                       
                                               S2 YYYY                                                              
                                               S2 i = 1                                                             
                                               S2 BBB fail logi(15)                                                 
                                               pre(-3) TI(229)                                                      
                                                                      S3 Persist the                                
                                                                      log[[{217 7 {3 52 2                           
                                                                      Get 1 }} {218 7 {0 41                         
                                                                      2 Get 2 }} {219 7 {4                          
                                                                      41 2 Get 0 }} {220 11                         
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {221 11 {0 43 4 Get 2                         
                                                                      }} {222 11 {3 55 4                            
                                                                      Append 1 x 1 29 y}}                           
                                                                      {223 11 {2 40 4 Get 4                         
                                                                      }} {224 11 {4 44 4 Get                        
                                                                      0 }} {225 11 {1 38 4                          
                                                                      Append 3 x 3 21 y}}                           
                                                                      {226 11 {-1 -1 4                              
                                                                      TIMEOUT  }}]]                                 
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                                                                                             S4 update              
                                                                                             nextindex[3](9) to 10  
                                                                                             success                
                                                                                             S4 index(9)            
                                                                                             matchindex([9 1 1 9 9])
                                                                                             S4 successnum(3)       
                                                                                             com-rf.X(7) rf.CT(11)  
                                                                                             t(11)                  
                                                                                             S4 sum(3) ban(2)       
                                                                                             S4 new commit(9) and   
                                                                                             applied                
                                                                      S3 commit(7)                                  
                                                                      applied(6) lenlog(9)                          
                                                                      rf.X(217) in(572)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(576)                                                    
                                                                                             S4 to 2 匹配失败       
                                                                                             tfi(229)               
                                                                                             S4 update              
                                                                                             nextindex[2](9) to     
                                                                                             X(12) > 1              
                                                                                             S4 update              
                                                                                             nextindex[2](12) to 10>
                                                                                             1                      
                                                                      S3 lastapp lognode =                          
                                                                      {true {4 44 4 Get 0 }                         
                                                                      224 false [] 0 0}                             
                                                                      S3 comm(7) last(224)                          
                                                                      S3 Persist the                                
                                                                      log[[{217 7 {3 52 2                           
                                                                      Get 1 }} {218 7 {0 41                         
                                                                      2 Get 2 }} {219 7 {4                          
                                                                      41 2 Get 0 }} {220 11                         
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {221 11 {0 43 4 Get 2                         
                                                                      }} {222 11 {3 55 4                            
                                                                      Append 1 x 1 29 y}}                           
                                                                      {223 11 {2 40 4 Get 4                         
                                                                      }} {224 11 {4 44 4 Get                        
                                                                      0 }} {225 11 {1 38 4                          
                                                                      Append 3 x 3 21 y}}                           
                                                                      {226 11 {-1 -1 4                              
                                                                      TIMEOUT  }}]]                                 
                                                                                             S4 commit(9) applied(7)
                                                                                             lenlog(9) rf.X(217)    
                                                                                             in(595)                
                                                                                             S4 lastapp lognode =   
                                                                                             {true {1 38 4 Append 3 
                                                                                             x 3 21 y} 225 false [] 
                                                                                             0 0}                   
                                                                                             S4 comm(9) last(225)   
                                                                      S3 TTT                                        
                                                                      CommandValid(true)                            
                                                                      applyindex(223)                               
                                                                      CommandIndex(224) Get                         
                                                                      key(0) value()                                
                                                                      CDM[C4](41) M(44)                             
                                                                      from(4)                                       
                                                                                             S4 lastapp lognode =   
                                                                                             {true {-1 -1 4 TIMEOUT 
                                                                                             } 226 false [] 0 0}    
                                                                      S3 update CDM[4] from                         
                                                                      41 to 44 update                               
                                                                      applyindex 223 to 224                         
                                                                      S3 can not write get                          
                                                                      in(224)                                       
                                                                                             S4 comm(9) last(226)   
                                                                                             S4 TTT                 
                                                                                             CommandValid(true)     
                                                                                             applyindex(224)        
                                                                                             CommandIndex(225)      
                                                                                             Append key(3) value(x 3
                                                                                             21 y) CDM[C1](35) M(38)
                                                                                             from(4)                
                                                                                             S4 update CDM[1] from  
                                                                                             35 to 38 update        
                                                                                             applyindex 224 to 225  
                                                                                             S4 write putAdd in(225)
                                                                                             S4 BBBBBBB append      
                                                                                             Key(3) from x 3 0 yx 3 
                                                                                             1 yx 3 2 yx 3 3 yx 3 4 
                                                                                             yx 3 5 yx 3 6 yx 3 7 yx
                                                                                             3 8 yx 3 9 yx 3 10 yx 3
                                                                                             11 yx 3 12 yx 3 13 yx 3
                                                                                             14 yx 3 15 yx 3 16 yx 3
                                                                                             17 yx 3 18 yx 3 19 y to
                                                                                             value(x 3 21 y) from(4)
                                                                                             S4 TTT                 
                                                                                             CommandValid(true)     
                                                                                             applyindex(225)        
                                                                                             CommandIndex(226)      
                                                                                             TIMEOUT key() value()  
                                                                                             CDM[C-1](0) M(-1)      
                                                                                             from(4)                
                                                                                             S4 for TIMEOUT update  
                                                                                             applyindex 225 to 226  
                                                                                             S4 Persist the         
                                                                                             log[[{217 7 {3 52 2 Get
                                                                                             1 }} {218 7 {0 41 2 Get
                                                                                             2 }} {219 7 {4 41 2 Get
                                                                                             0 }} {220 11 {-1 -1 4  
                                                                                             TIMEOUT  }} {221 11 {0 
                                                                                             43 4 Get 2 }} {222 11  
                                                                                             {3 55 4 Append 1 x 1 29
                                                                                             y}} {223 11 {2 40 4 Get
                                                                                             4 }} {224 11 {4 44 4   
                                                                                             Get 0 }} {225 11 {1 38 
                                                                                             4 Append 3 x 3 21 y}}  
                                                                                             {226 11 {-1 -1 4       
                                                                                             TIMEOUT  }}]]          
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(591)                                                                           
S0 commit(7) applied(6)                                                                                             
lenlog(9) rf.X(217)                                                                                                 
in(584)                                                                                                             
S0 lastapp lognode =                                                                                                
{true {4 44 4 Get 0 }                                                                                               
224 false [] 0 0}                                                                                                   
S0 comm(7) last(224)                                                                                                
S0 TTT                                                                                                              
CommandValid(true)                                                                                                  
applyindex(223)                                                                                                     
CommandIndex(224) Get                                                                                               
key(0) value()                                                                                                      
CDM[C4](41) M(44)                                                                                                   
from(4)                                                                                                             
S0 update CDM[4] from                                                                                               
41 to 44 update                                                                                                     
applyindex 223 to 224                                                                                               
S0 can not write get                                                                                                
in(224)                                                                                                             
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }} {219 7 {4 41 2 Get                                                                                             
0 }} {220 11 {-1 -1 4                                                                                               
TIMEOUT  }} {221 11 {0                                                                                              
43 4 Get 2 }} {222 11                                                                                               
{3 55 4 Append 1 x 1 29                                                                                             
y}} {223 11 {2 40 4 Get                                                                                             
4 }} {224 11 {4 44 4                                                                                                
Get 0 }} {225 11 {1 38                                                                                              
4 Append 3 x 3 21 y}}                                                                                               
{226 11 {-1 -1 4                                                                                                    
TIMEOUT  }}]]                                                                                                       
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(577)                                                    
                                                                      S3 commit(7)                                  
                                                                      applied(7) lenlog(9)                          
                                                                      rf.X(217) in(573)                             
                                                                                             S4 commit(9) applied(9)
                                                                                             lenlog(9) rf.X(217)    
                                                                                             in(596)                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(592)                                                                           
S0 commit(7) applied(7)                                                                                             
lenlog(9) rf.X(217)                                                                                                 
in(585)                                                                                                             
                                                                      S3 commit(7)                                  
                                                                      applied(7) lenlog(9)                          
                                                                      rf.X(217) in(574)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(578)                                                    
                                                                                             S4 commit(9) applied(9)
                                                                                             lenlog(9) rf.X(217)    
                                                                                             in(597)                
S0 commit(7) applied(7)                                                                                             
lenlog(9) rf.X(217)                                                                                                 
in(586)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(593)                                                                           
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(579)                                                    
                                                                                             S4 commit(9) applied(9)
                                                                                             lenlog(9) rf.X(217)    
                                                                                             in(598)                
                                                                      S3 commit(7)                                  
                                                                      applied(7) lenlog(9)                          
                                                                      rf.X(217) in(575)                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(594)                                                                           
S0 commit(7) applied(7)                                                                                             
lenlog(9) rf.X(217)                                                                                                 
in(587)                                                                                                             
                                                                      S3 commit(7)                                  
                                                                      applied(7) lenlog(9)                          
                                                                      rf.X(217) in(576)                             
                                                                                             S4 commit(9) applied(9)
                                                                                             lenlog(9) rf.X(217)    
                                                                                             in(599)                
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(580)                                                    
S0 the num is (757)                                                                                                 
applidindex(224) X(217)                                                                                             
                                               S2 the num is (1014)                                                 
                                               applidindex(228)                                                     
                                               X(228)                                                               
S0 commit(7) applied(7)                                                                                             
lenlog(9) rf.X(217)                                                                                                 
in(588)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(595)                                                                           
                                                                      S3 the num is (757)                           
                                                                      applidindex(224)                              
                                                                      X(217)                                        
                                                                      S3 commit(7)                                  
                                                                      applied(7) lenlog(9)                          
                                                                      rf.X(217) in(577)                             
                                                                                             S4 commit(9) applied(9)
                                                                                             lenlog(9) rf.X(217)    
                                                                                             in(600)                
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(581)                                                    
S0 commit(7) applied(7)                                                                                             
lenlog(9) rf.X(217)                                                                                                 
in(589)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(596)                                                                           
                                                                                             S4 commit(9) applied(9)
                                                                                             lenlog(9) rf.X(217)    
                                                                                             in(601)                
                                                                      S3 commit(7)                                  
                                                                      applied(7) lenlog(9)                          
                                                                      rf.X(217) in(578)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(582)                                                    
                        S1 the num is (1014)                                                                        
                        applidindex(228)                                                                            
                        X(228)                                                                                      
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(597)                                                                           
S0 commit(7) applied(7)                                                                                             
lenlog(9) rf.X(217)                                                                                                 
in(590)                                                                                                             
                                                                                             S4 commit(9) applied(9)
                                                                                             lenlog(9) rf.X(217)    
                                                                                             in(602)                
                                                                      S3 commit(7)                                  
                                                                      applied(7) lenlog(9)                          
                                                                      rf.X(217) in(579)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(583)                                                    
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(584)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(598)                                                                           
                                                                                             S4 commit(9) applied(9)
                                                                                             lenlog(9) rf.X(217)    
                                                                                             in(603)                
S0 commit(7) applied(7)                                                                                             
lenlog(9) rf.X(217)                                                                                                 
in(591)                                                                                                             
                                                                      S3 commit(7)                                  
                                                                      applied(7) lenlog(9)                          
                                                                      rf.X(217) in(580)                             
                                                                                             S4 the num is (757)    
                                                                                             applidindex(226) X(217)
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(585)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(599)                                                                           
                                                                                             S4 commit(9) applied(9)
                                                                                             lenlog(9) rf.X(217)    
                                                                                             in(604)                
                                                                      S3 commit(7)                                  
                                                                      applied(7) lenlog(9)                          
                                                                      rf.X(217) in(581)                             
S0 commit(7) applied(7)                                                                                             
lenlog(9) rf.X(217)                                                                                                 
in(592)                                                                                                             
                                                                                             S4 Persist the         
                                                                                             log[[{217 7 {3 52 2 Get
                                                                                             1 }} {218 7 {0 41 2 Get
                                                                                             2 }} {219 7 {4 41 2 Get
                                                                                             0 }} {220 11 {-1 -1 4  
                                                                                             TIMEOUT  }} {221 11 {0 
                                                                                             43 4 Get 2 }} {222 11  
                                                                                             {3 55 4 Append 1 x 1 29
                                                                                             y}} {223 11 {2 40 4 Get
                                                                                             4 }} {224 11 {4 44 4   
                                                                                             Get 0 }} {225 11 {1 38 
                                                                                             4 Append 3 x 3 21 y}}  
                                                                                             {226 11 {-1 -1 4       
                                                                                             TIMEOUT  }}]]          
                                                                                             S4 rf.nextindex[0] = 10
                                                                                             S4 index(9)  Pre(226)  
                                                                                             len(9)                 
                                                                                             S4 app -> 0 next(10)   
                                                                                             index(9) neT(11) cT(11)
                                                                                             S4 rf.nextindex[2] = 10
                                                                                             S4 index(9)  Pre(226)  
                                                                                             len(9)                 
                                                                                             S4 app -> 2 next(10)   
                                                                                             index(9) neT(11) cT(11)
                                                                                             S4 rf.nextindex[1] = 10
                                                                                             S4 index(9)  Pre(226)  
                                                                                             len(9)                 
                                                                                             S4 app -> 1 next(10)   
                                                                                             index(9) neT(11) cT(11)
                                                                                             S4 rf.nextindex[3] = 10
                                                                                             S4 index(9)  Pre(226)  
                                                                                             len(9)                 
                                                                                             S4 app -> 3 next(10)   
                                                                                             index(9) neT(11) cT(11)
                                                                                             S4 time out            
                                                                                             S4 have log            
                        S1  heart <- 4 T(11)                                                                        
                        cT(11)                                                                                      
                                                                                             S4 {227 11 {-1 -1 4    
                                                                                             TIMEOUT  }}            
                        C1 ok(true)                                                                                 
                        ERR(TimeOut) from S4                                                                        
                        in test226                                                                                  
                        C1 Append err(TimeOut)                                                                      
                        nil key(3) value(x 3                                                                        
                        21 y) r.index(0)                                                                            
                        from(S4)3                                                                                   
                        C1 send to S4 Append                                                                        
                        Key(3) value(x 3 21 y)                                                                      
                        CIndex(1) OIndex(38)                                                                        
                        test1                                                                                       
                                                                                             S4 Persist the         
                                                                                             log[[{217 7 {3 52 2 Get
                                                                                             1 }} {218 7 {0 41 2 Get
                                                                                             2 }} {219 7 {4 41 2 Get
                                                                                             0 }} {220 11 {-1 -1 4  
                                                                                             TIMEOUT  }} {221 11 {0 
                                                                                             43 4 Get 2 }} {222 11  
                                                                                             {3 55 4 Append 1 x 1 29
                                                                                             y}} {223 11 {2 40 4 Get
                                                                                             4 }} {224 11 {4 44 4   
                                                                                             Get 0 }} {225 11 {1 38 
                                                                                             4 Append 3 x 3 21 y}}  
                                                                                             {226 11 {-1 -1 4       
                                                                                             TIMEOUT  }} {227 11 {-1
                                                                                             -1 4 TIMEOUT  }}]]     
                        S1 YYYY                                                                                     
                        S1 i = 1                                                                                    
                        S1 BBB fail logi(15)                                                                        
                        pre(-2) TI(229)                                                                             
                                                                                             S4 to 1 匹配失败       
                                                                                             tfi(229)               
                                                                                             S4 update              
                                                                                             nextindex[1](10) to    
                                                                                             X(12) > 1              
                                                                                             S4 update              
                                                                                             nextindex[1](12) to 11>
                                                                                             1                      
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                                                                                             S4 rf.nextindex[3] = 10
                                                                                             S4 index(10)  Pre(226) 
                                                                                             len(10)                
                                                                                             S4 app -> 3 next(10)   
                                                                                             index(10) neT(11)      
                                                                                             cT(11)                 
                                                                                             S4 rf.nextindex[1] = 11
                                                                                             S4 index(10)  Pre(227) 
                                                                                             len(10)                
                                                                                             S4 app -> 1 next(11)   
                                                                                             index(10) neT(11)      
                                                                                             cT(11)                 
                                                                                             S4 rf.nextindex[2] = 10
                                                                                             S4 index(10)  Pre(226) 
                                                                                             len(10)                
                                                                                             S4 app -> 2 next(10)   
                                                                                             index(10) neT(11)      
                                                                                             cT(11)                 
                                                                                             S4 rf.nextindex[0] = 10
                                                                                             S4 index(10)  Pre(226) 
                                                                                             len(10)                
                                                                                             S4 app -> 0 next(10)   
                                                                                             index(10) neT(11)      
                                                                                             cT(11)                 
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(586)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(600)                                                                           
                                                                                             S4 commit(9) applied(9)
                                                                                             lenlog(10) rf.X(217)   
                                                                                             in(605)                
                                                                      S3 commit(7)                                  
                                                                      applied(7) lenlog(9)                          
                                                                      rf.X(217) in(582)                             
                                               S2  app <- 4 T(11)                                                   
                                               cT(11)                                                               
                                               S2 YYYY                                                              
                                               S2 i = 1                                                             
                                               S2 BBB fail logi(15)                                                 
                                               pre(-2) TI(229)                                                      
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
S0 commit(7) applied(7)                                                                                             
lenlog(9) rf.X(217)                                                                                                 
in(593)                                                                                                             
                                                                                             S4 -> 2 app fail       
                                                                                             S4 <-- C1 Get key(3)   
                                                                                             test1                  
                                                                                             S4 had done key(3)     
                                                                                             value(x 3 21 y)        
                                                                                             Op(Append) from(C1)    
                                                                                             OIndex(38) test1       
                        C1 ok(true) ERR(OK)                                                                         
                        from S4 in test1                                                                            
                        C1 Append err(OK),                                                                          
                        success key(3) value(x                                                                      
                        3 21 y) r.Index(-1)                                                                         
                        from(S4)2                                                                                   
                                                                      S3  heart <- 4 T(11)                          
                                                                      cT(11)                                        
                                                                      S3 YYYY                                       
                                                                      S3 PreT(11) LT(11)                            
                                                                      S3 update commit(226)                         
                                                                      S3 Persist the                                
                                                                      log[[{217 7 {3 52 2                           
                                                                      Get 1 }} {218 7 {0 41                         
                                                                      2 Get 2 }} {219 7 {4                          
                                                                      41 2 Get 0 }} {220 11                         
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {221 11 {0 43 4 Get 2                         
                                                                      }} {222 11 {3 55 4                            
                                                                      Append 1 x 1 29 y}}                           
                                                                      {223 11 {2 40 4 Get 4                         
                                                                      }} {224 11 {4 44 4 Get                        
                                                                      0 }} {225 11 {1 38 4                          
                                                                      Append 3 x 3 21 y}}                           
                                                                      {226 11 {-1 -1 4                              
                                                                      TIMEOUT  }}]]                                 
                                                                                             S4 update              
                                                                                             nextindex[3](10) to 10 
                                                                                             success                
                                                                                             S4 index(9)            
                                                                                             matchindex([9 1 1 9    
                                                                                             10])                   
                                                                                             S4 successnum(3)       
                                                                                             com-rf.X(9) rf.CT(11)  
                                                                                             t(11)                  
                                                                      S3 Persist the                                
                                                                      log[[{217 7 {3 52 2                           
                                                                      Get 1 }} {218 7 {0 41                         
                                                                      2 Get 2 }} {219 7 {4                          
                                                                      41 2 Get 0 }} {220 11                         
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {221 11 {0 43 4 Get 2                         
                                                                      }} {222 11 {3 55 4                            
                                                                      Append 1 x 1 29 y}}                           
                                                                      {223 11 {2 40 4 Get 4                         
                                                                      }} {224 11 {4 44 4 Get                        
                                                                      0 }} {225 11 {1 38 4                          
                                                                      Append 3 x 3 21 y}}                           
                                                                      {226 11 {-1 -1 4                              
                                                                      TIMEOUT  }}]]                                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(601)                                                                           
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(587)                                                    
                                                                                             S4 commit(9) applied(9)
                                                                                             lenlog(10) rf.X(217)   
                                                                                             in(606)                
                                                                      S3 commit(9)                                  
                                                                      applied(7) lenlog(9)                          
                                                                      rf.X(217) in(583)                             
                                                                      S3 lastapp lognode =                          
                                                                      {true {1 38 4 Append 3                        
                                                                      x 3 21 y} 225 false []                        
                                                                      0 0}                                          
                                                                      S3 comm(9) last(225)                          
                                                                      S3 lastapp lognode =                          
                                                                      {true {-1 -1 4 TIMEOUT                        
                                                                      } 226 false [] 0 0}                           
                                                                      S3 comm(9) last(226)                          
                                                                      S3 TTT                                        
                                                                      CommandValid(true)                            
                                                                      applyindex(224)                               
                                                                      CommandIndex(225)                             
                                                                      Append key(3) value(x                         
                                                                      3 21 y) CDM[C1](35)                           
                                                                      M(38) from(4)                                 
                                                                      S3 update CDM[1] from                         
                                                                      35 to 38 update                               
                                                                      applyindex 224 to 225                         
                                                                      S3 can not write                              
                                                                      putAdd in(225)                                
                                                                      S3 BBBBBBB append                             
                                                                      Key(3) from x 3 0 yx 3                        
                                                                      1 yx 3 2 yx 3 3 yx 3 4                        
                                                                      yx 3 5 yx 3 6 yx 3 7                          
                                                                      yx 3 8 yx 3 9 yx 3 10                         
                                                                      yx 3 11 yx 3 12 yx 3                          
                                                                      13 yx 3 14 yx 3 15 yx                         
                                                                      3 16 yx 3 17 yx 3 18                          
                                                                      yx 3 19 y to value(x 3                        
                                                                      21 y) from(4)                                 
                                                                      S3 TTT                                        
                                                                      CommandValid(true)                            
                                                                      applyindex(225)                               
                                                                      CommandIndex(226)                             
                                                                      TIMEOUT key() value()                         
                                                                      CDM[C-1](0) M(-1)                             
                                                                      from(4)                                       
                                                                      S3 for TIMEOUT update                         
                                                                      applyindex 225 to 226                         
                                                                      S3 Persist the                                
                                                                      log[[{217 7 {3 52 2                           
                                                                      Get 1 }} {218 7 {0 41                         
                                                                      2 Get 2 }} {219 7 {4                          
                                                                      41 2 Get 0 }} {220 11                         
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {221 11 {0 43 4 Get 2                         
                                                                      }} {222 11 {3 55 4                            
                                                                      Append 1 x 1 29 y}}                           
                                                                      {223 11 {2 40 4 Get 4                         
                                                                      }} {224 11 {4 44 4 Get                        
                                                                      0 }} {225 11 {1 38 4                          
                                                                      Append 3 x 3 21 y}}                           
                                                                      {226 11 {-1 -1 4                              
                                                                      TIMEOUT  }}]]                                 
S0 commit(7) applied(7)                                                                                             
lenlog(9) rf.X(217)                                                                                                 
in(594)                                                                                                             
                        S1  heart <- 4 T(11)                                                                        
                        cT(11)                                                                                      
S0  heart <- 4 T(11)                                                                                                
cT(11)                                                                                                              
S0 YYYY                                                                                                             
S0 PreT(11) LT(11)                                                                                                  
                        S1 YYYY                                                                                     
                        S1 i = 1                                                                                    
                        S1 BBB fail logi(15)                                                                        
                        pre(-1) TI(229)                                                                             
S0 update commit(226)                                                                                               
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                                                                                             S4 to 1 匹配失败       
                                                                                             tfi(229)               
                                                                                             S4 update              
                                                                                             nextindex[1](11) to    
                                                                                             X(12) > 1              
                                                                                             S4 update              
                                                                                             nextindex[1](12) to 11>
                                                                                             1                      
                                               S2  heart <- 4 T(11)                                                 
                                               cT(11)                                                               
                                               S2 YYYY                                                              
                                               S2 i = 1                                                             
                                               S2 BBB fail logi(15)                                                 
                                               pre(-2) TI(229)                                                      
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                                                                                             S4 update              
                                                                                             nextindex[0](10) to 10 
                                                                                             success                
                                                                                             S4 index(9)            
                                                                                             matchindex([9 1 1 9    
                                                                                             10])                   
                                                                                             S4 successnum(3)       
                                                                                             com-rf.X(9) rf.CT(11)  
                                                                                             t(11)                  
                                                                                             S4 to 2 匹配失败       
                                                                                             tfi(229)               
                                                                                             S4 update              
                                                                                             nextindex[2](10) to    
                                                                                             X(12) > 1              
                                                                                             S4 update              
                                                                                             nextindex[2](12) to 11>
                                                                                             1                      
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }} {219 7 {4 41 2 Get                                                                                             
0 }} {220 11 {-1 -1 4                                                                                               
TIMEOUT  }} {221 11 {0                                                                                              
43 4 Get 2 }} {222 11                                                                                               
{3 55 4 Append 1 x 1 29                                                                                             
y}} {223 11 {2 40 4 Get                                                                                             
4 }} {224 11 {4 44 4                                                                                                
Get 0 }} {225 11 {1 38                                                                                              
4 Append 3 x 3 21 y}}                                                                                               
{226 11 {-1 -1 4                                                                                                    
TIMEOUT  }}]]                                                                                                       
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }} {219 7 {4 41 2 Get                                                                                             
0 }} {220 11 {-1 -1 4                                                                                               
TIMEOUT  }} {221 11 {0                                                                                              
43 4 Get 2 }} {222 11                                                                                               
{3 55 4 Append 1 x 1 29                                                                                             
y}} {223 11 {2 40 4 Get                                                                                             
4 }} {224 11 {4 44 4                                                                                                
Get 0 }} {225 11 {1 38                                                                                              
4 Append 3 x 3 21 y}}                                                                                               
{226 11 {-1 -1 4                                                                                                    
TIMEOUT  }}]]                                                                                                       
                                                                                             S4 commit(9) applied(9)
                                                                                             lenlog(10) rf.X(217)   
                                                                                             in(607)                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(602)                                                                           
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(588)                                                    
S0  app <- 4 T(11)                                                                                                  
cT(11)                                                                                                              
S0 YYYY                                                                                                             
S0 PreT(11) LT(11)                                                                                                  
S0 B success +                                                                                                      
log([{227 11 {-1 -1 4                                                                                               
TIMEOUT  }}])                                                                                                       
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }} {219 7 {4 41 2 Get                                                                                             
0 }} {220 11 {-1 -1 4                                                                                               
TIMEOUT  }} {221 11 {0                                                                                              
43 4 Get 2 }} {222 11                                                                                               
{3 55 4 Append 1 x 1 29                                                                                             
y}} {223 11 {2 40 4 Get                                                                                             
4 }} {224 11 {4 44 4                                                                                                
Get 0 }} {225 11 {1 38                                                                                              
4 Append 3 x 3 21 y}}                                                                                               
{226 11 {-1 -1 4                                                                                                    
TIMEOUT  }} {227 11 {-1                                                                                             
-1 4 TIMEOUT  }}]]                                                                                                  
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }} {219 7 {4 41 2 Get                                                                                             
0 }} {220 11 {-1 -1 4                                                                                               
TIMEOUT  }} {221 11 {0                                                                                              
43 4 Get 2 }} {222 11                                                                                               
{3 55 4 Append 1 x 1 29                                                                                             
y}} {223 11 {2 40 4 Get                                                                                             
4 }} {224 11 {4 44 4                                                                                                
Get 0 }} {225 11 {1 38                                                                                              
4 Append 3 x 3 21 y}}                                                                                               
{226 11 {-1 -1 4                                                                                                    
TIMEOUT  }} {227 11 {-1                                                                                             
-1 4 TIMEOUT  }}]]                                                                                                  
                                                                                             S4 update              
                                                                                             nextindex[0](10) to 11 
                                                                                             success                
                                                                                             S4 index(10)           
                                                                                             matchindex([10 1 1 9   
                                                                                             10])                   
                                                                                             S4 successnum(2)       
                                                                                             com-rf.X(9) rf.CT(11)  
                                                                                             t(11)                  
                                                                      S3  app <- 4 T(11)                            
                                                                      cT(11)                                        
                                                                      S3 YYYY                                       
                                                                      S3 PreT(11) LT(11)                            
                                                                      S3 B success +                                
                                                                      log([{227 11 {-1 -1 4                         
                                                                      TIMEOUT  }}])                                 
                                                                      S3 Persist the                                
                                                                      log[[{217 7 {3 52 2                           
                                                                      Get 1 }} {218 7 {0 41                         
                                                                      2 Get 2 }} {219 7 {4                          
                                                                      41 2 Get 0 }} {220 11                         
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {221 11 {0 43 4 Get 2                         
                                                                      }} {222 11 {3 55 4                            
                                                                      Append 1 x 1 29 y}}                           
                                                                      {223 11 {2 40 4 Get 4                         
                                                                      }} {224 11 {4 44 4 Get                        
                                                                      0 }} {225 11 {1 38 4                          
                                                                      Append 3 x 3 21 y}}                           
                                                                      {226 11 {-1 -1 4                              
                                                                      TIMEOUT  }} {227 11                           
                                                                      {-1 -1 4 TIMEOUT  }}]]                        
                                                                      S3 Persist the                                
                                                                      log[[{217 7 {3 52 2                           
                                                                      Get 1 }} {218 7 {0 41                         
                                                                      2 Get 2 }} {219 7 {4                          
                                                                      41 2 Get 0 }} {220 11                         
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {221 11 {0 43 4 Get 2                         
                                                                      }} {222 11 {3 55 4                            
                                                                      Append 1 x 1 29 y}}                           
                                                                      {223 11 {2 40 4 Get 4                         
                                                                      }} {224 11 {4 44 4 Get                        
                                                                      0 }} {225 11 {1 38 4                          
                                                                      Append 3 x 3 21 y}}                           
                                                                      {226 11 {-1 -1 4                              
                                                                      TIMEOUT  }} {227 11                           
                                                                      {-1 -1 4 TIMEOUT  }}]]                        
                                                                                             S4 -> 3 app fail       
S0 commit(9) applied(7)                                                                                             
lenlog(10) rf.X(217)                                                                                                
in(595)                                                                                                             
S0 lastapp lognode =                                                                                                
{true {1 38 4 Append 3                                                                                              
x 3 21 y} 225 false []                                                                                              
0 0}                                                                                                                
S0 comm(9) last(225)                                                                                                
S0 lastapp lognode =                                                                                                
{true {-1 -1 4 TIMEOUT                                                                                              
} 226 false [] 0 0}                                                                                                 
S0 comm(9) last(226)                                                                                                
S0 TTT                                                                                                              
CommandValid(true)                                                                                                  
applyindex(224)                                                                                                     
CommandIndex(225)                                                                                                   
Append key(3) value(x 3                                                                                             
21 y) CDM[C1](35) M(38)                                                                                             
from(4)                                                                                                             
S0 update CDM[1] from                                                                                               
35 to 38 update                                                                                                     
applyindex 224 to 225                                                                                               
S0 can not write putAdd                                                                                             
in(225)                                                                                                             
                                                                      S3 commit(9)                                  
                                                                      applied(9) lenlog(10)                         
                                                                      rf.X(217) in(584)                             
S0 BBBBBBB append                                                                                                   
Key(3) from x 3 0 yx 3                                                                                              
1 yx 3 2 yx 3 3 yx 3 4                                                                                              
yx 3 5 yx 3 6 yx 3 7 yx                                                                                             
3 8 yx 3 9 yx 3 10 yx 3                                                                                             
11 yx 3 12 yx 3 13 yx 3                                                                                             
14 yx 3 15 yx 3 16 yx 3                                                                                             
17 yx 3 18 yx 3 19 y to                                                                                             
value(x 3 21 y) from(4)                                                                                             
S0 the cmd had achieve                                                                                              
12                                                                                                                  
S0 the num is (800)                                                                                                 
applidindex(225) X(217)                                                                                             
S0 TTT                                                                                                              
CommandValid(true)                                                                                                  
applyindex(225)                                                                                                     
CommandIndex(226)                                                                                                   
TIMEOUT key() value()                                                                                               
CDM[C-1](0) M(-1)                                                                                                   
from(4)                                                                                                             
S0 for TIMEOUT update                                                                                               
applyindex 225 to 226                                                                                               
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }} {219 7 {4 41 2 Get                                                                                             
0 }} {220 11 {-1 -1 4                                                                                               
TIMEOUT  }} {221 11 {0                                                                                              
43 4 Get 2 }} {222 11                                                                                               
{3 55 4 Append 1 x 1 29                                                                                             
y}} {223 11 {2 40 4 Get                                                                                             
4 }} {224 11 {4 44 4                                                                                                
Get 0 }} {225 11 {1 38                                                                                              
4 Append 3 x 3 21 y}}                                                                                               
{226 11 {-1 -1 4                                                                                                    
TIMEOUT  }} {227 11 {-1                                                                                             
-1 4 TIMEOUT  }}]]                                                                                                  
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(603)                                                                           
                                                                                             S4 commit(9) applied(9)
                                                                                             lenlog(10) rf.X(217)   
                                                                                             in(608)                
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(589)                                                    
S0 commit(9) applied(9)                                                                                             
lenlog(10) rf.X(217)                                                                                                
in(596)                                                                                                             
                                                                      S3 commit(9)                                  
                                                                      applied(9) lenlog(10)                         
                                                                      rf.X(217) in(585)                             
S0 the num is (800)                                                                                                 
applidindex(226) X(217)                                                                                             
                                               S2 the num is (1014)                                                 
                                               applidindex(228)                                                     
                                               X(228)                                                               
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(590)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(604)                                                                           
                                                                                             S4 commit(9) applied(9)
                                                                                             lenlog(10) rf.X(217)   
                                                                                             in(609)                
                                                                      S3 the num is (800)                           
                                                                      applidindex(226)                              
                                                                      X(217)                                        
S0 commit(9) applied(9)                                                                                             
lenlog(10) rf.X(217)                                                                                                
in(597)                                                                                                             
                                                                      S3 commit(9)                                  
                                                                      applied(9) lenlog(10)                         
                                                                      rf.X(217) in(586)                             
                                                                                             S4 commit(9) applied(9)
                                                                                             lenlog(10) rf.X(217)   
                                                                                             in(610)                
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(591)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(605)                                                                           
                                                                      S3 commit(9)                                  
                                                                      applied(9) lenlog(10)                         
                                                                      rf.X(217) in(587)                             
S0 commit(9) applied(9)                                                                                             
lenlog(10) rf.X(217)                                                                                                
in(598)                                                                                                             
                        S1 the num is (1014)                                                                        
                        applidindex(228)                                                                            
                        X(228)                                                                                      
                                                                                             S4 commit(9) applied(9)
                                                                                             lenlog(10) rf.X(217)   
                                                                                             in(611)                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(606)                                                                           
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(592)                                                    
S0 commit(9) applied(9)                                                                                             
lenlog(10) rf.X(217)                                                                                                
in(599)                                                                                                             
                                                                      S3 commit(9)                                  
                                                                      applied(9) lenlog(10)                         
                                                                      rf.X(217) in(588)                             
                                                                                             S4 commit(9) applied(9)
                                                                                             lenlog(10) rf.X(217)   
                                                                                             in(612)                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(607)                                                                           
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(593)                                                    
                                                                      S3 commit(9)                                  
                                                                      applied(9) lenlog(10)                         
                                                                      rf.X(217) in(589)                             
S0 commit(9) applied(9)                                                                                             
lenlog(10) rf.X(217)                                                                                                
in(600)                                                                                                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(594)                                                    
                                                                                             S4 commit(9) applied(9)
                                                                                             lenlog(10) rf.X(217)   
                                                                                             in(613)                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(608)                                                                           
                                                                                             S4 the num is (800)    
                                                                                             applidindex(226) X(217)
                                                                      S3 commit(9)                                  
                                                                      applied(9) lenlog(10)                         
                                                                      rf.X(217) in(590)                             
S0 commit(9) applied(9)                                                                                             
lenlog(10) rf.X(217)                                                                                                
in(601)                                                                                                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(595)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(609)                                                                           
                                                                                             S4 commit(9) applied(9)
                                                                                             lenlog(10) rf.X(217)   
                                                                                             in(614)                
                                                                                             S4 have log            
                                                                                             S4 {228 11 {-1 -1 4    
                                                                                             TIMEOUT  }}            
                                                                                             S4 rf.nextindex[3] = 10
                                                                                             S4 index(11)  Pre(226) 
                                                                                             len(11)                
                                                                                             S4 app -> 3 next(10)   
                                                                                             index(11) neT(11)      
                                                                                             cT(11)                 
                                                                                             S4 rf.nextindex[1] = 11
                                                                                             S4 index(11)  Pre(227) 
                                                                                             len(11)                
                                                                                             S4 app -> 1 next(11)   
                                                                                             index(11) neT(11)      
                                                                                             cT(11)                 
                                                                                             S4 Persist the         
                                                                                             log[[{217 7 {3 52 2 Get
                                                                                             1 }} {218 7 {0 41 2 Get
                                                                                             2 }} {219 7 {4 41 2 Get
                                                                                             0 }} {220 11 {-1 -1 4  
                                                                                             TIMEOUT  }} {221 11 {0 
                                                                                             43 4 Get 2 }} {222 11  
                                                                                             {3 55 4 Append 1 x 1 29
                                                                                             y}} {223 11 {2 40 4 Get
                                                                                             4 }} {224 11 {4 44 4   
                                                                                             Get 0 }} {225 11 {1 38 
                                                                                             4 Append 3 x 3 21 y}}  
                                                                                             {226 11 {-1 -1 4       
                                                                                             TIMEOUT  }} {227 11 {-1
                                                                                             -1 4 TIMEOUT  }} {228  
                                                                                             11 {-1 -1 4 TIMEOUT    
                                                                                             }}]]                   
                                                                                             S4 rf.nextindex[0] = 11
                                                                                             S4 index(11)  Pre(227) 
                                                                                             len(11)                
                                                                                             S4 app -> 0 next(11)   
                                                                                             index(11) neT(11)      
                                                                                             cT(11)                 
                                                                                             S4 rf.nextindex[2] = 11
                                                                                             S4 index(11)  Pre(227) 
                                                                                             len(11)                
                                                                                             S4 app -> 2 next(11)   
                                                                                             index(11) neT(11)      
                                                                                             cT(11)                 
                                                                      S3 commit(9)                                  
                                                                      applied(9) lenlog(10)                         
                                                                      rf.X(217) in(591)                             
S0 commit(9) applied(9)                                                                                             
lenlog(10) rf.X(217)                                                                                                
in(602)                                                                                                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(596)                                                    
                                                                                             S4 commit(9) applied(9)
                                                                                             lenlog(11) rf.X(217)   
                                                                                             in(615)                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(610)                                                                           
S0  app <- 4 T(11)                                                                                                  
cT(11)                                                                                                              
S0 YYYY                                                                                                             
S0 PreT(11) LT(11)                                                                                                  
S0 B success +                                                                                                      
log([{228 11 {-1 -1 4                                                                                               
TIMEOUT  }}])                                                                                                       
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }} {219 7 {4 41 2 Get                                                                                             
0 }} {220 11 {-1 -1 4                                                                                               
TIMEOUT  }} {221 11 {0                                                                                              
43 4 Get 2 }} {222 11                                                                                               
{3 55 4 Append 1 x 1 29                                                                                             
y}} {223 11 {2 40 4 Get                                                                                             
4 }} {224 11 {4 44 4                                                                                                
Get 0 }} {225 11 {1 38                                                                                              
4 Append 3 x 3 21 y}}                                                                                               
{226 11 {-1 -1 4                                                                                                    
TIMEOUT  }} {227 11 {-1                                                                                             
-1 4 TIMEOUT  }} {228                                                                                               
11 {-1 -1 4 TIMEOUT                                                                                                 
}}]]                                                                                                                
                                                                                             S4 update              
                                                                                             nextindex[0](11) to 12 
                                                                                             success                
                                                                                             S4 index(11)           
                                                                                             matchindex([11 1 1 9   
                                                                                             11])                   
                                                                                             S4 successnum(2)       
                                                                                             com-rf.X(9) rf.CT(11)  
                                                                                             t(11)                  
S0 Persist the                                                                                                      
log[[{217 7 {3 52 2 Get                                                                                             
1 }} {218 7 {0 41 2 Get                                                                                             
2 }} {219 7 {4 41 2 Get                                                                                             
0 }} {220 11 {-1 -1 4                                                                                               
TIMEOUT  }} {221 11 {0                                                                                              
43 4 Get 2 }} {222 11                                                                                               
{3 55 4 Append 1 x 1 29                                                                                             
y}} {223 11 {2 40 4 Get                                                                                             
4 }} {224 11 {4 44 4                                                                                                
Get 0 }} {225 11 {1 38                                                                                              
4 Append 3 x 3 21 y}}                                                                                               
{226 11 {-1 -1 4                                                                                                    
TIMEOUT  }} {227 11 {-1                                                                                             
-1 4 TIMEOUT  }} {228                                                                                               
11 {-1 -1 4 TIMEOUT                                                                                                 
}}]]                                                                                                                
S0 commit(9) applied(9)                                                                                             
lenlog(11) rf.X(217)                                                                                                
in(603)                                                                                                             
                                                                      S3 commit(9)                                  
                                                                      applied(9) lenlog(10)                         
                                                                      rf.X(217) in(592)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(597)                                                    
                                                                                             S4 commit(9) applied(9)
                                                                                             lenlog(11) rf.X(217)   
                                                                                             in(616)                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(611)                                                                           
                                               S2  app <- 4 T(11)                                                   
                                               cT(11)                                                               
                                               S2 YYYY                                                              
                                               S2 i = 1                                                             
                                               S2 BBB fail logi(15)                                                 
                                               pre(-1) TI(229)                                                      
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                                                                                             S4 to 2 匹配失败       
                                                                                             tfi(229)               
                                                                                             S4 update              
                                                                                             nextindex[2](11) to    
                                                                                             X(12) > 1              
                        S1  app <- 4 T(11)                                                                          
                        cT(11)                                                                                      
                        S1 YYYY                                                                                     
                        S1 i = 1                                                                                    
                        S1 BBB fail logi(15)                                                                        
                        pre(-1) TI(229)                                                                             
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                                                                                             S4 to 1 匹配失败       
                                                                                             tfi(229)               
                                                                                             S4 update              
                                                                                             nextindex[1](11) to    
                                                                                             X(12) > 1              
                                                                      S3 commit(9)                                  
                                                                      applied(9) lenlog(10)                         
                                                                      rf.X(217) in(593)                             
S0 commit(9) applied(9)                                                                                             
lenlog(11) rf.X(217)                                                                                                
in(604)                                                                                                             
                                                                      S3  app <- 4 T(11)                            
                                                                      cT(11)                                        
                                                                      S3 YYYY                                       
                                                                      S3 PreT(11) LT(11)                            
                                                                      S3 mat(10) index(10)                          
                                                                      len(11)                                       
                                                                      S3 B success +                                
                                                                      log([{228 11 {-1 -1 4                         
                                                                      TIMEOUT  }}])                                 
                                                                      S3 Persist the                                
                                                                      log[[{217 7 {3 52 2                           
                                                                      Get 1 }} {218 7 {0 41                         
                                                                      2 Get 2 }} {219 7 {4                          
                                                                      41 2 Get 0 }} {220 11                         
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {221 11 {0 43 4 Get 2                         
                                                                      }} {222 11 {3 55 4                            
                                                                      Append 1 x 1 29 y}}                           
                                                                      {223 11 {2 40 4 Get 4                         
                                                                      }} {224 11 {4 44 4 Get                        
                                                                      0 }} {225 11 {1 38 4                          
                                                                      Append 3 x 3 21 y}}                           
                                                                      {226 11 {-1 -1 4                              
                                                                      TIMEOUT  }} {227 11                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {228 11 {-1 -1 4                              
                                                                      TIMEOUT  }}]]                                 
                                                                                             S4 update              
                                                                                             nextindex[3](10) to 12 
                                                                                             success                
                                                                                             S4 index(11)           
                                                                                             matchindex([11 1 1 11  
                                                                                             11])                   
                                                                                             S4 successnum(3)       
                                                                                             com-rf.X(9) rf.CT(11)  
                                                                                             t(11)                  
                                                                                             S4 sum(3) ban(2)       
                                                                                             S4 new commit(11) and  
                                                                                             applied                
                                                                      S3 Persist the                                
                                                                      log[[{217 7 {3 52 2                           
                                                                      Get 1 }} {218 7 {0 41                         
                                                                      2 Get 2 }} {219 7 {4                          
                                                                      41 2 Get 0 }} {220 11                         
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {221 11 {0 43 4 Get 2                         
                                                                      }} {222 11 {3 55 4                            
                                                                      Append 1 x 1 29 y}}                           
                                                                      {223 11 {2 40 4 Get 4                         
                                                                      }} {224 11 {4 44 4 Get                        
                                                                      0 }} {225 11 {1 38 4                          
                                                                      Append 3 x 3 21 y}}                           
                                                                      {226 11 {-1 -1 4                              
                                                                      TIMEOUT  }} {227 11                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {228 11 {-1 -1 4                              
                                                                      TIMEOUT  }}]]                                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(612)                                                                           
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(598)                                                    
                                                                                             S4 commit(11)          
                                                                                             applied(9) lenlog(11)  
                                                                                             rf.X(217) in(617)      
                                                                                             S4 lastapp lognode =   
                                                                                             {true {-1 -1 4 TIMEOUT 
                                                                                             } 227 false [] 0 0}    
                                                                                             S4 comm(11) last(227)  
                                                                                             S4 lastapp lognode =   
                                                                                             {true {-1 -1 4 TIMEOUT 
                                                                                             } 228 false [] 0 0}    
                                                                                             S4 comm(11) last(228)  
                                                                                             S4 TTT                 
                                                                                             CommandValid(true)     
                                                                                             applyindex(226)        
                                                                                             CommandIndex(227)      
                                                                                             TIMEOUT key() value()  
                                                                                             CDM[C-1](0) M(-1)      
                                                                                             from(4)                
                                                                                             S4 for TIMEOUT update  
                                                                                             applyindex 226 to 227  
                                                                                             S4 TTT                 
                                                                                             CommandValid(true)     
                                                                                             applyindex(227)        
                                                                                             CommandIndex(228)      
                                                                                             TIMEOUT key() value()  
                                                                                             CDM[C-1](0) M(-1)      
                                                                                             from(4)                
                                                                                             S4 for TIMEOUT update  
                                                                                             applyindex 227 to 228  
                                                                                             S4 Persist the         
                                                                                             log[[{217 7 {3 52 2 Get
                                                                                             1 }} {218 7 {0 41 2 Get
                                                                                             2 }} {219 7 {4 41 2 Get
                                                                                             0 }} {220 11 {-1 -1 4  
                                                                                             TIMEOUT  }} {221 11 {0 
                                                                                             43 4 Get 2 }} {222 11  
                                                                                             {3 55 4 Append 1 x 1 29
                                                                                             y}} {223 11 {2 40 4 Get
                                                                                             4 }} {224 11 {4 44 4   
                                                                                             Get 0 }} {225 11 {1 38 
                                                                                             4 Append 3 x 3 21 y}}  
                                                                                             {226 11 {-1 -1 4       
                                                                                             TIMEOUT  }} {227 11 {-1
                                                                                             -1 4 TIMEOUT  }} {228  
                                                                                             11 {-1 -1 4 TIMEOUT    
                                                                                             }}]]                   
                                                                      S3 commit(9)                                  
                                                                      applied(9) lenlog(11)                         
                                                                      rf.X(217) in(594)                             
S0 commit(9) applied(9)                                                                                             
lenlog(11) rf.X(217)                                                                                                
in(605)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(613)                                                                           
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(599)                                                    
                                                                                             S4 commit(11)          
                                                                                             applied(11) lenlog(11) 
                                                                                             rf.X(217) in(618)      
S0 the num is (843)                                                                                                 
applidindex(226) X(217)                                                                                             
S0 the size need to                                                                                                 
snap index226                                                                                                       
S0 update nextindex[0]                                                                                              
to 3                                                                                                                
S0 update mathindex[0]                                                                                              
to 3                                                                                                                
S0 update nextindex[1]                                                                                              
to 3                                                                                                                
S0 update mathindex[1]                                                                                              
to 0                                                                                                                
S0 update nextindex[2]                                                                                              
to 3                                                                                                                
S0 update mathindex[2]                                                                                              
to 0                                                                                                                
S0 update nextindex[3]                                                                                              
to 3                                                                                                                
S0 update mathindex[3]                                                                                              
to 0                                                                                                                
S0 update nextindex[4]                                                                                              
to 3                                                                                                                
S0 update mathindex[4]                                                                                              
to 0                                                                                                                
S0 index(226)                                                                                                       
logindex(228)                                                                                                       
len(3)AAAAAAAAAAAAAAAA…                                                                                             
S0 Persist the                                                                                                      
log[[{226 11 {-1 -1 4                                                                                               
TIMEOUT  }} {227 11 {-1                                                                                             
-1 4 TIMEOUT  }} {228                                                                                               
11 {-1 -1 4 TIMEOUT                                                                                                 
}}]]                                                                                                                
                                               S2 the num is (1014)                                                 
                                               applidindex(228)                                                     
                                               X(228)                                                               
                                                                      S3 the num is (843)                           
                                                                      applidindex(226)                              
                                                                      X(217)                                        
                                                                      S3 the size need to                           
                                                                      snap index226                                 
                                                                      S3 update nextindex[0]                        
                                                                      to 3                                          
                                                                      S3 update mathindex[0]                        
                                                                      to 0                                          
                                                                      S3 update nextindex[1]                        
                                                                      to 3                                          
                                                                      S3 update mathindex[1]                        
                                                                      to 0                                          
                                                                      S3 update nextindex[2]                        
                                                                      to 3                                          
                                                                      S3 update mathindex[2]                        
                                                                      to 0                                          
                                                                      S3 update nextindex[3]                        
                                                                      to 3                                          
                                                                      S3 update mathindex[3]                        
                                                                      to 3                                          
                                                                      S3 update nextindex[4]                        
                                                                      to 3                                          
                                                                      S3 update mathindex[4]                        
                                                                      to 0                                          
                                                                      S3 index(226)                                 
                                                                      logindex(228)                                 
                                                                      len(3)AAAAAAAAAAAAAAA…                        
                                                                      S3 Persist the                                
                                                                      log[[{226 11 {-1 -1 4                         
                                                                      TIMEOUT  }} {227 11                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {228 11 {-1 -1 4                              
                                                                      TIMEOUT  }}]]                                 
                                                                      S3 snapshot to                                
                                                                      applymsg                                      
                                                                      lastindex(226)                                
S0 snapshot to applymsg                                                                                             
lastindex(226)                                                                                                      
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(606)                                                                                                             
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(595)                             
                                                                      S3 the snapshot                               
                                                                      applied                                       
                                                                      S3 recover by SnapShot                        
                                                                      update applyindex(226)                        
                                                                      to 226 the kvs is                             
                                                                      map[0:x 0 0 yx 0 1 yx                         
                                                                      0 2 yx 0 3 yx 0 4 yx 0                        
                                                                      5 yx 0 6 yx 0 7 yx 0 8                        
                                                                      yx 0 9 yx 0 10 yx 0 11                        
                                                                      yx 0 12 yx 0 13 yx 0                          
                                                                      14 yx 0 15 yx 0 16 yx                         
                                                                      0 17 yx 0 18 yx 0 19                          
                                                                      yx 0 20 yx 0 21 y 1:x                         
                                                                      1 0 yx 1 1 yx 1 2 yx 1                        
                                                                      3 yx 1 4 yx 1 5 yx 1 6                        
                                                                      yx 1 7 yx 1 8 yx 1 9                          
                                                                      yx 1 10 yx 1 11 yx 1                          
                                                                      12 yx 1 13 yx 1 14 yx                         
                                                                      1 15 yx 1 16 yx 1 17                          
                                                                      yx 1 18 yx 1 19 yx 1                          
                                                                      20 yx 1 21 yx 1 22 yx                         
                                                                      1 23 yx 1 24 yx 1 25                          
                                                                      yx 1 26 yx 1 27 yx 1                          
                                                                      29 y 2:x 2 0 yx 2 1 yx                        
                                                                      2 2 yx 2 3 yx 2 4 yx 2                        
                                                                      5 yx 2 6 yx 2 7 yx 2 8                        
                                                                      yx 2 9 yx 2 10 yx 2 11                        
                                                                      yx 2 12 yx 2 13 yx 2                          
                                                                      14 yx 2 15 yx 2 16 yx                         
                                                                      2 17 yx 2 18 yx 2 19                          
                                                                      yx 2 20 yx 2 21 yx 2                          
                                                                      22 y 3:x 3 0 yx 3 1 yx                        
                                                                      3 2 yx 3 3 yx 3 4 yx 3                        
                                                                      5 yx 3 6 yx 3 7 yx 3 8                        
                                                                      yx 3 9 yx 3 10 yx 3 11                        
                                                                      yx 3 12 yx 3 13 yx 3                          
                                                                      14 yx 3 15 yx 3 16 yx                         
                                                                      3 17 yx 3 18 yx 3 19                          
                                                                      yx 3 21 y 4:x 4 0 yx 4                        
                                                                      1 yx 4 2 yx 4 3 yx 4 4                        
                                                                      yx 4 5 yx 4 6 yx 4 7                          
                                                                      yx 4 8 yx 4 9 yx 4 10                         
                                                                      yx 4 11 y]                                    
S0 the snapshot applied                                                                                             
S0 recover by SnapShot                                                                                              
update applyindex(226)                                                                                              
to 226 the kvs is                                                                                                   
map[0:x 0 0 yx 0 1 yx 0                                                                                             
2 yx 0 3 yx 0 4 yx 0 5                                                                                              
yx 0 6 yx 0 7 yx 0 8 yx                                                                                             
0 9 yx 0 10 yx 0 11 yx                                                                                              
0 12 yx 0 13 yx 0 14 yx                                                                                             
0 15 yx 0 16 yx 0 17 yx                                                                                             
0 18 yx 0 19 yx 0 20 yx                                                                                             
0 21 y 1:x 1 0 yx 1 1                                                                                               
yx 1 2 yx 1 3 yx 1 4 yx                                                                                             
1 5 yx 1 6 yx 1 7 yx 1                                                                                              
8 yx 1 9 yx 1 10 yx 1                                                                                               
11 yx 1 12 yx 1 13 yx 1                                                                                             
14 yx 1 15 yx 1 16 yx 1                                                                                             
17 yx 1 18 yx 1 19 yx 1                                                                                             
20 yx 1 21 yx 1 22 yx 1                                                                                             
23 yx 1 24 yx 1 25 yx 1                                                                                             
26 yx 1 27 yx 1 29 y                                                                                                
2:x 2 0 yx 2 1 yx 2 2                                                                                               
yx 2 3 yx 2 4 yx 2 5 yx                                                                                             
2 6 yx 2 7 yx 2 8 yx 2                                                                                              
9 yx 2 10 yx 2 11 yx 2                                                                                              
12 yx 2 13 yx 2 14 yx 2                                                                                             
15 yx 2 16 yx 2 17 yx 2                                                                                             
18 yx 2 19 yx 2 20 yx 2                                                                                             
21 yx 2 22 y 3:x 3 0 yx                                                                                             
3 1 yx 3 2 yx 3 3 yx 3                                                                                              
4 yx 3 5 yx 3 6 yx 3 7                                                                                              
yx 3 8 yx 3 9 yx 3 10                                                                                               
yx 3 11 yx 3 12 yx 3 13                                                                                             
yx 3 14 yx 3 15 yx 3 16                                                                                             
yx 3 17 yx 3 18 yx 3 19                                                                                             
yx 3 21 y 4:x 4 0 yx 4                                                                                              
1 yx 4 2 yx 4 3 yx 4 4                                                                                              
yx 4 5 yx 4 6 yx 4 7 yx                                                                                             
4 8 yx 4 9 yx 4 10 yx 4                                                                                             
11 y]                                                                                                               
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(600)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(614)                                                                           
                                                                                             S4 commit(11)          
                                                                                             applied(11) lenlog(11) 
                                                                                             rf.X(217) in(619)      
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(607)                                                                                                             
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(596)                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(615)                                                                           
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(601)                                                    
                                                                                             S4 commit(11)          
                                                                                             applied(11) lenlog(11) 
                                                                                             rf.X(217) in(620)      
                        S1 the num is (1014)                                                                        
                        applidindex(228)                                                                            
                        X(228)                                                                                      
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(608)                                                                                                             
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(597)                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(616)                                                                           
                                                                                             S4 commit(11)          
                                                                                             applied(11) lenlog(11) 
                                                                                             rf.X(217) in(621)      
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(602)                                                    
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(598)                             
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(609)                                                                                                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(603)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(617)                                                                           
                                                                                             S4 commit(11)          
                                                                                             applied(11) lenlog(11) 
                                                                                             rf.X(217) in(622)      
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(610)                                                                                                             
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(599)                             
                                                                                             S4 the num is (843)    
                                                                                             applidindex(228) X(217)
                                                                                             S4 the size need to    
                                                                                             snap index228          
                                                                                             S4 update nextindex[0] 
                                                                                             to 1                   
                                                                                             S4 update mathindex[0] 
                                                                                             to 0                   
                                                                                             S4 update nextindex[1] 
                                                                                             to 1                   
                                                                                             S4 update mathindex[1] 
                                                                                             to 0                   
                                                                                             S4 update nextindex[2] 
                                                                                             to 1                   
                                                                                             S4 update mathindex[2] 
                                                                                             to 0                   
                                                                                             S4 update nextindex[3] 
                                                                                             to 1                   
                                                                                             S4 update mathindex[3] 
                                                                                             to 0                   
                                                                                             S4 update nextindex[4] 
                                                                                             to 1                   
                                                                                             S4 update mathindex[4] 
                                                                                             to 0                   
                                                                                             S4 index(228)          
                                                                                             logindex(228)          
                                                                                             len(1)AAAAAAAAAAAAAAAA…
                                                                                             S4 Persist the         
                                                                                             log[[{228 11 {-1 -1 4  
                                                                                             TIMEOUT  }}]]          
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(618)                                                                           
                                                                                             S4 snapshot to applymsg
                                                                                             lastindex(228)         
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(604)                                                    
                                                                                             S4 the snapshot applied
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(623)                
                                                                                             S4 recover by SnapShot 
                                                                                             update applyindex(228) 
                                                                                             to 228 the kvs is      
                                                                                             map[0:x 0 0 yx 0 1 yx 0
                                                                                             2 yx 0 3 yx 0 4 yx 0 5 
                                                                                             yx 0 6 yx 0 7 yx 0 8 yx
                                                                                             0 9 yx 0 10 yx 0 11 yx 
                                                                                             0 12 yx 0 13 yx 0 14 yx
                                                                                             0 15 yx 0 16 yx 0 17 yx
                                                                                             0 18 yx 0 19 yx 0 20 yx
                                                                                             0 21 y 1:x 1 0 yx 1 1  
                                                                                             yx 1 2 yx 1 3 yx 1 4 yx
                                                                                             1 5 yx 1 6 yx 1 7 yx 1 
                                                                                             8 yx 1 9 yx 1 10 yx 1  
                                                                                             11 yx 1 12 yx 1 13 yx 1
                                                                                             14 yx 1 15 yx 1 16 yx 1
                                                                                             17 yx 1 18 yx 1 19 yx 1
                                                                                             20 yx 1 21 yx 1 22 yx 1
                                                                                             23 yx 1 24 yx 1 25 yx 1
                                                                                             26 yx 1 27 yx 1 29 y   
                                                                                             2:x 2 0 yx 2 1 yx 2 2  
                                                                                             yx 2 3 yx 2 4 yx 2 5 yx
                                                                                             2 6 yx 2 7 yx 2 8 yx 2 
                                                                                             9 yx 2 10 yx 2 11 yx 2 
                                                                                             12 yx 2 13 yx 2 14 yx 2
                                                                                             15 yx 2 16 yx 2 17 yx 2
                                                                                             18 yx 2 19 yx 2 20 yx 2
                                                                                             21 yx 2 22 y 3:x 3 0 yx
                                                                                             3 1 yx 3 2 yx 3 3 yx 3 
                                                                                             4 yx 3 5 yx 3 6 yx 3 7 
                                                                                             yx 3 8 yx 3 9 yx 3 10  
                                                                                             yx 3 11 yx 3 12 yx 3 13
                                                                                             yx 3 14 yx 3 15 yx 3 16
                                                                                             yx 3 17 yx 3 18 yx 3 19
                                                                                             yx 3 21 y 4:x 4 0 yx 4 
                                                                                             1 yx 4 2 yx 4 3 yx 4 4 
                                                                                             yx 4 5 yx 4 6 yx 4 7 yx
                                                                                             4 8 yx 4 9 yx 4 10 yx 4
                                                                                             11 y]                  
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(600)                             
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(611)                                                                                                             
                                                                                             S4 appendentries error 
                                                                                             to exit because tindex 
                                                                                             or loglen changed      
                                                                                             S4 Persist the         
                                                                                             log[[{228 11 {-1 -1 4  
                                                                                             TIMEOUT  }}]]          
                                                                                             S4 rf.nextindex[1] = 1 
                                                                                             S4 index(0)  Pre(228)  
                                                                                             len(0)                 
                                                                                             S4 app -> 1 next(1)    
                                                                                             index(0) neT(11) cT(11)
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(624)                
                                                                                             S4 rf.nextindex[2] = 1 
                                                                                             S4 index(0)  Pre(228)  
                                                                                             len(0)                 
                                                                                             S4 app -> 2 next(1)    
                                                                                             index(0) neT(11) cT(11)
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(619)                                                                           
                                                                                             S4 rf.nextindex[3] = 1 
                                                                                             S4 index(0)  Pre(228)  
                                                                                             len(0)                 
                                                                                             S4 app -> 3 next(1)    
                                                                                             index(0) neT(11) cT(11)
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(605)                                                    
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(612)                                                                                                             
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(601)                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(620)                                                                           
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(625)                
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(606)                                                    
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(613)                                                                                                             
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(602)                             
                                               S2  heart <- 4 T(11)                                                 
                                               cT(11)                                                               
                                               S2 YYYY                                                              
                                               S2 PreT(11) LT(7)                                                    
                                               S2 j = 0                                                             
                                               S2 DDDDDDDDDDDDDDDDDDD                                               
                                               the len(log) is 16                                                   
                                               S2 the log behind the                                                
                                               leader need snapshot                                                 
                                               S2 AAA fail len(log)                                                 
                                               is 16                                                                
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                                                                                             S4 to 2 匹配失败       
                                                                                             tfi(229)               
                                                                                             S4 update              
                                                                                             nextindex[2](1) to 1 <=
                                                                                             1                      
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                        S1  heart <- 4 T(11)                                                                        
                        cT(11)                                                                                      
                        S1 YYYY                                                                                     
                        S1 PreT(11) LT(7)                                                                           
                        S1 j = 0                                                                                    
                        S1 DDDDDDDDDDDDDDDDDDD                                                                      
                        the len(log) is 16                                                                          
                        S1 the log behind the                                                                       
                        leader need snapshot                                                                        
                        S1 AAA fail len(log)                                                                        
                        is 16                                                                                       
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                                                                                             S4 to 1 匹配失败       
                                                                                             tfi(229)               
                                                                                             S4 update              
                                                                                             nextindex[1](1) to 1 <=
                                                                                             1                      
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(626)                
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(607)                                                    
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(621)                                                                           
                                                                      S3  heart <- 4 T(11)                          
                                                                      cT(11)                                        
                                                                      S3 YYYY                                       
                                                                      S3 PreT(11) LT(11)                            
                                                                      S3 update commit(228)                         
                                                                      S3 Persist the                                
                                                                      log[[{226 11 {-1 -1 4                         
                                                                      TIMEOUT  }} {227 11                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {228 11 {-1 -1 4                              
                                                                      TIMEOUT  }}]]                                 
                                                                                             S4 update              
                                                                                             nextindex[3](1) to 1   
                                                                                             success                
                                                                                             S4 index(0)            
                                                                                             matchindex([0 0 0 0 0])
                                                                                             S4 successnum(5)       
                                                                                             com-rf.X(0) rf.CT(11)  
                                                                                             t(11)                  
                                                                      S3 Persist the                                
                                                                      log[[{226 11 {-1 -1 4                         
                                                                      TIMEOUT  }} {227 11                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {228 11 {-1 -1 4                              
                                                                      TIMEOUT  }}]]                                 
                                                                      S3 commit(2)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(603)                             
                                                                      S3 lastapp lognode =                          
                                                                      {true {-1 -1 4 TIMEOUT                        
                                                                      } 227 false [] 0 0}                           
                                                                      S3 comm(2) last(227)                          
                                                                      S3 lastapp lognode =                          
                                                                      {true {-1 -1 4 TIMEOUT                        
                                                                      } 228 false [] 0 0}                           
                                                                      S3 comm(2) last(228)                          
                                                                      S3 TTT                                        
                                                                      CommandValid(true)                            
                                                                      applyindex(226)                               
                                                                      CommandIndex(227)                             
                                                                      TIMEOUT key() value()                         
                                                                      CDM[C-1](0) M(-1)                             
                                                                      from(4)                                       
                                                                      S3 for TIMEOUT update                         
                                                                      applyindex 226 to 227                         
                                                                      S3 TTT                                        
                                                                      CommandValid(true)                            
                                                                      applyindex(227)                               
                                                                      CommandIndex(228)                             
                                                                      TIMEOUT key() value()                         
                                                                      CDM[C-1](0) M(-1)                             
                                                                      from(4)                                       
                                                                      S3 for TIMEOUT update                         
                                                                      applyindex 227 to 228                         
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(614)                                                                                                             
                                                                      S3 Persist the                                
                                                                      log[[{226 11 {-1 -1 4                         
                                                                      TIMEOUT  }} {227 11                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {228 11 {-1 -1 4                              
                                                                      TIMEOUT  }}]]                                 
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(608)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(622)                                                                           
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(627)                
S0 the num is (372)                                                                                                 
applidindex(226) X(226)                                                                                             
                                               S2 the num is (1014)                                                 
                                               applidindex(228)                                                     
                                               X(228)                                                               
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(615)                                                                                                             
                                                                      S3 commit(2)                                  
                                                                      applied(2) lenlog(2)                          
                                                                      rf.X(226) in(604)                             
                                                                      S3 the num is (372)                           
                                                                      applidindex(228)                              
                                                                      X(226)                                        
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(609)                                                    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(628)                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(623)                                                                           
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(616)                                                                                                             
                                                                      S3 commit(2)                                  
                                                                      applied(2) lenlog(2)                          
                                                                      rf.X(226) in(605)                             
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(629)                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(624)                                                                           
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(610)                                                    
                        S1 the num is (1014)                                                                        
                        applidindex(228)                                                                            
                        X(228)                                                                                      
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(617)                                                                                                             
                                                                      S3 commit(2)                                  
                                                                      applied(2) lenlog(2)                          
                                                                      rf.X(226) in(606)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(611)                                                    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(630)                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(625)                                                                           
                                                                      S3 commit(2)                                  
                                                                      applied(2) lenlog(2)                          
                                                                      rf.X(226) in(607)                             
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(618)                                                                                                             
S0 ????????? update                                                                                                 
applyindex to 0                                                                                                     
S0 i = 1                                                                                                            
MMMMMMMMMMMMMMMM                                                                                                    
S0 commit(0) applied(0)                                                                                             
lenlog(0) rf.X(0) in(1)                                                                                             
S0 ??? Term = 11                                                                                                    
votefor(4) log= ([{226                                                                                              
11 {-1 -1 4 TIMEOUT  }}                                                                                             
{227 11 {-1 -1 4                                                                                                    
TIMEOUT  }} {228 11 {-1                                                                                             
-1 4 TIMEOUT  }}])                                                                                                  
S0 len(rf.log) is 3                                                                                                 
S0 恢复log                                                                                                          
lastindex(226)                                                                                                      
lastapplied(226)                                                                                                    
commitindex(226)                                                                                                    
000017 S0 this server start now max(800) sizeof(Op) is 72 the raft size is 372
                        S1 ????????? update                                                                         
                        applyindex to 0                                                                             
                        S1 ??? Term = 11                                                                            
                        votefor(-1) log=                                                                            
                        ([{228 7 {-1 -1 2                                                                           
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}])                                                                               
                        S1 len(rf.log) is 16                                                                        
                        S1 恢复log                                                                                  
                        lastindex(228)                                                                              
                        lastapplied(228)                                                                            
                        commitindex(228)                                                                            
000017 S1 this server start now max(800) sizeof(Op) is 72 the raft size is 1014
                                               S2 ????????? update                                                  
                                               applyindex to 0                                                      
                                               S2 ??? Term = 11                                                     
                                               votefor(-1) log=                                                     
                                               ([{228 7 {-1 -1 2                                                    
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}])                                                        
                                               S2 len(rf.log) is 16                                                 
                                               S2 恢复log                                                           
                                               lastindex(228)                                                       
                                               lastapplied(228)                                                     
                                               commitindex(228)                                                     
000016 S2 this server start now max(800) sizeof(Op) is 72 the raft size is 1014
S0 the num is (372)                                                                                                 
applidindex(0) X(226)                                                                                               
                        S1 i = 1                                                                                    
                        MMMMMMMMMMMMMMMM                                                                            
                                               S2 i = 1                                                             
                                               MMMMMMMMMMMMMMMM                                                     
                                               S2 the num is (1014)                                                 
                                               applidindex(0) X(228)                                                
                                               S2 snapshot to                                                       
                                               applymsg                                                             
                                               lastindex(228)                                                       
                        S1 snapshot to                                                                              
                        applymsg                                                                                    
                        lastindex(228)                                                                              
                                               S2 the snapshot                                                      
                                               applied                                                              
                        S1 the num is (1014)                                                                        
                        applidindex(0) X(228)                                                                       
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(1)                                                      
                                               S2 recover by SnapShot                                               
                                               update applyindex(0)                                                 
                                               to 228 the kvs is                                                    
                                               map[0:x 0 0 yx 0 1 yx                                                
                                               0 2 yx 0 3 yx 0 4 yx 0                                               
                                               5 yx 0 6 yx 0 7 yx 0 8                                               
                                               yx 0 9 yx 0 10 yx 0 11                                               
                                               yx 0 12 yx 0 13 yx 0                                                 
                                               14 yx 0 15 yx 0 16 yx                                                
                                               0 17 yx 0 18 yx 0 19                                                 
                                               yx 0 20 yx 0 21 yx 0                                                 
                                               22 yx 0 23 y 1:x 1 0                                                 
                                               yx 1 1 yx 1 2 yx 1 3                                                 
                                               yx 1 4 yx 1 5 yx 1 6                                                 
                                               yx 1 7 yx 1 8 yx 1 9                                                 
                                               yx 1 10 yx 1 11 yx 1                                                 
                                               12 yx 1 13 yx 1 14 yx                                                
                                               1 15 yx 1 16 yx 1 17                                                 
                                               yx 1 18 yx 1 19 yx 1                                                 
                                               20 yx 1 21 yx 1 22 yx                                                
                                               1 23 yx 1 24 yx 1 25                                                 
                                               yx 1 26 yx 1 27 yx 1                                                 
                                               28 y 2:x 2 0 yx 2 1 yx                                               
                                               2 2 yx 2 3 yx 2 4 yx 2                                               
                                               5 yx 2 6 yx 2 7 yx 2 8                                               
                                               yx 2 9 yx 2 10 yx 2 11                                               
                                               yx 2 12 yx 2 13 yx 2                                                 
                                               14 yx 2 15 yx 2 16 yx                                                
                                               2 17 yx 2 18 yx 2 19                                                 
                                               yx 2 20 yx 2 21 yx 2                                                 
                                               22 yx 2 23 y 3:x 3 0                                                 
                                               yx 3 1 yx 3 2 yx 3 3                                                 
                                               yx 3 4 yx 3 5 yx 3 6                                                 
                                               yx 3 7 yx 3 8 yx 3 9                                                 
                                               yx 3 10 yx 3 11 yx 3                                                 
                                               12 yx 3 13 yx 3 14 yx                                                
                                               3 15 yx 3 16 yx 3 17                                                 
                                               yx 3 18 yx 3 19 yx 3                                                 
                                               20 y 4:x 4 0 yx 4 1 yx                                               
                                               4 2 yx 4 3 yx 4 4 yx 4                                               
                                               5 yx 4 6 yx 4 7 yx 4 8                                               
                                               yx 4 9 yx 4 10 yx 4 11                                               
                                               yx 4 12 y]                                                           
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(1)                                                                             
                        S1 the snapshot                                                                             
                        applied                                                                                     
                        S1 recover by SnapShot                                                                      
                        update applyindex(0)                                                                        
                        to 228 the kvs is                                                                           
                        map[0:x 0 0 yx 0 1 yx                                                                       
                        0 2 yx 0 3 yx 0 4 yx 0                                                                      
                        5 yx 0 6 yx 0 7 yx 0 8                                                                      
                        yx 0 9 yx 0 10 yx 0 11                                                                      
                        yx 0 12 yx 0 13 yx 0                                                                        
                        14 yx 0 15 yx 0 16 yx                                                                       
                        0 17 yx 0 18 yx 0 19                                                                        
                        yx 0 20 yx 0 21 yx 0                                                                        
                        22 yx 0 23 y 1:x 1 0                                                                        
                        yx 1 1 yx 1 2 yx 1 3                                                                        
                        yx 1 4 yx 1 5 yx 1 6                                                                        
                        yx 1 7 yx 1 8 yx 1 9                                                                        
                        yx 1 10 yx 1 11 yx 1                                                                        
                        12 yx 1 13 yx 1 14 yx                                                                       
                        1 15 yx 1 16 yx 1 17                                                                        
                        yx 1 18 yx 1 19 yx 1                                                                        
                        20 yx 1 21 yx 1 22 yx                                                                       
                        1 23 yx 1 24 yx 1 25                                                                        
                        yx 1 26 yx 1 27 yx 1                                                                        
                        28 y 2:x 2 0 yx 2 1 yx                                                                      
                        2 2 yx 2 3 yx 2 4 yx 2                                                                      
                        5 yx 2 6 yx 2 7 yx 2 8                                                                      
                        yx 2 9 yx 2 10 yx 2 11                                                                      
                        yx 2 12 yx 2 13 yx 2                                                                        
                        14 yx 2 15 yx 2 16 yx                                                                       
                        2 17 yx 2 18 yx 2 19                                                                        
                        yx 2 20 yx 2 21 yx 2                                                                        
                        22 yx 2 23 y 3:x 3 0                                                                        
                        yx 3 1 yx 3 2 yx 3 3                                                                        
                        yx 3 4 yx 3 5 yx 3 6                                                                        
                        yx 3 7 yx 3 8 yx 3 9                                                                        
                        yx 3 10 yx 3 11 yx 3                                                                        
                        12 yx 3 13 yx 3 14 yx                                                                       
                        3 15 yx 3 16 yx 3 17                                                                        
                        yx 3 18 yx 3 19 yx 3                                                                        
                        20 y 4:x 4 0 yx 4 1 yx                                                                      
                        4 2 yx 4 3 yx 4 4 yx 4                                                                      
                        5 yx 4 6 yx 4 7 yx 4 8                                                                      
                        yx 4 9 yx 4 10 yx 4 11                                                                      
                        yx 4 12 y]                                                                                  
                                                                      S3 ????????? update                           
                                                                      applyindex to 0                               
S0 snapshot to applymsg                                                                                             
lastindex(226)                                                                                                      
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(2)                                                                                                               
S0 the snapshot applied                                                                                             
                                                                      S3 i = 1                                      
                                                                      MMMMMMMMMMMMMMMM                              
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(0)                          
                                                                      rf.X(0) in(1)                                 
S0 recover by SnapShot                                                                                              
update applyindex(0) to                                                                                             
226 the kvs is map[0:x                                                                                              
0 0 yx 0 1 yx 0 2 yx 0                                                                                              
3 yx 0 4 yx 0 5 yx 0 6                                                                                              
yx 0 7 yx 0 8 yx 0 9 yx                                                                                             
0 10 yx 0 11 yx 0 12 yx                                                                                             
0 13 yx 0 14 yx 0 15 yx                                                                                             
0 16 yx 0 17 yx 0 18 yx                                                                                             
0 19 yx 0 20 yx 0 21 y                                                                                              
1:x 1 0 yx 1 1 yx 1 2                                                                                               
yx 1 3 yx 1 4 yx 1 5 yx                                                                                             
1 6 yx 1 7 yx 1 8 yx 1                                                                                              
9 yx 1 10 yx 1 11 yx 1                                                                                              
12 yx 1 13 yx 1 14 yx 1                                                                                             
15 yx 1 16 yx 1 17 yx 1                                                                                             
18 yx 1 19 yx 1 20 yx 1                                                                                             
21 yx 1 22 yx 1 23 yx 1                                                                                             
24 yx 1 25 yx 1 26 yx 1                                                                                             
27 yx 1 29 y 2:x 2 0 yx                                                                                             
2 1 yx 2 2 yx 2 3 yx 2                                                                                              
4 yx 2 5 yx 2 6 yx 2 7                                                                                              
yx 2 8 yx 2 9 yx 2 10                                                                                               
yx 2 11 yx 2 12 yx 2 13                                                                                             
yx 2 14 yx 2 15 yx 2 16                                                                                             
yx 2 17 yx 2 18 yx 2 19                                                                                             
yx 2 20 yx 2 21 yx 2 22                                                                                             
y 3:x 3 0 yx 3 1 yx 3 2                                                                                             
yx 3 3 yx 3 4 yx 3 5 yx                                                                                             
3 6 yx 3 7 yx 3 8 yx 3                                                                                              
9 yx 3 10 yx 3 11 yx 3                                                                                              
12 yx 3 13 yx 3 14 yx 3                                                                                             
15 yx 3 16 yx 3 17 yx 3                                                                                             
18 yx 3 19 yx 3 21 y                                                                                                
4:x 4 0 yx 4 1 yx 4 2                                                                                               
yx 4 3 yx 4 4 yx 4 5 yx                                                                                             
4 6 yx 4 7 yx 4 8 yx 4                                                                                              
9 yx 4 10 yx 4 11 y]                                                                                                
                                                                      S3 ??? Term = 11                              
                                                                      votefor(4) log= ([{226                        
                                                                      11 {-1 -1 4 TIMEOUT                           
                                                                      }} {227 11 {-1 -1 4                           
                                                                      TIMEOUT  }} {228 11                           
                                                                      {-1 -1 4 TIMEOUT  }}])                        
                                                                      S3 len(rf.log) is 3                           
                                                                      S3 恢复log                                    
                                                                      lastindex(226)                                
                                                                      lastapplied(226)                              
                                                                      commitindex(226)                              
000037 S3 this server start now max(800) sizeof(Op) is 72 the raft size is 372
                                                                                             S4 ????????? update    
                                                                                             applyindex to 0        
                                                                      S3 the num is (372)                           
                                                                      applidindex(0) X(226)                         
                                                                                             S4 ??? Term = 11       
                                                                                             votefor(4) log= ([{228 
                                                                                             11 {-1 -1 4 TIMEOUT    
                                                                                             }}])                   
                                                                                             S4 len(rf.log) is 1    
                                                                                             S4 恢复log             
                                                                                             lastindex(228)         
                                                                                             lastapplied(228)       
                                                                                             commitindex(228)       
000009 S4 this server start now max(800) sizeof(Op) is 72 the raft size is 286
####################################################################################################################
000013 CLNT C5 Get key(0)
####################################################################################################################
000014 CLNT C5 cmd_index(0)1
####################################################################################################################
000014 CLNT C5 cmd_index(1)2
####################################################################################################################
000014 CLNT C5 send to S0 Get key(0) Cindex(5) OIndex(1) test(1)
                                                                                             S4 i = 1               
                                                                                             MMMMMMMMMMMMMMMM       
                                                                                             S4 snapshot to applymsg
                                                                                             lastindex(228)         
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(1)                  
                                                                                             S4 the snapshot applied
                                                                                             S4 the num is (286)    
                                                                                             applidindex(0) X(228)  
                                                                                             S4 recover by SnapShot 
                                                                                             update applyindex(0) to
                                                                                             228 the kvs is map[0:x 
                                                                                             0 0 yx 0 1 yx 0 2 yx 0 
                                                                                             3 yx 0 4 yx 0 5 yx 0 6 
                                                                                             yx 0 7 yx 0 8 yx 0 9 yx
                                                                                             0 10 yx 0 11 yx 0 12 yx
                                                                                             0 13 yx 0 14 yx 0 15 yx
                                                                                             0 16 yx 0 17 yx 0 18 yx
                                                                                             0 19 yx 0 20 yx 0 21 y 
                                                                                             1:x 1 0 yx 1 1 yx 1 2  
                                                                                             yx 1 3 yx 1 4 yx 1 5 yx
                                                                                             1 6 yx 1 7 yx 1 8 yx 1 
                                                                                             9 yx 1 10 yx 1 11 yx 1 
                                                                                             12 yx 1 13 yx 1 14 yx 1
                                                                                             15 yx 1 16 yx 1 17 yx 1
                                                                                             18 yx 1 19 yx 1 20 yx 1
                                                                                             21 yx 1 22 yx 1 23 yx 1
                                                                                             24 yx 1 25 yx 1 26 yx 1
                                                                                             27 yx 1 29 y 2:x 2 0 yx
                                                                                             2 1 yx 2 2 yx 2 3 yx 2 
                                                                                             4 yx 2 5 yx 2 6 yx 2 7 
                                                                                             yx 2 8 yx 2 9 yx 2 10  
                                                                                             yx 2 11 yx 2 12 yx 2 13
                                                                                             yx 2 14 yx 2 15 yx 2 16
                                                                                             yx 2 17 yx 2 18 yx 2 19
                                                                                             yx 2 20 yx 2 21 yx 2 22
                                                                                             y 3:x 3 0 yx 3 1 yx 3 2
                                                                                             yx 3 3 yx 3 4 yx 3 5 yx
                                                                                             3 6 yx 3 7 yx 3 8 yx 3 
                                                                                             9 yx 3 10 yx 3 11 yx 3 
                                                                                             12 yx 3 13 yx 3 14 yx 3
                                                                                             15 yx 3 16 yx 3 17 yx 3
                                                                                             18 yx 3 19 yx 3 21 y   
                                                                                             4:x 4 0 yx 4 1 yx 4 2  
                                                                                             yx 4 3 yx 4 4 yx 4 5 yx
                                                                                             4 6 yx 4 7 yx 4 8 yx 4 
                                                                                             9 yx 4 10 yx 4 11 y]   
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(2)                                                                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(2)                                                      
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(3)                                                                                                               
                                                                      S3 snapshot to                                
                                                                      applymsg                                      
                                                                      lastindex(226)                                
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(2)                               
                                                                      S3 the snapshot                               
                                                                      applied                                       
                                                                      S3 recover by SnapShot                        
                                                                      update applyindex(0)                          
                                                                      to 226 the kvs is                             
                                                                      map[0:x 0 0 yx 0 1 yx                         
                                                                      0 2 yx 0 3 yx 0 4 yx 0                        
                                                                      5 yx 0 6 yx 0 7 yx 0 8                        
                                                                      yx 0 9 yx 0 10 yx 0 11                        
                                                                      yx 0 12 yx 0 13 yx 0                          
                                                                      14 yx 0 15 yx 0 16 yx                         
                                                                      0 17 yx 0 18 yx 0 19                          
                                                                      yx 0 20 yx 0 21 y 1:x                         
                                                                      1 0 yx 1 1 yx 1 2 yx 1                        
                                                                      3 yx 1 4 yx 1 5 yx 1 6                        
                                                                      yx 1 7 yx 1 8 yx 1 9                          
                                                                      yx 1 10 yx 1 11 yx 1                          
                                                                      12 yx 1 13 yx 1 14 yx                         
                                                                      1 15 yx 1 16 yx 1 17                          
                                                                      yx 1 18 yx 1 19 yx 1                          
                                                                      20 yx 1 21 yx 1 22 yx                         
                                                                      1 23 yx 1 24 yx 1 25                          
                                                                      yx 1 26 yx 1 27 yx 1                          
                                                                      29 y 2:x 2 0 yx 2 1 yx                        
                                                                      2 2 yx 2 3 yx 2 4 yx 2                        
                                                                      5 yx 2 6 yx 2 7 yx 2 8                        
                                                                      yx 2 9 yx 2 10 yx 2 11                        
                                                                      yx 2 12 yx 2 13 yx 2                          
                                                                      14 yx 2 15 yx 2 16 yx                         
                                                                      2 17 yx 2 18 yx 2 19                          
                                                                      yx 2 20 yx 2 21 yx 2                          
                                                                      22 y 3:x 3 0 yx 3 1 yx                        
                                                                      3 2 yx 3 3 yx 3 4 yx 3                        
                                                                      5 yx 3 6 yx 3 7 yx 3 8                        
                                                                      yx 3 9 yx 3 10 yx 3 11                        
                                                                      yx 3 12 yx 3 13 yx 3                          
                                                                      14 yx 3 15 yx 3 16 yx                         
                                                                      3 17 yx 3 18 yx 3 19                          
                                                                      yx 3 21 y 4:x 4 0 yx 4                        
                                                                      1 yx 4 2 yx 4 3 yx 4 4                        
                                                                      yx 4 5 yx 4 6 yx 4 7                          
                                                                      yx 4 8 yx 4 9 yx 4 10                         
                                                                      yx 4 11 y]                                    
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(2)                  
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(3)                                                                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(3)                                                      
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(3)                               
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(4)                                                                                                               
                                               S2 <-- C5 Get key(0)                                                 
                                               test1                                                                
####################################################################################################################
000215 CLNT C5 ok(true) ERR(ErrWrongLeader) from S0 in test1
####################################################################################################################
000216 CLNT C5 send to S1 Get key(0) Cindex(5) OIndex(1) test(2)
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(3)                  
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(4)                                                      
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(4)                                                                             
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(4)                               
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(5)                                                                                                               
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(4)                  
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(5)                                                      
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(5)                                                                             
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(5)                               
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(6)                                                                                                               
                                                                      S3 <-- C5 Get key(0)                          
                                                                      test2                                         
####################################################################################################################
000466 CLNT C5 ok(true) ERR(ErrWrongLeader) from S1 in test2
####################################################################################################################
000467 CLNT C5 send to S2 Get key(0) Cindex(5) OIndex(1) test(3)
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(5)                  
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(6)                                                      
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(6)                                                                             
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(7)                                                                                                               
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(6)                               
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(6)                  
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(7)                                                      
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(7)                                                                             
S0 <-- C5 Get key(0)                                                                                                
test3                                                                                                               
####################################################################################################################
000624 CLNT C5 ok(true) ERR(ErrWrongLeader) from S2 in test3
####################################################################################################################
000625 CLNT C5 send to S3 Get key(0) Cindex(5) OIndex(1) test(4)
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(8)                                                                                                               
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(7)                               
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(8)                                                      
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(7)                  
                        S1 <-- C5 Get key(0)                                                                        
                        test4                                                                                       
####################################################################################################################
000734 CLNT C5 ok(true) ERR(ErrWrongLeader) from S3 in test4
####################################################################################################################
000734 CLNT C5 send to S4 Get key(0) Cindex(5) OIndex(1) test(5)
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(9)                                                                                                               
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(8)                                                                             
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(8)                               
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(8)                  
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(9)                                                      
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(10)                                                                                                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(9)                                                                             
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(9)                               
                                                                                             S4 <-- C5 Get key(0)   
                                                                                             test5                  
####################################################################################################################
000918 CLNT C5 ok(false) ERR() from S4 in test5
####################################################################################################################
000918 CLNT C5 ERROR Get Key(0) from(S4)
####################################################################################################################
000919 CLNT C5 send to S0 Get key(0) Cindex(5) OIndex(1) test(6)
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(10)                                                     
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(9)                  
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(10)                                                                            
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(10)                              
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(11)                                                                                                              
                        S1 the num is (1014)                                                                        
                        applidindex(228)                                                                            
                        X(228)                                                                                      
S0 the num is (372)                                                                                                 
applidindex(226) X(226)                                                                                             
                                               S2 the num is (1014)                                                 
                                               applidindex(228)                                                     
                                               X(228)                                                               
                                                                      S3 the num is (372)                           
                                                                      applidindex(226)                              
                                                                      X(226)                                        
                                               S2 <-- C5 Get key(0)                                                 
                                               test6                                                                
####################################################################################################################
001040 CLNT C5 ok(true) ERR(ErrWrongLeader) from S0 in test6
####################################################################################################################
001043 CLNT C5 send to S1 Get key(0) Cindex(5) OIndex(1) test(7)
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(10)                 
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(11)                                                     
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(11)                                                                            
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(11)                              
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(12)                                                                                                              
                                                                                             S4 the num is (286)    
                                                                                             applidindex(228) X(228)
                                                                      S3 <-- C5 Get key(0)                          
                                                                      test7                                         
####################################################################################################################
001145 CLNT C5 ok(true) ERR(ErrWrongLeader) from S1 in test7
####################################################################################################################
001145 CLNT C5 send to S2 Get key(0) Cindex(5) OIndex(1) test(8)
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(12)                                                                            
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(12)                              
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(13)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(11)                 
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(12)                                                     
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(13)                                                     
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(13)                                                                            
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(13)                              
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(14)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(12)                 
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(14)                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(14)                                                                            
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(14)                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(15)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(13)                 
####################################################################################################################
001409 CLNT C5 ok(false) ERR() from S2 in test8
####################################################################################################################
001410 CLNT C5 ERROR Get Key(0) from(S2)
####################################################################################################################
001410 CLNT C5 send to S3 Get key(0) Cindex(5) OIndex(1) test(9)
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(15)                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(15)                                                     
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(15)                                                                            
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(14)                 
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(16)                                                                                                              
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(16)                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(16)                                                     
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(16)                                                                            
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(15)                 
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(17)                                                                                                              
                        S1 <-- C5 Get key(0)                                                                        
                        test9                                                                                       
####################################################################################################################
001628 CLNT C5 ok(false) ERR() from S3 in test9
####################################################################################################################
001628 CLNT C5 ERROR Get Key(0) from(S3)
####################################################################################################################
001629 CLNT C5 send to S4 Get key(0) Cindex(5) OIndex(1) test(10)
                                                                                             S4 <-- C5 Get key(0)   
                                                                                             test10                 
####################################################################################################################
001689 CLNT C5 ok(true) ERR(ErrWrongLeader) from S4 in test10
####################################################################################################################
001690 CLNT C5 send to S0 Get key(0) Cindex(5) OIndex(1) test(11)
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(18)                                                                                                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(17)                                                     
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(17)                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(17)                                                                            
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(16)                 
                                               S2 <-- C5 Get key(0)                                                 
                                               test11                                                               
####################################################################################################################
001758 CLNT C5 ok(false) ERR() from S0 in test11
####################################################################################################################
001759 CLNT C5 ERROR Get Key(0) from(S0)
####################################################################################################################
001759 CLNT C5 send to S1 Get key(0) Cindex(5) OIndex(1) test(12)
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(17)                 
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(19)                                                                                                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(18)                                                     
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(18)                                                                            
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(18)                              
                                                                      S3 <-- C5 Get key(0)                          
                                                                      test12                                        
####################################################################################################################
001945 CLNT C5 ok(true) ERR(ErrWrongLeader) from S1 in test12
####################################################################################################################
001945 CLNT C5 send to S2 Get key(0) Cindex(5) OIndex(1) test(13)
                                               S2 the num is (1014)                                                 
                                               applidindex(228)                                                     
                                               X(228)                                                               
S0 the num is (372)                                                                                                 
applidindex(226) X(226)                                                                                             
                        S1 the num is (1014)                                                                        
                        applidindex(228)                                                                            
                        X(228)                                                                                      
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(18)                 
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(20)                                                                                                              
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(19)                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(19)                                                                            
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(19)                                                     
                                                                      S3 the num is (372)                           
                                                                      applidindex(226)                              
                                                                      X(226)                                        
S0 <-- C5 Get key(0)                                                                                                
test13                                                                                                              
####################################################################################################################
002017 CLNT C5 ok(false) ERR() from S2 in test13
####################################################################################################################
002017 CLNT C5 ERROR Get Key(0) from(S2)
####################################################################################################################
002018 CLNT C5 send to S3 Get key(0) Cindex(5) OIndex(1) test(14)
                                                                                             S4 the num is (286)    
                                                                                             applidindex(228) X(228)
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(19)                 
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(20)                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(21)                                                                                                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(20)                                                                            
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(20)                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(21)                                                     
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(20)                 
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(21)                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(21)                                                                            
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(22)                                                                                                              
                        S1 <-- C5 Get key(0)                                                                        
                        test14                                                                                      
####################################################################################################################
002264 CLNT C5 ok(true) ERR(ErrWrongLeader) from S3 in test14
####################################################################################################################
002265 CLNT C5 send to S4 Get key(0) Cindex(5) OIndex(1) test(15)
                                                                                             S4 <-- C5 Get key(0)   
                                                                                             test15                 
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(23)                                                                                                              
####################################################################################################################
002321 CLNT C5 ok(true) ERR(ErrWrongLeader) from S4 in test15
####################################################################################################################
002322 CLNT C5 send to S0 Get key(0) Cindex(5) OIndex(1) test(16)
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(22)                                                                            
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(22)                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(21)                 
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(22)                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(24)                                                                                                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(23)                                                     
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(23)                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(22)                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(23)                                                                            
                                               S2 <-- C5 Get key(0)                                                 
                                               test16                                                               
####################################################################################################################
002496 CLNT C5 ok(true) ERR(ErrWrongLeader) from S0 in test16
####################################################################################################################
002497 CLNT C5 send to S1 Get key(0) Cindex(5) OIndex(1) test(17)
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(24)                                                                            
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(24)                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(25)                                                                                                              
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(24)                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(23)                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(25)                                                                            
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(25)                                                     
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(24)                 
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(26)                                                                                                              
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(25)                              
                                                                      S3 <-- C5 Get key(0)                          
                                                                      test17                                        
####################################################################################################################
002738 CLNT C5 ok(true) ERR(ErrWrongLeader) from S1 in test17
####################################################################################################################
002738 CLNT C5 send to S2 Get key(0) Cindex(5) OIndex(1) test(18)
S0 <-- C5 Get key(0)                                                                                                
test18                                                                                                              
####################################################################################################################
002770 CLNT C5 ok(true) ERR(ErrWrongLeader) from S2 in test18
####################################################################################################################
002771 CLNT C5 send to S3 Get key(0) Cindex(5) OIndex(1) test(19)
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(27)                                                                                                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(26)                                                     
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(25)                 
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(26)                              
                        S1 <-- C5 Get key(0)                                                                        
                        test19                                                                                      
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(26)                                                                            
####################################################################################################################
002840 CLNT C5 ok(true) ERR(ErrWrongLeader) from S3 in test19
####################################################################################################################
002841 CLNT C5 send to S4 Get key(0) Cindex(5) OIndex(1) test(20)
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(28)                                                                                                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(27)                                                     
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(27)                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(26)                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(27)                                                                            
                                               S2 the num is (1014)                                                 
                                               applidindex(228)                                                     
                                               X(228)                                                               
S0 the num is (372)                                                                                                 
applidindex(226) X(226)                                                                                             
                        S1 the num is (1014)                                                                        
                        applidindex(228)                                                                            
                        X(228)                                                                                      
                                                                                             S4 <-- C5 Get key(0)   
                                                                                             test20                 
####################################################################################################################
003000 CLNT C5 ok(false) ERR() from S4 in test20
####################################################################################################################
003000 CLNT C5 ERROR Get Key(0) from(S4)
####################################################################################################################
003000 CLNT C5 send to S0 Get key(0) Cindex(5) OIndex(1) test(21)
                                                                      S3 the num is (372)                           
                                                                      applidindex(226)                              
                                                                      X(226)                                        
                                               S2 <-- C5 Get key(0)                                                 
                                               test21                                                               
####################################################################################################################
003029 CLNT C5 ok(true) ERR(ErrWrongLeader) from S0 in test21
####################################################################################################################
003029 CLNT C5 send to S1 Get key(0) Cindex(5) OIndex(1) test(22)
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(28)                                                     
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(28)                              
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(29)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(27)                 
                                                                      S3 <-- C5 Get key(0)                          
                                                                      test22                                        
####################################################################################################################
003048 CLNT C5 ok(false) ERR() from S1 in test22
####################################################################################################################
003049 CLNT C5 ERROR Get Key(0) from(S1)
####################################################################################################################
003049 CLNT C5 send to S2 Get key(0) Cindex(5) OIndex(1) test(23)
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(28)                                                                            
S0 <-- C5 Get key(0)                                                                                                
test23                                                                                                              
####################################################################################################################
003061 CLNT C5 ok(true) ERR(ErrWrongLeader) from S2 in test23
####################################################################################################################
003061 CLNT C5 send to S3 Get key(0) Cindex(5) OIndex(1) test(24)
                                                                                             S4 the num is (286)    
                                                                                             applidindex(228) X(228)
                        S1 <-- C5 Get key(0)                                                                        
                        test24                                                                                      
####################################################################################################################
003115 CLNT C5 ok(true) ERR(ErrWrongLeader) from S3 in test24
####################################################################################################################
003115 CLNT C5 send to S4 Get key(0) Cindex(5) OIndex(1) test(25)
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(29)                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(30)                                                                                                              
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(29)                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(28)                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(29)                                                                            
                                                                                             S4 <-- C5 Get key(0)   
                                                                                             test25                 
####################################################################################################################
003179 CLNT C5 ok(true) ERR(ErrWrongLeader) from S4 in test25
####################################################################################################################
003180 CLNT C5 send to S0 Get key(0) Cindex(5) OIndex(1) test(26)
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(29)                 
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(31)                                                                                                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(30)                                                     
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(30)                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(30)                                                                            
                                               S2 <-- C5 Get key(0)                                                 
                                               test26                                                               
####################################################################################################################
003333 CLNT C5 ok(false) ERR() from S0 in test26
####################################################################################################################
003334 CLNT C5 ERROR Get Key(0) from(S0)
####################################################################################################################
003334 CLNT C5 send to S1 Get key(0) Cindex(5) OIndex(1) test(27)
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(30)                 
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(32)                                                                                                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(31)                                                     
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(31)                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(31)                                                                            
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(32)                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(31)                 
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(33)                                                                                                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(32)                                                     
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(32)                                                                            
                                                                      S3 <-- C5 Get key(0)                          
                                                                      test27                                        
####################################################################################################################
003532 CLNT C5 ok(true) ERR(ErrWrongLeader) from S1 in test27
####################################################################################################################
003533 CLNT C5 send to S2 Get key(0) Cindex(5) OIndex(1) test(28)
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(33)                                                     
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(33)                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(32)                 
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(34)                                                                                                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(33)                                                                            
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(34)                                                     
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(34)                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(33)                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(34)                                                                            
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(35)                                                                                                              
S0 <-- C5 Get key(0)                                                                                                
test28                                                                                                              
####################################################################################################################
003697 CLNT C5 ok(true) ERR(ErrWrongLeader) from S2 in test28
####################################################################################################################
003697 CLNT C5 send to S3 Get key(0) Cindex(5) OIndex(1) test(29)
                        S1 <-- C5 Get key(0)                                                                        
                        test29                                                                                      
####################################################################################################################
003709 CLNT C5 ok(false) ERR() from S3 in test29
####################################################################################################################
003710 CLNT C5 ERROR Get Key(0) from(S3)
####################################################################################################################
003711 CLNT C5 send to S4 Get key(0) Cindex(5) OIndex(1) test(30)
                                                                                             S4 <-- C5 Get key(0)   
                                                                                             test30                 
####################################################################################################################
003779 CLNT C5 ok(true) ERR(ErrWrongLeader) from S4 in test30
####################################################################################################################
003779 CLNT C5 send to S0 Get key(0) Cindex(5) OIndex(1) test(31)
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(35)                                                     
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(34)                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(35)                                                                            
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(36)                                                                                                              
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(35)                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(36)                                                     
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(36)                              
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(37)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(35)                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(36)                                                                            
                                               S2 <-- C5 Get key(0)                                                 
                                               test31                                                               
####################################################################################################################
003920 CLNT C5 ok(true) ERR(ErrWrongLeader) from S0 in test31
####################################################################################################################
003921 CLNT C5 send to S1 Get key(0) Cindex(5) OIndex(1) test(32)
                                               S2 the num is (1014)                                                 
                                               applidindex(228)                                                     
                                               X(228)                                                               
                        S1 the num is (1014)                                                                        
                        applidindex(228)                                                                            
                        X(228)                                                                                      
S0 the num is (372)                                                                                                 
applidindex(226) X(226)                                                                                             
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(38)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(36)                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(37)                                                                            
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(37)                                                     
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(37)                              
                                                                      S3 the num is (372)                           
                                                                      applidindex(226)                              
                                                                      X(226)                                        
                                                                                             S4 the num is (286)    
                                                                                             applidindex(228) X(228)
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(38)                                                     
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(38)                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(38)                                                                            
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(39)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(37)                 
                                                                      S3 <-- C5 Get key(0)                          
                                                                      test32                                        
####################################################################################################################
004142 CLNT C5 ok(true) ERR(ErrWrongLeader) from S1 in test32
####################################################################################################################
004142 CLNT C5 send to S2 Get key(0) Cindex(5) OIndex(1) test(33)
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(39)                                                     
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(39)                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(38)                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(39)                                                                            
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(40)                                                                                                              
S0 <-- C5 Get key(0)                                                                                                
test33                                                                                                              
####################################################################################################################
004281 CLNT C5 ok(true) ERR(ErrWrongLeader) from S2 in test33
####################################################################################################################
004281 CLNT C5 send to S3 Get key(0) Cindex(5) OIndex(1) test(34)
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(40)                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(40)                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(41)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(39)                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(40)                                                                            
                        S1 <-- C5 Get key(0)                                                                        
                        test34                                                                                      
####################################################################################################################
004374 CLNT C5 ok(true) ERR(ErrWrongLeader) from S3 in test34
####################################################################################################################
004375 CLNT C5 send to S4 Get key(0) Cindex(5) OIndex(1) test(35)
                                                                                             S4 <-- C5 Get key(0)   
                                                                                             test35                 
####################################################################################################################
004413 CLNT C5 ok(true) ERR(ErrWrongLeader) from S4 in test35
####################################################################################################################
004413 CLNT C5 send to S0 Get key(0) Cindex(5) OIndex(1) test(36)
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(41)                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(41)                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(42)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(40)                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(41)                                                                            
                                               S2 <-- C5 Get key(0)                                                 
                                               test36                                                               
####################################################################################################################
004479 CLNT C5 ok(true) ERR(ErrWrongLeader) from S0 in test36
####################################################################################################################
004480 CLNT C5 send to S1 Get key(0) Cindex(5) OIndex(1) test(37)
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(42)                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(42)                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(43)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(41)                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(42)                                                                            
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(43)                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(43)                                                     
                                                                      S3 <-- C5 Get key(0)                          
                                                                      test37                                        
####################################################################################################################
004657 CLNT C5 ok(true) ERR(ErrWrongLeader) from S1 in test37
####################################################################################################################
004658 CLNT C5 send to S2 Get key(0) Cindex(5) OIndex(1) test(38)
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(44)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(42)                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(43)                                                                            
S0 <-- C5 Get key(0)                                                                                                
test38                                                                                                              
####################################################################################################################
004704 CLNT C5 ok(true) ERR(ErrWrongLeader) from S2 in test38
####################################################################################################################
004704 CLNT C5 send to S3 Get key(0) Cindex(5) OIndex(1) test(39)
                        S1  vote vf(1) to own                                                                       
                        S1  vote -> 4 cT(12)                                                                        
                        S1  vote -> 0 cT(12)                                                                        
                        S1  vote -> 2 cT(12)                                                                        
                        S1  vote -> 3 cT(12)                                                                        
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(44)                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(44)                                                     
S0 the len(log) is 3                                                                                                
S0  vote <- 1 not                                                                                                   
logT(7) < rf.logT(11)                                                                                               
vf(-1)                                                                                                              
S0 Persist the                                                                                                      
log[[{226 11 {-1 -1 4                                                                                               
TIMEOUT  }} {227 11 {-1                                                                                             
-1 4 TIMEOUT  }} {228                                                                                               
11 {-1 -1 4 TIMEOUT                                                                                                 
}}]]                                                                                                                
S0 Persist the                                                                                                      
log[[{226 11 {-1 -1 4                                                                                               
TIMEOUT  }} {227 11 {-1                                                                                             
-1 4 TIMEOUT  }} {228                                                                                               
11 {-1 -1 4 TIMEOUT                                                                                                 
}}]]                                                                                                                
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(43)                 
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(45)                                                                                                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(44)                                                                            
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(45)                                                     
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(45)                              
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(46)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(44)                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(45)                                                                            
                                                                                             S4  vote vf(4) to own  
                                                                                             S4 Persist the         
                                                                                             log[[{228 11 {-1 -1 4  
                                                                                             TIMEOUT  }}]]          
                                                                                             S4  vote -> 0 cT(12)   
                                                                                             S4  vote <- 1 not T(12)
                                                                                             = cT(12) vf(4)         
                                                                                             S4  vote -> 1 cT(12)   
                                                                                             S4 Persist the         
                                                                                             log[[{228 11 {-1 -1 4  
                                                                                             TIMEOUT  }}]]          
                                                                                             S4  vote -> 3 cT(12)   
                                                                                             S4  vote -> 2 cT(12)   
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                                               S2 the len(log) is 16                                                
                                               S2  vote <- 1 T(7) =                                                 
                                               LastlogT(7) logi(15)                                                 
                                               lastlogindex(243)                                                    
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                        S1 <-- C5 Get key(0)                                                                        
                        test39                                                                                      
                                                                      S3 the len(log) is 3                          
                                                                      S3  vote <- 1 not                             
                                                                      logT(7) < rf.logT(11)                         
                                                                      vf(-1)                                        
S0 the num is (372)                                                                                                 
applidindex(226) X(226)                                                                                             
                                               S2 the num is (1014)                                                 
                                               applidindex(228)                                                     
                                               X(228)                                                               
                                                                      S3 Persist the                                
                                                                      log[[{226 11 {-1 -1 4                         
                                                                      TIMEOUT  }} {227 11                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {228 11 {-1 -1 4                              
                                                                      TIMEOUT  }}]]                                 
                                                                      S3 Persist the                                
                                                                      log[[{226 11 {-1 -1 4                         
                                                                      TIMEOUT  }} {227 11                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {228 11 {-1 -1 4                              
                                                                      TIMEOUT  }}]]                                 
                        S1 vote -> 3 fail                                                                           
                                                                      S3 the num is (372)                           
                                                                      applidindex(226)                              
                                                                      X(226)                                        
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(46)                                                     
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(46)                              
S0 the len(log) is 3                                                                                                
S0  vote <- 4 T(11) =                                                                                               
LastlogT(11) logi(2)                                                                                                
lastlogindex(228)                                                                                                   
S0 Persist the                                                                                                      
log[[{226 11 {-1 -1 4                                                                                               
TIMEOUT  }} {227 11 {-1                                                                                             
-1 4 TIMEOUT  }} {228                                                                                               
11 {-1 -1 4 TIMEOUT                                                                                                 
}}]]                                                                                                                
                                                                                             S4 vote -> 0 fail      
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(47)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(45)                 
                                                                      S3 the len(log) is 3                          
                                                                      S3  vote <- 4 T(11) =                         
                                                                      LastlogT(11) logi(2)                          
                                                                      lastlogindex(228)                             
                                                                      S3 Persist the                                
                                                                      log[[{226 11 {-1 -1 4                         
                                                                      TIMEOUT  }} {227 11                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {228 11 {-1 -1 4                              
                                                                      TIMEOUT  }}]]                                 
                                                                                             S4 Persist the         
                                                                                             log[[{228 11 {-1 -1 4  
                                                                                             TIMEOUT  }}]]          
                                                                                             S4 the num is (286)    
                                                                                             applidindex(228) X(228)
                        S1  vote <- 4 not                                                                           
                        T(12) = cT(12) vf(1)                                                                        
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                                                                                             S4 Persist the         
                                                                                             log[[{228 11 {-1 -1 4  
                                                                                             TIMEOUT  }}]]          
####################################################################################################################
005106 CLNT C5 ok(true) ERR(ErrWrongLeader) from S3 in test39
####################################################################################################################
005107 CLNT C5 send to S4 Get key(0) Cindex(5) OIndex(1) test(40)
                        S1 the num is (1014)                                                                        
                        applidindex(228)                                                                            
                        X(228)                                                                                      
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(46)                                                                            
                                               S2  vote <- 4 not                                                    
                                               T(12) = cT(12) vf(1)                                                 
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                                                                                             S4 Persist the         
                                                                                             log[[{228 11 {-1 -1 4  
                                                                                             TIMEOUT  }}]]          
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(47)                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(47)                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(48)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(46)                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(47)                                                                            
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(48)                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(48)                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(49)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(47)                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(48)                                                                            
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(49)                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(49)                                                     
                                                                                             S4 <-- C5 Get key(0)   
                                                                                             test40                 
####################################################################################################################
005359 CLNT C5 ok(true) ERR(ErrWrongLeader) from S4 in test40
####################################################################################################################
005359 CLNT C5 send to S0 Get key(0) Cindex(5) OIndex(1) test(41)
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(50)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(48)                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(49)                                                                            
                                               S2 <-- C5 Get key(0)                                                 
                                               test41                                                               
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(50)                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(51)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(49)                 
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(50)                              
####################################################################################################################
005471 CLNT C5 ok(true) ERR(ErrWrongLeader) from S0 in test41
####################################################################################################################
005471 CLNT C5 send to S1 Get key(0) Cindex(5) OIndex(1) test(42)
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(50)                                                                            
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(51)                              
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(52)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(50)                 
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(51)                                                     
                                                                      S3 <-- C5 Get key(0)                          
                                                                      test42                                        
####################################################################################################################
005604 CLNT C5 ok(true) ERR(ErrWrongLeader) from S1 in test42
####################################################################################################################
005605 CLNT C5 send to S2 Get key(0) Cindex(5) OIndex(1) test(43)
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(51)                                                                            
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(52)                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(52)                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(53)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(51)                 
S0 <-- C5 Get key(0)                                                                                                
test43                                                                                                              
####################################################################################################################
005713 CLNT C5 ok(true) ERR(ErrWrongLeader) from S2 in test43
####################################################################################################################
005714 CLNT C5 send to S3 Get key(0) Cindex(5) OIndex(1) test(44)
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(52)                                                                            
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(53)                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(53)                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(54)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(52)                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(53)                                                                            
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(55)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(53)                 
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(54)                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(54)                                                     
                        S1 <-- C5 Get key(0)                                                                        
                        test44                                                                                      
####################################################################################################################
005901 CLNT C5 ok(false) ERR() from S3 in test44
####################################################################################################################
005901 CLNT C5 ERROR Get Key(0) from(S3)
####################################################################################################################
005901 CLNT C5 send to S4 Get key(0) Cindex(5) OIndex(1) test(45)
                                                                                             S4 <-- C5 Get key(0)   
                                                                                             test45                 
####################################################################################################################
005945 CLNT C5 ok(true) ERR(ErrWrongLeader) from S4 in test45
####################################################################################################################
005945 CLNT C5 send to S0 Get key(0) Cindex(5) OIndex(1) test(46)
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(54)                                                                            
                                               S2 <-- C5 Get key(0)                                                 
                                               test46                                                               
####################################################################################################################
005998 CLNT C5 ok(false) ERR() from S0 in test46
####################################################################################################################
005999 CLNT C5 ERROR Get Key(0) from(S0)
####################################################################################################################
005999 CLNT C5 send to S1 Get key(0) Cindex(5) OIndex(1) test(47)
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(55)                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(56)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(54)                 
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(55)                              
S0 the num is (372)                                                                                                 
applidindex(226) X(226)                                                                                             
                                               S2 the num is (1014)                                                 
                                               applidindex(228)                                                     
                                               X(228)                                                               
                                                                      S3 the num is (372)                           
                                                                      applidindex(226)                              
                                                                      X(226)                                        
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(55)                                                                            
                                                                                             S4 the num is (286)    
                                                                                             applidindex(228) X(228)
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(56)                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(57)                                                                                                              
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(56)                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(55)                 
                                                                      S3 <-- C5 Get key(0)                          
                                                                      test47                                        
####################################################################################################################
006119 CLNT C5 ok(true) ERR(ErrWrongLeader) from S1 in test47
####################################################################################################################
006120 CLNT C5 send to S2 Get key(0) Cindex(5) OIndex(1) test(48)
                        S1 the num is (1014)                                                                        
                        applidindex(228)                                                                            
                        X(228)                                                                                      
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(56)                                                                            
S0 <-- C5 Get key(0)                                                                                                
test48                                                                                                              
####################################################################################################################
006192 CLNT C5 ok(true) ERR(ErrWrongLeader) from S2 in test48
####################################################################################################################
006192 CLNT C5 send to S3 Get key(0) Cindex(5) OIndex(1) test(49)
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(58)                                                                                                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(57)                                                     
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(57)                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(56)                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(57)                                                                            
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(57)                 
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(58)                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(59)                                                                                                              
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(58)                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(58)                                                                            
                        S1 <-- C5 Get key(0)                                                                        
                        test49                                                                                      
####################################################################################################################
006376 CLNT C5 ok(true) ERR(ErrWrongLeader) from S3 in test49
####################################################################################################################
006377 CLNT C5 send to S4 Get key(0) Cindex(5) OIndex(1) test(50)
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(58)                 
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(60)                                                                                                              
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(59)                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(59)                                                                            
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(59)                                                     
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(59)                 
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(61)                                                                                                              
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(60)                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(60)                                                                            
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(60)                                                     
                                                                                             S4 <-- C5 Get key(0)   
                                                                                             test50                 
####################################################################################################################
006657 CLNT C5 ok(true) ERR(ErrWrongLeader) from S4 in test50
####################################################################################################################
006658 CLNT C5 send to S0 Get key(0) Cindex(5) OIndex(1) test(51)
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(61)                                                     
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(61)                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(61)                                                                            
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(60)                 
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(62)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(61)                 
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(63)                                                                                                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(62)                                                                            
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(62)                                                     
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(62)                              
                                               S2 <-- C5 Get key(0)                                                 
                                               test51                                                               
####################################################################################################################
006944 CLNT C5 ok(true) ERR(ErrWrongLeader) from S0 in test51
####################################################################################################################
006944 CLNT C5 send to S1 Get key(0) Cindex(5) OIndex(1) test(52)
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(64)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(62)                 
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(63)                                                     
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(63)                                                                            
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(63)                              
                                                                                             S4 the num is (286)    
                                                                                             applidindex(228) X(228)
S0 the num is (372)                                                                                                 
applidindex(226) X(226)                                                                                             
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(64)                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(64)                                                                            
                                               S2 the num is (1014)                                                 
                                               applidindex(228)                                                     
                                               X(228)                                                               
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(63)                 
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(64)                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(65)                                                                                                              
                                                                      S3 the num is (372)                           
                                                                      applidindex(226)                              
                                                                      X(226)                                        
                                                                      S3 <-- C5 Get key(0)                          
                                                                      test52                                        
####################################################################################################################
007115 CLNT C5 ok(true) ERR(ErrWrongLeader) from S1 in test52
####################################################################################################################
007115 CLNT C5 send to S2 Get key(0) Cindex(5) OIndex(1) test(53)
                        S1 the num is (1014)                                                                        
                        applidindex(228)                                                                            
                        X(228)                                                                                      
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(65)                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(65)                                                                            
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(64)                 
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(65)                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(66)                                                                                                              
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(66)                              
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(67)                                                                                                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(66)                                                     
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(66)                                                                            
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(65)                 
S0 <-- C5 Get key(0)                                                                                                
test53                                                                                                              
####################################################################################################################
007328 CLNT C5 ok(true) ERR(ErrWrongLeader) from S2 in test53
####################################################################################################################
007329 CLNT C5 send to S3 Get key(0) Cindex(5) OIndex(1) test(54)
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(68)                                                                                                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(67)                                                                            
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(67)                                                     
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(66)                 
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(67)                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(67)                 
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(69)                                                                                                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(68)                                                     
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(68)                                                                            
                        S1 <-- C5 Get key(0)                                                                        
                        test54                                                                                      
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(68)                              
####################################################################################################################
007541 CLNT C5 ok(true) ERR(ErrWrongLeader) from S3 in test54
####################################################################################################################
007541 CLNT C5 send to S4 Get key(0) Cindex(5) OIndex(1) test(55)
                                                                                             S4 <-- C5 Get key(0)   
                                                                                             test55                 
####################################################################################################################
007628 CLNT C5 ok(true) ERR(ErrWrongLeader) from S4 in test55
####################################################################################################################
007628 CLNT C5 send to S0 Get key(0) Cindex(5) OIndex(1) test(56)
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(68)                 
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(70)                                                                                                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(69)                                                                            
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(69)                                                     
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(69)                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(69)                 
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(71)                                                                                                              
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(70)                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(70)                                                                            
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(70)                                                     
                                               S2 <-- C5 Get key(0)                                                 
                                               test56                                                               
####################################################################################################################
007815 CLNT C5 ok(true) ERR(ErrWrongLeader) from S0 in test56
####################################################################################################################
007816 CLNT C5 send to S1 Get key(0) Cindex(5) OIndex(1) test(57)
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(70)                 
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(72)                                                                                                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(71)                                                     
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(71)                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(71)                                                                            
                                                                      S3 <-- C5 Get key(0)                          
                                                                      test57                                        
####################################################################################################################
007885 CLNT C5 ok(true) ERR(ErrWrongLeader) from S1 in test57
####################################################################################################################
007885 CLNT C5 send to S2 Get key(0) Cindex(5) OIndex(1) test(58)
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(73)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(71)                 
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(72)                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(72)                                                     
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(72)                                                                            
S0 <-- C5 Get key(0)                                                                                                
test58                                                                                                              
####################################################################################################################
008010 CLNT C5 ok(true) ERR(ErrWrongLeader) from S2 in test58
####################################################################################################################
008010 CLNT C5 send to S3 Get key(0) Cindex(5) OIndex(1) test(59)
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(74)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(72)                 
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(73)                                                     
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(73)                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(73)                                                                            
                                                                      S3 the num is (372)                           
                                                                      applidindex(226)                              
                                                                      X(226)                                        
S0 the num is (372)                                                                                                 
applidindex(226) X(226)                                                                                             
                                                                                             S4 the num is (286)    
                                                                                             applidindex(228) X(228)
                                               S2 the num is (1014)                                                 
                                               applidindex(228)                                                     
                                               X(228)                                                               
                        S1 <-- C5 Get key(0)                                                                        
                        test59                                                                                      
                        S1 the num is (1014)                                                                        
                        applidindex(228)                                                                            
                        X(228)                                                                                      
####################################################################################################################
008141 CLNT C5 ok(true) ERR(ErrWrongLeader) from S3 in test59
####################################################################################################################
008142 CLNT C5 send to S4 Get key(0) Cindex(5) OIndex(1) test(60)
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(73)                 
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(75)                                                                                                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(74)                                                     
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(74)                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(74)                                                                            
                                                                                             S4 <-- C5 Get key(0)   
                                                                                             test60                 
####################################################################################################################
008251 CLNT C5 ok(true) ERR(ErrWrongLeader) from S4 in test60
####################################################################################################################
008251 CLNT C5 send to S0 Get key(0) Cindex(5) OIndex(1) test(61)
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(76)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(74)                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(75)                                                                            
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(75)                                                     
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(75)                              
                                               S2 <-- C5 Get key(0)                                                 
                                               test61                                                               
####################################################################################################################
008343 CLNT C5 ok(true) ERR(ErrWrongLeader) from S0 in test61
####################################################################################################################
008343 CLNT C5 send to S1 Get key(0) Cindex(5) OIndex(1) test(62)
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(77)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(75)                 
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(76)                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(76)                                                                            
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(76)                                                     
                                                                      S3 <-- C5 Get key(0)                          
                                                                      test62                                        
####################################################################################################################
008430 CLNT C5 ok(true) ERR(ErrWrongLeader) from S1 in test62
####################################################################################################################
008430 CLNT C5 send to S2 Get key(0) Cindex(5) OIndex(1) test(63)
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(76)                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(77)                                                                            
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(78)                                                                                                              
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(77)                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(77)                                                     
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(77)                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(78)                                                                            
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(78)                                                     
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(78)                              
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(79)                                                                                                              
S0 <-- C5 Get key(0)                                                                                                
test63                                                                                                              
####################################################################################################################
008629 CLNT C5 ok(true) ERR(ErrWrongLeader) from S2 in test63
####################################################################################################################
008630 CLNT C5 send to S3 Get key(0) Cindex(5) OIndex(1) test(64)
                        S1 <-- C5 Get key(0)                                                                        
                        test64                                                                                      
####################################################################################################################
008662 CLNT C5 ok(true) ERR(ErrWrongLeader) from S3 in test64
####################################################################################################################
008662 CLNT C5 send to S4 Get key(0) Cindex(5) OIndex(1) test(65)
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(79)                                                                            
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(79)                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(79)                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(80)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(78)                 
####################################################################################################################
008730 CLNT C5 ok(false) ERR() from S4 in test65
####################################################################################################################
008731 CLNT C5 ERROR Get Key(0) from(S4)
####################################################################################################################
008731 CLNT C5 send to S0 Get key(0) Cindex(5) OIndex(1) test(66)
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(79)                 
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(80)                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(80)                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(81)                                                                                                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(80)                                                                            
####################################################################################################################
008921 CLNT C5 ok(false) ERR() from S0 in test66
####################################################################################################################
008921 CLNT C5 ERROR Get Key(0) from(S0)
####################################################################################################################
008922 CLNT C5 send to S1 Get key(0) Cindex(5) OIndex(1) test(67)
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(80)                 
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(81)                                                     
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(81)                              
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(82)                                                                                                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(81)                                                                            
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(81)                 
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(82)                                                     
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(82)                              
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(83)                                                                                                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(82)                                                                            
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                        S1  vote vf(1) to own                                                                       
                        S1  vote -> 2 cT(13)                                                                        
                        S1  vote -> 0 cT(13)                                                                        
                        S1  vote -> 3 cT(13)                                                                        
                        S1  vote -> 4 cT(13)                                                                        
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(83)                                                                            
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(84)                                                                                                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(82)                 
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(83)                                                     
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(83)                              
                                                                                             S4 the num is (286)    
                                                                                             applidindex(228) X(228)
                                                                      S3 the num is (372)                           
                                                                      applidindex(226)                              
                                                                      X(226)                                        
S0 the num is (372)                                                                                                 
applidindex(226) X(226)                                                                                             
                                               S2 the num is (1014)                                                 
                                               applidindex(228)                                                     
                                               X(228)                                                               
####################################################################################################################
009155 CLNT C5 ok(false) ERR() from S1 in test67
####################################################################################################################
009156 CLNT C5 ERROR Get Key(0) from(S1)
####################################################################################################################
009156 CLNT C5 send to S2 Get key(0) Cindex(5) OIndex(1) test(68)
                        S1 the num is (1014)                                                                        
                        applidindex(228)                                                                            
                        X(228)                                                                                      
                                               S2 the len(log) is 16                                                
                                               S2  vote <- 1 T(7) =                                                 
                                               LastlogT(7) logi(15)                                                 
                                               lastlogindex(243)                                                    
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(85)                                                                                                              
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(84)                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(83)                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(84)                                                                            
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(84)                                                     
                                                                                             S4 the len(log) is 1   
                                                                                             S4  vote <- 1 not      
                                                                                             logT(7) < rf.logT(11)  
                                                                                             vf(-1)                 
                                                                                             S4 Persist the         
                                                                                             log[[{228 11 {-1 -1 4  
                                                                                             TIMEOUT  }}]]          
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                                                                                             S4 Persist the         
                                                                                             log[[{228 11 {-1 -1 4  
                                                                                             TIMEOUT  }}]]          
                                                                      S3 the len(log) is 3                          
                                                                      S3  vote <- 1 not                             
                                                                      logT(7) < rf.logT(11)                         
                                                                      vf(-1)                                        
                                                                      S3 Persist the                                
                                                                      log[[{226 11 {-1 -1 4                         
                                                                      TIMEOUT  }} {227 11                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {228 11 {-1 -1 4                              
                                                                      TIMEOUT  }}]]                                 
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
S0 <-- C5 Get key(0)                                                                                                
test68                                                                                                              
####################################################################################################################
009349 CLNT C5 ok(true) ERR(ErrWrongLeader) from S2 in test68
####################################################################################################################
009349 CLNT C5 send to S3 Get key(0) Cindex(5) OIndex(1) test(69)
                                                                      S3 Persist the                                
                                                                      log[[{226 11 {-1 -1 4                         
                                                                      TIMEOUT  }} {227 11                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {228 11 {-1 -1 4                              
                                                                      TIMEOUT  }}]]                                 
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(86)                                                                                                              
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(85)                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(84)                 
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(85)                                                     
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(85)                                                                            
S0 the len(log) is 3                                                                                                
S0  vote <- 1 not                                                                                                   
logT(7) < rf.logT(11)                                                                                               
vf(-1)                                                                                                              
S0 Persist the                                                                                                      
log[[{226 11 {-1 -1 4                                                                                               
TIMEOUT  }} {227 11 {-1                                                                                             
-1 4 TIMEOUT  }} {228                                                                                               
11 {-1 -1 4 TIMEOUT                                                                                                 
}}]]                                                                                                                
S0 Persist the                                                                                                      
log[[{226 11 {-1 -1 4                                                                                               
TIMEOUT  }} {227 11 {-1                                                                                             
-1 4 TIMEOUT  }} {228                                                                                               
11 {-1 -1 4 TIMEOUT                                                                                                 
}}]]                                                                                                                
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(87)                                                                                                              
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(86)                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(86)                                                     
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(85)                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(86)                                                                            
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(87)                                                     
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(86)                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(87)                                                                            
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(87)                              
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(88)                                                                                                              
                        S1 <-- C5 Get key(0)                                                                        
                        test69                                                                                      
####################################################################################################################
009591 CLNT C5 ok(true) ERR(ErrWrongLeader) from S3 in test69
####################################################################################################################
009592 CLNT C5 send to S4 Get key(0) Cindex(5) OIndex(1) test(70)
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(87)                 
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(88)                                                     
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(88)                              
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(89)                                                                                                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(88)                                                                            
                                                                                             S4 <-- C5 Get key(0)   
                                                                                             test70                 
####################################################################################################################
009773 CLNT C5 ok(true) ERR(ErrWrongLeader) from S4 in test70
####################################################################################################################
009774 CLNT C5 send to S0 Get key(0) Cindex(5) OIndex(1) test(71)
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(88)                 
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(89)                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(89)                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(90)                                                                                                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(89)                                                                            
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(90)                              
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(89)                 
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(90)                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(91)                                                                                                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(90)                                                                            
                                                                                             S4 Persist the         
                                                                                             log[[{228 11 {-1 -1 4  
                                                                                             TIMEOUT  }}]]          
                                                                                             S4  vote vf(4) to own  
                                                                                             S4  vote -> 2 cT(14)   
                                                                                             S4  vote -> 1 cT(14)   
                                                                                             S4  vote -> 0 cT(14)   
                                                                                             S4  vote -> 3 cT(14)   
                                               S2 the len(log) is 16                                                
                                               S2  vote <- 4 T(7) =                                                 
                                               LastlogT(11) logi(15)                                                
                                               lastlogindex(228)                                                    
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(90)                 
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(91)                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(91)                                                     
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(92)                                                                                                              
                                                                                             S4 Persist the         
                                                                                             log[[{228 11 {-1 -1 4  
                                                                                             TIMEOUT  }}]]          
S0 the len(log) is 3                                                                                                
S0  vote <- 4 T(11) =                                                                                               
LastlogT(11) logi(2)                                                                                                
lastlogindex(228)                                                                                                   
                        S1 the len(log) is 16                                                                       
                        S1  vote <- 4 T(7) =                                                                        
                        LastlogT(11) logi(15)                                                                       
                        lastlogindex(228)                                                                           
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(91)                                                                            
                                               S2 <-- C5 Get key(0)                                                 
                                               test71                                                               
####################################################################################################################
010020 CLNT C5 ok(false) ERR() from S0 in test71
####################################################################################################################
010021 CLNT C5 ERROR Get Key(0) from(S0)
####################################################################################################################
010021 CLNT C5 send to S1 Get key(0) Cindex(5) OIndex(1) test(72)
S0 Persist the                                                                                                      
log[[{226 11 {-1 -1 4                                                                                               
TIMEOUT  }} {227 11 {-1                                                                                             
-1 4 TIMEOUT  }} {228                                                                                               
11 {-1 -1 4 TIMEOUT                                                                                                 
}}]]                                                                                                                
S0 Persist the                                                                                                      
log[[{226 11 {-1 -1 4                                                                                               
TIMEOUT  }} {227 11 {-1                                                                                             
-1 4 TIMEOUT  }} {228                                                                                               
11 {-1 -1 4 TIMEOUT                                                                                                 
}}]]                                                                                                                
                                                                                             S4  have 3 votes T(14) 
                                                                                             cT(14) 2 B             
                                                                                             S4 update              
                                                                                             nextindex[0](1) to 1   
                                                                                             (len(log))             
                                                                                             S4 update              
                                                                                             nextindex[0](1) to 1   
                                                                                             (len(log))             
                                                                                             S4 update              
                                                                                             nextindex[0](1) to 1   
                                                                                             (len(log))             
                                                                                             S4 update              
                                                                                             nextindex[0](1) to 1   
                                                                                             (len(log))             
                                                                                             S4 update              
                                                                                             nextindex[0](1) to 1   
                                                                                             (len(log))             
                                                                                             S4  be Leader B        
                                                                                             S4 Persist the         
                                                                                             log[[{228 11 {-1 -1 4  
                                                                                             TIMEOUT  }}]]          
                                                                                             S4 appendentries error 
                                                                                             to exit because tindex 
                                                                                             or loglen changed      
                                                                                             S4 rf.nextindex[2] = 1 
                                                                                             S4 index(0)  Pre(228)  
                                                                                             len(0)                 
                                                                                             S4 app -> 2 next(1)    
                                                                                             index(0) neT(11) cT(14)
                                                                                             S4 rf.nextindex[0] = 1 
                                                                                             S4 index(0)  Pre(228)  
                                                                                             len(0)                 
                                                                                             S4 app -> 0 next(1)    
                                                                                             index(0) neT(11) cT(14)
                                                                                             S4 rf.nextindex[3] = 1 
                                                                                             S4 index(0)  Pre(228)  
                                                                                             len(0)                 
                                                                                             S4 app -> 3 next(1)    
                                                                                             index(0) neT(11) cT(14)
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(0) rf.X(228)    
                                                                                             in(91)                 
S0 commit(0) applied(0)                                                                                             
lenlog(2) rf.X(226)                                                                                                 
in(93)                                                                                                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(92)                                                     
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(92)                              
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(92)                                                                            
                                                                      S3 <-- C5 Get key(0)                          
                                                                      test72                                        
####################################################################################################################
010143 CLNT C5 ok(true) ERR(ErrWrongLeader) from S1 in test72
####################################################################################################################
010144 CLNT C5 send to S2 Get key(0) Cindex(5) OIndex(1) test(73)
                        S1 the num is (1014)                                                                        
                        applidindex(228)                                                                            
                        X(228)                                                                                      
                                                                                             S4 the num is (286)    
                                                                                             applidindex(228) X(228)
                                                                                             S4 have log            
                                                                                             S4 {229 14 {-1 -1 4    
                                                                                             TIMEOUT  }}            
                                                                                             S4 Persist the         
                                                                                             log[[{228 11 {-1 -1 4  
                                                                                             TIMEOUT  }} {229 14 {-1
                                                                                             -1 4 TIMEOUT  }}]]     
                                                                      S3 the num is (372)                           
                                                                      applidindex(226)                              
                                                                      X(226)                                        
S0 the num is (372)                                                                                                 
applidindex(226) X(226)                                                                                             
                                               S2 the num is (1014)                                                 
                                               applidindex(228)                                                     
                                               X(228)                                                               
                                                                                             S4 rf.nextindex[0] = 1 
                                                                                             S4 index(1)  Pre(228)  
                                                                                             len(1)                 
                                                                                             S4 app -> 0 next(1)    
                                                                                             index(1) neT(11) cT(14)
                                                                                             S4 rf.nextindex[1] = 1 
                                                                                             S4 index(1)  Pre(228)  
                                                                                             len(1)                 
                                                                                             S4 app -> 1 next(1)    
                                                                                             index(1) neT(11) cT(14)
                                                                                             S4 rf.nextindex[3] = 1 
                                                                                             S4 index(1)  Pre(228)  
                                                                                             len(1)                 
                                                                                             S4 app -> 3 next(1)    
                                                                                             index(1) neT(11) cT(14)
                                                                                             S4 rf.nextindex[2] = 1 
                                                                                             S4 index(1)  Pre(228)  
                                                                                             len(1)                 
                                                                                             S4 app -> 2 next(1)    
                                                                                             index(1) neT(11) cT(14)
                                                                                             S4 commit(0) applied(0)
                                                                                             lenlog(1) rf.X(228)    
                                                                                             in(92)                 
####################################################################################################################
010201 CLNT C5 ok(false) ERR() from S2 in test73
####################################################################################################################
010202 CLNT C5 ERROR Get Key(0) from(S2)
####################################################################################################################
010202 CLNT C5 send to S3 Get key(0) Cindex(5) OIndex(1) test(74)
                                                                      S3 the len(log) is 3                          
                                                                      S3  vote <- 4 T(11) =                         
                                                                      LastlogT(11) logi(2)                          
                                                                      lastlogindex(228)                             
                                                                      S3 Persist the                                
                                                                      log[[{226 11 {-1 -1 4                         
                                                                      TIMEOUT  }} {227 11                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {228 11 {-1 -1 4                              
                                                                      TIMEOUT  }}]]                                 
                                                                      S3 Persist the                                
                                                                      log[[{226 11 {-1 -1 4                         
                                                                      TIMEOUT  }} {227 11                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {228 11 {-1 -1 4                              
                                                                      TIMEOUT  }}]]                                 
S0  app <- 4 T(14)                                                                                                  
cT(14)                                                                                                              
S0 YYYY                                                                                                             
S0 be follower                                                                                                      
S0 PreT(11) LT(11)                                                                                                  
S0 B success +                                                                                                      
log([{229 14 {-1 -1 4                                                                                               
TIMEOUT  }}])                                                                                                       
S0 update commit(228)                                                                                               
S0 Persist the                                                                                                      
log[[{226 11 {-1 -1 4                                                                                               
TIMEOUT  }} {227 11 {-1                                                                                             
-1 4 TIMEOUT  }} {228                                                                                               
11 {-1 -1 4 TIMEOUT  }}                                                                                             
{229 14 {-1 -1 4                                                                                                    
TIMEOUT  }}]]                                                                                                       
                                                                                             S4 update              
                                                                                             nextindex[0](1) to 2   
                                                                                             success                
                                                                                             S4 index(1)            
                                                                                             matchindex([1 1 1 1 1])
                                                                                             S4 successnum(5)       
                                                                                             com-rf.X(0) rf.CT(14)  
                                                                                             t(14)                  
                                                                                             S4 sum(5) ban(2)       
                                                                                             S4 new commit(1) and   
                                                                                             applied                
                                                                      S3 commit(0)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(93)                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(93)                                                     
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(93)                                                                            
S0 commit(2) applied(0)                                                                                             
lenlog(3) rf.X(226)                                                                                                 
in(94)                                                                                                              
S0 lastapp lognode =                                                                                                
{true {-1 -1 4 TIMEOUT                                                                                              
} 227 false [] 0 0}                                                                                                 
S0 comm(2) last(227)                                                                                                
S0 lastapp lognode =                                                                                                
{true {-1 -1 4 TIMEOUT                                                                                              
} 228 false [] 0 0}                                                                                                 
S0 comm(2) last(228)                                                                                                
S0 TTT                                                                                                              
CommandValid(true)                                                                                                  
applyindex(226)                                                                                                     
CommandIndex(227)                                                                                                   
TIMEOUT key() value()                                                                                               
CDM[C-1](0) M(-1)                                                                                                   
from(4)                                                                                                             
S0 for TIMEOUT update                                                                                               
applyindex 226 to 227                                                                                               
S0 TTT                                                                                                              
CommandValid(true)                                                                                                  
applyindex(227)                                                                                                     
CommandIndex(228)                                                                                                   
TIMEOUT key() value()                                                                                               
CDM[C-1](0) M(-1)                                                                                                   
from(4)                                                                                                             
S0 Persist the                                                                                                      
log[[{226 11 {-1 -1 4                                                                                               
TIMEOUT  }} {227 11 {-1                                                                                             
-1 4 TIMEOUT  }} {228                                                                                               
11 {-1 -1 4 TIMEOUT  }}                                                                                             
{229 14 {-1 -1 4                                                                                                    
TIMEOUT  }}]]                                                                                                       
S0 for TIMEOUT update                                                                                               
applyindex 227 to 228                                                                                               
S0 Persist the                                                                                                      
log[[{226 11 {-1 -1 4                                                                                               
TIMEOUT  }} {227 11 {-1                                                                                             
-1 4 TIMEOUT  }} {228                                                                                               
11 {-1 -1 4 TIMEOUT  }}                                                                                             
{229 14 {-1 -1 4                                                                                                    
TIMEOUT  }}]]                                                                                                       
                        S1  app <- 4 T(14)                                                                          
                        cT(14)                                                                                      
                        S1 YYYY                                                                                     
                        S1 be follower                                                                              
                        S1 PreT(11) LT(7)                                                                           
                        S1 j = 0                                                                                    
                        S1 DDDDDDDDDDDDDDDDDDD                                                                      
                        the len(log) is 16                                                                          
                        S1 the log behind the                                                                       
                        leader need snapshot                                                                        
                        S1 AAA fail len(log)                                                                        
                        is 16                                                                                       
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
S0  heart <- 4 T(14)                                                                                                
cT(14)                                                                                                              
S0 YYYY                                                                                                             
S0 PreT(11) LT(11)                                                                                                  
                                                                                             S4 to 1 匹配失败       
                                                                                             tfi(229)               
                                                                                             S4 update              
                                                                                             nextindex[1](1) to 1 <=
                                                                                             1                      
S0 Persist the                                                                                                      
log[[{226 11 {-1 -1 4                                                                                               
TIMEOUT  }} {227 11 {-1                                                                                             
-1 4 TIMEOUT  }} {228                                                                                               
11 {-1 -1 4 TIMEOUT  }}                                                                                             
{229 14 {-1 -1 4                                                                                                    
TIMEOUT  }}]]                                                                                                       
                                                                                             S4 update              
                                                                                             nextindex[0](2) to 1   
                                                                                             success                
                                                                                             S4 index(0)            
                                                                                             matchindex([0 1 1 1 1])
                                                                                             S4 successnum(5)       
                                                                                             com-rf.X(1) rf.CT(14)  
                                                                                             t(11)                  
                                               S2  heart <- 4 T(14)                                                 
                                               cT(14)                                                               
                                               S2 YYYY                                                              
                                               S2 be follower                                                       
                                               S2 PreT(11) LT(7)                                                    
                                               S2 j = 0                                                             
                                               S2 DDDDDDDDDDDDDDDDDDD                                               
                                               the len(log) is 16                                                   
                                               S2 the log behind the                                                
                                               leader need snapshot                                                 
                                               S2 AAA fail len(log)                                                 
                                               is 16                                                                
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                                                                                             S4 commit(1) applied(0)
                                                                                             lenlog(1) rf.X(228)    
                                                                                             in(93)                 
                                                                                             S4 lastapp lognode =   
                                                                                             {true {-1 -1 4 TIMEOUT 
                                                                                             } 229 false [] 0 0}    
                                                                                             S4 comm(1) last(229)   
                                                                                             S4 TTT                 
                                                                                             CommandValid(true)     
                                                                                             applyindex(228)        
                                                                                             CommandIndex(229)      
                                                                                             TIMEOUT key() value()  
                                                                                             CDM[C-1](0) M(-1)      
                                                                                             from(4)                
                                                                                             S4 for TIMEOUT update  
                                                                                             applyindex 228 to 229  
                                                                                             S4 Persist the         
                                                                                             log[[{228 11 {-1 -1 4  
                                                                                             TIMEOUT  }} {229 14 {-1
                                                                                             -1 4 TIMEOUT  }}]]     
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                                               S2  app <- 4 T(14)                                                   
                                               cT(14)                                                               
                                               S2 YYYY                                                              
                                               S2 PreT(11) LT(7)                                                    
                                               S2 j = 0                                                             
                                               S2 DDDDDDDDDDDDDDDDDDD                                               
                                               the len(log) is 16                                                   
                                               S2 the log behind the                                                
                                               leader need snapshot                                                 
                                               S2 AAA fail len(log)                                                 
                                               is 16                                                                
                                                                      S3  heart <- 4 T(14)                          
                                                                      cT(14)                                        
                                                                      S3 YYYY                                       
                                                                      S3 be follower                                
                                                                      S3 PreT(11) LT(11)                            
                                                                      S3 update commit(228)                         
                                                                                             S4 to 2 匹配失败       
                                                                                             tfi(229)               
                                                                                             S4 update              
                                                                                             nextindex[2](1) to 1 <=
                                                                                             1                      
                                                                                             S4 to 2 匹配失败       
                                                                                             tfi(229)               
                                                                                             S4 update              
                                                                                             nextindex[2](1) to 1 <=
                                                                                             1                      
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(94)                                                                            
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(94)                                                     
                                                                      S3 commit(2)                                  
                                                                      applied(0) lenlog(2)                          
                                                                      rf.X(226) in(94)                              
                                                                      S3 lastapp lognode =                          
                                                                      {true {-1 -1 4 TIMEOUT                        
                                                                      } 227 false [] 0 0}                           
                                                                      S3 comm(2) last(227)                          
                                                                      S3 lastapp lognode =                          
                                                                      {true {-1 -1 4 TIMEOUT                        
                                                                      } 228 false [] 0 0}                           
                                                                      S3 comm(2) last(228)                          
                                                                      S3 Persist the                                
                                                                      log[[{226 11 {-1 -1 4                         
                                                                      TIMEOUT  }} {227 11                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {228 11 {-1 -1 4                              
                                                                      TIMEOUT  }}]]                                 
S0 Persist the                                                                                                      
log[[{226 11 {-1 -1 4                                                                                               
TIMEOUT  }} {227 11 {-1                                                                                             
-1 4 TIMEOUT  }} {228                                                                                               
11 {-1 -1 4 TIMEOUT  }}                                                                                             
{229 14 {-1 -1 4                                                                                                    
TIMEOUT  }}]]                                                                                                       
                                                                      S3 Persist the                                
                                                                      log[[{226 11 {-1 -1 4                         
                                                                      TIMEOUT  }} {227 11                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {228 11 {-1 -1 4                              
                                                                      TIMEOUT  }}]]                                 
                                                                      S3  app <- 4 T(14)                            
                                                                      cT(14)                                        
                                                                      S3 YYYY                                       
                                                                      S3 PreT(11) LT(11)                            
                                                                      S3 TTT                                        
                                                                      CommandValid(true)                            
                                                                      applyindex(226)                               
                                                                      CommandIndex(227)                             
                                                                      TIMEOUT key() value()                         
                                                                      CDM[C-1](0) M(-1)                             
                                                                      from(4)                                       
                                                                      S3 for TIMEOUT update                         
                                                                      applyindex 226 to 227                         
                                                                      S3 B success +                                
                                                                      log([{229 14 {-1 -1 4                         
                                                                      TIMEOUT  }}])                                 
                                                                      S3 TTT                                        
                                                                      CommandValid(true)                            
                                                                      applyindex(227)                               
                                                                      CommandIndex(228)                             
                                                                      TIMEOUT key() value()                         
                                                                      CDM[C-1](0) M(-1)                             
                                                                      from(4)                                       
                                                                      S3 for TIMEOUT update                         
                                                                      applyindex 227 to 228                         
                                                                                             S4 update              
                                                                                             nextindex[3](1) to 1   
                                                                                             success                
                                                                                             S4 index(0)            
                                                                                             matchindex([0 1 1 0 1])
                                                                                             S4 successnum(5)       
                                                                                             com-rf.X(1) rf.CT(14)  
                                                                                             t(11)                  
S0 commit(2) applied(2)                                                                                             
lenlog(3) rf.X(226)                                                                                                 
in(95)                                                                                                              
                                                                      S3 Persist the                                
                                                                      log[[{226 11 {-1 -1 4                         
                                                                      TIMEOUT  }} {227 11                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {228 11 {-1 -1 4                              
                                                                      TIMEOUT  }} {229 14                           
                                                                      {-1 -1 4 TIMEOUT  }}]]                        
                                                                                             S4 update              
                                                                                             nextindex[3](1) to 2   
                                                                                             success                
                                                                                             S4 index(1)            
                                                                                             matchindex([0 1 1 1 1])
                                                                                             S4 successnum(4)       
                                                                                             com-rf.X(1) rf.CT(14)  
                                                                                             t(14)                  
                                                                      S3 Persist the                                
                                                                      log[[{226 11 {-1 -1 4                         
                                                                      TIMEOUT  }} {227 11                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {228 11 {-1 -1 4                              
                                                                      TIMEOUT  }} {229 14                           
                                                                      {-1 -1 4 TIMEOUT  }}]]                        
                                                                                             S4 commit(1) applied(1)
                                                                                             lenlog(1) rf.X(228)    
                                                                                             in(94)                 
                                                                      S3 Persist the                                
                                                                      log[[{226 11 {-1 -1 4                         
                                                                      TIMEOUT  }} {227 11                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {228 11 {-1 -1 4                              
                                                                      TIMEOUT  }} {229 14                           
                                                                      {-1 -1 4 TIMEOUT  }}]]                        
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(95)                                                                            
                        S1 <-- C5 Get key(0)                                                                        
                        test74                                                                                      
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(95)                                                     
####################################################################################################################
010481 CLNT C5 ok(true) ERR(ErrWrongLeader) from S3 in test74
####################################################################################################################
010484 CLNT C5 send to S4 Get key(0) Cindex(5) OIndex(1) test(75)
                                                                      S3 commit(2)                                  
                                                                      applied(2) lenlog(3)                          
                                                                      rf.X(226) in(95)                              
S0 commit(2) applied(2)                                                                                             
lenlog(3) rf.X(226)                                                                                                 
in(96)                                                                                                              
                                                                                             S4 commit(1) applied(1)
                                                                                             lenlog(1) rf.X(228)    
                                                                                             in(95)                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(96)                                                                            
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(96)                                                     
                                                                      S3 commit(2)                                  
                                                                      applied(2) lenlog(3)                          
                                                                      rf.X(226) in(96)                              
S0 commit(2) applied(2)                                                                                             
lenlog(3) rf.X(226)                                                                                                 
in(97)                                                                                                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(97)                                                     
                                                                                             S4 commit(1) applied(1)
                                                                                             lenlog(1) rf.X(228)    
                                                                                             in(96)                 
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(97)                                                                            
                                                                                             S4 <-- C5 Get key(0)   
                                                                                             test75                 
                                                                                             S4 start Get key(0)    
                                                                                             S4 have log            
                                                                                             S4 {230 14 {5 1 4 Get 0
                                                                                             }}                     
                                                                                             S4 have this log({5 1 4
                                                                                             Get 0 }) in raft       
                                                                                             S4 <-- C5 Get key(0)   
                                                                                             wait 75                
                                                                                             S4 Persist the         
                                                                                             log[[{228 11 {-1 -1 4  
                                                                                             TIMEOUT  }} {229 14 {-1
                                                                                             -1 4 TIMEOUT  }} {230  
                                                                                             14 {5 1 4 Get 0 }}]]   
                                                                                             S4 rf.nextindex[0] = 1 
                                                                                             S4 index(2)  Pre(228)  
                                                                                             len(2)                 
                                                                                             S4 app -> 0 next(1)    
                                                                                             index(2) neT(11) cT(14)
                                                                                             S4 rf.nextindex[1] = 1 
                                                                                             S4 index(2)  Pre(228)  
                                                                                             len(2)                 
                                                                                             S4 app -> 1 next(1)    
                                                                                             index(2) neT(11) cT(14)
                                                                                             S4 rf.nextindex[2] = 1 
                                                                                             S4 index(2)  Pre(228)  
                                                                                             len(2)                 
                                                                                             S4 app -> 2 next(1)    
                                                                                             index(2) neT(11) cT(14)
                                                                                             S4 rf.nextindex[3] = 2 
                                                                                             S4 index(2)  Pre(229)  
                                                                                             len(2)                 
                                                                                             S4 app -> 3 next(2)    
                                                                                             index(2) neT(14) cT(14)
                        S1  app <- 4 T(14)                                                                          
                        cT(14)                                                                                      
                        S1 YYYY                                                                                     
                        S1 PreT(11) LT(7)                                                                           
                        S1 j = 0                                                                                    
                        S1 DDDDDDDDDDDDDDDDDDD                                                                      
                        the len(log) is 16                                                                          
                        S1 the log behind the                                                                       
                        leader need snapshot                                                                        
                        S1 AAA fail len(log)                                                                        
                        is 16                                                                                       
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                                                                      S3 commit(2)                                  
                                                                      applied(2) lenlog(3)                          
                                                                      rf.X(226) in(97)                              
S0 commit(2) applied(2)                                                                                             
lenlog(3) rf.X(226)                                                                                                 
in(98)                                                                                                              
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(98)                                                     
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(98)                                                                            
                                                                                             S4 commit(1) applied(1)
                                                                                             lenlog(2) rf.X(228)    
                                                                                             in(97)                 
                                                                                             S4 to 1 匹配失败       
                                                                                             tfi(229)               
                                                                                             S4 update              
                                                                                             nextindex[1](1) to 1 <=
                                                                                             1                      
S0  app <- 4 T(14)                                                                                                  
cT(14)                                                                                                              
S0 YYYY                                                                                                             
S0 PreT(11) LT(11)                                                                                                  
S0 mat(3) index(3)                                                                                                  
len(4)                                                                                                              
S0 B success +                                                                                                      
log([{230 14 {5 1 4 Get                                                                                             
0 }}])                                                                                                              
S0 update commit(229)                                                                                               
S0 Persist the                                                                                                      
log[[{226 11 {-1 -1 4                                                                                               
TIMEOUT  }} {227 11 {-1                                                                                             
-1 4 TIMEOUT  }} {228                                                                                               
11 {-1 -1 4 TIMEOUT  }}                                                                                             
{229 14 {-1 -1 4                                                                                                    
TIMEOUT  }} {230 14 {5                                                                                              
1 4 Get 0 }}]]                                                                                                      
                                                                      S3  app <- 4 T(14)                            
                                                                      cT(14)                                        
                                                                      S3 YYYY                                       
                                                                      S3 PreT(14) LT(14)                            
                                                                      S3 B success +                                
                                                                      log([{230 14 {5 1 4                           
                                                                      Get 0 }}])                                    
                                                                      S3 update commit(229)                         
S0 Persist the                                                                                                      
log[[{226 11 {-1 -1 4                                                                                               
TIMEOUT  }} {227 11 {-1                                                                                             
-1 4 TIMEOUT  }} {228                                                                                               
11 {-1 -1 4 TIMEOUT  }}                                                                                             
{229 14 {-1 -1 4                                                                                                    
TIMEOUT  }} {230 14 {5                                                                                              
1 4 Get 0 }}]]                                                                                                      
                                                                                             S4 update              
                                                                                             nextindex[0](1) to 3   
                                                                                             success                
                                                                                             S4 index(2)            
                                                                                             matchindex([2 1 1 1 2])
                                                                                             S4 successnum(2)       
                                                                                             com-rf.X(1) rf.CT(14)  
                                                                                             t(14)                  
                                                                                             S4 commit(1) applied(1)
                                                                                             lenlog(2) rf.X(228)    
                                                                                             in(98)                 
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(99)                                                     
S0 commit(3) applied(2)                                                                                             
lenlog(4) rf.X(226)                                                                                                 
in(99)                                                                                                              
S0 lastapp lognode =                                                                                                
{true {-1 -1 4 TIMEOUT                                                                                              
} 229 false [] 0 0}                                                                                                 
S0 comm(3) last(229)                                                                                                
S0 Persist the                                                                                                      
log[[{226 11 {-1 -1 4                                                                                               
TIMEOUT  }} {227 11 {-1                                                                                             
-1 4 TIMEOUT  }} {228                                                                                               
11 {-1 -1 4 TIMEOUT  }}                                                                                             
{229 14 {-1 -1 4                                                                                                    
TIMEOUT  }} {230 14 {5                                                                                              
1 4 Get 0 }}]]                                                                                                      
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(99)                                                                            
S0 TTT                                                                                                              
CommandValid(true)                                                                                                  
applyindex(228)                                                                                                     
CommandIndex(229)                                                                                                   
TIMEOUT key() value()                                                                                               
CDM[C-1](0) M(-1)                                                                                                   
from(4)                                                                                                             
S0 for TIMEOUT update                                                                                               
applyindex 228 to 229                                                                                               
                                                                      S3 Persist the                                
                                                                      log[[{226 11 {-1 -1 4                         
                                                                      TIMEOUT  }} {227 11                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {228 11 {-1 -1 4                              
                                                                      TIMEOUT  }} {229 14                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {230 14 {5 1 4 Get 0                          
                                                                      }}]]                                          
                                                                                             S4 -> 3 app fail       
                                                                      S3 Persist the                                
                                                                      log[[{226 11 {-1 -1 4                         
                                                                      TIMEOUT  }} {227 11                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {228 11 {-1 -1 4                              
                                                                      TIMEOUT  }} {229 14                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {230 14 {5 1 4 Get 0                          
                                                                      }}]]                                          
                                                                      S3 commit(3)                                  
                                                                      applied(2) lenlog(4)                          
                                                                      rf.X(226) in(98)                              
                                                                      S3 lastapp lognode =                          
                                                                      {true {-1 -1 4 TIMEOUT                        
                                                                      } 229 false [] 0 0}                           
                                                                      S3 comm(3) last(229)                          
                                                                      S3 TTT                                        
                                                                      CommandValid(true)                            
                                                                      applyindex(228)                               
                                                                      CommandIndex(229)                             
                                                                      TIMEOUT key() value()                         
                                                                      CDM[C-1](0) M(-1)                             
                                                                      from(4)                                       
                                                                      S3 for TIMEOUT update                         
                                                                      applyindex 228 to 229                         
                                                                      S3 Persist the                                
                                                                      log[[{226 11 {-1 -1 4                         
                                                                      TIMEOUT  }} {227 11                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {228 11 {-1 -1 4                              
                                                                      TIMEOUT  }} {229 14                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {230 14 {5 1 4 Get 0                          
                                                                      }}]]                                          
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(100)                                                                           
                                                                                             S4 commit(1) applied(1)
                                                                                             lenlog(2) rf.X(228)    
                                                                                             in(99)                 
S0 commit(3) applied(3)                                                                                             
lenlog(4) rf.X(226)                                                                                                 
in(100)                                                                                                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(100)                                                    
                                               S2  app <- 4 T(14)                                                   
                                               cT(14)                                                               
                                               S2 YYYY                                                              
                                               S2 PreT(11) LT(7)                                                    
                                               S2 j = 0                                                             
                                               S2 DDDDDDDDDDDDDDDDDDD                                               
                                               the len(log) is 16                                                   
                                               S2 the log behind the                                                
                                               leader need snapshot                                                 
                                               S2 AAA fail len(log)                                                 
                                               is 16                                                                
                                                                      S3 commit(3)                                  
                                                                      applied(3) lenlog(4)                          
                                                                      rf.X(226) in(99)                              
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                                                                                             S4 to 2 匹配失败       
                                                                                             tfi(229)               
                                                                                             S4 update              
                                                                                             nextindex[2](1) to 1 <=
                                                                                             1                      
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(101)                                                                           
S0 commit(3) applied(3)                                                                                             
lenlog(4) rf.X(226)                                                                                                 
in(101)                                                                                                             
                                                                                             S4 commit(1) applied(1)
                                                                                             lenlog(2) rf.X(228)    
                                                                                             in(100)                
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(101)                                                    
                                                                      S3 commit(3)                                  
                                                                      applied(3) lenlog(4)                          
                                                                      rf.X(226) in(100)                             
                        S1 the num is (1014)                                                                        
                        applidindex(228)                                                                            
                        X(228)                                                                                      
                                                                                             S4 the num is (379)    
                                                                                             applidindex(229) X(228)
                                               S2 the num is (1014)                                                 
                                               applidindex(228)                                                     
                                               X(228)                                                               
                                                                      S3 the num is (466)                           
                                                                      applidindex(229)                              
                                                                      X(226)                                        
S0 the num is (466)                                                                                                 
applidindex(229) X(226)                                                                                             
S0 commit(3) applied(3)                                                                                             
lenlog(4) rf.X(226)                                                                                                 
in(102)                                                                                                             
                                                                                             S4 commit(1) applied(1)
                                                                                             lenlog(2) rf.X(228)    
                                                                                             in(101)                
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(102)                                                    
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(102)                                                                           
                                                                      S3 commit(3)                                  
                                                                      applied(3) lenlog(4)                          
                                                                      rf.X(226) in(101)                             
                                                                                             S4 have log            
                                                                                             S4 {231 14 {-1 -1 4    
                                                                                             TIMEOUT  }}            
                                                                                             S4 rf.nextindex[0] = 3 
                                                                                             S4 index(3)  Pre(230)  
                                                                                             len(3)                 
                                                                                             S4 app -> 0 next(3)    
                                                                                             index(3) neT(14) cT(14)
                                                                                             S4 Persist the         
                                                                                             log[[{228 11 {-1 -1 4  
                                                                                             TIMEOUT  }} {229 14 {-1
                                                                                             -1 4 TIMEOUT  }} {230  
                                                                                             14 {5 1 4 Get 0 }} {231
                                                                                             14 {-1 -1 4 TIMEOUT    
                                                                                             }}]]                   
                                                                                             S4 rf.nextindex[1] = 1 
                                                                                             S4 index(3)  Pre(228)  
                                                                                             len(3)                 
                                                                                             S4 app -> 1 next(1)    
                                                                                             index(3) neT(11) cT(14)
                                                                                             S4 rf.nextindex[2] = 1 
                                                                                             S4 index(3)  Pre(228)  
                                                                                             len(3)                 
                                                                                             S4 app -> 2 next(1)    
                                                                                             index(3) neT(11) cT(14)
                                                                                             S4 rf.nextindex[3] = 2 
                                                                                             S4 index(3)  Pre(229)  
                                                                                             len(3)                 
                                                                                             S4 app -> 3 next(2)    
                                                                                             index(3) neT(14) cT(14)
                                               S2  app <- 4 T(14)                                                   
                                               cT(14)                                                               
                                               S2 YYYY                                                              
                                               S2 PreT(11) LT(7)                                                    
                                               S2 j = 0                                                             
                                               S2 DDDDDDDDDDDDDDDDDDD                                               
                                               the len(log) is 16                                                   
                                               S2 the log behind the                                                
                                               leader need snapshot                                                 
                                               S2 AAA fail len(log)                                                 
                                               is 16                                                                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(103)                                                                           
S0 commit(3) applied(3)                                                                                             
lenlog(4) rf.X(226)                                                                                                 
in(103)                                                                                                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(103)                                                    
                                                                                             S4 commit(1) applied(1)
                                                                                             lenlog(3) rf.X(228)    
                                                                                             in(102)                
                                                                      S3 commit(3)                                  
                                                                      applied(3) lenlog(4)                          
                                                                      rf.X(226) in(102)                             
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                                               S2 Persist the                                                       
                                               log[[{228 7 {-1 -1 2                                                 
                                               TIMEOUT  }} {229 7 {1                                                
                                               37 2 Append 3 x 3 20                                                 
                                               y}} {230 7 {4 44 2 Get                                               
                                               0 }} {231 7 {0 43 2                                                  
                                               Get 2 }} {232 7 {-1 -1                                               
                                               2 TIMEOUT  }} {233 7                                                 
                                               {1 38 2 Append 3 x 3                                                 
                                               21 y}} {234 7 {2 40 2                                                
                                               Get 4 }} {235 7 {-1 -1                                               
                                               2 TIMEOUT  }} {236 7                                                 
                                               {3 55 2 Append 1 x 1                                                 
                                               29 y}} {237 7 {-1 -1 2                                               
                                               TIMEOUT  }} {238 7 {-1                                               
                                               -1 2 TIMEOUT  }} {239                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {240 7 {-1 -1 2                                                      
                                               TIMEOUT  }} {241 7 {-1                                               
                                               -1 2 TIMEOUT  }} {242                                                
                                               7 {-1 -1 2 TIMEOUT  }}                                               
                                               {243 7 {-1 -1 2                                                      
                                               TIMEOUT  }}]]                                                        
                                                                                             S4 -> 0 app fail       
                                                                                             S4 to 2 匹配失败       
                                                                                             tfi(229)               
                                                                                             S4 update              
                                                                                             nextindex[2](1) to 1 <=
                                                                                             1                      
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(104)                                                                           
S0 commit(3) applied(3)                                                                                             
lenlog(4) rf.X(226)                                                                                                 
in(104)                                                                                                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(104)                                                    
                                                                                             S4 commit(1) applied(1)
                                                                                             lenlog(3) rf.X(228)    
                                                                                             in(103)                
                                                                      S3 commit(3)                                  
                                                                      applied(3) lenlog(4)                          
                                                                      rf.X(226) in(103)                             
                        S1  app <- 4 T(14)                                                                          
                        cT(14)                                                                                      
                        S1 YYYY                                                                                     
                        S1 PreT(11) LT(7)                                                                           
                        S1 j = 0                                                                                    
                        S1 DDDDDDDDDDDDDDDDDDD                                                                      
                        the len(log) is 16                                                                          
                        S1 the log behind the                                                                       
                        leader need snapshot                                                                        
                        S1 AAA fail len(log)                                                                        
                        is 16                                                                                       
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                        S1 Persist the                                                                              
                        log[[{228 7 {-1 -1 2                                                                        
                        TIMEOUT  }} {229 7 {1                                                                       
                        37 2 Append 3 x 3 20                                                                        
                        y}} {230 7 {4 44 2 Get                                                                      
                        0 }} {231 7 {0 43 2                                                                         
                        Get 2 }} {232 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {233 7                                                                        
                        {1 38 2 Append 3 x 3                                                                        
                        21 y}} {234 7 {2 40 2                                                                       
                        Get 4 }} {235 7 {-1 -1                                                                      
                        2 TIMEOUT  }} {236 7                                                                        
                        {3 55 2 Append 1 x 1                                                                        
                        29 y}} {237 7 {-1 -1 2                                                                      
                        TIMEOUT  }} {238 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {239                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {240 7 {-1 -1 2                                                                             
                        TIMEOUT  }} {241 7 {-1                                                                      
                        -1 2 TIMEOUT  }} {242                                                                       
                        7 {-1 -1 2 TIMEOUT  }}                                                                      
                        {243 7 {-1 -1 2                                                                             
                        TIMEOUT  }}]]                                                                               
                                                                                             S4 to 1 匹配失败       
                                                                                             tfi(229)               
                                                                                             S4 update              
                                                                                             nextindex[1](1) to 1 <=
                                                                                             1                      
                                                                      S3  app <- 4 T(14)                            
                                                                      cT(14)                                        
                                                                      S3 YYYY                                       
                                                                      S3 PreT(14) LT(14)                            
                                                                      S3 mat(4) index(4)                            
                                                                      len(5)                                        
                                                                      S3 B success +                                
                                                                      log([{231 14 {-1 -1 4                         
                                                                      TIMEOUT  }}])                                 
                                                                      S3 Persist the                                
                                                                      log[[{226 11 {-1 -1 4                         
                                                                      TIMEOUT  }} {227 11                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {228 11 {-1 -1 4                              
                                                                      TIMEOUT  }} {229 14                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {230 14 {5 1 4 Get 0                          
                                                                      }} {231 14 {-1 -1 4                           
                                                                      TIMEOUT  }}]]                                 
                                                                      S3 Persist the                                
                                                                      log[[{226 11 {-1 -1 4                         
                                                                      TIMEOUT  }} {227 11                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {228 11 {-1 -1 4                              
                                                                      TIMEOUT  }} {229 14                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {230 14 {5 1 4 Get 0                          
                                                                      }} {231 14 {-1 -1 4                           
                                                                      TIMEOUT  }}]]                                 
                                                                                             S4 update              
                                                                                             nextindex[3](2) to 4   
                                                                                             success                
                                                                                             S4 index(3)            
                                                                                             matchindex([2 1 1 3 3])
                                                                                             S4 successnum(2)       
                                                                                             com-rf.X(1) rf.CT(14)  
                                                                                             t(14)                  
                                                                                             S4 commit(1) applied(1)
                                                                                             lenlog(3) rf.X(228)    
                                                                                             in(104)                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(105)                                                                           
                                                                      S3 commit(3)                                  
                                                                      applied(3) lenlog(5)                          
                                                                      rf.X(226) in(104)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(105)                                                    
S0 commit(3) applied(3)                                                                                             
lenlog(4) rf.X(226)                                                                                                 
in(105)                                                                                                             
                                                                                             S4 is time out         
####################################################################################################################
011720 CLNT C5 ok(true) ERR(TimeOut) from S4 in test75
####################################################################################################################
011721 CLNT C5 Get nil because TimeOut from(S4)
####################################################################################################################
011721 CLNT C5 send to S4 Get key(0) Cindex(5) OIndex(1) test(231)
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(106)                                                                           
                                                                                             S4 commit(1) applied(1)
                                                                                             lenlog(3) rf.X(228)    
                                                                                             in(105)                
                                                                      S3 commit(3)                                  
                                                                      applied(3) lenlog(5)                          
                                                                      rf.X(226) in(105)                             
S0 commit(3) applied(3)                                                                                             
lenlog(4) rf.X(226)                                                                                                 
in(106)                                                                                                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(106)                                                    
                                                                      S3 commit(3)                                  
                                                                      applied(3) lenlog(5)                          
                                                                      rf.X(226) in(106)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(107)                                                    
S0 commit(3) applied(3)                                                                                             
lenlog(4) rf.X(226)                                                                                                 
in(107)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(107)                                                                           
                                                                                             S4 commit(1) applied(1)
                                                                                             lenlog(3) rf.X(228)    
                                                                                             in(106)                
                                                                                             S4 <-- C5 Get key(0)   
                                                                                             test231                
                                                                                             S4 do not have this    
                                                                                             log({5 1 4 Get 0 })    
                                                                                             S4 <-- C5 Get key(0)   
                                                                                             wait 231               
                                                                                             S4 commit(1) applied(1)
                                                                                             lenlog(3) rf.X(228)    
                                                                                             in(107)                
S0 commit(3) applied(3)                                                                                             
lenlog(4) rf.X(226)                                                                                                 
in(108)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(108)                                                                           
                                                                      S3 commit(3)                                  
                                                                      applied(3) lenlog(5)                          
                                                                      rf.X(226) in(107)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(108)                                                    
                                                                                             S4 commit(1) applied(1)
                                                                                             lenlog(3) rf.X(228)    
                                                                                             in(108)                
S0 commit(3) applied(3)                                                                                             
lenlog(4) rf.X(226)                                                                                                 
in(109)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(109)                                                                           
                                                                      S3 commit(3)                                  
                                                                      applied(3) lenlog(5)                          
                                                                      rf.X(226) in(108)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(109)                                                    
                                                                                             S4 the num is (423)    
                                                                                             applidindex(229) X(228)
                        S1 the num is (1014)                                                                        
                        applidindex(228)                                                                            
                        X(228)                                                                                      
                                                                      S3 the num is (509)                           
                                                                      applidindex(229)                              
                                                                      X(226)                                        
S0 the num is (466)                                                                                                 
applidindex(229) X(226)                                                                                             
                                               S2 the num is (1014)                                                 
                                               applidindex(228)                                                     
                                               X(228)                                                               
                                                                                             S4 commit(1) applied(1)
                                                                                             lenlog(3) rf.X(228)    
                                                                                             in(109)                
S0 commit(3) applied(3)                                                                                             
lenlog(4) rf.X(226)                                                                                                 
in(110)                                                                                                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(110)                                                    
                                                                      S3 commit(3)                                  
                                                                      applied(3) lenlog(5)                          
                                                                      rf.X(226) in(109)                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(110)                                                                           
S0 commit(3) applied(3)                                                                                             
lenlog(4) rf.X(226)                                                                                                 
in(111)                                                                                                             
                                                                                             S4 commit(1) applied(1)
                                                                                             lenlog(3) rf.X(228)    
                                                                                             in(110)                
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(111)                                                                           
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(111)                                                    
                                                                      S3 commit(3)                                  
                                                                      applied(3) lenlog(5)                          
                                                                      rf.X(226) in(110)                             
                                                                                             S4 have log            
                                                                                             S4 {232 14 {-1 -1 4    
                                                                                             TIMEOUT  }}            
                                                                                             S4 Persist the         
                                                                                             log[[{228 11 {-1 -1 4  
                                                                                             TIMEOUT  }} {229 14 {-1
                                                                                             -1 4 TIMEOUT  }} {230  
                                                                                             14 {5 1 4 Get 0 }} {231
                                                                                             14 {-1 -1 4 TIMEOUT  }}
                                                                                             {232 14 {-1 -1 4       
                                                                                             TIMEOUT  }}]]          
                                                                                             S4 rf.nextindex[0] = 3 
                                                                                             S4 index(4)  Pre(230)  
                                                                                             len(4)                 
                                                                                             S4 app -> 0 next(3)    
                                                                                             index(4) neT(14) cT(14)
                                                                                             S4 rf.nextindex[1] = 1 
                                                                                             S4 index(4)  Pre(228)  
                                                                                             len(4)                 
                                                                                             S4 app -> 1 next(1)    
                                                                                             index(4) neT(11) cT(14)
                                                                                             S4 rf.nextindex[3] = 4 
                                                                                             S4 index(4)  Pre(231)  
                                                                                             len(4)                 
                                                                                             S4 app -> 3 next(4)    
                                                                                             index(4) neT(14) cT(14)
                                                                                             S4 rf.nextindex[2] = 1 
                                                                                             S4 index(4)  Pre(228)  
                                                                                             len(4)                 
                                                                                             S4 app -> 2 next(1)    
                                                                                             index(4) neT(11) cT(14)
S0 commit(3) applied(3)                                                                                             
lenlog(4) rf.X(226)                                                                                                 
in(112)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(112)                                                                           
                                                                                             S4 commit(1) applied(1)
                                                                                             lenlog(4) rf.X(228)    
                                                                                             in(111)                
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(112)                                                    
                                                                      S3 commit(3)                                  
                                                                      applied(3) lenlog(5)                          
                                                                      rf.X(226) in(111)                             
                                                                                             S4 -> 1 app fail       
S0  app <- 4 T(14)                                                                                                  
cT(14)                                                                                                              
S0 YYYY                                                                                                             
S0 PreT(14) LT(14)                                                                                                  
S0 B success +                                                                                                      
log([{231 14 {-1 -1 4                                                                                               
TIMEOUT  }} {232 14 {-1                                                                                             
-1 4 TIMEOUT  }}])                                                                                                  
S0 Persist the                                                                                                      
log[[{226 11 {-1 -1 4                                                                                               
TIMEOUT  }} {227 11 {-1                                                                                             
-1 4 TIMEOUT  }} {228                                                                                               
11 {-1 -1 4 TIMEOUT  }}                                                                                             
{229 14 {-1 -1 4                                                                                                    
TIMEOUT  }} {230 14 {5                                                                                              
1 4 Get 0 }} {231 14                                                                                                
{-1 -1 4 TIMEOUT  }}                                                                                                
{232 14 {-1 -1 4                                                                                                    
TIMEOUT  }}]]                                                                                                       
                                                                                             S4 update              
                                                                                             nextindex[0](3) to 5   
                                                                                             success                
                                                                                             S4 index(4)            
                                                                                             matchindex([4 1 1 3 4])
                                                                                             S4 successnum(2)       
                                                                                             com-rf.X(1) rf.CT(14)  
                                                                                             t(14)                  
S0 Persist the                                                                                                      
log[[{226 11 {-1 -1 4                                                                                               
TIMEOUT  }} {227 11 {-1                                                                                             
-1 4 TIMEOUT  }} {228                                                                                               
11 {-1 -1 4 TIMEOUT  }}                                                                                             
{229 14 {-1 -1 4                                                                                                    
TIMEOUT  }} {230 14 {5                                                                                              
1 4 Get 0 }} {231 14                                                                                                
{-1 -1 4 TIMEOUT  }}                                                                                                
{232 14 {-1 -1 4                                                                                                    
TIMEOUT  }}]]                                                                                                       
                                                                      S3  app <- 4 T(14)                            
                                                                      cT(14)                                        
                                                                      S3 YYYY                                       
                                                                      S3 PreT(14) LT(14)                            
                                                                      S3 B success +                                
                                                                      log([{232 14 {-1 -1 4                         
                                                                      TIMEOUT  }}])                                 
                                                                      S3 Persist the                                
                                                                      log[[{226 11 {-1 -1 4                         
                                                                      TIMEOUT  }} {227 11                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {228 11 {-1 -1 4                              
                                                                      TIMEOUT  }} {229 14                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {230 14 {5 1 4 Get 0                          
                                                                      }} {231 14 {-1 -1 4                           
                                                                      TIMEOUT  }} {232 14                           
                                                                      {-1 -1 4 TIMEOUT  }}]]                        
                                                                      S3 Persist the                                
                                                                      log[[{226 11 {-1 -1 4                         
                                                                      TIMEOUT  }} {227 11                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {228 11 {-1 -1 4                              
                                                                      TIMEOUT  }} {229 14                           
                                                                      {-1 -1 4 TIMEOUT  }}                          
                                                                      {230 14 {5 1 4 Get 0                          
                                                                      }} {231 14 {-1 -1 4                           
                                                                      TIMEOUT  }} {232 14                           
                                                                      {-1 -1 4 TIMEOUT  }}]]                        
                                                                                             S4 update              
                                                                                             nextindex[3](4) to 5   
                                                                                             success                
                                                                                             S4 index(4)            
                                                                                             matchindex([4 1 1 4 4])
                                                                                             S4 successnum(3)       
                                                                                             com-rf.X(1) rf.CT(14)  
                                                                                             t(14)                  
                                                                                             S4 sum(3) ban(2)       
                                                                                             S4 new commit(4) and   
                                                                                             applied                
S0 commit(3) applied(3)                                                                                             
lenlog(6) rf.X(226)                                                                                                 
in(113)                                                                                                             
                        S1 commit(0)                                                                                
                        applied(0) lenlog(15)                                                                       
                        rf.X(228) in(113)                                                                           
                                                                      S3 commit(3)                                  
                                                                      applied(3) lenlog(6)                          
                                                                      rf.X(226) in(112)                             
                                               S2 commit(0)                                                         
                                               applied(0) lenlog(15)                                                
                                               rf.X(228) in(113)                                                    
                                                                                             S4 commit(4) applied(1)
                                                                                             lenlog(4) rf.X(228)    
                                                                                             in(112)                
                                                                                             S4 lastapp lognode =   
                                                                                             {true {5 1 4 Get 0 }   
                                                                                             230 false [] 0 0}      
                                                                                             S4 comm(4) last(230)   
                                                                                             S4 lastapp lognode =   
                                                                                             {true {-1 -1 4 TIMEOUT 
                                                                                             } 231 false [] 0 0}    
                                                                                             S4 comm(4) last(231)   
                                                                                             S4 TTT                 
                                                                                             CommandValid(true)     
                                                                                             applyindex(229)        
                                                                                             CommandIndex(230) Get  
                                                                                             key(0) value()         
                                                                                             CDM[C5](0) M(1) from(4)
                                                                                             S4 update CDM[5] from 0
                                                                                             to 1 update applyindex 
                                                                                             229 to 230             
                                                                                             S4 write get in(230)   
                                                                                             S4 TTT                 
                                                                                             CommandValid(true)     
                                                                                             applyindex(230)        
                                                                                             CommandIndex(231)      
                                                                                             TIMEOUT key() value()  
                                                                                             CDM[C-1](0) M(-1)      
                                                                                             from(4)                
                                                                                             S4 for TIMEOUT update  
                                                                                             applyindex 230 to 231  
                                                                                             S4 lastapp lognode =   
                                                                                             {true {-1 -1 4 TIMEOUT 
                                                                                             } 232 false [] 0 0}    
                                                                                             S4 comm(4) last(232)   
                                               S2  app <- 4 T(14)                                                   
                                               cT(14)                                                               
                                                                                             S4 kvs(map[0:x 0 0 yx 0
                                                                                             1 yx 0 2 yx 0 3 yx 0 4 
                                                                                             yx 0 5 yx 0 6 yx 0 7 yx
                                                                                             0 8 yx 0 9 yx 0 10 yx 0
                                                                                             11 yx 0 12 yx 0 13 yx 0
                                                                                             14 yx 0 15 yx 0 16 yx 0
                                                                                             17 yx 0 18 yx 0 19 yx 0
                                                                                             20 yx 0 21 y 1:x 1 0 yx
                                                                                             1 1 yx 1 2 yx 1 3 yx 1 
                                                                                             4 yx 1 5 yx 1 6 yx 1 7 
                                                                                             yx 1 8 yx 1 9 yx 1 10  
                                                                                             yx 1 11 yx 1 12 yx 1 13
                                                                                             yx 1 14 yx 1 15 yx 1 16
                                                                                             yx 1 17 yx 1 18 yx 1 19
                                                                                             yx 1 20 yx 1 21 yx 1 22
                                                                                             yx 1 23 yx 1 24 yx 1 25
                                                                                             yx 1 26 yx 1 27 yx 1 29
                                                                                             y 2:x 2 0 yx 2 1 yx 2 2
                                                                                             yx 2 3 yx 2 4 yx 2 5 yx
                                                                                             2 6 yx 2 7 yx 2 8 yx 2 
                                                                                             9 yx 2 10 yx 2 11 yx 2 
                                                                                             12 yx 2 13 yx 2 14 yx 2
                                                                                             15 yx 2 16 yx 2 17 yx 2
                                                                                             18 yx 2 19 yx 2 20 yx 2
                                                                                             21 yx 2 22 y 3:x 3 0 yx
                                                                                             3 1 yx 3 2 yx 3 3 yx 3 
                                                                                             4 yx 3 5 yx 3 6 yx 3 7 
                                                                                             yx 3 8 yx 3 9 yx 3 10  
                                                                                             yx 3 11 yx 3 12 yx 3 13
                                                                                             yx 3 14 yx 3 15 yx 3 16
                                                                                             yx 3 17 yx 3 18 yx 3 19
                                                                                             yx 3 21 y 4:x 4 0 yx 4 
                                                                                             1 yx 4 2 yx 4 3 yx 4 4 
                                                                                             yx 4 5 yx 4 6 yx 4 7 yx
                                                                                             4 8 yx 4 9 yx 4 10 yx 4
                                                                                             11 y]) index(-231)     
                                                                                             from(4)                
                                                                                             S4 Get key(0) value(x 0
                                                                                             0 yx 0 1 yx 0 2 yx 0 3 
                                                                                             yx 0 4 yx 0 5 yx 0 6 yx
                                                                                             0 7 yx 0 8 yx 0 9 yx 0 
                                                                                             10 yx 0 11 yx 0 12 yx 0
                                                                                             13 yx 0 14 yx 0 15 yx 0
                                                                                             16 yx 0 17 yx 0 18 yx 0
                                                                                             19 yx 0 20 yx 0 21 y)  
                                                                                             OK from(C5)            
                                                                                             S4 TTT                 
                                                                                             CommandValid(true)     
                                                                                             applyindex(231)        
                                                                                             CommandIndex(232)      
                                                                                             TIMEOUT key() value()  
                                                                                             CDM[C-1](0) M(-1)      
                                                                                             from(4)                
                                                                                             S4 for TIMEOUT update  
                                                                                             applyindex 231 to 232  
                                               S2 YYYY                                                              
                                               S2 PreT(11) LT(7)                                                    
                                               S2 j = 0                                                             
                                               S2 DDDDDDDDDDDDDDDDDDD                                               
                                               the len(log) is 16                                                   
                                               S2 the log behind the                                                
                                               leader need snapshot                                                 
                                               S2 AAA fail len(log)                                                 
                                               is 16                                                                
####################################################################################################################
012628 CLNT C5 ok(true) ERR(OK) from S4 in test231
####################################################################################################################
012628 CLNT C5 Get success key(0) value(x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10
yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 yx 0 17 yx 0 18 yx 0 19 yx 0 20 yx 0 21 y) r.index(230) from(S4)
####################################################################################################################
FAIL
####################################################################################################################
FAIL    6.824/kvraft    9.923s
