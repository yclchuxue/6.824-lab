S 0 len(log) is 2 startindex is 431 X is 431
S 3 len(log) is 2 startindex is 431 X is 431
S 4 len(log) is 5 startindex is 428 X is 428
S 2 len(log) is 11 startindex is 422 X is 422
S 1 len(log) is 2 startindex is 431 X is 431
S 3 len(log) is 2 startindex is 431 X is 431
S 0 len(log) is 2 startindex is 431 X is 431
S 4 len(log) is 5 startindex is 428 X is 428
S 2 len(log) is 11 startindex is 422 X is 422
S 1 len(log) is 2 startindex is 431 X is 431
S 3 len(log) is 2 startindex is 431 X is 431
S 0 len(log) is 2 startindex is 431 X is 431
S 4 len(log) is 5 startindex is 428 X is 428
S 2 len(log) is 11 startindex is 422 X is 422
S 1 len(log) is 2 startindex is 431 X is 431
S 3 len(log) is 2 startindex is 431 X is 431
S 0 len(log) is 2 startindex is 431 X is 431
S 4 len(log) is 5 startindex is 428 X is 428
S 2 len(log) is 11 startindex is 422 X is 422
S 1 len(log) is 2 startindex is 431 X is 431
S 0 len(log) is 2 startindex is 431 X is 431
S 3 len(log) is 2 startindex is 431 X is 431
S 4 len(log) is 5 startindex is 428 X is 428
S 1 len(log) is 2 startindex is 431 X is 431
S 2 len(log) is 11 startindex is 422 X is 422
S 3 len(log) is 2 startindex is 431 X is 431
S 0 len(log) is 2 startindex is 431 X is 431
S 4 len(log) is 5 startindex is 428 X is 428
S 2 len(log) is 11 startindex is 422 X is 422
S 1 len(log) is 2 startindex is 431 X is 431
S 0 len(log) is 2 startindex is 431 X is 431
S 3 len(log) is 2 startindex is 431 X is 431
S 4 len(log) is 5 startindex is 428 X is 428
S 2 len(log) is 11 startindex is 422 X is 422
S 1 len(log) is 2 startindex is 431 X is 431
S 3 len(log) is 2 startindex is 431 X is 431
S 0 len(log) is 2 startindex is 431 X is 431
S 4 len(log) is 5 startindex is 428 X is 428
078637 LEAD S3 app -> 0 next(2) index(1) neT(22) cT(22)
078641 PERS S3 Persist len(data) is 329 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }}]]
078642 LEAD S3 app -> 1 next(2) index(1) neT(22) cT(22)
078643 LEAD S3 app -> 4 next(2) index(1) neT(22) cT(22)
078644 LEAD S3 app -> 2 next(2) index(1) neT(22) cT(22)
S 2 len(log) is 11 startindex is 422 X is 422
S 1 len(log) is 2 startindex is 431 X is 431
078661 LEAD S2  heart <- 3 T(22) cT(22)
078662 CMIT S2 update commit(432)
078666 LOG1 S3 -> 2 app fail
078670 PERS S2 Persist len(data) is 732 the log[[{422 22 {4 39 3 Get 2 }} {423 22 {3 40 3 Get 0 }} {424 22 {-1 -1 3 TIMEOUT  }} {425 22 {-1 -1 3 TIMEOUT  }} {426 22 {-1 -1 3 TIMEOUT  }} {427 22 {-1 -1 3 TIMEOUT  }} {428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }}]]
078673 LEAD S0  heart <- 3 T(22) cT(22)
078674 CMIT S0 update commit(432)
078676 PERS S2 Persist len(data) is 732 the log[[{422 22 {4 39 3 Get 2 }} {423 22 {3 40 3 Get 0 }} {424 22 {-1 -1 3 TIMEOUT  }} {425 22 {-1 -1 3 TIMEOUT  }} {426 22 {-1 -1 3 TIMEOUT  }} {427 22 {-1 -1 3 TIMEOUT  }} {428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }}]]
078680 LOG1 S3 mathindex[0] from 1 to 1
078681 LOG1 S3 update nextindex[0](2) to 2 success
078681 LOG1 S3 index(1) matchindex([1 1 12 1 1])
078681 LOG1 S3 successnum(5) com-rf.X(1) rf.CT(22) t(22)
072972 SNAP S4 the num is (459) applidindex(431) X(428)
078682 PERS S0 Persist len(data) is 329 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }}]]
072975 SNAP S3 the num is (329) applidindex(432) X(431)
078685 PERS S0 Persist len(data) is 329 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }}]]
S 0 len(log) is 2 startindex is 431 X is 431
S 3 len(log) is 2 startindex is 431 X is 431
072988 SNAP S1 the num is (329) applidindex(431) X(431)
078697 LOG1 S0 lastapp lognode = {true {-1 -1 3 TIMEOUT  } 432 false [] 0 0}
072988 SNAP S0 the num is (329) applidindex(431) X(431)
S 0 applied {true {-1 -1 3 TIMEOUT  } 432 false [] 0 0}
072989 LOG1 S0 TTT CommandValid(true) applyindex(431) CommandIndex(432) TIMEOUT key() value() CDM[C-1](0) M(-1) from(3)
072990 LOG1 S0 for TIMEOUT update applyindex 431 to 432
078701 PERS S0 Persist len(data) is 329 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }}]]
072999 SNAP S2 the num is (732) applidindex(431) X(422)
S 4 len(log) is 5 startindex is 428 X is 428
078731 LOG1 S3 have log {433 22 {-1 -1 3 TIMEOUT  }}
078734 PERS S3 Persist len(data) is 372 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
078737 LEAD S3 app -> 0 next(2) index(2) neT(22) cT(22)
078738 LEAD S3 app -> 2 next(2) index(2) neT(22) cT(22)
078739 LEAD S3 app -> 1 next(2) index(2) neT(22) cT(22)
078740 LEAD S3 app -> 4 next(2) index(2) neT(22) cT(22)
S 1 len(log) is 2 startindex is 431 X is 431
S 2 len(log) is 11 startindex is 422 X is 422
078759 LOG1 S2 lastapp lognode = {true {-1 -1 3 TIMEOUT  } 432 false [] 0 0}
S 2 applied {true {-1 -1 3 TIMEOUT  } 432 false [] 0 0}
073050 LOG1 S2 TTT CommandValid(true) applyindex(431) CommandIndex(432) TIMEOUT key() value() CDM[C-1](0) M(-1) from(3)
073050 LOG1 S2 for TIMEOUT update applyindex 431 to 432
078763 PERS S2 Persist len(data) is 732 the log[[{422 22 {4 39 3 Get 2 }} {423 22 {3 40 3 Get 0 }} {424 22 {-1 -1 3 TIMEOUT  }} {425 22 {-1 -1 3 TIMEOUT  }} {426 22 {-1 -1 3 TIMEOUT  }} {427 22 {-1 -1 3 TIMEOUT  }} {428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }}]]
078786 LEAD S2  app <- 3 T(22) cT(22)
078786 LOG1 S2 B success + log([{433 22 {-1 -1 3 TIMEOUT  }}])
078790 LOG1 S3 mathindex[2] from 12 to 2
078790 LOG1 S3 update nextindex[2](2) to 3 success
078791 LOG1 S3 index(2) matchindex([1 1 2 2 1])
078791 LOG1 S3 successnum(2) com-rf.X(1) rf.CT(22) t(22)
078791 LEAD S1  heart <- 3 T(22) cT(22)
078791 PERS S2 Persist len(data) is 775 the log[[{422 22 {4 39 3 Get 2 }} {423 22 {3 40 3 Get 0 }} {424 22 {-1 -1 3 TIMEOUT  }} {425 22 {-1 -1 3 TIMEOUT  }} {426 22 {-1 -1 3 TIMEOUT  }} {427 22 {-1 -1 3 TIMEOUT  }} {428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
078794 CMIT S1 update commit(432)
078794 PERS S2 Persist len(data) is 775 the log[[{422 22 {4 39 3 Get 2 }} {423 22 {3 40 3 Get 0 }} {424 22 {-1 -1 3 TIMEOUT  }} {425 22 {-1 -1 3 TIMEOUT  }} {426 22 {-1 -1 3 TIMEOUT  }} {427 22 {-1 -1 3 TIMEOUT  }} {428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
078797 PERS S1 Persist len(data) is 329 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }}]]
078798 LOG1 S3 mathindex[1] from 1 to 1
078798 LOG1 S3 update nextindex[1](2) to 2 success
078798 LOG1 S3 index(1) matchindex([1 1 2 2 1])
078799 LOG1 S3 successnum(5) com-rf.X(1) rf.CT(22) t(22)
S 3 len(log) is 3 startindex is 431 X is 431
S 0 len(log) is 2 startindex is 431 X is 431
078799 PERS S1 Persist len(data) is 329 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }}]]
078800 LEAD S1  app <- 3 T(22) cT(22)
078801 LOG1 S1 B success + log([{433 22 {-1 -1 3 TIMEOUT  }}])
078805 PERS S1 Persist len(data) is 372 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
078807 LOG1 S3 mathindex[1] from 1 to 2
078807 LOG1 S3 update nextindex[1](2) to 3 success
078807 LOG1 S3 index(2) matchindex([1 2 2 2 1])
078807 LOG1 S3 successnum(3) com-rf.X(1) rf.CT(22) t(22)
078808 LOG1 S3 sum(3) ban(2)
078808 CMIT S3 new commit(2) and applied
078808 PERS S1 Persist len(data) is 372 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
S 4 len(log) is 5 startindex is 428 X is 428
078838 LEAD S4  heart <- 3 T(22) cT(22)
078839 CMIT S4 update commit(432)
078842 PERS S4 Persist len(data) is 459 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }}]]
078844 LOG1 S3 mathindex[4] from 1 to 1
078844 LOG1 S3 update nextindex[4](2) to 2 success
078844 LOG1 S3 index(1) matchindex([1 2 2 2 1])
078845 LOG1 S3 successnum(5) com-rf.X(2) rf.CT(22) t(22)
078845 PERS S4 Persist len(data) is 459 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }}]]
S 1 len(log) is 3 startindex is 431 X is 431
078868 LOG1 S1 lastapp lognode = {true {-1 -1 3 TIMEOUT  } 432 false [] 0 0}
S 1 applied {true {-1 -1 3 TIMEOUT  } 432 false [] 0 0}
S 2 len(log) is 12 startindex is 422 X is 422
073160 LOG1 S1 TTT CommandValid(true) applyindex(431) CommandIndex(432) TIMEOUT key() value() CDM[C-1](0) M(-1) from(3)
073160 LOG1 S1 for TIMEOUT update applyindex 431 to 432
078871 PERS S1 Persist len(data) is 372 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
078892 LEAD S0  app <- 3 T(22) cT(22)
078893 LOG1 S0 B success + log([{433 22 {-1 -1 3 TIMEOUT  }}])
078896 PERS S0 Persist len(data) is 372 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
078897 LOG1 S3 mathindex[0] from 1 to 2
078897 LOG1 S3 update nextindex[0](2) to 3 success
078897 LOG1 S3 index(2) matchindex([2 2 2 2 1])
078898 LOG1 S3 successnum(4) com-rf.X(2) rf.CT(22) t(22)
078899 PERS S0 Persist len(data) is 372 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
S 3 len(log) is 3 startindex is 431 X is 431
S 0 len(log) is 3 startindex is 431 X is 431
078900 LOG1 S3 lastapp lognode = {true {-1 -1 3 TIMEOUT  } 433 false [] 0 0}
S 3 applied {true {-1 -1 3 TIMEOUT  } 433 false [] 0 0}
073191 LOG1 S3 TTT CommandValid(true) applyindex(432) CommandIndex(433) TIMEOUT key() value() CDM[C-1](0) M(-1) from(3)
073191 LOG1 S3 for TIMEOUT update applyindex 432 to 433
073191 SNAP S3 the cmd had achieve 12
078903 PERS S3 Persist len(data) is 372 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
073194 SNAP S3 the num is (372) applidindex(433) X(431)
S 4 len(log) is 5 startindex is 428 X is 428
078911 LOG1 S4 lastapp lognode = {true {-1 -1 3 TIMEOUT  } 432 false [] 0 0}
S 4 applied {true {-1 -1 3 TIMEOUT  } 432 false [] 0 0}
073202 LOG1 S4 TTT CommandValid(true) applyindex(431) CommandIndex(432) TIMEOUT key() value() CDM[C-1](0) M(-1) from(3)
073203 LOG1 S4 for TIMEOUT update applyindex 431 to 432
078915 PERS S4 Persist len(data) is 459 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }}]]
S 2 len(log) is 12 startindex is 422 X is 422
S 1 len(log) is 3 startindex is 431 X is 431
078978 LEAD S4  app <- 3 T(22) cT(22)
078979 LOG1 S4 B success + log([{433 22 {-1 -1 3 TIMEOUT  }}])
078986 LOG1 S3 mathindex[4] from 1 to 2
078987 PERS S4 Persist len(data) is 502 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
078989 LOG1 S3 update nextindex[4](2) to 3 success
078990 LOG1 S3 index(2) matchindex([2 2 2 2 2])
078990 LOG1 S3 successnum(5) com-rf.X(2) rf.CT(22) t(22)
078992 PERS S4 Persist len(data) is 502 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
S 0 len(log) is 3 startindex is 431 X is 431
S 3 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
S 1 len(log) is 3 startindex is 431 X is 431
S 2 len(log) is 12 startindex is 422 X is 422
S 0 len(log) is 3 startindex is 431 X is 431
S 3 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
S 2 len(log) is 12 startindex is 422 X is 422
S 1 len(log) is 3 startindex is 431 X is 431
S 0 len(log) is 3 startindex is 431 X is 431
S 3 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
S 1 len(log) is 3 startindex is 431 X is 431
S 2 len(log) is 12 startindex is 422 X is 422
S 3 len(log) is 3 startindex is 431 X is 431
S 0 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
S 1 len(log) is 3 startindex is 431 X is 431
S 2 len(log) is 12 startindex is 422 X is 422
S 3 len(log) is 3 startindex is 431 X is 431
S 0 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
S 2 len(log) is 12 startindex is 422 X is 422
S 1 len(log) is 3 startindex is 431 X is 431
S 0 len(log) is 3 startindex is 431 X is 431
S 3 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
S 1 len(log) is 3 startindex is 431 X is 431
S 2 len(log) is 12 startindex is 422 X is 422
S 3 len(log) is 3 startindex is 431 X is 431
S 0 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
073981 SNAP S4 the num is (502) applidindex(432) X(428)
073982 SNAP S3 the num is (372) applidindex(433) X(431)
073992 SNAP S0 the num is (372) applidindex(432) X(431)
073993 SNAP S1 the num is (372) applidindex(432) X(431)
074003 SNAP S2 the num is (775) applidindex(432) X(422)
084013 SNAP S0 ????????? update applyindex to 0
000009 LOG1 S0 ??? Term = 22 votefor(-1) read len(data)372) log= ([{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}])
000012 LOG2 S0 i = 1 MMMMMMMMMMMMMMMM
S 0 len(log) is 3 startindex is 0 X is 431
000014 LOG2 S0 snapshot to applymsg lastindex(431)
S 0 the snapshot send to applych lastindex 431
000017 TEST S0 this server start now max(800) sizeof(Op) is 72 the raft size is 372
000022 SNAP S0 the num is (372) applidindex(0) X(431)
000024 SNAP S0 the snapshot applied
000029 SNAP S1 ????????? update applyindex to 0
000000 LOG2 S1 i = 1 MMMMMMMMMMMMMMMM
S 1 len(log) is 1 startindex is 0 X is 0
000006 SNAP S0 recover by SnapShot update applyindex(0) to 431 the kvs is map[0:x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 y 1:x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 y 2:x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 yx 2 16 yx 2 18 y 3:x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y 4:x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 yx 4 15 yx 4 16 yx 4 17 yx 4 18 y]
000009 LOG1 S1 ??? Term = 22 votefor(-1) read len(data)372) log= ([{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}])
000016 TEST S1 this server start now max(800) sizeof(Op) is 72 the raft size is 372
000019 SNAP S1 the num is (372) applidindex(0) X(431)
000025 SNAP S2 ????????? update applyindex to 0
000011 LOG1 S2 ??? Term = 22 votefor(3) read len(data)775) log= ([{422 22 {4 39 3 Get 2 }} {423 22 {3 40 3 Get 0 }} {424 22 {-1 -1 3 TIMEOUT  }} {425 22 {-1 -1 3 TIMEOUT  }} {426 22 {-1 -1 3 TIMEOUT  }} {427 22 {-1 -1 3 TIMEOUT  }} {428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}])
000016 LOG2 S2 i = 1 MMMMMMMMMMMMMMMM
S 2 len(log) is 12 startindex is 0 X is 422
000019 LOG2 S2 snapshot to applymsg lastindex(422)
S 2 the snapshot send to applych lastindex 422
000023 TEST S2 this server start now max(800) sizeof(Op) is 72 the raft size is 775
000028 SNAP S2 the num is (775) applidindex(0) X(422)
000030 SNAP S2 the snapshot applied
000036 SNAP S3 ????????? update applyindex to 0
000008 SNAP S2 recover by SnapShot update applyindex(0) to 422 the kvs is map[0:x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 y 1:x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 y 2:x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 yx 2 16 yx 2 18 y 3:x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y 4:x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 yx 4 15 yx 4 16 yx 4 17 yx 4 18 y]
000010 LOG1 S3 ??? Term = 22 votefor(3) read len(data)372) log= ([{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}])
000018 TEST S3 this server start now max(800) sizeof(Op) is 72 the raft size is 372
000019 LOG2 S3 i = 1 MMMMMMMMMMMMMMMM
S 3 len(log) is 3 startindex is 0 X is 431
000021 LOG2 S3 snapshot to applymsg lastindex(431)
S 3 the snapshot send to applych lastindex 431
000025 SNAP S3 the num is (372) applidindex(0) X(431)
000027 SNAP S3 the snapshot applied
000028 SNAP S4 ????????? update applyindex to 0
000007 SNAP S3 recover by SnapShot update applyindex(0) to 431 the kvs is map[0:x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 y 1:x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 y 2:x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 yx 2 16 yx 2 18 y 3:x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y 4:x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 yx 4 15 yx 4 16 yx 4 17 yx 4 18 y]
S 0 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 0 X is 431
000009 LOG2 S1 snapshot to applymsg lastindex(431)
S 1 the snapshot send to applych lastindex 431
000014 SNAP S1 the snapshot applied
000012 LOG1 S4 ??? Term = 22 votefor(3) read len(data)502) log= ([{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}])
000021 TEST S4 this server start now max(800) sizeof(Op) is 72 the raft size is 502
000026 SNAP S1 recover by SnapShot update applyindex(0) to 431 the kvs is map[0:x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 y 1:x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 y 2:x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 yx 2 16 yx 2 18 y 3:x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y 4:x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 yx 4 15 yx 4 16 yx 4 17 yx 4 18 y]
000029 SNAP S4 the num is (502) applidindex(0) X(428)
000028 LOG2 S4 i = 1 MMMMMMMMMMMMMMMM
S 4 len(log) is 6 startindex is 0 X is 428
000029 LOG2 S4 snapshot to applymsg lastindex(428)
000032 CLNT C5 Get key(0)
S 4 the snapshot send to applych lastindex 428
000033 CLNT C5 cmd_index(5)1
000034 CLNT C5 cmd_index(6)2
000035 CLNT C5 send to S3 Get key(0) Cindex(5) OIndex(6) test(1)
000037 SNAP S4 the snapshot applied
000050 SNAP S4 recover by SnapShot update applyindex(0) to 428 the kvs is map[0:x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 y 1:x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 y 2:x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 yx 2 16 yx 2 18 y 3:x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y 4:x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 yx 4 15 yx 4 16 yx 4 17 yx 4 18 y]
S 2 len(log) is 12 startindex is 422 X is 422
S 3 len(log) is 3 startindex is 431 X is 431
S 0 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
S 2 len(log) is 12 startindex is 422 X is 422
S 3 len(log) is 3 startindex is 431 X is 431
S 0 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
S 2 len(log) is 12 startindex is 422 X is 422
S 0 len(log) is 3 startindex is 431 X is 431
S 3 len(log) is 3 startindex is 431 X is 431
000323 LEAD S1 <-- C5 Get key(0) test1
S 1 len(log) is 3 startindex is 431 X is 431
000334 CLNT C5 ok(true) ERR(ErrWrongLeader) from S3 in test1
000335 CLNT C5 Get fail key(0) value() from(S3)
000336 CLNT C5 send to S4 Get key(0) Cindex(5) OIndex(6) test(2)
S 4 len(log) is 6 startindex is 428 X is 428
S 2 len(log) is 12 startindex is 422 X is 422
S 0 len(log) is 3 startindex is 431 X is 431
S 3 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
000481 LEAD S2 <-- C5 Get key(0) test2
000491 CLNT C5 ok(true) ERR(ErrWrongLeader) from S4 in test2
000494 CLNT C5 Get fail key(0) value() from(S4)
S 2 len(log) is 12 startindex is 422 X is 422
000495 CLNT C5 send to S0 Get key(0) Cindex(5) OIndex(6) test(3)
S 3 len(log) is 3 startindex is 431 X is 431
S 0 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
000570 LEAD S3 <-- C5 Get key(0) test3
000580 CLNT C5 ok(true) ERR(ErrWrongLeader) from S0 in test3
000581 CLNT C5 Get fail key(0) value() from(S0)
000582 CLNT C5 send to S1 Get key(0) Cindex(5) OIndex(6) test(4)
S 2 len(log) is 12 startindex is 422 X is 422
S 3 len(log) is 3 startindex is 431 X is 431
S 0 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
000673 LEAD S4 <-- C5 Get key(0) test4
000686 CLNT C5 ok(true) ERR(ErrWrongLeader) from S1 in test4
000687 CLNT C5 Get fail key(0) value() from(S1)
000688 CLNT C5 send to S2 Get key(0) Cindex(5) OIndex(6) test(5)
S 2 len(log) is 12 startindex is 422 X is 422
S 3 len(log) is 3 startindex is 431 X is 431
S 0 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
S 2 len(log) is 12 startindex is 422 X is 422
000844 LEAD S0 <-- C5 Get key(0) test5
S 3 len(log) is 3 startindex is 431 X is 431
S 0 len(log) is 3 startindex is 431 X is 431
000853 CLNT C5 ok(true) ERR(ErrWrongLeader) from S2 in test5
000854 CLNT C5 Get fail key(0) value() from(S2)
000855 CLNT C5 send to S3 Get key(0) Cindex(5) OIndex(6) test(6)
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
000910 SNAP S0 the num is (372) applidindex(431) X(431)
S 2 len(log) is 12 startindex is 422 X is 422
000936 SNAP S1 the num is (372) applidindex(431) X(431)
S 3 len(log) is 3 startindex is 431 X is 431
S 0 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
000971 SNAP S2 the num is (775) applidindex(422) X(422)
000983 LEAD S1 <-- C5 Get key(0) test6
000994 CLNT C5 ok(true) ERR(ErrWrongLeader) from S3 in test6
000995 CLNT C5 Get fail key(0) value() from(S3)
000996 CLNT C5 send to S4 Get key(0) Cindex(5) OIndex(6) test(7)
001003 SNAP S3 the num is (372) applidindex(431) X(431)
S 4 len(log) is 6 startindex is 428 X is 428
S 2 len(log) is 12 startindex is 422 X is 422
001039 SNAP S4 the num is (502) applidindex(428) X(428)
S 0 len(log) is 3 startindex is 431 X is 431
S 3 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
S 2 len(log) is 12 startindex is 422 X is 422
001149 LEAD S2 <-- C5 Get key(0) test7
001162 CLNT C5 ok(true) ERR(ErrWrongLeader) from S4 in test7
S 0 len(log) is 3 startindex is 431 X is 431
001163 CLNT C5 Get fail key(0) value() from(S4)
S 3 len(log) is 3 startindex is 431 X is 431
001164 CLNT C5 send to S0 Get key(0) Cindex(5) OIndex(6) test(8)
S 1 len(log) is 3 startindex is 431 X is 431
001213 LEAD S3 <-- C5 Get key(0) test8
S 4 len(log) is 6 startindex is 428 X is 428
001224 CLNT C5 ok(true) ERR(ErrWrongLeader) from S0 in test8
001225 CLNT C5 Get fail key(0) value() from(S0)
001226 CLNT C5 send to S1 Get key(0) Cindex(5) OIndex(6) test(9)
S 2 len(log) is 12 startindex is 422 X is 422
S 3 len(log) is 3 startindex is 431 X is 431
S 0 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
S 2 len(log) is 12 startindex is 422 X is 422
S 0 len(log) is 3 startindex is 431 X is 431
S 3 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
S 2 len(log) is 12 startindex is 422 X is 422
001473 LEAD S4 <-- C5 Get key(0) test9
001484 CLNT C5 ok(true) ERR(ErrWrongLeader) from S1 in test9
S 0 len(log) is 3 startindex is 431 X is 431
001486 CLNT C5 Get fail key(0) value() from(S1)
S 3 len(log) is 3 startindex is 431 X is 431
001488 CLNT C5 send to S2 Get key(0) Cindex(5) OIndex(6) test(10)
001509 CLNT C5 ok(false) ERR() from S2 in test10
001510 CLNT C5 ERROR Get Key(0) from(S2)
001510 CLNT C5 send to S3 Get key(0) Cindex(5) OIndex(6) test(11)
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
S 2 len(log) is 12 startindex is 422 X is 422
S 3 len(log) is 3 startindex is 431 X is 431
S 0 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
S 2 len(log) is 12 startindex is 422 X is 422
S 3 len(log) is 3 startindex is 431 X is 431
S 0 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
001777 LEAD S1 <-- C5 Get key(0) test11
001783 CLNT C5 ok(true) ERR(ErrWrongLeader) from S3 in test11
001784 CLNT C5 Get fail key(0) value() from(S3)
001785 CLNT C5 send to S4 Get key(0) Cindex(5) OIndex(6) test(12)
S 2 len(log) is 12 startindex is 422 X is 422
S 3 len(log) is 3 startindex is 431 X is 431
S 0 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
S 3 len(log) is 3 startindex is 431 X is 431
S 2 len(log) is 12 startindex is 422 X is 422
001915 SNAP S0 the num is (372) applidindex(431) X(431)
S 0 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
001960 SNAP S1 the num is (372) applidindex(431) X(431)
001965 LEAD S2 <-- C5 Get key(0) test12
S 4 len(log) is 6 startindex is 428 X is 428
001972 CLNT C5 ok(true) ERR(ErrWrongLeader) from S4 in test12
001973 CLNT C5 Get fail key(0) value() from(S4)
001973 CLNT C5 send to S0 Get key(0) Cindex(5) OIndex(6) test(13)
001975 SNAP S2 the num is (775) applidindex(422) X(422)
001983 LEAD S3 <-- C5 Get key(0) test13
001991 CLNT C5 ok(true) ERR(ErrWrongLeader) from S0 in test13
001992 CLNT C5 Get fail key(0) value() from(S0)
001992 CLNT C5 send to S1 Get key(0) Cindex(5) OIndex(6) test(14)
S 3 len(log) is 3 startindex is 431 X is 431
S 2 len(log) is 12 startindex is 422 X is 422
002014 SNAP S3 the num is (372) applidindex(431) X(431)
S 0 len(log) is 3 startindex is 431 X is 431
002049 SNAP S4 the num is (502) applidindex(428) X(428)
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
S 2 len(log) is 12 startindex is 422 X is 422
S 3 len(log) is 3 startindex is 431 X is 431
002124 LEAD S4 <-- C5 Get key(0) test14
002129 CLNT C5 ok(true) ERR(ErrWrongLeader) from S1 in test14
002130 CLNT C5 Get fail key(0) value() from(S1)
002131 CLNT C5 send to S2 Get key(0) Cindex(5) OIndex(6) test(15)
S 0 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
S 3 len(log) is 3 startindex is 431 X is 431
S 2 len(log) is 12 startindex is 422 X is 422
S 0 len(log) is 3 startindex is 431 X is 431
002249 LEAD S0 <-- C5 Get key(0) test15
S 1 len(log) is 3 startindex is 431 X is 431
002267 CLNT C5 ok(true) ERR(ErrWrongLeader) from S2 in test15
002268 CLNT C5 Get fail key(0) value() from(S2)
002269 CLNT C5 send to S3 Get key(0) Cindex(5) OIndex(6) test(16)
S 4 len(log) is 6 startindex is 428 X is 428
002329 LEAD S1 <-- C5 Get key(0) test16
S 2 len(log) is 12 startindex is 422 X is 422
S 3 len(log) is 3 startindex is 431 X is 431
002337 CLNT C5 ok(true) ERR(ErrWrongLeader) from S3 in test16
002338 CLNT C5 Get fail key(0) value() from(S3)
002339 CLNT C5 send to S4 Get key(0) Cindex(5) OIndex(6) test(17)
S 0 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
S 2 len(log) is 12 startindex is 422 X is 422
S 3 len(log) is 3 startindex is 431 X is 431
S 0 len(log) is 3 startindex is 431 X is 431
002459 LEAD S2 <-- C5 Get key(0) test17
S 1 len(log) is 3 startindex is 431 X is 431
002467 CLNT C5 ok(true) ERR(ErrWrongLeader) from S4 in test17
002469 CLNT C5 Get fail key(0) value() from(S4)
002470 CLNT C5 send to S0 Get key(0) Cindex(5) OIndex(6) test(18)
S 4 len(log) is 6 startindex is 428 X is 428
S 2 len(log) is 12 startindex is 422 X is 422
S 3 len(log) is 3 startindex is 431 X is 431
S 0 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
S 3 len(log) is 3 startindex is 431 X is 431
S 2 len(log) is 12 startindex is 422 X is 422
S 0 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
002749 LEAD S3 <-- C5 Get key(0) test18
S 3 len(log) is 3 startindex is 431 X is 431
S 2 len(log) is 12 startindex is 422 X is 422
002758 CLNT C5 ok(true) ERR(ErrWrongLeader) from S0 in test18
002759 CLNT C5 Get fail key(0) value() from(S0)
002759 CLNT C5 send to S1 Get key(0) Cindex(5) OIndex(6) test(19)
S 0 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
S 3 len(log) is 3 startindex is 431 X is 431
S 2 len(log) is 12 startindex is 422 X is 422
S 0 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
002918 SNAP S0 the num is (372) applidindex(431) X(431)
002947 LEAD S4 <-- C5 Get key(0) test19
002953 CLNT C5 ok(true) ERR(ErrWrongLeader) from S1 in test19
002953 CLNT C5 Get fail key(0) value() from(S1)
002954 CLNT C5 send to S2 Get key(0) Cindex(5) OIndex(6) test(20)
S 3 len(log) is 3 startindex is 431 X is 431
S 2 len(log) is 12 startindex is 422 X is 422
002962 SNAP S1 the num is (372) applidindex(431) X(431)
S 0 len(log) is 3 startindex is 431 X is 431
002985 SNAP S2 the num is (775) applidindex(422) X(422)
S 1 len(log) is 3 startindex is 431 X is 431
003028 SNAP S3 the num is (372) applidindex(431) X(431)
S 4 len(log) is 6 startindex is 428 X is 428
003053 SNAP S4 the num is (502) applidindex(428) X(428)
S 2 len(log) is 12 startindex is 422 X is 422
S 3 len(log) is 3 startindex is 431 X is 431
S 0 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
S 2 len(log) is 12 startindex is 422 X is 422
S 3 len(log) is 3 startindex is 431 X is 431
S 0 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
003213 LEAD S0 <-- C5 Get key(0) test20
003218 CLNT C5 ok(true) ERR(ErrWrongLeader) from S2 in test20
003219 CLNT C5 Get fail key(0) value() from(S2)
003219 CLNT C5 send to S3 Get key(0) Cindex(5) OIndex(6) test(21)
S 4 len(log) is 6 startindex is 428 X is 428
S 2 len(log) is 12 startindex is 422 X is 422
S 3 len(log) is 3 startindex is 431 X is 431
S 0 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
003361 LEAD S1 <-- C5 Get key(0) test21
003370 CLNT C5 ok(true) ERR(ErrWrongLeader) from S3 in test21
003371 CLNT C5 Get fail key(0) value() from(S3)
003372 CLNT C5 send to S4 Get key(0) Cindex(5) OIndex(6) test(22)
S 2 len(log) is 12 startindex is 422 X is 422
S 0 len(log) is 3 startindex is 431 X is 431
S 3 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
003449 LEAD S2 <-- C5 Get key(0) test22
003456 CLNT C5 ok(true) ERR(ErrWrongLeader) from S4 in test22
003457 CLNT C5 Get fail key(0) value() from(S4)
003458 CLNT C5 send to S0 Get key(0) Cindex(5) OIndex(6) test(23)
S 4 len(log) is 6 startindex is 428 X is 428
003467 LEAD S3 <-- C5 Get key(0) test23
003474 CLNT C5 ok(true) ERR(ErrWrongLeader) from S0 in test23
003475 CLNT C5 Get fail key(0) value() from(S0)
003475 CLNT C5 send to S1 Get key(0) Cindex(5) OIndex(6) test(24)
S 2 len(log) is 12 startindex is 422 X is 422
S 3 len(log) is 3 startindex is 431 X is 431
S 0 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
003577 LEAD S4 <-- C5 Get key(0) test24
003587 CLNT C5 ok(true) ERR(ErrWrongLeader) from S1 in test24
003588 CLNT C5 Get fail key(0) value() from(S1)
003589 CLNT C5 send to S2 Get key(0) Cindex(5) OIndex(6) test(25)
S 2 len(log) is 12 startindex is 422 X is 422
S 0 len(log) is 3 startindex is 431 X is 431
S 3 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
S 2 len(log) is 12 startindex is 422 X is 422
S 0 len(log) is 3 startindex is 431 X is 431
S 3 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
003793 LEAD S0 <-- C5 Get key(0) test25
003802 CLNT C5 ok(true) ERR(ErrWrongLeader) from S2 in test25
003803 CLNT C5 Get fail key(0) value() from(S2)
003804 CLNT C5 send to S3 Get key(0) Cindex(5) OIndex(6) test(26)
S 2 len(log) is 12 startindex is 422 X is 422
S 0 len(log) is 3 startindex is 431 X is 431
S 3 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
003908 LEAD S1 <-- C5 Get key(0) test26
S 2 len(log) is 12 startindex is 422 X is 422
003914 CLNT C5 ok(true) ERR(ErrWrongLeader) from S3 in test26
003915 CLNT C5 Get fail key(0) value() from(S3)
003915 CLNT C5 send to S4 Get key(0) Cindex(5) OIndex(6) test(27)
003924 SNAP S0 the num is (372) applidindex(431) X(431)
S 0 len(log) is 3 startindex is 431 X is 431
S 3 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
003969 SNAP S1 the num is (372) applidindex(431) X(431)
003990 SNAP S2 the num is (775) applidindex(422) X(422)
S 4 len(log) is 6 startindex is 428 X is 428
S 2 len(log) is 12 startindex is 422 X is 422
004035 SNAP S3 the num is (372) applidindex(431) X(431)
S 3 len(log) is 3 startindex is 431 X is 431
S 0 len(log) is 3 startindex is 431 X is 431
004058 SNAP S4 the num is (502) applidindex(428) X(428)
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
S 2 len(log) is 12 startindex is 422 X is 422
004136 LEAD S2 <-- C5 Get key(0) test27
004140 CLNT C5 ok(false) ERR() from S4 in test27
004140 CLNT C5 ERROR Get Key(0) from(S4)
004141 CLNT C5 send to S0 Get key(0) Cindex(5) OIndex(6) test(28)
S 3 len(log) is 3 startindex is 431 X is 431
S 0 len(log) is 3 startindex is 431 X is 431
004162 LEAD S3 <-- C5 Get key(0) test28
004169 CLNT C5 ok(true) ERR(ErrWrongLeader) from S0 in test28
004170 CLNT C5 Get fail key(0) value() from(S0)
004170 CLNT C5 send to S1 Get key(0) Cindex(5) OIndex(6) test(29)
S 1 len(log) is 3 startindex is 431 X is 431
004193 LEAD S4 <-- C5 Get key(0) test29
004199 CLNT C5 ok(true) ERR(ErrWrongLeader) from S1 in test29
004200 CLNT C5 Get fail key(0) value() from(S1)
004200 CLNT C5 send to S2 Get key(0) Cindex(5) OIndex(6) test(30)
S 4 len(log) is 6 startindex is 428 X is 428
S 2 len(log) is 12 startindex is 422 X is 422
004230 PERS S4 Persist len(data) is 502 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
004232 VOTE S4  vote vf(4) to own
004235 VOTE S4  vote -> 0 cT(23)
004239 VOTE S4  vote -> 2 cT(23)
004240 VOTE S4  vote -> 1 cT(23)
004243 VOTE S4  vote -> 3 cT(23)
S 0 len(log) is 3 startindex is 431 X is 431
S 3 len(log) is 3 startindex is 431 X is 431
004275 LEAD S0 <-- C5 Get key(0) test30
004283 CLNT C5 ok(true) ERR(ErrWrongLeader) from S2 in test30
004284 CLNT C5 Get fail key(0) value() from(S2)
004284 CLNT C5 send to S3 Get key(0) Cindex(5) OIndex(6) test(31)
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
004314 VOTE S3  vote <- 4 T(22) = LastlogT(22) logi(2) lastlogindex(433)
004315 VOTE S2  vote <- 4 T(22) = LastlogT(22) logi(11) lastlogindex(433)
004321 PERS S3 Persist len(data) is 372 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
004326 PERS S2 Persist len(data) is 775 the log[[{422 22 {4 39 3 Get 2 }} {423 22 {3 40 3 Get 0 }} {424 22 {-1 -1 3 TIMEOUT  }} {425 22 {-1 -1 3 TIMEOUT  }} {426 22 {-1 -1 3 TIMEOUT  }} {427 22 {-1 -1 3 TIMEOUT  }} {428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
004333 PERS S3 Persist len(data) is 372 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
004336 VOTE S0  vote vf(0) to own
004337 VOTE S4  have 3 votes T(23) cT(23) 2 B
004338 LOG1 S4 update nextindex[2](1) to 6 (len(log))
004338 LOG1 S4 update nextindex[2](1) to 6 (len(log))
004339 LOG1 S4 update nextindex[2](1) to 6 (len(log))
004340 LOG1 S4 update nextindex[2](6) to 6 (len(log))
004340 LOG1 S4 update nextindex[2](6) to 6 (len(log))
004343 LEAD S4  be Leader B
S 2 len(log) is 12 startindex is 422 X is 422
004344 PERS S2 Persist len(data) is 775 the log[[{422 22 {4 39 3 Get 2 }} {423 22 {3 40 3 Get 0 }} {424 22 {-1 -1 3 TIMEOUT  }} {425 22 {-1 -1 3 TIMEOUT  }} {426 22 {-1 -1 3 TIMEOUT  }} {427 22 {-1 -1 3 TIMEOUT  }} {428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
004351 PERS S0 Persist len(data) is 370 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
004354 PERS S4 Persist len(data) is 502 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
004358 LEAD S4 appendentries error to exit because tindex or loglen changed
004359 LEAD S4 app -> 3 next(6) index(5) neT(22) cT(23)
004360 VOTE S0  vote -> 2 cT(23)
S 3 len(log) is 3 startindex is 431 X is 431
004363 VOTE S0  vote -> 1 cT(23)
S 0 len(log) is 3 startindex is 431 X is 431
004365 VOTE S0  vote -> 3 cT(23)
004367 PERS S4 Persist len(data) is 502 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
004371 VOTE S0  vote -> 4 cT(23)
004372 LEAD S4 app -> 1 next(6) index(5) neT(22) cT(23)
004373 LEAD S4 app -> 0 next(6) index(5) neT(22) cT(23)
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
004449 LEAD S1  heart <- 4 T(23) cT(22)
S 2 len(log) is 12 startindex is 422 X is 422
004451 LOG1 S1 be follower
004460 VOTE S0  vote <- 4 not T(23) = cT(23) vf(0)
004465 LOG1 S4 mathindex[1] from 0 to 5
004466 LOG1 S4 update nextindex[1](6) to 6 success
004466 LOG1 S4 index(5) matchindex([0 5 0 0 5])
004467 LOG1 S4 successnum(2) com-rf.X(0) rf.CT(23) t(22)
S 3 len(log) is 3 startindex is 431 X is 431
004487 CLNT C5 ok(false) ERR() from S3 in test31
004488 CLNT C5 ERROR Get Key(0) from(S3)
004485 VOTE S4  vote <- 0 not T(23) = cT(23) vf(4)
004486 PERS S1 Persist len(data) is 372 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
004488 CLNT C5 send to S4 Get key(0) Cindex(5) OIndex(6) test(32)
004494 PERS S0 Persist len(data) is 370 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
S 0 len(log) is 3 startindex is 431 X is 431
004498 VOTE S1  vote <- 4 T(22) = LastlogT(22) logi(2) lastlogindex(433)
S 1 len(log) is 3 startindex is 431 X is 431
004503 PERS S4 Persist len(data) is 502 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
004508 PERS S1 Persist len(data) is 372 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
004510 PERS S0 Persist len(data) is 370 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
004512 PERS S1 Persist len(data) is 372 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
S 4 len(log) is 6 startindex is 428 X is 428
004522 LEAD S3  heart <- 4 T(23) cT(23)
004524 LOG1 S3 be follower
004532 LOG1 S4 mathindex[3] from 0 to 5
004533 LOG1 S4 update nextindex[3](6) to 6 success
004534 LOG1 S4 index(5) matchindex([0 5 0 5 5])
004534 LOG1 S4 successnum(3) com-rf.X(0) rf.CT(23) t(22)
004535 PERS S3 Persist len(data) is 372 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
004538 PERS S3 Persist len(data) is 372 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
004540 VOTE S3  vote <- 0 not T(23) = cT(23) vf(4)
004548 PERS S3 Persist len(data) is 372 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
S 2 len(log) is 12 startindex is 422 X is 422
004555 PERS S0 Persist len(data) is 370 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
004557 VOTE S2  vote <- 0 not T(23) = cT(23) vf(4)
004569 PERS S2 Persist len(data) is 775 the log[[{422 22 {4 39 3 Get 2 }} {423 22 {3 40 3 Get 0 }} {424 22 {-1 -1 3 TIMEOUT  }} {425 22 {-1 -1 3 TIMEOUT  }} {426 22 {-1 -1 3 TIMEOUT  }} {427 22 {-1 -1 3 TIMEOUT  }} {428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
S 3 len(log) is 3 startindex is 431 X is 431
004573 PERS S0 Persist len(data) is 370 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
004593 VOTE S1  vote <- 0 not T(23) = cT(23) vf(4)
S 0 len(log) is 3 startindex is 431 X is 431
004603 PERS S1 Persist len(data) is 372 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
S 1 len(log) is 3 startindex is 431 X is 431
004608 PERS S0 Persist len(data) is 370 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
S 4 len(log) is 6 startindex is 428 X is 428
004654 LEAD S0  heart <- 4 T(23) cT(23)
S 2 len(log) is 12 startindex is 422 X is 422
S 3 len(log) is 3 startindex is 431 X is 431
004700 LOG1 S0 be follower
S 1 len(log) is 3 startindex is 431 X is 431
004716 LEAD S2 <-- C5 Get key(0) test32
004725 CLNT C5 ok(true) ERR(ErrWrongLeader) from S4 in test32
004726 CLNT C5 Get fail key(0) value() from(S4)
004727 CLNT C5 send to S0 Get key(0) Cindex(5) OIndex(6) test(33)
S 4 len(log) is 6 startindex is 428 X is 428
004737 PERS S0 Persist len(data) is 370 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
004740 LOG1 S4 mathindex[0] from 0 to 5
004741 LOG1 S4 update nextindex[0](6) to 6 success
004742 LOG1 S4 index(5) matchindex([5 5 0 5 5])
004743 LOG1 S4 successnum(4) com-rf.X(0) rf.CT(23) t(22)
S 0 len(log) is 3 startindex is 431 X is 431
004745 PERS S0 Persist len(data) is 370 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }}]]
S 2 len(log) is 12 startindex is 422 X is 422
S 3 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
S 4 len(log) is 6 startindex is 428 X is 428
S 0 len(log) is 3 startindex is 431 X is 431
S 2 len(log) is 12 startindex is 422 X is 422
S 3 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
004929 SNAP S0 the num is (370) applidindex(431) X(431)
S 4 len(log) is 6 startindex is 428 X is 428
S 0 len(log) is 3 startindex is 431 X is 431
004973 SNAP S1 the num is (372) applidindex(431) X(431)
S 2 len(log) is 12 startindex is 422 X is 422
004995 SNAP S2 the num is (775) applidindex(422) X(422)
005002 LEAD S3 <-- C5 Get key(0) test33
005008 CLNT C5 ok(true) ERR(ErrWrongLeader) from S0 in test33
005009 CLNT C5 Get fail key(0) value() from(S0)
005009 CLNT C5 send to S1 Get key(0) Cindex(5) OIndex(6) test(34)
S 3 len(log) is 3 startindex is 431 X is 431
S 1 len(log) is 3 startindex is 431 X is 431
005038 SNAP S3 the num is (372) applidindex(431) X(431)
S 4 len(log) is 6 startindex is 428 X is 428
005061 SNAP S4 the num is (502) applidindex(428) X(428)
S 0 len(log) is 3 startindex is 431 X is 431
005069 LOG1 S4 have log {434 23 {-1 -1 4 TIMEOUT  }}
005077 LEAD S4 <-- C5 Get key(0) test34
005077 PERS S4 Persist len(data) is 546 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }}]]
005080 LEAD S4 app -> 3 next(6) index(6) neT(22) cT(23)
S 2 len(log) is 12 startindex is 422 X is 422
005082 LEAD S4 app -> 0 next(6) index(6) neT(22) cT(23)
005087 LEAD S4 start Get key(0)
005085 LOG1 S4 have log {435 23 {5 6 4 Get 0 }}
005090 LEAD S4 have this log({5 6 4 Get 0 }) in raft
005091 LEAD S4 <-- C5 Get key(0) wait index(34) 435
005088 LEAD S4 appendentries error to exit because tindex or loglen changed
005089 LEAD S4 appendentries error to exit because tindex or loglen changed
005089 LEAD S4 app -> 0 next(6) index(7) neT(22) cT(23)
005095 PERS S4 Persist len(data) is 596 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }}]]
005097 LEAD S4 app -> 1 next(6) index(7) neT(22) cT(23)
005099 LEAD S4 app -> 2 next(6) index(7) neT(22) cT(23)
005100 LEAD S4 app -> 3 next(6) index(7) neT(22) cT(23)
S 3 len(log) is 3 startindex is 431 X is 431
005141 LEAD S1  app <- 4 T(23) cT(23)
005142 LOG1 S1 be follower
005142 LOG1 S1 B success + log([{434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }}])
005149 PERS S1 Persist len(data) is 466 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }}]]
S 1 len(log) is 5 startindex is 431 X is 431
005151 LOG1 S4 mathindex[1] from 5 to 7
005152 LOG1 S4 update nextindex[1](6) to 8 success
005153 LOG1 S4 index(7) matchindex([5 7 0 5 7])
005153 LOG1 S4 successnum(2) com-rf.X(0) rf.CT(23) t(23)
S 4 len(log) is 8 startindex is 428 X is 428
005155 PERS S1 Persist len(data) is 466 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }}]]
S 0 len(log) is 3 startindex is 431 X is 431
S 2 len(log) is 12 startindex is 422 X is 422
S 3 len(log) is 3 startindex is 431 X is 431
005235 LEAD S2  app <- 4 T(23) cT(23)
005236 LOG1 S2 be follower
005237 LOG1 S2 B success + log([{434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }}])
005238 CMIT S2 update commit(428)
005247 LOG1 S4 mathindex[2] from 0 to 7
005248 LOG1 S4 update nextindex[2](6) to 8 success
005248 LOG1 S4 index(7) matchindex([5 7 7 5 7])
005248 LOG1 S4 successnum(3) com-rf.X(0) rf.CT(23) t(23)
005249 LOG1 S4 sum(3) ban(2)
005249 CMIT S4 new commit(7) and applied
005250 LEAD S3  app <- 4 T(23) cT(23)
005251 LOG1 S3 B success + log([{434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }}])
S 1 len(log) is 5 startindex is 431 X is 431
S 4 len(log) is 8 startindex is 428 X is 428
005253 PERS S2 Persist len(data) is 868 the log[[{422 22 {4 39 3 Get 2 }} {423 22 {3 40 3 Get 0 }} {424 22 {-1 -1 3 TIMEOUT  }} {425 22 {-1 -1 3 TIMEOUT  }} {426 22 {-1 -1 3 TIMEOUT  }} {427 22 {-1 -1 3 TIMEOUT  }} {428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }}]]
005259 LEAD S0  app <- 4 T(23) cT(23)
005261 LOG1 S0 B success + log([{434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }}])
005266 PERS S3 Persist len(data) is 466 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }}]]
005271 LOG1 S4 -> 0 app fail
005272 LOG1 S4 lastapp lognode = {true {-1 -1 3 TIMEOUT  } 429 false [] 0 0}
S 4 applied {true {-1 -1 3 TIMEOUT  } 429 false [] 0 0}
005278 LOG1 S4 TTT CommandValid(true) applyindex(428) CommandIndex(429) TIMEOUT key() value() CDM[C-1](0) M(-1) from(3)
005274 PERS S3 Persist len(data) is 466 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }}]]
005278 LOG1 S4 for TIMEOUT update applyindex 428 to 429
005276 PERS S2 Persist len(data) is 868 the log[[{422 22 {4 39 3 Get 2 }} {423 22 {3 40 3 Get 0 }} {424 22 {-1 -1 3 TIMEOUT  }} {425 22 {-1 -1 3 TIMEOUT  }} {426 22 {-1 -1 3 TIMEOUT  }} {427 22 {-1 -1 3 TIMEOUT  }} {428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }}]]
S 0 len(log) is 5 startindex is 431 X is 431
005282 LOG1 S4 -> 0 app fail
005283 PERS S0 Persist len(data) is 464 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }}]]
005285 LOG1 S4 lastapp lognode = {true {-1 -1 3 TIMEOUT  } 430 false [] 0 0}
S 4 applied {true {-1 -1 3 TIMEOUT  } 430 false [] 0 0}
005287 LOG1 S4 lastapp lognode = {true {-1 -1 3 TIMEOUT  } 431 false [] 0 0}
S 4 applied {true {-1 -1 3 TIMEOUT  } 431 false [] 0 0}
005291 LOG1 S4 TTT CommandValid(true) applyindex(429) CommandIndex(430) TIMEOUT key() value() CDM[C-1](0) M(-1) from(3)
005291 LOG1 S4 for TIMEOUT update applyindex 429 to 430
005288 PERS S0 Persist len(data) is 464 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }}]]
005292 LOG1 S4 TTT CommandValid(true) applyindex(430) CommandIndex(431) TIMEOUT key() value() CDM[C-1](0) M(-1) from(3)
005293 LOG1 S4 for TIMEOUT update applyindex 430 to 431
005289 LOG1 S4 lastapp lognode = {true {-1 -1 3 TIMEOUT  } 432 false [] 0 0}
S 4 applied {true {-1 -1 3 TIMEOUT  } 432 false [] 0 0}
005291 LOG1 S4 mathindex[3] from 5 to 7
005294 LOG1 S4 TTT CommandValid(true) applyindex(431) CommandIndex(432) TIMEOUT key() value() CDM[C-1](0) M(-1) from(3)
S 2 len(log) is 14 startindex is 422 X is 422
005295 LOG1 S4 for TIMEOUT update applyindex 431 to 432
005292 LOG1 S4 update nextindex[3](6) to 8 success
005293 LOG1 S4 index(7) matchindex([5 7 7 7 7])
005294 LOG1 S4 successnum(4) com-rf.X(7) rf.CT(23) t(23)
005295 LOG1 S4 lastapp lognode = {true {-1 -1 3 TIMEOUT  } 433 false [] 0 0}
S 4 applied {true {-1 -1 3 TIMEOUT  } 433 false [] 0 0}
005297 LOG1 S2 lastapp lognode = {true {3 40 3 Get 0 } 423 false [] 0 0}
005300 LOG1 S4 TTT CommandValid(true) applyindex(432) CommandIndex(433) TIMEOUT key() value() CDM[C-1](0) M(-1) from(3)
005301 LOG1 S4 for TIMEOUT update applyindex 432 to 433
S 2 applied {true {3 40 3 Get 0 } 423 false [] 0 0}
005298 LOG1 S4 lastapp lognode = {true {-1 -1 4 TIMEOUT  } 434 false [] 0 0}
005303 LOG1 S2 TTT CommandValid(true) applyindex(422) CommandIndex(423) Get key(0) value() CDM[C3](39) M(40) from(3)
S 4 applied {true {-1 -1 4 TIMEOUT  } 434 false [] 0 0}
005303 LEAD S2 update CDM[3] from 39 to 40 update applyindex 422 to 423
005300 LOG1 S2 lastapp lognode = {true {-1 -1 3 TIMEOUT  } 424 false [] 0 0}
005304 LOG1 S4 TTT CommandValid(true) applyindex(433) CommandIndex(434) TIMEOUT key() value() CDM[C-1](0) M(-1) from(4)
005302 LOG1 S4 lastapp lognode = {true {5 6 4 Get 0 } 435 false [] 0 0}
S 4 applied {true {5 6 4 Get 0 } 435 false [] 0 0}
005305 LOG1 S4 for TIMEOUT update applyindex 433 to 434
S 2 applied {true {-1 -1 3 TIMEOUT  } 424 false [] 0 0}
005306 LOG1 S4 TTT CommandValid(true) applyindex(434) CommandIndex(435) Get key(0) value() CDM[C5](5) M(6) from(4)
005307 LEAD S4 update CDM[5] from 5 to 6 update applyindex 434 to 435
005308 LOG1 S4 write get in(435)
005308 LEAD S4 kvs(map[0:x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 y 1:x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 y 2:x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 yx 2 16 yx 2 18 y 3:x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y 4:x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 yx 4 15 yx 4 16 yx 4 17 yx 4 18 y]) index(435) from(4)
005309 LEAD S4 Get key(0) value(x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 y) OK from(C5)
005311 CLNT C5 ok(false) ERR() from S1 in test34
005312 CLNT C5 ERROR Get Key(0) from(S1)
005312 CLNT C5 send to S2 Get key(0) Cindex(5) OIndex(6) test(35)
005314 LOG1 S2 can not write get in(423)
005310 PERS S4 Persist len(data) is 596 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }}]]
005315 LOG1 S2 TTT CommandValid(true) applyindex(423) CommandIndex(424) TIMEOUT key() value() CDM[C-1](0) M(-1) from(3)
005316 LOG1 S2 for TIMEOUT update applyindex 423 to 424
005313 LOG1 S2 lastapp lognode = {true {-1 -1 3 TIMEOUT  } 425 false [] 0 0}
S 2 applied {true {-1 -1 3 TIMEOUT  } 425 false [] 0 0}
005314 LOG1 S2 lastapp lognode = {true {-1 -1 3 TIMEOUT  } 426 false [] 0 0}
S 2 applied {true {-1 -1 3 TIMEOUT  } 426 false [] 0 0}
005318 LOG1 S2 TTT CommandValid(true) applyindex(424) CommandIndex(425) TIMEOUT key() value() CDM[C-1](0) M(-1) from(3)
005319 LOG1 S2 for TIMEOUT update applyindex 424 to 425
005320 LOG1 S2 TTT CommandValid(true) applyindex(425) CommandIndex(426) TIMEOUT key() value() CDM[C-1](0) M(-1) from(3)
005320 LOG1 S2 for TIMEOUT update applyindex 425 to 426
005318 LOG1 S2 lastapp lognode = {true {-1 -1 3 TIMEOUT  } 427 false [] 0 0}
S 2 applied {true {-1 -1 3 TIMEOUT  } 427 false [] 0 0}
005319 LOG1 S2 lastapp lognode = {true {-1 -1 3 TIMEOUT  } 428 false [] 0 0}
005322 LOG1 S2 TTT CommandValid(true) applyindex(426) CommandIndex(427) TIMEOUT key() value() CDM[C-1](0) M(-1) from(3)
S 2 applied {true {-1 -1 3 TIMEOUT  } 428 false [] 0 0}
005323 LOG1 S2 for TIMEOUT update applyindex 426 to 427
005323 LOG1 S2 TTT CommandValid(true) applyindex(427) CommandIndex(428) TIMEOUT key() value() CDM[C-1](0) M(-1) from(3)
005323 LOG1 S2 for TIMEOUT update applyindex 427 to 428
S 3 len(log) is 5 startindex is 431 X is 431
005327 PERS S2 Persist len(data) is 868 the log[[{422 22 {4 39 3 Get 2 }} {423 22 {3 40 3 Get 0 }} {424 22 {-1 -1 3 TIMEOUT  }} {425 22 {-1 -1 3 TIMEOUT  }} {426 22 {-1 -1 3 TIMEOUT  }} {427 22 {-1 -1 3 TIMEOUT  }} {428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }}]]
005355 LEAD S3  app <- 4 T(23) cT(23)
S 1 len(log) is 5 startindex is 431 X is 431
005364 PERS S3 Persist len(data) is 466 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }}]]
005366 LOG1 S4 mathindex[3] from 7 to 6
005367 LOG1 S4 update nextindex[3](8) to 7 success
005368 LOG1 S4 index(6) matchindex([5 7 7 6 7])
005368 LOG1 S4 successnum(4) com-rf.X(7) rf.CT(23) t(23)
005369 PERS S3 Persist len(data) is 466 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }}]]
S 0 len(log) is 5 startindex is 431 X is 431
S 4 len(log) is 8 startindex is 428 X is 428
S 2 len(log) is 14 startindex is 422 X is 422
S 3 len(log) is 5 startindex is 431 X is 431
005457 LEAD S0 <-- C5 Get key(0) test35
S 1 len(log) is 5 startindex is 431 X is 431
005464 CLNT C5 ok(true) ERR(ErrWrongLeader) from S2 in test35
005464 CLNT C5 Get fail key(0) value() from(S2)
005465 CLNT C5 send to S3 Get key(0) Cindex(5) OIndex(6) test(36)
S 0 len(log) is 5 startindex is 431 X is 431
S 4 len(log) is 8 startindex is 428 X is 428
S 2 len(log) is 14 startindex is 422 X is 422
S 3 len(log) is 5 startindex is 431 X is 431
S 1 len(log) is 5 startindex is 431 X is 431
S 0 len(log) is 5 startindex is 431 X is 431
S 4 len(log) is 8 startindex is 428 X is 428
S 2 len(log) is 14 startindex is 422 X is 422
S 3 len(log) is 5 startindex is 431 X is 431
S 1 len(log) is 5 startindex is 431 X is 431
005698 LEAD S1 <-- C5 Get key(0) test36
005703 CLNT C5 ok(true) ERR(ErrWrongLeader) from S3 in test36
005704 CLNT C5 Get fail key(0) value() from(S3)
005704 CLNT C5 send to S4 Get key(0) Cindex(5) OIndex(6) test(37)
S 0 len(log) is 5 startindex is 431 X is 431
S 4 len(log) is 8 startindex is 428 X is 428
005754 LEAD S2 <-- C5 Get key(0) test37
S 2 len(log) is 14 startindex is 422 X is 422
005762 CLNT C5 ok(true) ERR(ErrWrongLeader) from S4 in test37
005763 CLNT C5 Get fail key(0) value() from(S4)
005763 CLNT C5 send to S0 Get key(0) Cindex(5) OIndex(6) test(38)
S 3 len(log) is 5 startindex is 431 X is 431
S 1 len(log) is 5 startindex is 431 X is 431
S 0 len(log) is 5 startindex is 431 X is 431
005836 CLNT C5 ok(false) ERR() from S0 in test38
005836 CLNT C5 ERROR Get Key(0) from(S0)
005837 CLNT C5 send to S1 Get key(0) Cindex(5) OIndex(6) test(39)
S 4 len(log) is 8 startindex is 428 X is 428
S 3 len(log) is 5 startindex is 431 X is 431
S 2 len(log) is 14 startindex is 422 X is 422
S 1 len(log) is 5 startindex is 431 X is 431
S 0 len(log) is 5 startindex is 431 X is 431
005935 SNAP S0 the num is (464) applidindex(431) X(431)
S 4 len(log) is 8 startindex is 428 X is 428
S 3 len(log) is 5 startindex is 431 X is 431
005978 SNAP S1 the num is (466) applidindex(431) X(431)
S 2 len(log) is 14 startindex is 422 X is 422
006001 SNAP S2 the num is (868) applidindex(428) X(422)
006004 SNAP S2 the size need to snap index428
S 2 index 428 rf.X 422
006002 LOG1 S2 the mathindex[0] is 0
006002 LOG1 S2 update mathindex[0] to 0
006003 LOG1 S2 the mathindex[1] is 0
006003 LOG1 S2 update mathindex[1] to 0
006004 LOG1 S2 the mathindex[2] is 14
006004 LOG1 S2 update mathindex[2] to 8
006004 LOG1 S2 the mathindex[3] is 0
006004 LOG1 S2 update mathindex[3] to 0
006005 LOG1 S2 the mathindex[4] is 0
006005 LOG1 S2 update mathindex[4] to 0
S 2 num 868 X 428
S 1 len(log) is 5 startindex is 431 X is 431
006014 PERS S2 Persist len(data) is 596 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }}]]
006034 CLNT C5 ok(false) ERR() from S1 in test39
006035 CLNT C5 ERROR Get Key(0) from(S1)
006036 CLNT C5 send to S2 Get key(0) Cindex(5) OIndex(6) test(40)
S 0 len(log) is 5 startindex is 431 X is 431
006046 SNAP S3 the num is (466) applidindex(431) X(431)
S 4 len(log) is 8 startindex is 428 X is 428
006070 SNAP S4 the num is (596) applidindex(435) X(428)
S 2 len(log) is 8 startindex is 422 X is 428
S 3 len(log) is 5 startindex is 431 X is 431
006079 LOG2 S2 snapshot to applymsg lastindex(428)
S 2 the snapshot send to applych lastindex 428
006083 SNAP S2 the snapshot applied
006088 SNAP S2 recover by SnapShot update applyindex(428) to 428 the kvs is map[0:x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 y 1:x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 y 2:x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 yx 2 16 yx 2 18 y 3:x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y 4:x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 yx 4 15 yx 4 16 yx 4 17 yx 4 18 y]
S 1 len(log) is 5 startindex is 431 X is 431
S 4 len(log) is 8 startindex is 428 X is 428
S 0 len(log) is 5 startindex is 431 X is 431
S 3 len(log) is 5 startindex is 431 X is 431
S 2 len(log) is 8 startindex is 428 X is 428
006185 PERS S4 Persist len(data) is 596 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }}]]
006192 LEAD S4 app -> 0 next(6) index(7) neT(22) cT(23)
006212 LEAD S4 app -> 1 next(8) index(7) neT(23) cT(23)
006213 LEAD S4 app -> 2 next(8) index(7) neT(23) cT(23)
006214 LEAD S4 app -> 3 next(7) index(7) neT(23) cT(23)
006217 LOG1 S4 -> 1 app fail
S 1 len(log) is 5 startindex is 431 X is 431
S 0 len(log) is 5 startindex is 431 X is 431
S 4 len(log) is 8 startindex is 428 X is 428
006258 LEAD S0 <-- C5 Get key(0) test40
006263 CLNT C5 ok(true) ERR(ErrWrongLeader) from S2 in test40
006264 CLNT C5 Get fail key(0) value() from(S2)
006264 CLNT C5 send to S3 Get key(0) Cindex(5) OIndex(6) test(41)
S 3 len(log) is 5 startindex is 431 X is 431
S 2 len(log) is 8 startindex is 428 X is 428
006294 LEAD S3  app <- 4 T(23) cT(23)
006295 CMIT S3 update commit(435)
006304 LOG1 S4 mathindex[3] from 6 to 7
006305 LOG1 S4 update nextindex[3](7) to 8 success
006305 LOG1 S4 index(7) matchindex([5 7 7 7 7])
006306 LOG1 S4 successnum(4) com-rf.X(7) rf.CT(23) t(23)
006307 LOG1 S4 have log {436 23 {-1 -1 4 TIMEOUT  }}
006308 LEAD S2  heart <- 4 T(23) cT(23)
006310 CMIT S2 update commit(435)
006311 PERS S3 Persist len(data) is 466 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }}]]
006318 PERS S4 Persist len(data) is 639 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }}]]
006321 PERS S2 Persist len(data) is 596 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }}]]
006325 LOG1 S4 mathindex[2] from 7 to 7
006326 LOG1 S4 update nextindex[2](8) to 8 success
006326 PERS S3 Persist len(data) is 466 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }}]]
S 1 len(log) is 5 startindex is 431 X is 431
006329 LOG1 S4 index(7) matchindex([5 7 7 7 8])
006330 LOG1 S4 successnum(4) com-rf.X(7) rf.CT(23) t(23)
006331 PERS S2 Persist len(data) is 596 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }}]]
006336 LEAD S4 app -> 0 next(6) index(8) neT(22) cT(23)
006338 LEAD S4 app -> 1 next(8) index(8) neT(23) cT(23)
006342 LEAD S4 app -> 2 next(8) index(8) neT(23) cT(23)
006348 LEAD S4 app -> 3 next(8) index(8) neT(23) cT(23)
006352 LEAD S1  app <- 4 T(23) cT(23)
006355 LEAD S1 <-- C5 Get key(0) test41
S 4 len(log) is 9 startindex is 428 X is 428
006353 LOG1 S1 B success + log([{436 23 {-1 -1 4 TIMEOUT  }}])
006354 CMIT S1 update commit(435)
S 0 len(log) is 5 startindex is 431 X is 431
006369 CLNT C5 ok(true) ERR(ErrWrongLeader) from S3 in test41
006370 CLNT C5 Get fail key(0) value() from(S3)
006371 CLNT C5 send to S4 Get key(0) Cindex(5) OIndex(6) test(42)
006364 PERS S1 Persist len(data) is 509 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }}]]
006370 LOG1 S4 mathindex[1] from 7 to 8
006371 LOG1 S4 update nextindex[1](8) to 9 success
006372 LOG1 S4 index(8) matchindex([5 8 7 7 8])
006372 LOG1 S4 successnum(2) com-rf.X(7) rf.CT(23) t(23)
006373 LEAD S0  app <- 4 T(23) cT(23)
006374 PERS S1 Persist len(data) is 509 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }}]]
006376 CMIT S0 update commit(435)
006381 LOG1 S4 -> 0 app fail
S 3 len(log) is 5 startindex is 431 X is 431
006384 PERS S0 Persist len(data) is 464 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }}]]
S 2 len(log) is 8 startindex is 428 X is 428
006386 LOG1 S2 lastapp lognode = {true {-1 -1 3 TIMEOUT  } 429 false [] 0 0}
S 2 applied {true {-1 -1 3 TIMEOUT  } 429 false [] 0 0}
006388 LOG1 S2 lastapp lognode = {true {-1 -1 3 TIMEOUT  } 430 false [] 0 0}
S 2 applied {true {-1 -1 3 TIMEOUT  } 430 false [] 0 0}
006393 LOG1 S2 TTT CommandValid(true) applyindex(428) CommandIndex(429) TIMEOUT key() value() CDM[C-1](0) M(-1) from(3)
006394 LOG1 S2 for TIMEOUT update applyindex 428 to 429
006394 LOG1 S2 TTT CommandValid(true) applyindex(429) CommandIndex(430) TIMEOUT key() value() CDM[C-1](0) M(-1) from(3)
006395 LOG1 S2 for TIMEOUT update applyindex 429 to 430
006392 PERS S0 Persist len(data) is 464 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }}]]
006395 LOG1 S3 lastapp lognode = {true {-1 -1 3 TIMEOUT  } 432 false [] 0 0}
S 3 applied {true {-1 -1 3 TIMEOUT  } 432 false [] 0 0}
006396 LEAD S2  app <- 4 T(23) cT(23)
006400 LOG1 S3 TTT CommandValid(true) applyindex(431) CommandIndex(432) TIMEOUT key() value() CDM[C-1](0) M(-1) from(3)
006397 LOG1 S2 B success + log([{436 23 {-1 -1 4 TIMEOUT  }}])
006401 LOG1 S3 for TIMEOUT update applyindex 431 to 432
006399 LOG1 S2 lastapp lognode = {true {-1 -1 3 TIMEOUT  } 431 false [] 0 0}
S 2 applied {true {-1 -1 3 TIMEOUT  } 431 false [] 0 0}
006400 LOG1 S3 lastapp lognode = {true {-1 -1 3 TIMEOUT  } 433 false [] 0 0}
S 3 applied {true {-1 -1 3 TIMEOUT  } 433 false [] 0 0}
006404 LOG1 S2 TTT CommandValid(true) applyindex(430) CommandIndex(431) TIMEOUT key() value() CDM[C-1](0) M(-1) from(3)
006401 LOG1 S3 lastapp lognode = {true {-1 -1 4 TIMEOUT  } 434 false [] 0 0}
006405 LOG1 S2 for TIMEOUT update applyindex 430 to 431
S 3 applied {true {-1 -1 4 TIMEOUT  } 434 false [] 0 0}
006403 LOG1 S2 lastapp lognode = {true {-1 -1 3 TIMEOUT  } 432 false [] 0 0}
006406 LOG1 S3 TTT CommandValid(true) applyindex(432) CommandIndex(433) TIMEOUT key() value() CDM[C-1](0) M(-1) from(3)
006407 LOG1 S3 for TIMEOUT update applyindex 432 to 433
S 2 applied {true {-1 -1 3 TIMEOUT  } 432 false [] 0 0}
006407 LOG1 S3 TTT CommandValid(true) applyindex(433) CommandIndex(434) TIMEOUT key() value() CDM[C-1](0) M(-1) from(4)
006408 LOG1 S3 for TIMEOUT update applyindex 433 to 434
006405 LOG1 S2 lastapp lognode = {true {-1 -1 3 TIMEOUT  } 433 false [] 0 0}
006408 LOG1 S2 TTT CommandValid(true) applyindex(431) CommandIndex(432) TIMEOUT key() value() CDM[C-1](0) M(-1) from(3)
S 2 applied {true {-1 -1 3 TIMEOUT  } 433 false [] 0 0}
006409 LOG1 S2 for TIMEOUT update applyindex 431 to 432
006409 LOG1 S2 TTT CommandValid(true) applyindex(432) CommandIndex(433) TIMEOUT key() value() CDM[C-1](0) M(-1) from(3)
006406 LOG1 S3 lastapp lognode = {true {5 6 4 Get 0 } 435 false [] 0 0}
006410 LOG1 S2 for TIMEOUT update applyindex 432 to 433
006407 LOG1 S2 lastapp lognode = {true {-1 -1 4 TIMEOUT  } 434 false [] 0 0}
S 2 applied {true {-1 -1 4 TIMEOUT  } 434 false [] 0 0}
S 3 applied {true {5 6 4 Get 0 } 435 false [] 0 0}
006409 LOG1 S4 mathindex[2] from 7 to 8
006412 LOG1 S2 TTT CommandValid(true) applyindex(433) CommandIndex(434) TIMEOUT key() value() CDM[C-1](0) M(-1) from(4)
006409 LOG1 S4 update nextindex[2](8) to 9 success
006410 LOG1 S4 index(8) matchindex([5 8 8 7 8])
006413 LOG1 S2 for TIMEOUT update applyindex 433 to 434
006411 LOG1 S4 successnum(3) com-rf.X(7) rf.CT(23) t(23)
006414 SNAP S2 the cmd had achieve 12
006411 LOG1 S4 sum(3) ban(2)
006412 CMIT S4 new commit(8) and applied
006415 LOG1 S3 TTT CommandValid(true) applyindex(434) CommandIndex(435) Get key(0) value() CDM[C5](5) M(6) from(4)
006416 LEAD S3 update CDM[5] from 5 to 6 update applyindex 434 to 435
006416 LOG1 S3 can not write get in(435)
006418 SNAP S2 the num is (596) applidindex(434) X(428)
006413 PERS S2 Persist len(data) is 639 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }}]]
006416 LOG1 S2 lastapp lognode = {true {5 6 4 Get 0 } 435 false [] 0 0}
S 2 applied {true {5 6 4 Get 0 } 435 false [] 0 0}
006421 LOG1 S2 TTT CommandValid(true) applyindex(434) CommandIndex(435) Get key(0) value() CDM[C5](5) M(6) from(4)
006417 PERS S3 Persist len(data) is 466 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }}]]
006422 LEAD S2 update CDM[5] from 5 to 6 update applyindex 434 to 435
006423 LOG1 S2 can not write get in(435)
006419 PERS S2 Persist len(data) is 639 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }}]]
006426 PERS S2 Persist len(data) is 639 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }}]]
S 1 len(log) is 6 startindex is 431 X is 431
006430 LOG1 S1 lastapp lognode = {true {-1 -1 3 TIMEOUT  } 432 false [] 0 0}
S 1 applied {true {-1 -1 3 TIMEOUT  } 432 false [] 0 0}
006431 LOG1 S1 lastapp lognode = {true {-1 -1 3 TIMEOUT  } 433 false [] 0 0}
S 1 applied {true {-1 -1 3 TIMEOUT  } 433 false [] 0 0}
006435 LOG1 S1 TTT CommandValid(true) applyindex(431) CommandIndex(432) TIMEOUT key() value() CDM[C-1](0) M(-1) from(3)
006435 LOG1 S1 for TIMEOUT update applyindex 431 to 432
006436 LOG1 S1 TTT CommandValid(true) applyindex(432) CommandIndex(433) TIMEOUT key() value() CDM[C-1](0) M(-1) from(3)
006436 LOG1 S1 for TIMEOUT update applyindex 432 to 433
006434 LOG1 S1 lastapp lognode = {true {-1 -1 4 TIMEOUT  } 434 false [] 0 0}
S 1 applied {true {-1 -1 4 TIMEOUT  } 434 false [] 0 0}
006435 LOG1 S1 lastapp lognode = {true {5 6 4 Get 0 } 435 false [] 0 0}
006438 LOG1 S1 TTT CommandValid(true) applyindex(433) CommandIndex(434) TIMEOUT key() value() CDM[C-1](0) M(-1) from(4)
S 1 applied {true {5 6 4 Get 0 } 435 false [] 0 0}
006439 LOG1 S1 for TIMEOUT update applyindex 433 to 434
006439 LOG1 S1 TTT CommandValid(true) applyindex(434) CommandIndex(435) Get key(0) value() CDM[C5](5) M(6) from(4)
006440 LEAD S1 update CDM[5] from 5 to 6 update applyindex 434 to 435
006440 LOG1 S1 can not write get in(435)
006441 PERS S1 Persist len(data) is 509 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }}]]
S 4 len(log) is 9 startindex is 428 X is 428
S 0 len(log) is 5 startindex is 431 X is 431
006463 LOG1 S4 lastapp lognode = {true {-1 -1 4 TIMEOUT  } 436 false [] 0 0}
S 4 applied {true {-1 -1 4 TIMEOUT  } 436 false [] 0 0}
006468 LOG1 S4 TTT CommandValid(true) applyindex(435) CommandIndex(436) TIMEOUT key() value() CDM[C-1](0) M(-1) from(4)
006469 LOG1 S4 for TIMEOUT update applyindex 435 to 436
006465 LOG1 S0 lastapp lognode = {true {-1 -1 3 TIMEOUT  } 432 false [] 0 0}
S 0 applied {true {-1 -1 3 TIMEOUT  } 432 false [] 0 0}
006468 LOG1 S0 lastapp lognode = {true {-1 -1 3 TIMEOUT  } 433 false [] 0 0}
S 0 applied {true {-1 -1 3 TIMEOUT  } 433 false [] 0 0}
006472 LOG1 S0 TTT CommandValid(true) applyindex(431) CommandIndex(432) TIMEOUT key() value() CDM[C-1](0) M(-1) from(3)
006472 LOG1 S0 for TIMEOUT update applyindex 431 to 432
006473 LOG1 S0 TTT CommandValid(true) applyindex(432) CommandIndex(433) TIMEOUT key() value() CDM[C-1](0) M(-1) from(3)
006473 LOG1 S0 for TIMEOUT update applyindex 432 to 433
006470 LOG1 S0 lastapp lognode = {true {-1 -1 4 TIMEOUT  } 434 false [] 0 0}
S 0 applied {true {-1 -1 4 TIMEOUT  } 434 false [] 0 0}
006471 LOG1 S0 lastapp lognode = {true {5 6 4 Get 0 } 435 false [] 0 0}
S 0 applied {true {5 6 4 Get 0 } 435 false [] 0 0}
006475 LOG1 S0 TTT CommandValid(true) applyindex(433) CommandIndex(434) TIMEOUT key() value() CDM[C-1](0) M(-1) from(4)
006476 LOG1 S0 for TIMEOUT update applyindex 433 to 434
006476 LOG1 S0 TTT CommandValid(true) applyindex(434) CommandIndex(435) Get key(0) value() CDM[C5](5) M(6) from(4)
006477 LEAD S0 update CDM[5] from 5 to 6 update applyindex 434 to 435
006478 LOG1 S0 can not write get in(435)
006474 PERS S4 Persist len(data) is 639 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }}]]
006481 PERS S0 Persist len(data) is 464 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }}]]
006515 LEAD S2 <-- C5 Get key(0) test42
S 3 len(log) is 5 startindex is 431 X is 431
006523 CLNT C5 ok(true) ERR(ErrWrongLeader) from S4 in test42
006524 CLNT C5 Get fail key(0) value() from(S4)
006524 CLNT C5 send to S0 Get key(0) Cindex(5) OIndex(6) test(43)
S 2 len(log) is 9 startindex is 428 X is 428
S 1 len(log) is 6 startindex is 431 X is 431
S 4 len(log) is 9 startindex is 428 X is 428
S 0 len(log) is 5 startindex is 431 X is 431
006614 LEAD S0  app <- 4 T(23) cT(23)
006615 LOG1 S0 B success + log([{436 23 {-1 -1 4 TIMEOUT  }}])
006616 LEAD S3  app <- 4 T(23) cT(23)
006618 LOG1 S3 B success + log([{436 23 {-1 -1 4 TIMEOUT  }}])
006624 LOG1 S4 mathindex[0] from 5 to 8
006624 LOG1 S4 update nextindex[0](6) to 9 success
006625 LOG1 S4 index(8) matchindex([8 8 8 7 8])
006626 LOG1 S4 successnum(4) com-rf.X(8) rf.CT(23) t(23)
S 2 len(log) is 9 startindex is 428 X is 428
006626 PERS S0 Persist len(data) is 507 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }}]]
S 3 len(log) is 6 startindex is 431 X is 431
006629 PERS S3 Persist len(data) is 509 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }}]]
006632 LOG1 S4 mathindex[3] from 7 to 8
006633 LOG1 S4 update nextindex[3](8) to 9 success
006634 LOG1 S4 index(8) matchindex([8 8 8 8 8])
006634 LOG1 S4 successnum(5) com-rf.X(8) rf.CT(23) t(23)
006635 PERS S0 Persist len(data) is 507 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }}]]
006638 PERS S3 Persist len(data) is 509 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }}]]
S 1 len(log) is 6 startindex is 431 X is 431
S 4 len(log) is 9 startindex is 428 X is 428
S 0 len(log) is 6 startindex is 431 X is 431
S 3 len(log) is 6 startindex is 431 X is 431
S 2 len(log) is 9 startindex is 428 X is 428
006774 LEAD S3 <-- C5 Get key(0) test43
S 1 len(log) is 6 startindex is 431 X is 431
006777 CLNT C5 ok(false) ERR() from S0 in test43
006777 CLNT C5 ERROR Get Key(0) from(S0)
006778 CLNT C5 send to S1 Get key(0) Cindex(5) OIndex(6) test(44)
S 4 len(log) is 9 startindex is 428 X is 428
S 0 len(log) is 6 startindex is 431 X is 431
S 2 len(log) is 9 startindex is 428 X is 428
S 3 len(log) is 6 startindex is 431 X is 431
S 1 len(log) is 6 startindex is 431 X is 431
S 4 len(log) is 9 startindex is 428 X is 428
S 0 len(log) is 6 startindex is 431 X is 431
006937 SNAP S0 the num is (507) applidindex(435) X(431)
S 3 len(log) is 6 startindex is 431 X is 431
S 2 len(log) is 9 startindex is 428 X is 428
006980 SNAP S1 the num is (509) applidindex(435) X(431)
S 1 len(log) is 6 startindex is 431 X is 431
S 4 len(log) is 9 startindex is 428 X is 428
S 0 len(log) is 6 startindex is 431 X is 431
007014 SNAP S2 the num is (639) applidindex(435) X(428)
007018 LEAD S4 <-- C5 Get key(0) test44
007019 LEAD S4 had done key(0) from(C5) Oindex(6) test44
007024 CLNT C5 ok(true) ERR(OK) from S1 in test44
007025 CLNT C5 Get success key(0) value(x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 y) r.index(0) from(S1)
007025 CLNT C5 Get key(1)
007026 CLNT C5 cmd_index(6)1
007026 CLNT C5 cmd_index(7)2
007026 CLNT C5 send to S1 Get key(1) Cindex(5) OIndex(7) test(1)
007058 SNAP S3 the num is (509) applidindex(435) X(431)
S 3 len(log) is 6 startindex is 431 X is 431
S 2 len(log) is 9 startindex is 428 X is 428
007080 SNAP S4 the num is (639) applidindex(436) X(428)
S 1 len(log) is 6 startindex is 431 X is 431
S 4 len(log) is 9 startindex is 428 X is 428
S 0 len(log) is 6 startindex is 431 X is 431
S 3 len(log) is 6 startindex is 431 X is 431
S 2 len(log) is 9 startindex is 428 X is 428
S 1 len(log) is 6 startindex is 431 X is 431
S 4 len(log) is 9 startindex is 428 X is 428
S 0 len(log) is 6 startindex is 431 X is 431
007270 LEAD S4 <-- C5 Get key(1) test1
S 3 len(log) is 6 startindex is 431 X is 431
007271 LEAD S4 start Get key(1)
007269 LOG1 S4 have log {437 23 {5 7 4 Get 1 }}
007275 LEAD S4 have this log({5 7 4 Get 1 }) in raft
007275 LEAD S4 <-- C5 Get key(1) wait index(1) 437
007278 PERS S4 Persist len(data) is 689 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }}]]
S 2 len(log) is 9 startindex is 428 X is 428
007283 LEAD S4 app -> 0 next(9) index(9) neT(23) cT(23)
007285 LEAD S4 app -> 1 next(9) index(9) neT(23) cT(23)
007286 LEAD S4 app -> 2 next(9) index(9) neT(23) cT(23)
007288 LEAD S4 app -> 3 next(9) index(9) neT(23) cT(23)
S 1 len(log) is 6 startindex is 431 X is 431
S 4 len(log) is 10 startindex is 428 X is 428
S 0 len(log) is 6 startindex is 431 X is 431
S 3 len(log) is 6 startindex is 431 X is 431
S 2 len(log) is 9 startindex is 428 X is 428
S 1 len(log) is 6 startindex is 431 X is 431
S 4 len(log) is 10 startindex is 428 X is 428
S 0 len(log) is 6 startindex is 431 X is 431
007461 LEAD S1  app <- 4 T(23) cT(23)
007462 LOG1 S1 B success + log([{437 23 {5 7 4 Get 1 }}])
007463 CMIT S1 update commit(436)
007463 LEAD S2  app <- 4 T(23) cT(23)
007464 LOG1 S2 B success + log([{437 23 {5 7 4 Get 1 }}])
007465 CMIT S2 update commit(436)
007472 LOG1 S4 mathindex[1] from 8 to 9
007473 LOG1 S4 update nextindex[1](9) to 10 success
007473 LOG1 S4 index(9) matchindex([8 9 8 8 9])
007474 LOG1 S4 successnum(2) com-rf.X(8) rf.CT(23) t(23)
007475 PERS S2 Persist len(data) is 689 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }}]]
S 3 len(log) is 6 startindex is 431 X is 431
007480 PERS S2 Persist len(data) is 689 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }}]]
007484 PERS S1 Persist len(data) is 560 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }}]]
007486 PERS S1 Persist len(data) is 560 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }}]]
S 2 len(log) is 10 startindex is 428 X is 428
007489 LOG1 S4 have log {438 23 {-1 -1 4 TIMEOUT  }}
007491 LOG1 S2 lastapp lognode = {true {-1 -1 4 TIMEOUT  } 436 false [] 0 0}
S 2 applied {true {-1 -1 4 TIMEOUT  } 436 false [] 0 0}
007492 LOG1 S4 mathindex[2] from 8 to 9
007492 LOG1 S4 update nextindex[2](9) to 10 success
007493 LOG1 S4 index(9) matchindex([8 9 9 8 10])
007496 LOG1 S2 TTT CommandValid(true) applyindex(435) CommandIndex(436) TIMEOUT key() value() CDM[C-1](0) M(-1) from(4)
007497 LOG1 S2 for TIMEOUT update applyindex 435 to 436
007493 LOG1 S4 successnum(3) com-rf.X(8) rf.CT(23) t(23)
007494 LOG1 S4 sum(3) ban(2)
007495 CMIT S4 new commit(9) and applied
007498 PERS S2 Persist len(data) is 689 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }}]]
S 1 len(log) is 7 startindex is 431 X is 431
007501 PERS S4 Persist len(data) is 732 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }} {438 23 {-1 -1 4 TIMEOUT  }}]]
007505 LOG1 S1 lastapp lognode = {true {-1 -1 4 TIMEOUT  } 436 false [] 0 0}
007506 LEAD S4 app -> 0 next(9) index(10) neT(23) cT(23)
S 1 applied {true {-1 -1 4 TIMEOUT  } 436 false [] 0 0}
007508 LEAD S4 app -> 1 next(10) index(10) neT(23) cT(23)
007512 LOG1 S1 TTT CommandValid(true) applyindex(435) CommandIndex(436) TIMEOUT key() value() CDM[C-1](0) M(-1) from(4)
007513 LOG1 S1 for TIMEOUT update applyindex 435 to 436
007511 LEAD S4 app -> 2 next(10) index(10) neT(23) cT(23)
007513 LEAD S4 app -> 3 next(9) index(10) neT(23) cT(23)
007514 PERS S1 Persist len(data) is 560 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }}]]
007532 LEAD S0  app <- 4 T(23) cT(23)
007533 LOG1 S0 B success + log([{437 23 {5 7 4 Get 1 }}])
007534 CMIT S0 update commit(436)
007541 LOG1 S4 mathindex[0] from 8 to 9
007542 LOG1 S4 update nextindex[0](9) to 10 success
007542 LOG1 S4 index(9) matchindex([9 9 9 8 10])
007543 LOG1 S4 successnum(4) com-rf.X(9) rf.CT(23) t(23)
007544 PERS S0 Persist len(data) is 558 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }}]]
S 4 len(log) is 11 startindex is 428 X is 428
007547 LOG1 S4 lastapp lognode = {true {5 7 4 Get 1 } 437 false [] 0 0}
S 4 applied {true {5 7 4 Get 1 } 437 false [] 0 0}
007549 PERS S0 Persist len(data) is 558 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }}]]
007553 LOG1 S4 TTT CommandValid(true) applyindex(436) CommandIndex(437) Get key(1) value() CDM[C5](6) M(7) from(4)
007554 LEAD S4 update CDM[5] from 6 to 7 update applyindex 436 to 437
007555 LOG1 S4 write get in(437)
S 0 len(log) is 7 startindex is 431 X is 431
007553 LOG1 S0 lastapp lognode = {true {-1 -1 4 TIMEOUT  } 436 false [] 0 0}
S 0 applied {true {-1 -1 4 TIMEOUT  } 436 false [] 0 0}
007561 LEAD S4 kvs(map[0:x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 y 1:x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 y 2:x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 yx 2 16 yx 2 18 y 3:x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y 4:x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 yx 4 15 yx 4 16 yx 4 17 yx 4 18 y]) index(437) from(4)
007562 LEAD S4 Get key(1) value(x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 y) OK from(C5)
007561 PERS S4 Persist len(data) is 732 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }} {438 23 {-1 -1 4 TIMEOUT  }}]]
007566 LEAD S3  app <- 4 T(23) cT(23)
007569 CLNT C5 ok(true) ERR(OK) from S1 in test1
007570 CLNT C5 Get success key(1) value(x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 y) r.index(437) from(S1)
007571 LOG1 S0 TTT CommandValid(true) applyindex(435) CommandIndex(436) TIMEOUT key() value() CDM[C-1](0) M(-1) from(4)
007572 LOG1 S0 for TIMEOUT update applyindex 435 to 436
007567 PERS S0 Persist len(data) is 558 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }}]]
007572 CLNT C5 Get key(2)
007573 CLNT C5 cmd_index(7)1
007573 CLNT C5 cmd_index(8)2
007570 LOG1 S3 B success + log([{437 23 {5 7 4 Get 1 }}])
007571 CMIT S3 update commit(436)
007574 CLNT C5 send to S1 Get key(2) Cindex(5) OIndex(8) test(1)
007576 LEAD S1  app <- 4 T(23) cT(23)
007577 LOG1 S1 B success + log([{438 23 {-1 -1 4 TIMEOUT  }}])
007578 CMIT S1 update commit(437)
007578 LOG1 S4 mathindex[3] from 8 to 9
007579 LOG1 S4 update nextindex[3](9) to 10 success
007579 LOG1 S4 index(9) matchindex([9 9 9 9 10])
007580 LOG1 S4 successnum(5) com-rf.X(9) rf.CT(23) t(23)
007581 PERS S3 Persist len(data) is 560 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }}]]
007586 PERS S3 Persist len(data) is 560 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }}]]
S 3 len(log) is 7 startindex is 431 X is 431
007589 LOG1 S3 lastapp lognode = {true {-1 -1 4 TIMEOUT  } 436 false [] 0 0}
S 3 applied {true {-1 -1 4 TIMEOUT  } 436 false [] 0 0}
007591 LOG1 S4 mathindex[1] from 9 to 10
007592 LOG1 S4 update nextindex[1](10) to 11 success
007595 LOG1 S3 TTT CommandValid(true) applyindex(435) CommandIndex(436) TIMEOUT key() value() CDM[C-1](0) M(-1) from(4)
007596 LOG1 S3 for TIMEOUT update applyindex 435 to 436
007592 LOG1 S4 index(10) matchindex([9 10 9 9 10])
S 2 len(log) is 10 startindex is 428 X is 428
007593 LOG1 S4 successnum(2) com-rf.X(9) rf.CT(23) t(23)
007594 PERS S1 Persist len(data) is 603 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }} {438 23 {-1 -1 4 TIMEOUT  }}]]
007597 LEAD S3  app <- 4 T(23) cT(23)
007598 PERS S1 Persist len(data) is 603 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }} {438 23 {-1 -1 4 TIMEOUT  }}]]
007601 LOG1 S3 B success + log([{438 23 {-1 -1 4 TIMEOUT  }}])
007602 CMIT S3 update commit(437)
S 1 len(log) is 8 startindex is 431 X is 431
007611 LOG1 S4 mathindex[3] from 9 to 10
007611 LOG1 S4 update nextindex[3](10) to 11 success
007612 LOG1 S1 lastapp lognode = {true {5 7 4 Get 1 } 437 false [] 0 0}
S 1 applied {true {5 7 4 Get 1 } 437 false [] 0 0}
007613 PERS S3 Persist len(data) is 603 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }} {438 23 {-1 -1 4 TIMEOUT  }}]]
007617 LOG1 S1 TTT CommandValid(true) applyindex(436) CommandIndex(437) Get key(1) value() CDM[C5](6) M(7) from(4)
007618 LEAD S1 update CDM[5] from 6 to 7 update applyindex 436 to 437
007619 LOG1 S1 can not write get in(437)
007616 LOG1 S4 index(10) matchindex([9 10 9 10 10])
007617 LOG1 S4 successnum(3) com-rf.X(9) rf.CT(23) t(23)
007617 LOG1 S4 sum(3) ban(2)
007617 CMIT S4 new commit(10) and applied
007618 PERS S3 Persist len(data) is 603 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }} {438 23 {-1 -1 4 TIMEOUT  }}]]
007622 PERS S1 Persist len(data) is 603 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }} {438 23 {-1 -1 4 TIMEOUT  }}]]
007625 PERS S3 Persist len(data) is 603 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }} {438 23 {-1 -1 4 TIMEOUT  }}]]
S 4 len(log) is 11 startindex is 428 X is 428
007654 LOG1 S4 lastapp lognode = {true {-1 -1 4 TIMEOUT  } 438 false [] 0 0}
S 4 applied {true {-1 -1 4 TIMEOUT  } 438 false [] 0 0}
007659 LOG1 S4 TTT CommandValid(true) applyindex(437) CommandIndex(438) TIMEOUT key() value() CDM[C-1](0) M(-1) from(4)
007660 LOG1 S4 for TIMEOUT update applyindex 437 to 438
007662 PERS S4 Persist len(data) is 732 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }} {438 23 {-1 -1 4 TIMEOUT  }}]]
S 0 len(log) is 7 startindex is 431 X is 431
S 2 len(log) is 10 startindex is 428 X is 428
S 3 len(log) is 8 startindex is 431 X is 431
007698 LOG1 S3 lastapp lognode = {true {5 7 4 Get 1 } 437 false [] 0 0}
S 3 applied {true {5 7 4 Get 1 } 437 false [] 0 0}
007703 LOG1 S3 TTT CommandValid(true) applyindex(436) CommandIndex(437) Get key(1) value() CDM[C5](6) M(7) from(4)
007703 LEAD S3 update CDM[5] from 6 to 7 update applyindex 436 to 437
007704 LOG1 S3 can not write get in(437)
007706 PERS S3 Persist len(data) is 603 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }} {438 23 {-1 -1 4 TIMEOUT  }}]]
S 1 len(log) is 8 startindex is 431 X is 431
S 4 len(log) is 11 startindex is 428 X is 428
007764 LEAD S0  app <- 4 T(23) cT(23)
007765 LOG1 S0 B success + log([{438 23 {-1 -1 4 TIMEOUT  }}])
007766 CMIT S0 update commit(437)
007773 LOG1 S4 mathindex[0] from 9 to 10
007774 LOG1 S4 update nextindex[0](10) to 11 success
007774 LOG1 S4 index(10) matchindex([10 10 9 10 10])
S 0 len(log) is 8 startindex is 431 X is 431
007775 LOG1 S4 successnum(4) com-rf.X(10) rf.CT(23) t(23)
007776 LEAD S2  app <- 4 T(23) cT(23)
007776 PERS S0 Persist len(data) is 601 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }} {438 23 {-1 -1 4 TIMEOUT  }}]]
007780 LOG1 S0 lastapp lognode = {true {5 7 4 Get 1 } 437 false [] 0 0}
S 0 applied {true {5 7 4 Get 1 } 437 false [] 0 0}
007782 LOG1 S2 B success + log([{438 23 {-1 -1 4 TIMEOUT  }}])
007782 CMIT S2 update commit(437)
007785 LOG1 S0 TTT CommandValid(true) applyindex(436) CommandIndex(437) Get key(1) value() CDM[C5](6) M(7) from(4)
007787 LEAD S0 update CDM[5] from 6 to 7 update applyindex 436 to 437
007788 LOG1 S0 can not write get in(437)
007783 PERS S0 Persist len(data) is 601 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }} {438 23 {-1 -1 4 TIMEOUT  }}]]
007788 PERS S0 Persist len(data) is 601 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }} {438 23 {-1 -1 4 TIMEOUT  }}]]
007792 PERS S2 Persist len(data) is 732 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }} {438 23 {-1 -1 4 TIMEOUT  }}]]
007795 LOG1 S4 mathindex[2] from 9 to 10
007795 LOG1 S4 update nextindex[2](10) to 11 success
007795 LOG1 S4 index(10) matchindex([10 10 10 10 10])
007796 LOG1 S4 successnum(5) com-rf.X(10) rf.CT(23) t(23)
S 2 len(log) is 11 startindex is 428 X is 428
007803 LEAD S4 <-- C5 Get key(2) test1
S 3 len(log) is 8 startindex is 431 X is 431
007804 LEAD S4 start Get key(2)
007798 PERS S2 Persist len(data) is 732 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }} {438 23 {-1 -1 4 TIMEOUT  }}]]
007802 LOG1 S2 lastapp lognode = {true {5 7 4 Get 1 } 437 false [] 0 0}
S 2 applied {true {5 7 4 Get 1 } 437 false [] 0 0}
007804 LOG1 S4 have log {439 23 {5 8 4 Get 2 }}
007808 LOG1 S2 TTT CommandValid(true) applyindex(436) CommandIndex(437) Get key(1) value() CDM[C5](6) M(7) from(4)
007809 LEAD S2 update CDM[5] from 6 to 7 update applyindex 436 to 437
007809 LOG1 S2 can not write get in(437)
007810 LEAD S4 have this log({5 8 4 Get 2 }) in raft
007811 LEAD S4 <-- C5 Get key(2) wait index(1) 439
007813 PERS S2 Persist len(data) is 732 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }} {438 23 {-1 -1 4 TIMEOUT  }}]]
007817 PERS S4 Persist len(data) is 782 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }} {438 23 {-1 -1 4 TIMEOUT  }} {439 23 {5 8 4 Get 2 }}]]
S 1 len(log) is 8 startindex is 431 X is 431
007822 LEAD S4 app -> 0 next(11) index(11) neT(23) cT(23)
007824 LEAD S4 app -> 1 next(11) index(11) neT(23) cT(23)
007826 LEAD S4 app -> 2 next(11) index(11) neT(23) cT(23)
007829 LEAD S4 app -> 3 next(11) index(11) neT(23) cT(23)
S 4 len(log) is 12 startindex is 428 X is 428
S 0 len(log) is 8 startindex is 431 X is 431
S 2 len(log) is 11 startindex is 428 X is 428
S 3 len(log) is 8 startindex is 431 X is 431
S 1 len(log) is 8 startindex is 431 X is 431
007945 LOG1 S4 -> 3 app fail
007948 SNAP S0 the num is (601) applidindex(437) X(431)
S 4 len(log) is 12 startindex is 428 X is 428
007988 SNAP S1 the num is (603) applidindex(437) X(431)
S 0 len(log) is 8 startindex is 431 X is 431
008014 LEAD S2  app <- 4 T(23) cT(23)
008015 LOG1 S2 B success + log([{439 23 {5 8 4 Get 2 }}])
008015 CMIT S2 update commit(438)
S 3 len(log) is 8 startindex is 431 X is 431
S 2 len(log) is 12 startindex is 428 X is 428
008018 LOG1 S2 lastapp lognode = {true {-1 -1 4 TIMEOUT  } 438 false [] 0 0}
S 2 applied {true {-1 -1 4 TIMEOUT  } 438 false [] 0 0}
008022 LOG1 S4 mathindex[2] from 10 to 11
008023 LOG1 S4 update nextindex[2](11) to 12 success
008023 LOG1 S4 index(11) matchindex([10 10 11 10 11])
008024 LOG1 S4 successnum(2) com-rf.X(10) rf.CT(23) t(23)
S 1 len(log) is 8 startindex is 431 X is 431
008028 SNAP S2 the num is (732) applidindex(437) X(428)
008029 LOG1 S2 TTT CommandValid(true) applyindex(437) CommandIndex(438) TIMEOUT key() value() CDM[C-1](0) M(-1) from(4)
008030 LOG1 S2 for TIMEOUT update applyindex 437 to 438
008025 PERS S2 Persist len(data) is 782 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }} {438 23 {-1 -1 4 TIMEOUT  }} {439 23 {5 8 4 Get 2 }}]]
008031 PERS S2 Persist len(data) is 782 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }} {438 23 {-1 -1 4 TIMEOUT  }} {439 23 {5 8 4 Get 2 }}]]
008037 PERS S2 Persist len(data) is 782 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }} {438 23 {-1 -1 4 TIMEOUT  }} {439 23 {5 8 4 Get 2 }}]]
008064 SNAP S3 the num is (603) applidindex(437) X(431)
008071 LEAD S0  app <- 4 T(23) cT(23)
S 4 len(log) is 12 startindex is 428 X is 428
008073 LOG1 S0 B success + log([{439 23 {5 8 4 Get 2 }}])
008074 CMIT S0 update commit(438)
008081 LOG1 S4 mathindex[0] from 10 to 11
008081 LOG1 S4 update nextindex[0](11) to 12 success
008082 LOG1 S4 index(11) matchindex([11 10 11 10 11])
008083 LOG1 S4 successnum(3) com-rf.X(10) rf.CT(23) t(23)
008083 LOG1 S4 sum(3) ban(2)
008084 CMIT S4 new commit(11) and applied
008084 PERS S0 Persist len(data) is 651 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }} {438 23 {-1 -1 4 TIMEOUT  }} {439 23 {5 8 4 Get 2 }}]]
008091 SNAP S4 the num is (782) applidindex(438) X(428)
008088 PERS S0 Persist len(data) is 651 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }} {438 23 {-1 -1 4 TIMEOUT  }} {439 23 {5 8 4 Get 2 }}]]
008091 LEAD S1  app <- 4 T(23) cT(23)
008092 LOG1 S1 B success + log([{439 23 {5 8 4 Get 2 }}])
008093 CMIT S1 update commit(438)
008104 PERS S1 Persist len(data) is 653 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }} {438 23 {-1 -1 4 TIMEOUT  }} {439 23 {5 8 4 Get 2 }}]]
008108 LOG1 S4 mathindex[1] from 10 to 11
008109 LOG1 S4 update nextindex[1](11) to 12 success
008109 LOG1 S4 index(11) matchindex([11 11 11 10 11])
008110 LOG1 S4 successnum(4) com-rf.X(11) rf.CT(23) t(23)
S 0 len(log) is 9 startindex is 431 X is 431
008112 LOG1 S0 lastapp lognode = {true {-1 -1 4 TIMEOUT  } 438 false [] 0 0}
S 0 applied {true {-1 -1 4 TIMEOUT  } 438 false [] 0 0}
008113 PERS S1 Persist len(data) is 653 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }} {438 23 {-1 -1 4 TIMEOUT  }} {439 23 {5 8 4 Get 2 }}]]
008119 LOG1 S0 TTT CommandValid(true) applyindex(437) CommandIndex(438) TIMEOUT key() value() CDM[C-1](0) M(-1) from(4)
008120 LOG1 S0 for TIMEOUT update applyindex 437 to 438
008119 PERS S0 Persist len(data) is 651 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }} {438 23 {-1 -1 4 TIMEOUT  }} {439 23 {5 8 4 Get 2 }}]]
S 2 len(log) is 12 startindex is 428 X is 428
S 3 len(log) is 8 startindex is 431 X is 431
S 1 len(log) is 9 startindex is 431 X is 431
008128 LOG1 S1 lastapp lognode = {true {-1 -1 4 TIMEOUT  } 438 false [] 0 0}
S 1 applied {true {-1 -1 4 TIMEOUT  } 438 false [] 0 0}
008134 LOG1 S1 TTT CommandValid(true) applyindex(437) CommandIndex(438) TIMEOUT key() value() CDM[C-1](0) M(-1) from(4)
008134 LOG1 S1 for TIMEOUT update applyindex 437 to 438
008135 PERS S1 Persist len(data) is 653 the log[[{431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }} {438 23 {-1 -1 4 TIMEOUT  }} {439 23 {5 8 4 Get 2 }}]]
S 4 len(log) is 12 startindex is 428 X is 428
008183 LOG1 S4 lastapp lognode = {true {5 8 4 Get 2 } 439 false [] 0 0}
S 4 applied {true {5 8 4 Get 2 } 439 false [] 0 0}
008188 LOG1 S4 TTT CommandValid(true) applyindex(438) CommandIndex(439) Get key(2) value() CDM[C5](7) M(8) from(4)
008189 LEAD S4 update CDM[5] from 7 to 8 update applyindex 438 to 439
008190 LOG1 S4 write get in(439)
008190 LEAD S4 kvs(map[0:x 0 0 yx 0 1 yx 0 2 yx 0 3 yx 0 4 yx 0 5 yx 0 6 yx 0 7 yx 0 8 yx 0 9 yx 0 10 yx 0 11 yx 0 12 yx 0 13 yx 0 14 yx 0 15 yx 0 16 y 1:x 1 0 yx 1 1 yx 1 2 yx 1 3 yx 1 4 yx 1 5 yx 1 6 yx 1 7 yx 1 8 yx 1 9 yx 1 10 yx 1 11 yx 1 12 yx 1 13 yx 1 14 yx 1 15 yx 1 16 y 2:x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 yx 2 16 yx 2 18 y 3:x 3 0 yx 3 1 yx 3 2 yx 3 3 yx 3 4 yx 3 5 yx 3 6 yx 3 7 yx 3 8 yx 3 9 yx 3 10 yx 3 11 yx 3 12 yx 3 13 yx 3 14 yx 3 15 yx 3 16 yx 3 17 y 4:x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 yx 4 15 yx 4 16 yx 4 17 yx 4 18 y]) index(439) from(4)
008191 LEAD S4 Get key(2) value(x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 yx 2 16 yx 2 18 y) OK from(C5)
008195 CLNT C5 ok(true) ERR(OK) from S1 in test1
008196 CLNT C5 Get success key(2) value(x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 yx 2 16 yx 2 18 y) r.index(439) from(S1)
008192 PERS S4 Persist len(data) is 782 the log[[{428 22 {-1 -1 3 TIMEOUT  }} {429 22 {-1 -1 3 TIMEOUT  }} {430 22 {-1 -1 3 TIMEOUT  }} {431 22 {-1 -1 3 TIMEOUT  }} {432 22 {-1 -1 3 TIMEOUT  }} {433 22 {-1 -1 3 TIMEOUT  }} {434 23 {-1 -1 4 TIMEOUT  }} {435 23 {5 6 4 Get 0 }} {436 23 {-1 -1 4 TIMEOUT  }} {437 23 {5 7 4 Get 1 }} {438 23 {-1 -1 4 TIMEOUT  }} {439 23 {5 8 4 Get 2 }}]]
--- FAIL: TestSnapshotUnreliableRecoverConcurrentPartition3B (18.52s)
    test_test.go:293: get wrong value, key 4, wanted:
        x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 yx 4 15 yx 4 16 yx 4 17 yx 4 18 yx 4 19 y
        , got
        x 4 0 yx 4 1 yx 4 2 yx 4 3 yx 4 4 yx 4 5 yx 4 6 yx 4 7 yx 4 8 yx 4 9 yx 4 10 yx 4 11 yx 4 12 yx 4 13 yx 4 14 yx 4 15 yx 4 16 yx 4 17 yx 4 18 y
    test_test.go:293: get wrong value, key 2, wanted:
        x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 yx 2 16 yx 2 17 yx 2 18 y
        , got
        x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 yx 2 16 yx 2 18 y
    test_test.go:126: failure
    test_test.go:144: 2 missing element x 2 17 y in Append result x 2 0 yx 2 1 yx 2 2 yx 2 3 yx 2 4 yx 2 5 yx 2 6 yx 2 7 yx 2 8 yx 2 9 yx 2 10 yx 2 11 yx 2 12 yx 2 13 yx 2 14 yx 2 15 yx 2 16 yx 2 18 y
FAIL
exit status 1
FAIL	6.824/kvraft	18.535s
